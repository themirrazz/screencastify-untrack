!function(){var t={52209:function(t){function e(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=function(){return[]},e.resolve=e,e.id=52209,t.exports=e},16886:function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},45265:function(t,e,n){var r=n(16886);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},25181:function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},65963:function(t){function e(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise(function(i,o){var a=t.apply(n,r);function s(t){e(a,i,o,s,u,"next",t)}function u(t){e(a,i,o,s,u,"throw",t)}s(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},12693:function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},71459:function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},2153:function(t,e,n){var r=n(10381);t.exports=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}},t.exports.default=t.exports,t.exports.__esModule=!0},80015:function(t,e,n){var r=n(57902),i=n(10209),o=n(21317);t.exports=function(t){var e=i();return function(){var n,i=r(t);if(e){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},t.exports.default=t.exports,t.exports.__esModule=!0},48553:function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},255:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return r}})},59423:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(255);function i(t){if(Array.isArray(t))return(0,r.Z)(t)}},3010:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,{Z:function(){return r}})},65951:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return r}})},3280:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,{Z:function(){return i}})},13118:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(75563),i=n(47351),o=n(41329);function a(t){var e=(0,i.Z)();return function(){var n,i=(0,r.Z)(t);if(e){var a=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,o.Z)(this,n)}}},85391:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(11770);function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=(0,r.Z)(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}},75563:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,{Z:function(){return r}})},74408:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(59151);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(0,r.Z)(t,e)}},47351:function(t,e,n){"use strict";function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,{Z:function(){return r}})},45378:function(t,e,n){"use strict";function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n.d(e,{Z:function(){return r}})},27657:function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,{Z:function(){return r}})},41329:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=n(34146),i=n(3010);function o(t,e){return!e||"object"!==(0,r.Z)(e)&&"function"!=typeof e?(0,i.Z)(t):e}},59151:function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,{Z:function(){return r}})},11770:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(75563);function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=(0,r.Z)(t)););return t}},46534:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(59423),i=n(45378),o=n(50354),a=n(27657);function s(t){return(0,r.Z)(t)||(0,i.Z)(t)||(0,o.Z)(t)||(0,a.Z)()}},34146:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,{Z:function(){return r}})},50354:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(255);function i(t,e){if(t){if("string"==typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}},50931:function(t,e,n){var r=n(99255);function i(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},t.exports.default=t.exports,t.exports.__esModule=!0),i(e,n,o||e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},57902:function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},92066:function(t,e,n){var r=n(4826);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},10209:function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},29439:function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},2295:function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},50013:function(t,e,n){var r=n(48553);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t},t.exports.default=t.exports,t.exports.__esModule=!0},21317:function(t,e,n){var r=n(88902).default,i=n(25181);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},4826:function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(n,r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},99255:function(t,e,n){var r=n(57902);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},83831:function(t,e,n){var r=n(45265),i=n(29439),o=n(10381),a=n(2295);t.exports=function(t){return r(t)||i(t)||o(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},88902:function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},10381:function(t,e,n){var r=n(16886);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},17008:function(t,e,n){t.exports=n(98270)},88144:function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0},25679:function(t,e,n){"use strict";n.d(e,{pi:function(){return r},fl:function(){return o}});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function o(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}},53212:function(t){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},11811:function(t,e,n){var r=n(396);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},9729:function(t,e,n){var r=n(20864),i=n(96618),o=n(17900),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},19396:function(t,e,n){"use strict";var r=n(64061).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},91591:function(t){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},28379:function(t,e,n){var r=n(396);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},41041:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},56950:function(t,e,n){"use strict";var r,i=n(41041),o=n(10450),a=n(11665),s=n(396),u=n(45289),c=n(77379),l=n(53273),h=n(60186),f=n(17900).f,d=n(38087),p=n(25091),v=n(20864),g=n(23763),y=a.Int8Array,m=y&&y.prototype,b=a.Uint8ClampedArray,w=b&&b.prototype,_=y&&d(y),S=m&&d(m),k=Object.prototype,E=k.isPrototypeOf,x=v("toStringTag"),T=g("TYPED_ARRAY_TAG"),I=i&&!!p&&"Opera"!==c(a.opera),C=!1,A={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},R=function(t){if(!s(t))return!1;var e=c(t);return u(A,e)||u(M,e)};for(r in A)a[r]||(I=!1);if((!I||"function"!=typeof _||_===Function.prototype)&&(_=function(){throw TypeError("Incorrect invocation")},I))for(r in A)a[r]&&p(a[r],_);if((!I||!S||S===k)&&(S=_.prototype,I))for(r in A)a[r]&&p(a[r].prototype,S);if(I&&d(w)!==S&&p(w,S),o&&!u(S,x))for(r in C=!0,f(S,x,{get:function(){return s(this)?this[T]:void 0}}),A)a[r]&&l(a[r],T,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:C&&T,aTypedArray:function(t){if(R(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(p){if(E.call(_,t))return t}else for(var e in A)if(u(A,r)){var n=a[e];if(n&&(t===n||E.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(o){if(n)for(var r in A){var i=a[r];if(i&&u(i.prototype,t))try{delete i.prototype[t]}catch(s){}}S[t]&&!n||h(S,t,n?e:I&&m[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(o){if(p){if(n)for(r in A)if((i=a[r])&&u(i,t))try{delete i[t]}catch(s){}if(_[t]&&!n)return;try{return h(_,t,n?e:I&&_[t]||e)}catch(s){}}for(r in A)!(i=a[r])||i[t]&&!n||h(i,t,e)}},isView:function(t){if(!s(t))return!1;var e=c(t);return"DataView"===e||u(A,e)||u(M,e)},isTypedArray:R,TypedArray:_,TypedArrayPrototype:S}},59929:function(t,e,n){"use strict";var r=n(11665),i=n(10450),o=n(41041),a=n(53273),s=n(93508),u=n(7741),c=n(91591),l=n(99015),h=n(52493),f=n(34559),d=n(84128),p=n(38087),v=n(25091),g=n(51504).f,y=n(17900).f,m=n(37894),b=n(79722),w=n(9025),_=w.get,S=w.set,k="ArrayBuffer",E="DataView",x="Wrong index",T=r.ArrayBuffer,I=T,C=r.DataView,A=C&&C.prototype,M=Object.prototype,R=r.RangeError,O=d.pack,P=d.unpack,N=function(t){return[255&t]},D=function(t){return[255&t,t>>8&255]},$=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},L=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},j=function(t){return O(t,23,4)},U=function(t){return O(t,52,8)},F=function(t,e){y(t.prototype,e,{get:function(){return _(this)[e]}})},B=function(t,e,n,r){var i=f(n),o=_(t);if(i+e>o.byteLength)throw R(x);var a=_(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},q=function(t,e,n,r,i,o){var a=f(n),s=_(t);if(a+e>s.byteLength)throw R(x);for(var u=_(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),h=0;h<e;h++)u[c+h]=l[o?h:e-h-1]};if(o){if(!u(function(){T(1)})||!u(function(){new T(-1)})||u(function(){return new T,new T(1.5),new T(NaN),T.name!=k})){for(var V,Z=(I=function(t){return c(this,I),new T(f(t))}).prototype=T.prototype,H=g(T),z=0;H.length>z;)(V=H[z++])in I||a(I,V,T[V]);Z.constructor=I}v&&p(A)!==M&&v(A,M);var G=new C(new I(2)),W=A.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||s(A,{setInt8:function(t,e){W.call(this,t,e<<24>>24)},setUint8:function(t,e){W.call(this,t,e<<24>>24)}},{unsafe:!0})}else I=function(t){c(this,I,k);var e=f(t);S(this,{bytes:m.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},C=function(t,e,n){c(this,C,E),c(t,I,E);var r=_(t).byteLength,o=l(e);if(o<0||o>r)throw R("Wrong offset");if(o+(n=void 0===n?r-o:h(n))>r)throw R("Wrong length");S(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(F(I,"byteLength"),F(C,"buffer"),F(C,"byteLength"),F(C,"byteOffset")),s(C.prototype,{getInt8:function(t){return B(this,1,t)[0]<<24>>24},getUint8:function(t){return B(this,1,t)[0]},getInt16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return L(B(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return L(B(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return P(B(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return P(B(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){q(this,1,t,N,e)},setUint8:function(t,e){q(this,1,t,N,e)},setInt16:function(t,e){q(this,2,t,D,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){q(this,2,t,D,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){q(this,4,t,$,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){q(this,4,t,$,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){q(this,4,t,j,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){q(this,8,t,U,e,arguments.length>2?arguments[2]:void 0)}});b(I,k),b(C,E),t.exports={ArrayBuffer:I,DataView:C}},76658:function(t,e,n){"use strict";var r=n(38099),i=n(47931),o=n(52493),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),u=i(t,s),c=i(e,s),l=arguments.length>2?arguments[2]:void 0,h=a((void 0===l?s:i(l,s))-c,s-u),f=1;for(c<u&&u<c+h&&(f=-1,c+=h-1,u+=h-1);h-- >0;)c in n?n[u]=n[c]:delete n[u],u+=f,c+=f;return n}},37894:function(t,e,n){"use strict";var r=n(38099),i=n(47931),o=n(52493);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},59488:function(t,e,n){"use strict";var r=n(93400).forEach,i=n(31183)("forEach");t.exports=i?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},42394:function(t,e,n){"use strict";var r=n(62531),i=n(38099),o=n(47344),a=n(23444),s=n(52493),u=n(27041),c=n(44e3);t.exports=function(t){var e,n,l,h,f,d,p=i(t),v="function"==typeof this?this:Array,g=arguments.length,y=g>1?arguments[1]:void 0,m=void 0!==y,b=c(p),w=0;if(m&&(y=r(y,g>2?arguments[2]:void 0,2)),null==b||v==Array&&a(b))for(n=new v(e=s(p.length));e>w;w++)d=m?y(p[w],w):p[w],u(n,w,d);else for(f=(h=b.call(p)).next,n=new v;!(l=f.call(h)).done;w++)d=m?o(h,y,[l.value,w],!0):l.value,u(n,w,d);return n.length=w,n}},57505:function(t,e,n){var r=n(77376),i=n(52493),o=n(47931),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},93400:function(t,e,n){var r=n(62531),i=n(6950),o=n(38099),a=n(52493),s=n(20122),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,h=6==t,f=7==t,d=5==t||h;return function(p,v,g,y){for(var m,b,w=o(p),_=i(w),S=r(v,g,3),k=a(_.length),E=0,x=y||s,T=e?x(p,k):n||f?x(p,0):void 0;k>E;E++)if((d||E in _)&&(b=S(m=_[E],E,w),t))if(e)T[E]=b;else if(b)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:u.call(T,m)}else switch(t){case 4:return!1;case 7:u.call(T,m)}return h?-1:c||l?l:T}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},90308:function(t,e,n){"use strict";var r=n(77376),i=n(99015),o=n(52493),a=n(31183),s=Math.min,u=[].lastIndexOf,c=!!u&&1/[1].lastIndexOf(1,-0)<0,l=a("lastIndexOf");t.exports=c||!l?function(t){if(c)return u.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=s(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:u},47169:function(t,e,n){var r=n(7741),i=n(20864),o=n(69408),a=i("species");t.exports=function(t){return o>=51||!r(function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},31183:function(t,e,n){"use strict";var r=n(7741);t.exports=function(t,e){var n=[][t];return!!n&&r(function(){n.call(null,e||function(){throw 1},1)})}},49730:function(t,e,n){var r=n(53212),i=n(38099),o=n(6950),a=n(52493),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=o(c),h=a(c.length),f=t?h-1:0,d=t?-1:1;if(s<2)for(;;){if(f in l){u=l[f],f+=d;break}if(f+=d,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=d)f in l&&(u=n(u,l[f],f,c));return u}};t.exports={left:s(!1),right:s(!0)}},20122:function(t,e,n){var r=n(396),i=n(27486),o=n(20864)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},47344:function(t,e,n){var r=n(28379),i=n(41857);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(a){throw i(t),a}}},6774:function(t,e,n){var r=n(20864)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,function(){throw 2})}catch(s){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(s){}return n}},15984:function(t){var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},77379:function(t,e,n){var r=n(87151),i=n(15984),o=n(20864)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},39384:function(t,e,n){"use strict";var r=n(17900).f,i=n(96618),o=n(93508),a=n(62531),s=n(91591),u=n(42493),c=n(65453),l=n(29426),h=n(10450),f=n(47789).fastKey,d=n(9025),p=d.set,v=d.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e),p(t,{type:e,index:i(null),first:void 0,last:void 0,size:0}),h||(t.size=0),null!=r&&u(r,t[c],{that:t,AS_ENTRIES:n})}),d=v(e),g=function(t,e,n){var r,i,o=d(t),a=y(t,e);return a?a.value=n:(o.last=a={index:i=f(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),h?o.size++:t.size++,"F"!==i&&(o.index[i]=a)),t},y=function(t,e){var n,r=d(t),i=f(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return o(l.prototype,{clear:function(){for(var t=d(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,h?t.size=0:this.size=0},delete:function(t){var e=this,n=d(e),r=y(e,t);if(r){var i=r.next,o=r.previous;delete n.index[r.index],r.removed=!0,o&&(o.next=i),i&&(i.previous=o),n.first==r&&(n.first=i),n.last==r&&(n.last=o),h?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=d(this),r=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!y(this,t)}}),o(l.prototype,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return g(this,0===t?0:t,e)}}:{add:function(t){return g(this,t=0===t?0:t,t)}}),h&&r(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(t,e,n){var r=e+" Iterator",i=v(e),o=v(r);c(t,e,function(t,e){p(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),l(e)}}},53778:function(t,e,n){"use strict";var r=n(41473),i=n(11665),o=n(22850),a=n(60186),s=n(47789),u=n(42493),c=n(91591),l=n(396),h=n(7741),f=n(6774),d=n(79722),p=n(47481);t.exports=function(t,e,n){var v=-1!==t.indexOf("Map"),g=-1!==t.indexOf("Weak"),y=v?"set":"add",m=i[t],b=m&&m.prototype,w=m,_={},S=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof m||!(g||b.forEach&&!h(function(){(new m).entries().next()}))))w=n.getConstructor(e,t,v,y),s.REQUIRED=!0;else if(o(t,!0)){var k=new w,E=k[y](g?{}:-0,1)!=k,x=h(function(){k.has(1)}),T=f(function(t){new m(t)}),I=!g&&h(function(){for(var t=new m,e=5;e--;)t[y](e,e);return!t.has(-0)});T||((w=e(function(e,n){c(e,w,t);var r=p(new m,e,w);return null!=n&&u(n,r[y],{that:r,AS_ENTRIES:v}),r})).prototype=b,b.constructor=w),(x||I)&&(S("delete"),S("has"),v&&S("get")),(I||E)&&S(y),g&&b.clear&&delete b.clear}return _[t]=w,r({global:!0,forced:w!=m},_),d(w,t),g||n.setStrong(w,t,v),w}},213:function(t,e,n){var r=n(45289),i=n(51386),o=n(45993),a=n(17900);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},62759:function(t,e,n){var r=n(20864)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},28664:function(t,e,n){var r=n(7741);t.exports=!r(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},75774:function(t,e,n){var r=n(48215),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},963:function(t,e,n){"use strict";var r=n(4371).IteratorPrototype,i=n(96618),o=n(67234),a=n(79722),s=n(22088),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},53273:function(t,e,n){var r=n(10450),i=n(17900),o=n(67234);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},67234:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},27041:function(t,e,n){"use strict";var r=n(26589),i=n(17900),o=n(67234);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},65453:function(t,e,n){"use strict";var r=n(41473),i=n(963),o=n(38087),a=n(25091),s=n(79722),u=n(53273),c=n(60186),l=n(20864),h=n(80084),f=n(22088),d=n(4371),p=d.IteratorPrototype,v=d.BUGGY_SAFARI_ITERATORS,g=l("iterator"),y="keys",m="values",b="entries",w=function(){return this};t.exports=function(t,e,n,l,d,_,S){i(n,e,l);var k,E,x,T=function(t){if(t===d&&R)return R;if(!v&&t in A)return A[t];switch(t){case y:case m:case b:return function(){return new n(this,t)}}return function(){return new n(this)}},I=e+" Iterator",C=!1,A=t.prototype,M=A[g]||A["@@iterator"]||d&&A[d],R=!v&&M||T(d),O="Array"==e&&A.entries||M;if(O&&(k=o(O.call(new t)),p!==Object.prototype&&k.next&&(h||o(k)===p||(a?a(k,p):"function"!=typeof k[g]&&u(k,g,w)),s(k,I,!0,!0),h&&(f[I]=w))),d==m&&M&&M.name!==m&&(C=!0,R=function(){return M.call(this)}),h&&!S||A[g]===R||u(A,g,R),f[e]=R,d)if(E={values:T(m),keys:_?R:T(y),entries:T(b)},S)for(x in E)(v||C||!(x in A))&&c(A,x,E[x]);else r({target:e,proto:!0,forced:v||C},E);return E}},35241:function(t,e,n){var r=n(97382),i=n(45289),o=n(46420),a=n(17900).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},10450:function(t,e,n){var r=n(7741);t.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},96009:function(t,e,n){var r=n(11665),i=n(396),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},44547:function(t){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},26009:function(t){t.exports="object"==typeof window},51058:function(t,e,n){var r=n(86865);t.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},21310:function(t,e,n){var r=n(15984),i=n(11665);t.exports="process"==r(i.process)},67140:function(t,e,n){var r=n(86865);t.exports=/web0s(?!.*chrome)/i.test(r)},86865:function(t,e,n){var r=n(67490);t.exports=r("navigator","userAgent")||""},69408:function(t,e,n){var r,i,o=n(11665),a=n(86865),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]<4?1:r[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},14262:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},41473:function(t,e,n){var r=n(11665),i=n(45993).f,o=n(53273),a=n(60186),s=n(7767),u=n(213),c=n(22850);t.exports=function(t,e){var n,l,h,f,d,p=t.target,v=t.global,g=t.stat;if(n=v?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in e){if(f=e[l],h=t.noTargetGet?(d=i(n,l))&&d.value:n[l],!c(v?l:p+(g?".":"#")+l,t.forced)&&void 0!==h){if(typeof f==typeof h)continue;u(f,h)}(t.sham||h&&h.sham)&&o(f,"sham",!0),a(n,l,f,t)}}},7741:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},68916:function(t,e,n){"use strict";n(17490);var r=n(60186),i=n(87437),o=n(7741),a=n(20864),s=n(53273),u=a("species"),c=RegExp.prototype,l=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),h="$0"==="a".replace(/./,"$0"),f=a("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),p=!o(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});t.exports=function(t,e,n,f){var v=a(t),g=!o(function(){var e={};return e[v]=function(){return 7},7!=""[t](e)}),y=g&&!o(function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[v]=/./[v]),n.exec=function(){return e=!0,null},n[v](""),!e});if(!g||!y||"replace"===t&&(!l||!h||d)||"split"===t&&!p){var m=/./[v],b=n(v,""[t],function(t,e,n,r,o){var a=e.exec;return a===i||a===c.exec?g&&!o?{done:!0,value:m.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}},{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),w=b[1];r(String.prototype,t,b[0]),r(c,v,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}f&&s(c[v],"sham",!0)}},40469:function(t,e,n){var r=n(7741);t.exports=!r(function(){return Object.isExtensible(Object.preventExtensions({}))})},62531:function(t,e,n){var r=n(53212);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},37636:function(t,e,n){"use strict";var r=n(53212),i=n(396),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},67490:function(t,e,n){var r=n(97382),i=n(11665),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},44e3:function(t,e,n){var r=n(77379),i=n(22088),o=n(20864)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},6206:function(t,e,n){var r=n(28379),i=n(44e3);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},37443:function(t,e,n){var r=n(38099),i=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,u,c,l){var h=n+t.length,f=u.length,d=s;return void 0!==c&&(c=r(c),d=a),o.call(l,d,function(r,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=c[o.slice(1,-1)];break;default:var s=+o;if(0===s)return r;if(s>f){var l=i(s/10);return 0===l?r:l<=f?void 0===u[l-1]?o.charAt(1):u[l-1]+o.charAt(1):r}a=u[s-1]}return void 0===a?"":a})}},11665:function(t){var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||function(){return this}()||Function("return this")()},45289:function(t,e,n){var r=n(38099),i={}.hasOwnProperty;t.exports=function(t,e){return i.call(r(t),e)}},2172:function(t){t.exports={}},15635:function(t,e,n){var r=n(11665);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},3182:function(t,e,n){var r=n(67490);t.exports=r("document","documentElement")},95369:function(t,e,n){var r=n(10450),i=n(7741),o=n(96009);t.exports=!r&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},84128:function(t){var e=Math.abs,n=Math.pow,r=Math.floor,i=Math.log,o=Math.LN2;t.exports={pack:function(t,a,s){var u,c,l,h=new Array(s),f=8*s-a-1,d=(1<<f)-1,p=d>>1,v=23===a?n(2,-24)-n(2,-77):0,g=t<0||0===t&&1/t<0?1:0,y=0;for((t=e(t))!=t||t===1/0?(c=t!=t?1:0,u=d):(u=r(i(t)/o),t*(l=n(2,-u))<1&&(u--,l*=2),(t+=u+p>=1?v/l:v*n(2,1-p))*l>=2&&(u++,l/=2),u+p>=d?(c=0,u=d):u+p>=1?(c=(t*l-1)*n(2,a),u+=p):(c=t*n(2,p-1)*n(2,a),u=0));a>=8;h[y++]=255&c,c/=256,a-=8);for(u=u<<a|c,f+=a;f>0;h[y++]=255&u,u/=256,f-=8);return h[--y]|=128*g,h},unpack:function(t,e){var r,i=t.length,o=8*i-e-1,a=(1<<o)-1,s=a>>1,u=o-7,c=i-1,l=t[c--],h=127&l;for(l>>=7;u>0;h=256*h+t[c],c--,u-=8);for(r=h&(1<<-u)-1,h>>=-u,u+=e;u>0;r=256*r+t[c],c--,u-=8);if(0===h)h=1-s;else{if(h===a)return r?NaN:l?-1/0:1/0;r+=n(2,e),h-=s}return(l?-1:1)*r*n(2,h-e)}}},6950:function(t,e,n){var r=n(7741),i=n(15984),o="".split;t.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},47481:function(t,e,n){var r=n(396),i=n(25091);t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},40280:function(t,e,n){var r=n(14144),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},47789:function(t,e,n){var r=n(2172),i=n(396),o=n(45289),a=n(17900).f,s=n(23763),u=n(40469),c=s("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(t){a(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},d=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},getWeakData:function(t,e){if(!o(t,c)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},onFreeze:function(t){return u&&d.REQUIRED&&h(t)&&!o(t,c)&&f(t),t}};r[c]=!0},9025:function(t,e,n){var r,i,o,a=n(45082),s=n(11665),u=n(396),c=n(53273),l=n(45289),h=n(14144),f=n(23972),d=n(2172),p="Object already initialized";if(a||h.state){var v=h.state||(h.state=new(0,s.WeakMap)),g=v.get,y=v.has,m=v.set;r=function(t,e){if(y.call(v,t))throw new TypeError(p);return e.facade=t,m.call(v,t,e),e},i=function(t){return g.call(v,t)||{}},o=function(t){return y.call(v,t)}}else{var b=f("state");d[b]=!0,r=function(t,e){if(l(t,b))throw new TypeError(p);return e.facade=t,c(t,b,e),e},i=function(t){return l(t,b)?t[b]:{}},o=function(t){return l(t,b)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},23444:function(t,e,n){var r=n(20864),i=n(22088),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},27486:function(t,e,n){var r=n(15984);t.exports=Array.isArray||function(t){return"Array"==r(t)}},22850:function(t,e,n){var r=n(7741),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},396:function(t){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},80084:function(t){t.exports=!1},93421:function(t,e,n){var r=n(396),i=n(15984),o=n(20864)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},42493:function(t,e,n){var r=n(28379),i=n(23444),o=n(52493),a=n(62531),s=n(44e3),u=n(41857),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,f,d,p,v,g,y=!(!n||!n.AS_ENTRIES),m=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),w=a(e,n&&n.that,1+y+b),_=function(t){return l&&u(l),new c(!0,t)},S=function(t){return y?(r(t),b?w(t[0],t[1],_):w(t[0],t[1])):b?w(t,_):w(t)};if(m)l=t;else{if("function"!=typeof(h=s(t)))throw TypeError("Target is not iterable");if(i(h)){for(f=0,d=o(t.length);d>f;f++)if((p=S(t[f]))&&p instanceof c)return p;return new c(!1)}l=h.call(t)}for(v=l.next;!(g=v.call(l)).done;){try{p=S(g.value)}catch(k){throw u(l),k}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},41857:function(t,e,n){var r=n(28379);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},4371:function(t,e,n){"use strict";var r,i,o,a=n(7741),s=n(38087),u=n(53273),c=n(45289),l=n(20864),h=n(80084),f=l("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):d=!0);var p=null==r||a(function(){var t={};return r[f].call(t)!==t});p&&(r={}),h&&!p||c(r,f)||u(r,f,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},22088:function(t){t.exports={}},9698:function(t,e,n){var r,i,o,a,s,u,c,l,h=n(11665),f=n(45993).f,d=n(80541).set,p=n(51058),v=n(67140),g=n(21310),y=h.MutationObserver||h.WebKitMutationObserver,m=h.document,b=h.process,w=h.Promise,_=f(h,"queueMicrotask"),S=_&&_.value;S||(r=function(){var t,e;for(g&&(t=b.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(n){throw i?a():o=void 0,n}}o=void 0,t&&t.enter()},p||g||v||!y||!m?w&&w.resolve?((c=w.resolve(void 0)).constructor=w,l=c.then,a=function(){l.call(c,r)}):a=g?function(){b.nextTick(r)}:function(){d.call(h,r)}:(s=!0,u=m.createTextNode(""),new y(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),t.exports=S||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},70501:function(t,e,n){var r=n(11665);t.exports=r.Promise},64998:function(t,e,n){var r=n(69408),i=n(7741);t.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())||!Symbol.sham&&r&&r<41})},68318:function(t,e,n){var r=n(7741),i=n(20864),o=n(80084),a=i("iterator");t.exports=!r(function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach(function(t,r){e.delete("b"),n+=r+t}),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},45082:function(t,e,n){var r=n(11665),i=n(40280),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},46345:function(t,e,n){"use strict";var r=n(53212),i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},26316:function(t,e,n){var r=n(93421);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},35986:function(t,e,n){var r=n(11665),i=n(85155).trim,o=n(16839),a=r.parseFloat,s=1/a(o+"-0")!=-1/0;t.exports=s?function(t){var e=i(String(t)),n=a(e);return 0===n&&"-"==e.charAt(0)?-0:n}:a},1457:function(t,e,n){var r=n(11665),i=n(85155).trim,o=n(16839),a=r.parseInt,s=/^[+-]?0[Xx]/,u=8!==a(o+"08")||22!==a(o+"0x16");t.exports=u?function(t,e){var n=i(String(t));return a(n,e>>>0||(s.test(n)?16:10))}:a},14700:function(t,e,n){"use strict";var r=n(10450),i=n(7741),o=n(80453),a=n(12473),s=n(64442),u=n(38099),c=n(6950),l=Object.assign,h=Object.defineProperty;t.exports=!l||i(function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||o(l({},e)).join("")!=i})?function(t,e){for(var n=u(t),i=arguments.length,l=1,h=a.f,f=s.f;i>l;)for(var d,p=c(arguments[l++]),v=h?o(p).concat(h(p)):o(p),g=v.length,y=0;g>y;)d=v[y++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:l},96618:function(t,e,n){var r,i=n(28379),o=n(76858),a=n(14262),s=n(2172),u=n(3182),c=n(96009),l=n(23972)("IE_PROTO"),h=function(){},f=function(t){return"<script>"+t+"<\/script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(i){}var t,e;d=r?function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};s[l]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(h.prototype=i(t),n=new h,h.prototype=null,n[l]=t):n=d(),void 0===e?n:o(n,e)}},76858:function(t,e,n){var r=n(10450),i=n(17900),o=n(28379),a=n(80453);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},17900:function(t,e,n){var r=n(10450),i=n(95369),o=n(28379),a=n(26589),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},45993:function(t,e,n){var r=n(10450),i=n(64442),o=n(67234),a=n(77376),s=n(26589),u=n(45289),c=n(95369),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(n){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},5053:function(t,e,n){var r=n(77376),i=n(51504).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(e){return a.slice()}}(t):i(r(t))}},51504:function(t,e,n){var r=n(47763),i=n(14262).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},12473:function(t,e){e.f=Object.getOwnPropertySymbols},38087:function(t,e,n){var r=n(45289),i=n(38099),o=n(23972),a=n(28664),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},47763:function(t,e,n){var r=n(45289),i=n(77376),o=n(57505).indexOf,a=n(2172);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},80453:function(t,e,n){var r=n(47763),i=n(14262);t.exports=Object.keys||function(t){return r(t,i)}},64442:function(t,e){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);e.f=i?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},25091:function(t,e,n){var r=n(28379),i=n(11811);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},85256:function(t,e,n){"use strict";var r=n(87151),i=n(77379);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},51386:function(t,e,n){var r=n(67490),i=n(51504),o=n(12473),a=n(28379);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},97382:function(t,e,n){var r=n(11665);t.exports=r},44008:function(t){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},95565:function(t,e,n){var r=n(28379),i=n(396),o=n(46345);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},93508:function(t,e,n){var r=n(60186);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},60186:function(t,e,n){var r=n(11665),i=n(53273),o=n(45289),a=n(7767),s=n(40280),u=n(9025),c=u.get,l=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var u,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(u=l(n)).source||(u.source=h.join("string"==typeof e?e:""))),t!==r?(c?!d&&t[e]&&(f=!0):delete t[e],f?t[e]=n:i(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&c(this).source||s(this)})},77549:function(t,e,n){var r=n(15984),i=n(87437);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},87437:function(t,e,n){"use strict";var r,i,o=n(25945),a=n(5991),s=n(46222),u=RegExp.prototype.exec,c=s("native-string-replace",String.prototype.replace),l=u,h=(i=/b*/g,u.call(r=/a/,"a"),u.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(h||d||f)&&(l=function(t){var e,n,r,i,a=this,s=f&&a.sticky,l=o.call(a),p=a.source,v=0,g=t;return s&&(-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),g=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(p="(?: "+p+")",g=" "+g,v++),n=new RegExp("^(?:"+p+")",l)),d&&(n=new RegExp("^"+p+"$(?!\\s)",l)),h&&(e=a.lastIndex),r=u.call(s?n:a,g),s?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:h&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),d&&r&&r.length>1&&c.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),t.exports=l},25945:function(t,e,n){"use strict";var r=n(28379);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},5991:function(t,e,n){"use strict";var r=n(7741);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r(function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),e.BROKEN_CARET=r(function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},48215:function(t){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},31502:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},7767:function(t,e,n){var r=n(11665),i=n(53273);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},29426:function(t,e,n){"use strict";var r=n(67490),i=n(17900),o=n(20864),a=n(10450),s=o("species");t.exports=function(t){var e=r(t);a&&e&&!e[s]&&(0,i.f)(e,s,{configurable:!0,get:function(){return this}})}},79722:function(t,e,n){var r=n(17900).f,i=n(45289),o=n(20864)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},23972:function(t,e,n){var r=n(46222),i=n(23763),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},14144:function(t,e,n){var r=n(11665),i=n(7767),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},46222:function(t,e,n){var r=n(80084),i=n(14144);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.12.1",mode:r?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},16244:function(t,e,n){var r=n(28379),i=n(53212),o=n(20864)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},70346:function(t,e,n){var r=n(7741);t.exports=function(t){return r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})}},64061:function(t,e,n){var r=n(99015),i=n(48215),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},42289:function(t){"use strict";var e=2147483647,n=/[^\0-\u007E]/,r=/[.\u3002\uFF0E\uFF61]/g,i="Overflow: input needs wider integers to process",o=Math.floor,a=String.fromCharCode,s=function(t){return t+22+75*(t<26)},u=function(t,e,n){var r=0;for(t=n?o(t/700):t>>1,t+=o(t/e);t>455;r+=36)t=o(t/35);return o(r+36*t/(t+38))},c=function(t){var n,r,c=[],l=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,h=128,f=0,d=72;for(n=0;n<t.length;n++)(r=t[n])<128&&c.push(a(r));var p=c.length,v=p;for(p&&c.push("-");v<l;){var g=e;for(n=0;n<t.length;n++)(r=t[n])>=h&&r<g&&(g=r);var y=v+1;if(g-h>o((e-f)/y))throw RangeError(i);for(f+=(g-h)*y,h=g,n=0;n<t.length;n++){if((r=t[n])<h&&++f>e)throw RangeError(i);if(r==h){for(var m=f,b=36;;b+=36){var w=b<=d?1:b>=d+26?26:b-d;if(m<w)break;var _=m-w,S=36-w;c.push(a(s(w+_%S))),m=o(_/S)}c.push(a(s(m))),d=u(f,y,v==p),f=0,++v}}++f,++h}return c.join("")};t.exports=function(t){var e,i,o=[],a=t.toLowerCase().replace(r,".").split(".");for(e=0;e<a.length;e++)o.push(n.test(i=a[e])?"xn--"+c(i):i);return o.join(".")}},11982:function(t,e,n){"use strict";var r=n(99015),i=n(48215);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},3382:function(t,e,n){var r=n(7741),i=n(16839);t.exports=function(t){return r(function(){return!!i[t]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[t]()||i[t].name!==t})}},85155:function(t,e,n){var r=n(48215),i="["+n(16839)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},80541:function(t,e,n){var r,i,o,a=n(11665),s=n(7741),u=n(62531),c=n(3182),l=n(96009),h=n(51058),f=n(21310),d=a.location,p=a.setImmediate,v=a.clearImmediate,g=a.process,y=a.MessageChannel,m=a.Dispatch,b=0,w={},_=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},S=function(t){return function(){_(t)}},k=function(t){_(t.data)},E=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};p&&v||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return w[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},v=function(t){delete w[t]},f?r=function(t){g.nextTick(S(t))}:m&&m.now?r=function(t){m.now(S(t))}:y&&!h?(o=(i=new y).port2,i.port1.onmessage=k,r=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(E)?(r=E,a.addEventListener("message",k,!1)):r="onreadystatechange"in l("script")?function(t){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),_(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:p,clear:v}},33984:function(t,e,n){var r=n(15984);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},47931:function(t,e,n){var r=n(99015),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},34559:function(t,e,n){var r=n(99015),i=n(52493);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},77376:function(t,e,n){var r=n(6950),i=n(48215);t.exports=function(t){return r(i(t))}},99015:function(t){var e=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:e)(t)}},52493:function(t,e,n){var r=n(99015),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},38099:function(t,e,n){var r=n(48215);t.exports=function(t){return Object(r(t))}},21788:function(t,e,n){var r=n(88622);t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},88622:function(t,e,n){var r=n(99015);t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},26589:function(t,e,n){var r=n(396);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},87151:function(t,e,n){var r={};r[n(20864)("toStringTag")]="z",t.exports="[object z]"===String(r)},54169:function(t,e,n){"use strict";var r=n(41473),i=n(11665),o=n(10450),a=n(54567),s=n(56950),u=n(59929),c=n(91591),l=n(67234),h=n(53273),f=n(52493),d=n(34559),p=n(21788),v=n(26589),g=n(45289),y=n(77379),m=n(396),b=n(96618),w=n(25091),_=n(51504).f,S=n(91345),k=n(93400).forEach,E=n(29426),x=n(17900),T=n(45993),I=n(9025),C=n(47481),A=I.get,M=I.set,R=x.f,O=T.f,P=Math.round,N=i.RangeError,D=u.ArrayBuffer,$=u.DataView,L=s.NATIVE_ARRAY_BUFFER_VIEWS,j=s.TYPED_ARRAY_TAG,U=s.TypedArray,F=s.TypedArrayPrototype,B=s.aTypedArrayConstructor,q=s.isTypedArray,V="BYTES_PER_ELEMENT",Z="Wrong length",H=function(t,e){for(var n=0,r=e.length,i=new(B(t))(r);r>n;)i[n]=e[n++];return i},z=function(t,e){R(t,e,{get:function(){return A(this)[e]}})},G=function(t){var e;return t instanceof D||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},W=function(t,e){return q(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},K=function(t,e){return W(t,e=v(e,!0))?l(2,t[e]):O(t,e)},J=function(t,e,n){return!(W(t,e=v(e,!0))&&m(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?R(t,e,n):(t[e]=n.value,t)};o?(L||(T.f=K,x.f=J,z(F,"buffer"),z(F,"byteOffset"),z(F,"byteLength"),z(F,"length")),r({target:"Object",stat:!0,forced:!L},{getOwnPropertyDescriptor:K,defineProperty:J}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,v=i[s],g=v,y=g&&g.prototype,x={},T=function(t,e){R(t,e,{get:function(){return function(t,e){var n=A(t);return n.view[u](e*o+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=A(t);n&&(r=(r=P(r))<0?0:r>255?255:255&r),i.view[l](e*o+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};L?a&&(g=e(function(t,e,n,r){return c(t,g,s),C(m(e)?G(e)?void 0!==r?new v(e,p(n,o),r):void 0!==n?new v(e,p(n,o)):new v(e):q(e)?H(g,e):S.call(g,e):new v(d(e)),t,g)}),w&&w(g,U),k(_(v),function(t){t in g||h(g,t,v[t])}),g.prototype=y):(g=e(function(t,e,n,r){c(t,g,s);var i,a,u,l=0,h=0;if(m(e)){if(!G(e))return q(e)?H(g,e):S.call(g,e);i=e,h=p(n,o);var v=e.byteLength;if(void 0===r){if(v%o)throw N(Z);if((a=v-h)<0)throw N(Z)}else if((a=f(r)*o)+h>v)throw N(Z);u=a/o}else u=d(e),i=new D(a=u*o);for(M(t,{buffer:i,byteOffset:h,byteLength:a,length:u,view:new $(i)});l<u;)T(t,l++)}),w&&w(g,U),y=g.prototype=b(F)),y.constructor!==g&&h(y,"constructor",g),j&&h(y,j,s),x[s]=g,r({global:!0,forced:g!=v,sham:!L},x),V in g||h(g,V,o),V in y||h(y,V,o),E(s)}):t.exports=function(){}},54567:function(t,e,n){var r=n(11665),i=n(7741),o=n(6774),a=n(56950).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i(function(){u(1)})||!i(function(){new u(-1)})||!o(function(t){new u,new u(null),new u(1.5),new u(t)},!0)||i(function(){return 1!==new u(new s(2),1,void 0).length})},74542:function(t,e,n){var r=n(56950).aTypedArrayConstructor,i=n(16244);t.exports=function(t,e){for(var n=i(t,t.constructor),o=0,a=e.length,s=new(r(n))(a);a>o;)s[o]=e[o++];return s}},91345:function(t,e,n){var r=n(38099),i=n(52493),o=n(44e3),a=n(23444),s=n(62531),u=n(56950).aTypedArrayConstructor;t.exports=function(t){var e,n,c,l,h,f,d=r(t),p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,y=o(d);if(null!=y&&!a(y))for(f=(h=y.call(d)).next,d=[];!(l=f.call(h)).done;)d.push(l.value);for(g&&p>2&&(v=s(v,arguments[2],2)),n=i(d.length),c=new(u(this))(n),e=0;n>e;e++)c[e]=g?v(d[e],e):d[e];return c}},23763:function(t){var e=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++e+n).toString(36)}},4016:function(t,e,n){var r=n(64998);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},46420:function(t,e,n){var r=n(20864);e.f=r},20864:function(t,e,n){var r=n(11665),i=n(46222),o=n(45289),a=n(23763),s=n(64998),u=n(4016),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)&&(s||"string"==typeof c[t])||(c[t]=s&&o(l,t)?l[t]:h("Symbol."+t)),c[t]}},16839:function(t){t.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},20679:function(t,e,n){"use strict";var r=n(41473),i=n(11665),o=n(59929),a=n(29426),s=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==s},{ArrayBuffer:s}),a("ArrayBuffer")},69116:function(t,e,n){"use strict";var r=n(41473),i=n(7741),o=n(59929),a=n(28379),s=n(47931),u=n(52493),c=n(16244),l=o.ArrayBuffer,h=o.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i(function(){return!new l(2).slice(1,void 0).byteLength})},{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(c(this,l))(u(i-r)),d=new h(this),p=new h(o),v=0;r<i;)p.setUint8(v++,d.getUint8(r++));return o}})},71026:function(t,e,n){"use strict";var r=n(41473),i=n(7741),o=n(27486),a=n(396),s=n(38099),u=n(52493),c=n(27041),l=n(20122),h=n(47169),f=n(20864),d=n(69408),p=f("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",y=d>=51||!i(function(){var t=[];return t[p]=!1,t.concat()[0]!==t}),m=h("concat"),b=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!y||!m},{concat:function(t){var e,n,r,i,o,a=s(this),h=l(a,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(b(o=-1===e?a:arguments[e])){if(f+(i=u(o.length))>v)throw TypeError(g);for(n=0;n<i;n++,f++)n in o&&c(h,f,o[n])}else{if(f>=v)throw TypeError(g);c(h,f++,o)}return h.length=f,h}})},23522:function(t,e,n){"use strict";var r=n(41473),i=n(93400).every;r({target:"Array",proto:!0,forced:!n(31183)("every")},{every:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},73270:function(t,e,n){"use strict";var r=n(41473),i=n(93400).filter;r({target:"Array",proto:!0,forced:!n(47169)("filter")},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},90962:function(t,e,n){"use strict";var r=n(41473),i=n(93400).find,o=n(9729),a="find",s=!0;a in[]&&Array(1).find(function(){s=!1}),r({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},2095:function(t,e,n){"use strict";var r=n(41473),i=n(59488);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},60804:function(t,e,n){"use strict";var r=n(41473),i=n(57505).includes,o=n(9729);r({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},92971:function(t,e,n){"use strict";var r=n(41473),i=n(57505).indexOf,o=n(31183),a=[].indexOf,s=!!a&&1/[1].indexOf(1,-0)<0,u=o("indexOf");r({target:"Array",proto:!0,forced:s||!u},{indexOf:function(t){return s?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},33195:function(t,e,n){"use strict";var r=n(77376),i=n(9729),o=n(22088),a=n(9025),s=n(65453),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})},function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},44595:function(t,e,n){"use strict";var r=n(41473),i=n(6950),o=n(77376),a=n(31183),s=[].join,u=i!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},30578:function(t,e,n){var r=n(41473),i=n(90308);r({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},35654:function(t,e,n){"use strict";var r=n(41473),i=n(93400).map;r({target:"Array",proto:!0,forced:!n(47169)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},60968:function(t,e,n){"use strict";var r=n(41473),i=n(396),o=n(27486),a=n(47931),s=n(52493),u=n(77376),c=n(27041),l=n(20864),h=n(47169)("slice"),f=l("species"),d=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,r,l,h=u(this),v=s(h.length),g=a(t,v),y=a(void 0===e?v:e,v);if(o(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[f])&&(n=void 0):n=void 0,n===Array||void 0===n))return d.call(h,g,y);for(r=new(void 0===n?Array:n)(p(y-g,0)),l=0;g<y;g++,l++)g in h&&c(r,l,h[g]);return r.length=l,r}})},78571:function(t,e,n){"use strict";var r=n(41473),i=n(93400).some;r({target:"Array",proto:!0,forced:!n(31183)("some")},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},88717:function(t,e,n){"use strict";var r=n(41473),i=n(53212),o=n(38099),a=n(7741),s=n(31183),u=[],c=u.sort,l=a(function(){u.sort(void 0)}),h=a(function(){u.sort(null)}),f=s("sort");r({target:"Array",proto:!0,forced:l||!h||!f},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),i(t))}})},34149:function(t,e,n){"use strict";var r=n(41473),i=n(47931),o=n(99015),a=n(52493),s=n(38099),u=n(20122),c=n(27041),l=n(47169)("splice"),h=Math.max,f=Math.min,d=9007199254740991,p="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,r,l,v,g,y,m=s(this),b=a(m.length),w=i(t,b),_=arguments.length;if(0===_?n=r=0:1===_?(n=0,r=b-w):(n=_-2,r=f(h(o(e),0),b-w)),b+n-r>d)throw TypeError(p);for(l=u(m,r),v=0;v<r;v++)(g=w+v)in m&&c(l,v,m[g]);if(l.length=r,n<r){for(v=w;v<b-r;v++)y=v+n,(g=v+r)in m?m[y]=m[g]:delete m[y];for(v=b;v>b-r+n;v--)delete m[v-1]}else if(n>r)for(v=b-r;v>w;v--)y=v+n-1,(g=v+r-1)in m?m[y]=m[g]:delete m[y];for(v=0;v<n;v++)m[v+w]=arguments[v+2];return m.length=b-r+n,l}})},29597:function(t,e,n){n(41473)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},68268:function(t,e,n){var r=n(60186),i=Date.prototype,o="Invalid Date",a=i.toString,s=i.getTime;new Date(NaN)+""!=o&&r(i,"toString",function(){var t=s.call(this);return t==t?a.call(this):o})},49372:function(t,e,n){n(41473)({target:"Function",proto:!0},{bind:n(37636)})},77999:function(t,e,n){var r=n(10450),i=n(17900).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&i(o,u,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},64947:function(t,e,n){"use strict";var r=n(53778),i=n(39384);t.exports=r("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i)},42608:function(t,e,n){"use strict";var r=n(10450),i=n(11665),o=n(22850),a=n(60186),s=n(45289),u=n(15984),c=n(47481),l=n(26589),h=n(7741),f=n(96618),d=n(51504).f,p=n(45993).f,v=n(17900).f,g=n(85155).trim,y="Number",m=i.Number,b=m.prototype,w=u(f(b))==y,_=function(t){var e,n,r,i,o,a,s,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=g(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>i)return NaN;return parseInt(o,r)}return+c};if(o(y,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var S,k=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof k&&(w?h(function(){b.valueOf.call(n)}):u(n)!=y)?c(new m(_(e)),n,k):_(e)},E=r?d(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;E.length>x;x++)s(m,S=E[x])&&!s(k,S)&&v(k,S,p(m,S));k.prototype=b,b.constructor=k,a(i,y,k)}},11570:function(t,e,n){"use strict";var r=n(41473),i=n(99015),o=n(33984),a=n(11982),s=n(7741),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2==1?l(t,e-1,n*t):l(t*t,e/2,n)},h=function(t,e,n){for(var r=-1,i=n;++r<6;)t[r]=(i+=e*t[r])%1e7,i=c(i/1e7)},f=function(t,e){for(var n=6,r=0;--n>=0;)t[n]=c((r+=t[n])/e),r=r%e*1e7},d=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=String(t[e]);n=""===n?r:n+a.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s(function(){u.call({})})},{toFixed:function(t){var e,n,r,s,u=o(this),c=i(t),p=[0,0,0,0,0,0],v="",g="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(v="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*l(2,69,1))-69)<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,(e=52-e)>0){for(h(p,0,n),r=c;r>=7;)h(p,1e7,0),r-=7;for(h(p,l(10,r,1),0),r=e-1;r>=23;)f(p,1<<23),r-=23;f(p,1<<r),h(p,1,1),f(p,2),g=d(p)}else h(p,0,n),h(p,1<<-e,0),g=d(p)+a.call("0",c);return c>0?v+((s=g.length)<=c?"0."+a.call("0",c-s)+g:g.slice(0,s-c)+"."+g.slice(s-c)):v+g}})},57386:function(t,e,n){n(41473)({target:"Object",stat:!0,sham:!n(10450)},{create:n(96618)})},99198:function(t,e,n){var r=n(41473),i=n(10450);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(17900).f})},32592:function(t,e,n){var r=n(41473),i=n(38099),o=n(80453);r({target:"Object",stat:!0,forced:n(7741)(function(){o(1)})},{keys:function(t){return o(i(t))}})},25279:function(t,e,n){var r=n(87151),i=n(60186),o=n(85256);r||i(Object.prototype,"toString",o,{unsafe:!0})},63376:function(t,e,n){var r=n(41473),i=n(35986);r({global:!0,forced:parseFloat!=i},{parseFloat:i})},16902:function(t,e,n){var r=n(41473),i=n(1457);r({global:!0,forced:parseInt!=i},{parseInt:i})},82774:function(t,e,n){"use strict";var r=n(41473),i=n(80084),o=n(70501),a=n(7741),s=n(67490),u=n(16244),c=n(95565),l=n(60186);if(r({target:"Promise",proto:!0,real:!0,forced:!!o&&a(function(){o.prototype.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=u(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return c(e,t()).then(function(){return n})}:t,n?function(n){return c(e,t()).then(function(){throw n})}:t)}}),!i&&"function"==typeof o){var h=s("Promise").prototype.finally;o.prototype.finally!==h&&l(o.prototype,"finally",h,{unsafe:!0})}},79233:function(t,e,n){"use strict";var r,i,o,a,s=n(41473),u=n(80084),c=n(11665),l=n(67490),h=n(70501),f=n(60186),d=n(93508),p=n(25091),v=n(79722),g=n(29426),y=n(396),m=n(53212),b=n(91591),w=n(40280),_=n(42493),S=n(6774),k=n(16244),E=n(80541).set,x=n(9698),T=n(95565),I=n(15635),C=n(46345),A=n(44008),M=n(9025),R=n(22850),O=n(20864),P=n(26009),N=n(21310),D=n(69408),$=O("species"),L="Promise",j=M.get,U=M.set,F=M.getterFor(L),B=h&&h.prototype,q=h,V=B,Z=c.TypeError,H=c.document,z=c.process,G=C.f,W=G,K=!!(H&&H.createEvent&&c.dispatchEvent),J="function"==typeof PromiseRejectionEvent,Y="unhandledrejection",X=!1,Q=R(L,function(){var t=w(q)!==String(q);if(!t&&66===D)return!0;if(u&&!V.finally)return!0;if(D>=51&&/native code/.test(q))return!1;var e=new q(function(t){t(1)}),n=function(t){t(function(){},function(){})};return(e.constructor={})[$]=n,!(X=e.then(function(){})instanceof n)||!t&&P&&!J}),tt=Q||!S(function(t){q.all(t).catch(function(){})}),et=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},nt=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;x(function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(i||(2===t.rejection&&at(t),t.rejection=1),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),u=!0)),a===c.promise?f(Z("Promise-chain cycle")):(s=et(a))?s.call(a,h,f):h(a)):f(r)}catch(p){d&&!u&&d.exit(),f(p)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&it(t)})}},rt=function(t,e,n){var r,i;K?((r=H.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!J&&(i=c["on"+t])?i(r):t===Y&&I("Unhandled promise rejection",n)},it=function(t){E.call(c,function(){var e,n=t.facade,r=t.value;if(ot(t)&&(e=A(function(){N?z.emit("unhandledRejection",r,n):rt(Y,n,r)}),t.rejection=N||ot(t)?2:1,e.error))throw e.value})},ot=function(t){return 1!==t.rejection&&!t.parent},at=function(t){E.call(c,function(){var e=t.facade;N?z.emit("rejectionHandled",e):rt("rejectionhandled",e,t.value)})},st=function(t,e,n){return function(r){t(e,r,n)}},ut=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,nt(t,!0))},ct=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Z("Promise can't be resolved itself");var r=et(e);r?x(function(){var n={done:!1};try{r.call(e,st(ct,n,t),st(ut,n,t))}catch(i){ut(n,i,t)}}):(t.value=e,t.state=1,nt(t,!1))}catch(i){ut({done:!1},i,t)}}};if(Q&&(q=function(t){b(this,q,L),m(t),r.call(this);var e=j(this);try{t(st(ct,e),st(ut,e))}catch(n){ut(e,n)}},(r=function(t){U(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(V=q.prototype,{then:function(t,e){var n=F(this),r=G(k(this,q));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=N?z.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&nt(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=j(t);this.promise=t,this.resolve=st(ct,e),this.reject=st(ut,e)},C.f=G=function(t){return t===q||t===o?new i(t):W(t)},!u&&"function"==typeof h&&B!==Object.prototype)){a=B.then,X||(f(B,"then",function(t,e){var n=this;return new q(function(t,e){a.call(n,t,e)}).then(t,e)},{unsafe:!0}),f(B,"catch",V.catch,{unsafe:!0}));try{delete B.constructor}catch(lt){}p&&p(B,V)}s({global:!0,wrap:!0,forced:Q},{Promise:q}),v(q,L,!1,!0),g(L),o=l(L),s({target:L,stat:!0,forced:Q},{reject:function(t){var e=G(this);return e.reject.call(void 0,t),e.promise}}),s({target:L,stat:!0,forced:u||Q},{resolve:function(t){return T(u&&this===o?q:this,t)}}),s({target:L,stat:!0,forced:tt},{all:function(t){var e=this,n=G(e),r=n.resolve,i=n.reject,o=A(function(){var n=m(e.resolve),o=[],a=0,s=1;_(t,function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then(function(t){c||(c=!0,o[u]=t,--s||r(o))},i)}),--s||r(o)});return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=G(e),r=n.reject,i=A(function(){var i=m(e.resolve);_(t,function(t){i.call(e,t).then(n.resolve,r)})});return i.error&&r(i.value),n.promise}})},17490:function(t,e,n){"use strict";var r=n(41473),i=n(87437);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},93636:function(t,e,n){"use strict";var r=n(60186),i=n(28379),o=n(7741),a=n(25945),s="toString",u=RegExp.prototype,c=u.toString;(o(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})||c.name!=s)&&r(RegExp.prototype,s,function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n)},{unsafe:!0})},75679:function(t,e,n){"use strict";var r=n(53778),i=n(39384);t.exports=r("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i)},25876:function(t,e,n){"use strict";var r,i=n(41473),o=n(45993).f,a=n(52493),s=n(26316),u=n(48215),c=n(62759),l=n(80084),h="".endsWith,f=Math.min,d=c("endsWith");i({target:"String",proto:!0,forced:!(!l&&!d&&(r=o(String.prototype,"endsWith"),r&&!r.writable)||d)},{endsWith:function(t){var e=String(u(this));s(t);var n=arguments.length>1?arguments[1]:void 0,r=a(e.length),i=void 0===n?r:f(a(n),r),o=String(t);return h?h.call(e,o,i):e.slice(i-o.length,i)===o}})},69497:function(t,e,n){"use strict";var r=n(41473),i=n(26316),o=n(48215);r({target:"String",proto:!0,forced:!n(62759)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},68903:function(t,e,n){"use strict";var r=n(64061).charAt,i=n(9025),o=n(65453),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",function(t){s(this,{type:a,string:String(t),index:0})},function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})})},95459:function(t,e,n){"use strict";var r=n(41473),i=n(75774);r({target:"String",proto:!0,forced:n(70346)("link")},{link:function(t){return i(this,"a","href",t)}})},96848:function(t,e,n){"use strict";var r=n(68916),i=n(28379),o=n(52493),a=n(48215),s=n(19396),u=n(77549);r("match",1,function(t,e,n){return[function(e){var n=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;for(var h,f=[],d=0;null!==(h=u(a,c));){var p=String(h[0]);f[d]=p,""===p&&(a.lastIndex=s(c,o(a.lastIndex),l)),d++}return 0===d?null:f}]})},80715:function(t,e,n){"use strict";var r=n(68916),i=n(28379),o=n(52493),a=n(99015),s=n(48215),u=n(19396),c=n(37443),l=n(77549),h=Math.max,f=Math.min;r("replace",2,function(t,e,n,r){var d=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=r.REPLACE_KEEPS_$0,v=d?"$":"$0";return[function(n,r){var i=s(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!d&&p||"string"==typeof r&&-1===r.indexOf(v)){var s=n(e,t,this,r);if(s.done)return s.value}var g=i(t),y=String(this),m="function"==typeof r;m||(r=String(r));var b=g.global;if(b){var w=g.unicode;g.lastIndex=0}for(var _=[];;){var S=l(g,y);if(null===S)break;if(_.push(S),!b)break;""===String(S[0])&&(g.lastIndex=u(y,o(g.lastIndex),w))}for(var k,E="",x=0,T=0;T<_.length;T++){S=_[T];for(var I=String(S[0]),C=h(f(a(S.index),y.length),0),A=[],M=1;M<S.length;M++)A.push(void 0===(k=S[M])?k:String(k));var R=S.groups;if(m){var O=[I].concat(A,C,y);void 0!==R&&O.push(R);var P=String(r.apply(void 0,O))}else P=c(I,y,C,A,R,r);C>=x&&(E+=y.slice(x,C)+P,x=C+I.length)}return E+y.slice(x)}]})},59475:function(t,e,n){"use strict";var r=n(68916),i=n(28379),o=n(48215),a=n(31502),s=n(77549);r("search",1,function(t,e,n){return[function(e){var n=o(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]})},40462:function(t,e,n){"use strict";var r=n(68916),i=n(93421),o=n(28379),a=n(48215),s=n(16244),u=n(19396),c=n(52493),l=n(77549),h=n(87437),f=n(5991).UNSUPPORTED_Y,d=[].push,p=Math.min,v=4294967295;r("split",2,function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?v:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);for(var s,u,c,l=[],f=0,p=new RegExp(t.source,(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":"")+"g");(s=h.call(p,r))&&!((u=p.lastIndex)>f&&(l.push(r.slice(f,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),c=s[0].length,f=u,l.length>=o));)p.lastIndex===s.index&&p.lastIndex++;return f===r.length?!c&&p.test("")||l.push(""):l.push(r.slice(f)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var h=o(t),d=String(this),g=s(h,RegExp),y=h.unicode,m=new g(f?"^(?:"+h.source+")":h,(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(f?"g":"y")),b=void 0===i?v:i>>>0;if(0===b)return[];if(0===d.length)return null===l(m,d)?[d]:[];for(var w=0,_=0,S=[];_<d.length;){m.lastIndex=f?0:_;var k,E=l(m,f?d.slice(_):d);if(null===E||(k=p(c(m.lastIndex+(f?_:0)),d.length))===w)_=u(d,_,y);else{if(S.push(d.slice(w,_)),S.length===b)return S;for(var x=1;x<=E.length-1;x++)if(S.push(E[x]),S.length===b)return S;_=w=k}}return S.push(d.slice(w)),S}]},f)},10323:function(t,e,n){"use strict";var r,i=n(41473),o=n(45993).f,a=n(52493),s=n(26316),u=n(48215),c=n(62759),l=n(80084),h="".startsWith,f=Math.min,d=c("startsWith");i({target:"String",proto:!0,forced:!(!l&&!d&&(r=o(String.prototype,"startsWith"),r&&!r.writable)||d)},{startsWith:function(t){var e=String(u(this));s(t);var n=a(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return h?h.call(e,r,n):e.slice(n,n+r.length)===r}})},79623:function(t,e,n){"use strict";var r=n(41473),i=n(85155).trim;r({target:"String",proto:!0,forced:n(3382)("trim")},{trim:function(){return i(this)}})},98512:function(t,e,n){n(35241)("asyncIterator")},85237:function(t,e,n){"use strict";var r=n(41473),i=n(10450),o=n(11665),a=n(45289),s=n(396),u=n(17900).f,c=n(213),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,v="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;u(d,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(a(h,t))return"";var n=v?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},14655:function(t,e,n){"use strict";var r=n(41473),i=n(11665),o=n(67490),a=n(80084),s=n(10450),u=n(64998),c=n(4016),l=n(7741),h=n(45289),f=n(27486),d=n(396),p=n(28379),v=n(38099),g=n(77376),y=n(26589),m=n(67234),b=n(96618),w=n(80453),_=n(51504),S=n(5053),k=n(12473),E=n(45993),x=n(17900),T=n(64442),I=n(53273),C=n(60186),A=n(46222),M=n(23972),R=n(2172),O=n(23763),P=n(20864),N=n(46420),D=n(35241),$=n(79722),L=n(9025),j=n(93400).forEach,U=M("hidden"),F="Symbol",B=P("toPrimitive"),q=L.set,V=L.getterFor(F),Z=Object.prototype,H=i.Symbol,z=o("JSON","stringify"),G=E.f,W=x.f,K=S.f,J=T.f,Y=A("symbols"),X=A("op-symbols"),Q=A("string-to-symbol-registry"),tt=A("symbol-to-string-registry"),et=A("wks"),nt=i.QObject,rt=!nt||!nt.prototype||!nt.prototype.findChild,it=s&&l(function(){return 7!=b(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=G(Z,e);r&&delete Z[e],W(t,e,n),r&&t!==Z&&W(Z,e,r)}:W,ot=function(t,e){var n=Y[t]=b(H.prototype);return q(n,{type:F,tag:t,description:e}),s||(n.description=e),n},at=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},st=function(t,e,n){t===Z&&st(X,e,n),p(t);var r=y(e,!0);return p(n),h(Y,r)?(n.enumerable?(h(t,U)&&t[U][r]&&(t[U][r]=!1),n=b(n,{enumerable:m(0,!1)})):(h(t,U)||W(t,U,m(1,{})),t[U][r]=!0),it(t,r,n)):W(t,r,n)},ut=function(t,e){p(t);var n=g(e),r=w(n).concat(ft(n));return j(r,function(e){s&&!ct.call(n,e)||st(t,e,n[e])}),t},ct=function(t){var e=y(t,!0),n=J.call(this,e);return!(this===Z&&h(Y,e)&&!h(X,e))&&(!(n||!h(this,e)||!h(Y,e)||h(this,U)&&this[U][e])||n)},lt=function(t,e){var n=g(t),r=y(e,!0);if(n!==Z||!h(Y,r)||h(X,r)){var i=G(n,r);return!i||!h(Y,r)||h(n,U)&&n[U][r]||(i.enumerable=!0),i}},ht=function(t){var e=K(g(t)),n=[];return j(e,function(t){h(Y,t)||h(R,t)||n.push(t)}),n},ft=function(t){var e=t===Z,n=K(e?X:g(t)),r=[];return j(n,function(t){!h(Y,t)||e&&!h(Z,t)||r.push(Y[t])}),r};u||(C((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=O(t),n=function(t){this===Z&&n.call(X,t),h(this,U)&&h(this[U],e)&&(this[U][e]=!1),it(this,e,m(1,t))};return s&&rt&&it(Z,e,{configurable:!0,set:n}),ot(e,t)}).prototype,"toString",function(){return V(this).tag}),C(H,"withoutSetter",function(t){return ot(O(t),t)}),T.f=ct,x.f=st,E.f=lt,_.f=S.f=ht,k.f=ft,N.f=function(t){return ot(P(t),t)},s&&(W(H.prototype,"description",{configurable:!0,get:function(){return V(this).description}}),a||C(Z,"propertyIsEnumerable",ct,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:H}),j(w(et),function(t){D(t)}),r({target:F,stat:!0,forced:!u},{for:function(t){var e=String(t);if(h(Q,e))return Q[e];var n=H(e);return Q[e]=n,tt[n]=e,n},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(h(tt,t))return tt[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(t,e){return void 0===e?b(t):ut(b(t),e)},defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:lt}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ht,getOwnPropertySymbols:ft}),r({target:"Object",stat:!0,forced:l(function(){k.f(1)})},{getOwnPropertySymbols:function(t){return k.f(v(t))}}),z&&r({target:"JSON",stat:!0,forced:!u||l(function(){var t=H();return"[null]"!=z([t])||"{}"!=z({a:t})||"{}"!=z(Object(t))})},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(d(e)||void 0!==t)&&!at(t))return f(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!at(e))return e}),i[1]=e,z.apply(null,i)}}),H.prototype[B]||I(H.prototype,B,H.prototype.valueOf),$(H,F),R[U]=!0},50152:function(t,e,n){"use strict";var r=n(56950),i=n(76658),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",function(t,e){return i.call(o(this),t,e,arguments.length>2?arguments[2]:void 0)})},46233:function(t,e,n){"use strict";var r=n(56950),i=n(93400).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)})},99317:function(t,e,n){"use strict";var r=n(56950),i=n(37894),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",function(t){return i.apply(o(this),arguments)})},57390:function(t,e,n){"use strict";var r=n(56950),i=n(93400).filter,o=n(74542),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("filter",function(t){var e=i(a(this),t,arguments.length>1?arguments[1]:void 0);return o(this,e)})},53758:function(t,e,n){"use strict";var r=n(56950),i=n(93400).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)})},83970:function(t,e,n){"use strict";var r=n(56950),i=n(93400).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)})},83533:function(t,e,n){"use strict";var r=n(56950),i=n(93400).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)})},54361:function(t,e,n){"use strict";var r=n(56950),i=n(57505).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)})},47310:function(t,e,n){"use strict";var r=n(56950),i=n(57505).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)})},28877:function(t,e,n){"use strict";var r=n(11665),i=n(56950),o=n(33195),a=n(20864)("iterator"),s=r.Uint8Array,u=o.values,c=o.keys,l=o.entries,h=i.aTypedArray,f=i.exportTypedArrayMethod,d=s&&s.prototype[a],p=!!d&&("values"==d.name||null==d.name),v=function(){return u.call(h(this))};f("entries",function(){return l.call(h(this))}),f("keys",function(){return c.call(h(this))}),f("values",v,!p),f(a,v,!p)},82854:function(t,e,n){"use strict";var r=n(56950),i=r.aTypedArray,o=[].join;(0,r.exportTypedArrayMethod)("join",function(t){return o.apply(i(this),arguments)})},83717:function(t,e,n){"use strict";var r=n(56950),i=n(90308),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",function(t){return i.apply(o(this),arguments)})},25588:function(t,e,n){"use strict";var r=n(56950),i=n(93400).map,o=n(16244),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,function(t,e){return new(s(o(t,t.constructor)))(e)})})},76982:function(t,e,n){"use strict";var r=n(56950),i=n(49730).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)})},84372:function(t,e,n){"use strict";var r=n(56950),i=n(49730).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)})},98882:function(t,e,n){"use strict";var r=n(56950),i=r.aTypedArray,o=Math.floor;(0,r.exportTypedArrayMethod)("reverse",function(){for(var t,e=this,n=i(e).length,r=o(n/2),a=0;a<r;)t=e[a],e[a++]=e[--n],e[n]=t;return e})},96599:function(t,e,n){"use strict";var r=n(56950),i=n(52493),o=n(21788),a=n(38099),s=n(7741),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",function(t){u(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=i(r.length),c=0;if(s+e>n)throw RangeError("Wrong length");for(;c<s;)this[e+c]=r[c++]},s(function(){new Int8Array(1).set({})}))},19183:function(t,e,n){"use strict";var r=n(56950),i=n(16244),o=n(7741),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=[].slice;(0,r.exportTypedArrayMethod)("slice",function(t,e){for(var n=u.call(a(this),t,e),r=i(this,this.constructor),o=0,c=n.length,l=new(s(r))(c);c>o;)l[o]=n[o++];return l},o(function(){new Int8Array(1).slice()}))},20534:function(t,e,n){"use strict";var r=n(56950),i=n(93400).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)})},2857:function(t,e,n){"use strict";var r=n(56950),i=r.aTypedArray,o=[].sort;(0,r.exportTypedArrayMethod)("sort",function(t){return o.call(i(this),t)})},52301:function(t,e,n){"use strict";var r=n(56950),i=n(52493),o=n(47931),a=n(16244),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",function(t,e){var n=s(this),r=n.length,u=o(t,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-u))})},27180:function(t,e,n){"use strict";var r=n(11665),i=n(56950),o=n(7741),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,h=!!a&&o(function(){c.call(new a(1))});u("toLocaleString",function(){return c.apply(h?l.call(s(this)):s(this),arguments)},o(function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()})||!o(function(){a.prototype.toLocaleString.call([1,2])}))},3951:function(t,e,n){"use strict";var r=n(56950).exportTypedArrayMethod,i=n(7741),o=n(11665).Uint8Array,a=o&&o.prototype||{},s=[].toString,u=[].join;i(function(){s.call({})})&&(s=function(){return u.call(this)}),r("toString",s,a.toString!=s)},33202:function(t,e,n){n(54169)("Uint16",function(t){return function(e,n,r){return t(this,e,n,r)}})},28848:function(t,e,n){n(54169)("Uint8",function(t){return function(e,n,r){return t(this,e,n,r)}})},18058:function(t,e,n){var r=n(11665),i=n(44547),o=n(59488),a=n(53273);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(l){c.forEach=o}}},87973:function(t,e,n){var r=n(11665),i=n(44547),o=n(33195),a=n(53273),s=n(20864),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var h in i){var f=r[h],d=f&&f.prototype;if(d){if(d[u]!==l)try{a(d,u,l)}catch(v){d[u]=l}if(d[c]||a(d,c,h),i[h])for(var p in o)if(d[p]!==o[p])try{a(d,p,o[p])}catch(v){d[p]=o[p]}}}},3228:function(t,e,n){var r=n(41473),i=n(11665),o=n(80541);r({global:!0,bind:!0,enumerable:!0,forced:!i.setImmediate||!i.clearImmediate},{setImmediate:o.set,clearImmediate:o.clear})},41231:function(t,e,n){var r=n(41473),i=n(11665),o=n(86865),a=[].slice,s=function(t){return function(e,n){var r=arguments.length>2,i=r?a.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(o)},{setTimeout:s(i.setTimeout),setInterval:s(i.setInterval)})},66198:function(t,e,n){"use strict";n(33195);var r=n(41473),i=n(67490),o=n(68318),a=n(60186),s=n(93508),u=n(79722),c=n(963),l=n(9025),h=n(91591),f=n(45289),d=n(62531),p=n(77379),v=n(28379),g=n(396),y=n(96618),m=n(67234),b=n(6206),w=n(44e3),_=n(20864),S=i("fetch"),k=i("Headers"),E=_("iterator"),x="URLSearchParams",T="URLSearchParamsIterator",I=l.set,C=l.getterFor(x),A=l.getterFor(T),M=/\+/g,R=Array(4),O=function(t){return R[t-1]||(R[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},P=function(t){try{return decodeURIComponent(t)}catch(e){return t}},N=function(t){var e=t.replace(M," "),n=4;try{return decodeURIComponent(e)}catch(r){for(;n;)e=e.replace(O(n--),P);return e}},D=/[!'()~]|%20/g,$={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},L=function(t){return $[t]},j=function(t){return encodeURIComponent(t).replace(D,L)},U=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:N(r.shift()),value:N(r.join("="))}))},F=function(t){this.entries.length=0,U(this.entries,t)},B=function(t,e){if(t<e)throw TypeError("Not enough arguments")},q=c(function(t,e){I(this,{type:T,iterator:b(C(t).entries),kind:e})},"Iterator",function(){var t=A(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n}),V=function(){h(this,V,x);var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(I(l,{type:x,entries:d,updateURL:function(){},updateSearchParams:F}),void 0!==c)if(g(c))if("function"==typeof(t=w(c)))for(n=(e=t.call(c)).next;!(r=n.call(e)).done;){if((a=(o=(i=b(v(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:s.value+""})}else for(u in c)f(c,u)&&d.push({key:u,value:c[u]+""});else U(d,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},Z=V.prototype;s(Z,{append:function(t,e){B(arguments.length,2);var n=C(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){B(arguments.length,1);for(var e=C(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){B(arguments.length,1);for(var e=C(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){B(arguments.length,1);for(var e=C(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){B(arguments.length,1);for(var e=C(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){B(arguments.length,1);for(var n,r=C(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)(n=i[u]).key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=C(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=C(this).entries,r=d(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new q(this,"keys")},values:function(){return new q(this,"values")},entries:function(){return new q(this,"entries")}},{enumerable:!0}),a(Z,E,Z.entries),a(Z,"toString",function(){for(var t,e=C(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(j(t.key)+"="+j(t.value));return n.join("&")},{enumerable:!0}),u(V,x),r({global:!0,forced:!o},{URLSearchParams:V}),o||"function"!=typeof S||"function"!=typeof k||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(g(e=arguments[1])&&p(n=e.body)===x&&((r=e.headers?new k(e.headers):new k).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=y(e,{body:m(0,String(n)),headers:m(0,r)})),i.push(e)),S.apply(this,i)}}),t.exports={URLSearchParams:V,getState:C}},25394:function(t,e,n){"use strict";n(68903);var r,i=n(41473),o=n(10450),a=n(68318),s=n(11665),u=n(76858),c=n(60186),l=n(91591),h=n(45289),f=n(14700),d=n(42394),p=n(64061).codeAt,v=n(42289),g=n(79722),y=n(66198),m=n(9025),b=s.URL,w=y.URLSearchParams,_=y.getState,S=m.set,k=m.getterFor("URL"),E=Math.floor,x=Math.pow,T="Invalid scheme",I="Invalid host",C="Invalid port",A=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,R=/\d/,O=/^(0x|0X)/,P=/^[0-7]+$/,N=/^\d+$/,D=/^[\dA-Fa-f]+$/,$=/[\0\t\n\r #%/:?@[\\]]/,L=/[\0\t\n\r #/:?@[\\]]/,j=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,U=/[\t\n\r]/g,F=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return I;if(!(n=q(e.slice(1,-1))))return I;t.host=n}else if(J(t)){if(e=v(e),$.test(e))return I;if(null===(n=B(e)))return I;t.host=n}else{if(L.test(e))return I;for(n="",r=d(e),i=0;i<r.length;i++)n+=W(r[i],Z);t.host=n}},B=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(e=u.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=u[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=O.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?N:8==o?P:D).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=x(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*x(256,3-r);return s},q=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,l=++c}for(;f();){if(8==c)return;if(":"!=f()){for(e=n=0;n<4&&D.test(f());)e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!R.test(f()))return;for(;R.test(f());){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;u[c++]=e}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},V=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=E(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},Z={},H=f({},Z,{" ":1,'"':1,"<":1,">":1,"`":1}),z=f({},H,{"#":1,"?":1,"{":1,"}":1}),G=f({},z,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(t,e){var n=p(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},J=function(t){return h(K,t.scheme)},Y=function(t){return""!=t.username||""!=t.password},X=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Q=function(t,e){var n;return 2==t.length&&A.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},tt=function(t){var e;return t.length>1&&Q(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},et=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&Q(e[0],!0)||e.pop()},nt=function(t){return"."===t||"%2e"===t.toLowerCase()},rt={},it={},ot={},at={},st={},ut={},ct={},lt={},ht={},ft={},dt={},pt={},vt={},gt={},yt={},mt={},bt={},wt={},_t={},St={},kt={},Et=function(t,e,n,i){var o,a,s,u,c,l=n||rt,f=0,p="",v=!1,g=!1,y=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(j,"")),e=e.replace(U,""),o=d(e);f<=o.length;){switch(a=o[f],l){case rt:if(!a||!A.test(a)){if(n)return T;l=ot;continue}p+=a.toLowerCase(),l=it;break;case it:if(a&&(M.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(n)return T;p="",l=ot,f=0;continue}if(n&&(J(t)!=h(K,p)||"file"==p&&(Y(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=p,n)return void(J(t)&&K[t.scheme]==t.port&&(t.port=null));p="","file"==t.scheme?l=gt:J(t)&&i&&i.scheme==t.scheme?l=at:J(t)?l=lt:"/"==o[f+1]?(l=st,f++):(t.cannotBeABaseURL=!0,t.path.push(""),l=_t)}break;case ot:if(!i||i.cannotBeABaseURL&&"#"!=a)return T;if(i.cannotBeABaseURL&&"#"==a){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,l=kt;break}l="file"==i.scheme?gt:ut;continue;case at:if("/"!=a||"/"!=o[f+1]){l=ut;continue}l=ht,f++;break;case st:if("/"==a){l=ft;break}l=wt;continue;case ut:if(t.scheme=i.scheme,a==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==a||"\\"==a&&J(t))l=ct;else if("?"==a)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",l=St;else{if("#"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),l=wt;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=kt}break;case ct:if(!J(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,l=wt;continue}l=ft}else l=ht;break;case lt:if(l=ht,"/"!=a||"/"!=p.charAt(f+1))continue;f++;break;case ht:if("/"!=a&&"\\"!=a){l=ft;continue}break;case ft:if("@"==a){v&&(p="%40"+p),v=!0,s=d(p);for(var m=0;m<s.length;m++){var b=s[m];if(":"!=b||y){var w=W(b,G);y?t.password+=w:t.username+=w}else y=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&J(t)){if(v&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=dt}else p+=a;break;case dt:case pt:if(n&&"file"==t.scheme){l=mt;continue}if(":"!=a||g){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&J(t)){if(J(t)&&""==p)return I;if(n&&""==p&&(Y(t)||null!==t.port))return;if(u=F(t,p))return u;if(p="",l=bt,n)return;continue}"["==a?g=!0:"]"==a&&(g=!1),p+=a}else{if(""==p)return I;if(u=F(t,p))return u;if(p="",l=vt,n==pt)return}break;case vt:if(!R.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&J(t)||n){if(""!=p){var _=parseInt(p,10);if(_>65535)return C;t.port=J(t)&&_===K[t.scheme]?null:_,p=""}if(n)return;l=bt;continue}return C}p+=a;break;case gt:if(t.scheme="file","/"==a||"\\"==a)l=yt;else{if(!i||"file"!=i.scheme){l=wt;continue}if(a==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==a)t.host=i.host,t.path=i.path.slice(),t.query="",l=St;else{if("#"!=a){tt(o.slice(f).join(""))||(t.host=i.host,t.path=i.path.slice(),et(t)),l=wt;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=kt}}break;case yt:if("/"==a||"\\"==a){l=mt;break}i&&"file"==i.scheme&&!tt(o.slice(f).join(""))&&(Q(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),l=wt;continue;case mt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&Q(p))l=wt;else if(""==p){if(t.host="",n)return;l=bt}else{if(u=F(t,p))return u;if("localhost"==t.host&&(t.host=""),n)return;p="",l=bt}continue}p+=a;break;case bt:if(J(t)){if(l=wt,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=wt,"/"!=a))continue}else t.fragment="",l=kt;else t.query="",l=St;break;case wt:if(a==r||"/"==a||"\\"==a&&J(t)||!n&&("?"==a||"#"==a)){if(".."===(c=(c=p).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(et(t),"/"==a||"\\"==a&&J(t)||t.path.push("")):nt(p)?"/"==a||"\\"==a&&J(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Q(p)&&(t.host&&(t.host=""),p=p.charAt(0)+":"),t.path.push(p)),p="","file"==t.scheme&&(a==r||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",l=St):"#"==a&&(t.fragment="",l=kt)}else p+=W(a,z);break;case _t:"?"==a?(t.query="",l=St):"#"==a?(t.fragment="",l=kt):a!=r&&(t.path[0]+=W(a,Z));break;case St:n||"#"!=a?a!=r&&("'"==a&&J(t)?t.query+="%27":t.query+="#"==a?"%23":W(a,Z)):(t.fragment="",l=kt);break;case kt:a!=r&&(t.fragment+=W(a,H))}f++}},xt=function(t){var e,n,r=l(this,xt,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(t),s=S(r,{type:"URL"});if(void 0!==i)if(i instanceof xt)e=k(i);else if(n=Et(e={},String(i)))throw TypeError(n);if(n=Et(s,a,null,e))throw TypeError(n);var u=s.searchParams=new w,c=_(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=It.call(r),r.origin=Ct.call(r),r.protocol=At.call(r),r.username=Mt.call(r),r.password=Rt.call(r),r.host=Ot.call(r),r.hostname=Pt.call(r),r.port=Nt.call(r),r.pathname=Dt.call(r),r.search=$t.call(r),r.searchParams=Lt.call(r),r.hash=jt.call(r))},Tt=xt.prototype,It=function(){var t=k(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",Y(t)&&(c+=n+(r?":"+r:"")+"@"),c+=V(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Ct=function(){var t=k(this),e=t.scheme,n=t.port;if("blob"==e)try{return new xt(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&J(t)?e+"://"+V(t.host)+(null!==n?":"+n:""):"null"},At=function(){return k(this).scheme+":"},Mt=function(){return k(this).username},Rt=function(){return k(this).password},Ot=function(){var t=k(this),e=t.host,n=t.port;return null===e?"":null===n?V(e):V(e)+":"+n},Pt=function(){var t=k(this).host;return null===t?"":V(t)},Nt=function(){var t=k(this).port;return null===t?"":String(t)},Dt=function(){var t=k(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},$t=function(){var t=k(this).query;return t?"?"+t:""},Lt=function(){return k(this).searchParams},jt=function(){var t=k(this).fragment;return t?"#"+t:""},Ut=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(Tt,{href:Ut(It,function(t){var e=k(this),n=String(t),r=Et(e,n);if(r)throw TypeError(r);_(e.searchParams).updateSearchParams(e.query)}),origin:Ut(Ct),protocol:Ut(At,function(t){var e=k(this);Et(e,String(t)+":",rt)}),username:Ut(Mt,function(t){var e=k(this),n=d(String(t));if(!X(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=W(n[r],G)}}),password:Ut(Rt,function(t){var e=k(this),n=d(String(t));if(!X(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=W(n[r],G)}}),host:Ut(Ot,function(t){var e=k(this);e.cannotBeABaseURL||Et(e,String(t),dt)}),hostname:Ut(Pt,function(t){var e=k(this);e.cannotBeABaseURL||Et(e,String(t),pt)}),port:Ut(Nt,function(t){var e=k(this);X(e)||(""==(t=String(t))?e.port=null:Et(e,t,vt))}),pathname:Ut(Dt,function(t){var e=k(this);e.cannotBeABaseURL||(e.path=[],Et(e,t+"",bt))}),search:Ut($t,function(t){var e=k(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Et(e,t,St)),_(e.searchParams).updateSearchParams(e.query)}),searchParams:Ut(Lt),hash:Ut(jt,function(t){var e=k(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Et(e,t,kt)):e.fragment=null})}),c(Tt,"toJSON",function(){return It.call(this)},{enumerable:!0}),c(Tt,"toString",function(){return It.call(this)},{enumerable:!0}),b){var Ft=b.createObjectURL,Bt=b.revokeObjectURL;Ft&&c(xt,"createObjectURL",function(t){return Ft.apply(b,arguments)}),Bt&&c(xt,"revokeObjectURL",function(t){return Bt.apply(b,arguments)})}g(xt,"URL"),i({global:!0,forced:!a,sham:!o},{URL:xt})},61855:function(t,e,n){"use strict";n.d(e,{ZT:function(){return i},pi:function(){return o},_T:function(){return a},gn:function(){return s},w6:function(){return u},mG:function(){return c},Jh:function(){return l},XA:function(){return h},CR:function(){return f},ev:function(){return d},qq:function(){return p},FC:function(){return v},V2:function(){return g},KL:function(){return y}});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}u((r=r.apply(t,e||[])).next())})}function l(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function d(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function p(t){return this instanceof p?(this.v=t,this):new p(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||s(t,e)})})}function s(t,e){try{(n=i[t](e)).value instanceof p?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function g(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:p(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=h(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){!function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}(r,i,(e=t[n](e)).done,e.value)})}}}},66723:function(t,e){"use strict";e.N=void 0;var n=/^([^\w]*)(javascript|data|vbscript)/im,r=/&#(\w+)(^\w|;)?/g,i=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,o=/^([^:]+):/gm,a=[".","/"];e.N=function(t){var e,s=(e=t||"",e.replace(r,function(t,e){return String.fromCharCode(e)})).replace(i,"").trim();if(!s)return"about:blank";if(function(t){return a.indexOf(t[0])>-1}(s))return s;var u=s.match(o);return u&&n.test(u[0])?"about:blank":s}},66311:function(t,e,n){"use strict";var r,i,o=n(61855),a=n(27533),s=n(90912),u=n(29040),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,a.p$)(t),this.container=new s.H0(e.name),this._addComponent(new s.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if((0,a.r3)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,a.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&(0,a.ZB)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(v);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,a.ZB)(e,t)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,a.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,a.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=g;!function(t,e){t.INTERNAL.registerComponent(new s.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.22",void 0),t.registerVersion("fire-js","")}(w),e.Z=w},90912:function(t,e,n){"use strict";n.d(e,{wA:function(){return o},H0:function(){return u},zt:function(){return s}});var r=n(61855),i=n(27533),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=(0,r.pi)({identifier:a,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:a})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=(0,r.CR)(o.value,2),u=s[1],c=this.normalizeInstanceIdentifier(s[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=a),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,s=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?a:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var l=(0,r.XA)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=(0,r.CR)(h.value,2),d=f[1];u===this.normalizeInstanceIdentifier(f[0])&&d.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=(0,r.XA)(this.onInitCallbacks),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===a?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},97154:function(t,e,n){"use strict";var r=n(66311),i=n(90912),o=n(27533),a=n(61855),s=n(29040);t=n.hmd(t);var u="";function c(t){u=t}var l,h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),f=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new f},p=d("localStorage"),v=d("sessionStorage"),g=new s.Yd("@firebase/database"),y=(l=1,function(){return l++}),m=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},b=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var a=e[i];Array.isArray(a)||a&&"object"==typeof a&&"number"==typeof a.length?r+=t.apply(null,a):r+="object"==typeof a?(0,o.Pz)(a):a,r+=" "}return r},w=null,_=!0,S=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.in.VERBOSE,w=g.log.bind(g),e&&v.set("logging_enabled",!0)):"function"==typeof t?w=t:(w=null,v.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===w&&!0===v.get("logging_enabled")&&S(!0)),w){var n=b.apply(null,t);w(n)}},E=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,(0,a.ev)([t],(0,a.CR)(e)))}},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+b.apply(void 0,(0,a.ev)([],(0,a.CR)(t)));g.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+b.apply(void 0,(0,a.ev)([],(0,a.CR)(t)));throw g.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+b.apply(void 0,(0,a.ev)([],(0,a.CR)(t)));g.warn(n)},C=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},A="[MIN_NAME]",M="[MAX_NAME]",R=function(t,e){if(t===e)return 0;if(t===A||e===M)return-1;if(e===A||t===M)return 1;var n=U(t),r=U(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},O=function(t,e){return t===e?0:t<e?-1:1},P=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},N=function t(e){if("object"!=typeof e||null===e)return(0,o.Pz)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=(0,o.Pz)(n[a]),i+=":",i+=t(e[n[a]]);return i+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function $(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var L=function(t){var e,n,r,i,a;(0,o.hu)(!C(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},j=new RegExp("^-?(0*)\\d{1,10}$"),U=function(t){if(j.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},F=function(t){try{t()}catch(e){setTimeout(function(){throw I("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},B=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise(function(n,r){setTimeout(function(){e.appCheck?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){I('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),V=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(n,r){setTimeout(function(){e.auth_?e.getToken(t).then(n,r):n(null)},0)})},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)})},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,z="websocket",G="long_polling",W=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function K(t,e,n){var r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===z)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==G)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return $(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var J=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),Y={},X={};function Q(t){var e=t.toString();return Y[e]||(Y[e]=new J),Y[e]}var tt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&F(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),et="start",nt="close",rt=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(t),this.stats_=Q(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),K(e,G,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new it(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,a.CR)(t,5),i=r[0],o=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===et)n.id=o,n.password=s;else{if(i!==nt)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(0,a.CR)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=D(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),it=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){k("frame writing exception"),u.stack&&k(u.stack),k(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||k("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),ot=null;"undefined"!=typeof MozWebSocket?ot=MozWebSocket:"undefined"!=typeof WebSocket&&(ot=WebSocket);var at=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=Q(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),K(t,z,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r={headers:{"User-Agent":"Firebase/5/"+u+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var i=process.env,a=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new ot(this.connURL,[],r)}else this.mySock=new ot(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var s=c.message||c.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ot&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[rt,at]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=at&&at.isAvailable(),o=i&&!at.previouslyFailed();if(e.webSocketOnly&&(i||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[at];else{var s=this.transports_=[];try{for(var u=(0,a.XA)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ut=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=B(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=P("t",t),n=P("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=P("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?x("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):x("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),B(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):B(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ct=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),lt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=(0,a.ev)([],(0,a.CR)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),ht=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return(0,a.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(lt),ft=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ft("")}function pt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ft(t.pieces_,e)}function yt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function bt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ft(e,0)}function wt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ft)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ft(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function St(t,e){var n=pt(t),r=pt(e);if(null===n)return e;if(n===r)return St(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function kt(t,e){for(var n=mt(t,0),r=mt(e,0),i=0;i<n.length&&i<r.length;i++){var o=R(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Et(t,e){if(vt(t)!==vt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function xt(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(vt(t)>vt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Tt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);It(this)}}();function It(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ct(t))}function Ct(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var At,Mt,Rt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return(0,a.ZT)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(lt),Ot=1e3,Pt=function(t){function e(n,r,i,a,s,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=E("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Ot,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Rt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&ht.getInstance().on("online",h.onOnline_,h),h}return(0,a.ZT)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.BH,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):x("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ot),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return(0,a.mG)(this,void 0,void 0,function(){var t,n,r,i,s,u,c,l,h,f,d,p,v,g=this;return(0,a.Jh)(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){(0,o.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=a.CR.apply(void 0,[y.sent(),2]),d=f[0],p=f[1],u?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new ut(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){I(t+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")},s)),[3,4];case 3:return v=y.sent(),this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&I(v),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ot,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return N(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ft(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){k("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=(0,a.XA)(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,(0,a.XA)(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ht.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ct),Nt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Dt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Nt(A,t),r=new Nt(A,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Nt.MIN},t}(),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.ZT)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return At},set:function(t){At=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return R(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(M,At)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Nt(t,At)},e.prototype.toString=function(){return".key"},e}(Dt),Lt=new $t,jt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ut=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Bt.EMPTY_NODE,this.right=null!=o?o:Bt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Bt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Bt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ft=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ut(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Bt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ut.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ut.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new jt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new jt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new jt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ft,t}();function qt(t,e){return R(t.name,e.name)}function Vt(t,e){return R(t,e)}var Zt,Ht,zt,Gt,Wt,Kt=function(t){return"number"==typeof t?"number:"+L(t):"string:"+t},Jt=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===Mt||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===Mt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Yt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Jt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Zt},set:function(t){Zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===pt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=pt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===vt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?L(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?R(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return new Nt(M,new Yt("[PRIORITY-POST]",zt))},e.prototype.makePost=function(t,e){var n=Ht(t);return new Nt(e,new Yt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Dt)),Qt=Math.log(2),te=function(){function t(t){this.count=parseInt(Math.log(t+1)/Qt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ee=function(t,e,n,r){t.sort(e);var i=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new Ut(a,o.node,Ut.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new Ut(a,o.node,Ut.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new Ut(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,Ut.BLACK):(s(h,Ut.BLACK),s(h,Ut.RED))}return o}(new te(t.length));return new Bt(r||e,o)},ne={},re=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ne&&Xt,"ChildrenNode.ts has not been loaded"),Gt=Gt||new t({".priority":ne},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Bt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Lt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,u=n.getIterator(Nt.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?ee(i,e.getCompare()):ne;var l=e.toString(),h=(0,a.pi)({},this.indexSet_);h[l]=e;var f=(0,a.pi)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,function(t,i){var a=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(a,"Missing index implementation for "+i),t===ne){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(Nt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),ee(s,a.getCompare())}return ne}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Nt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,function(t){if(t===ne)return t;var r=n.get(e.name);return r?t.remove(new Nt(e.name,r)):t}),this.indexSet_)},t}(),ie=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Jt(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Wt||(Wt=new t(new Bt(Vt),null,re.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Wt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Wt:e},t.prototype.getChild=function(t){var e=pt(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Nt(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Wt:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=pt(t);if(null===n)return e;(0,o.hu)(".priority"!==pt(t)||1===vt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Kt(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Nt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Nt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Nt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===oe?-1:0},t.prototype.withIndex=function(e){if(e===Lt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Lt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Lt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),oe=new(function(t){function e(){return t.call(this,new Bt(Vt),ie.EMPTY_NODE,re.Default)||this}return(0,a.ZT)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ie.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ie));function ae(t,e){if(void 0===e&&(e=null),null===t)return ie.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Yt(t,ae(e));if(t instanceof Array){var n=ie.EMPTY_NODE;return $(t,function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=ae(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ae(e))}var r=[],i=!1;if($(t,function(t,e){if("."!==t.substring(0,1)){var n=ae(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Nt(t,n)))}}),0===r.length)return ie.EMPTY_NODE;var a=ee(r,qt,function(t){return t.name},Vt);if(i){var s=ee(r,Xt.getCompare());return new ie(a,ae(e),new re({".priority":s},{".priority":Xt}))}return new ie(a,ae(e),re.Default)}Object.defineProperties(Nt,{MIN:{value:new Nt(A,ie.EMPTY_NODE)},MAX:{value:new Nt(M,oe)}}),$t.__EMPTY_NODE=ie.EMPTY_NODE,Yt.__childrenNodeConstructor=ie,Mt=oe,zt=oe,Ht=ae;var se,ue,ce=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!_t(e)&&".priority"!==pt(e),"Can't create PathIndex with empty path or .priority key"),n}return(0,a.ZT)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?R(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ae(t),r=ie.EMPTY_NODE.updateChild(this.indexPath_,n);return new Nt(e,r)},e.prototype.maxPost=function(){var t=ie.EMPTY_NODE.updateChild(this.indexPath_,oe);return new Nt(M,t)},e.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},e}(Dt),le=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.ZT)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?R(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Nt.MIN},e.prototype.maxPost=function(){return Nt.MAX},e.prototype.makePost=function(t,e){var n=ae(t);return new Nt(e,n)},e.prototype.toString=function(){return".value"},e}(Dt)),he="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fe=(se=0,ue=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=he.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ue[e];e--)ue[e]=0;ue[e]++}else for(e=0;e<12;e++)ue[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=he.charAt(ue[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),de=function(t){if("2147483647"===t)return"-";var e=U(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return M;var o=he.charAt(he.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},pe=function(t){if("-2147483648"===t)return A;var e=U(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=he.charAt(he.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ve(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ye(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function me(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var be=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(ye(e,s)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(ge(e,n)):a.trackChildChange(me(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(ye(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(me(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ie.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(e){this.indexedFilter_=new be(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Nt(e,n))||(n=ie.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ie.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new Nt(t,e))||(r=r.updateImmediateChild(t,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new we(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Nt(e,n))||(n=ie.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ie.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,ie.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Nt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(me(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ye(e,f));var v=u.updateImmediateChild(e,ie.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ge(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(ye(l.name,l.node)),i.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ie.EMPTY_NODE)):t},t}(),Se=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:A},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:M},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function ke(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function xe(t,e){var n=t.copy();return n.index_=e,n}function Te(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===le?e="$value":t.index_===Lt?e="$key":((0,o.hu)(t.index_ instanceof ce,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ie(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}var Ce=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=E("p:rest:"),o.listens_={},o}return(0,a.ZT)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Te(t._queryParams);this.restRequest_(s+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),(0,o.DV)(a.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Te(t._queryParams),r=t._path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var s=(0,a.CR)(i,2),u=s[0],c=s[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.cI)(h.responseText)}catch(e){I("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&I("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ct),Ae=function(){function t(){this.rootNode_=ie.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Me(){return{value:null,children:new Map}}function Re(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=pt(e);t.children.has(r)||t.children.set(r,Me()),Re(t.children.get(r),e=gt(e),n)}}function Oe(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){Re(t,new ft(e),n)}),Oe(t,e)}if(t.children.size>0){var r=pt(e);return e=gt(e),t.children.has(r)&&Oe(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Pe(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Pe(r,new ft(e.toString()+"/"+t),n)})}var Ne=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=(0,a.pi)({},t);return this.last_&&$(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),De=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ne(t);var n=1e4+2e4*Math.random();B(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;$(e,function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),B(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),$e=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Le(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var je,Ue=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=$e.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ft(e));return new t(dt(),n,this.revert)}return(0,o.hu)(pt(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Fe=function(){function t(t,e){this.source=t,this.path=e,this.type=$e.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt()):new t(this.source,gt(this.path))},t}(),Be=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=$e.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=$e.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ft(e));return n.isEmpty()?null:n.value?new Be(this.source,dt(),n.value):new t(this.source,dt(),n)}return(0,o.hu)(pt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ve=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=pt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function He(t,e,n,r,i,a){var s=r.filter(function(t){return t.type===n});s.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Nt(e.childName,e.snapshotNode),i=new Nt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),s.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function ze(t,e){return{eventCache:t,serverCache:e}}function Ge(t,e,n,r){return ze(new Ve(e,n,r),t.serverCache)}function We(t,e,n,r){return ze(t.eventCache,new Ve(e,n,r))}function Ke(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Je(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ye=function(){function t(t,e){void 0===e&&(je||(je=new Bt(O)),e=je),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return $(e,function(t,e){n=n.set(new ft(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(_t(t))return null;var n=pt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:wt(new ft(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=pt(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=pt(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=pt(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=pt(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=pt(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(wt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=pt(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),wt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=pt(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),wt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(wt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ye(null))},t}();function Qe(t,e,n){if(_t(e))return new Xe(new Ye(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=St(i,e);return o=o.updateChild(a,n),new Xe(t.writeTree_.set(i,o))}var s=new Ye(n),u=t.writeTree_.setTree(e,s);return new Xe(u)}function tn(t,e,n){var r=t;return $(n,function(t,n){r=Qe(r,wt(e,t),n)}),r}function en(t,e){if(_t(e))return Xe.empty();var n=t.writeTree_.setTree(e,new Ye(null));return new Xe(n)}function nn(t,e){return null!=rn(t,e)}function rn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(St(n.path,e)):null}function on(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new Nt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Nt(t,n.value))}),e}function an(t,e){if(_t(e))return t;var n=rn(t,e);return new Xe(null!=n?new Ye(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function un(t,e){return cn(dt(),t.writeTree_,e)}function cn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cn(wt(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(wt(t,".priority"),r)),n}function ln(t,e){return _n(e,t)}function hn(t,e){if(t.snap)return xt(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&xt(wt(t.path,n),e))return!0;return!1}function fn(t){return t.visible}function dn(t,e,n){for(var r=Xe.empty(),i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)xt(n,s)?r=Qe(r,u=St(n,s),a.snap):xt(s,n)&&(u=St(s,n),r=Qe(r,dt(),a.snap.getChild(u)));else{if(!a.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(xt(n,s))r=tn(r,u=St(n,s),a.children);else if(xt(s,n))if(_t(u=St(s,n)))r=tn(r,dt(),a.children);else{var c=(0,o.DV)(a.children,pt(u));if(c){var l=c.getChild(gt(u));r=Qe(r,dt(),l)}}}}}return r}function pn(t,e,n,r,i){if(r||i){var o=an(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||nn(o,dt())?un(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(xt(t.path,e)||xt(e,t.path))},e),n||ie.EMPTY_NODE):null}var a=rn(t.visibleWrites,e);if(null!=a)return a;var s=an(t.visibleWrites,e);return sn(s)?n:null!=n||nn(s,dt())?un(s,n||ie.EMPTY_NODE):null}function vn(t,e,n,r){return pn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=ie.EMPTY_NODE,i=rn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=an(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=un(an(o,new ft(t)),e);r=r.updateImmediateChild(t,n)}),on(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return on(an(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function yn(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=wt(e,n);if(nn(t.visibleWrites,a))return null;var s=an(t.visibleWrites,a);return sn(s)?i.getChild(n):un(s,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function mn(t,e){return function(t,e){return rn(t.visibleWrites,e)}(t.writeTree,wt(t.treePath,e))}function bn(t,e,n){return function(t,e,n,r){var i=wt(e,n),o=rn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?un(an(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function wn(t,e){return _n(wt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var Sn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,me(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ye(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,me(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),kn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),En=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ve(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Je(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=an(t.visibleWrites,e),c=rn(u,dt());if(null!=c)s=c;else{if(null==n)return[];s=un(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function xn(t,e,n,r,i,a){var s=e.eventCache;if(null!=mn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Je(e),h=gn(r,l instanceof ie?l:ie.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var f=vn(r,Je(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=pt(n);if(".priority"===d){(0,o.hu)(1===vt(n),"Can't have a priority with additional path components");var p=s.getNode(),v=yn(r,n,p,c=e.serverCache.getNode());u=null!=v?t.filter.updatePriority(p,v):s.getNode()}else{var g=gt(n),y=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var m=yn(r,n,s.getNode(),c);y=null!=m?s.getNode().getImmediateChild(d).updateChild(g,m):s.getNode().getImmediateChild(d)}else y=bn(r,d,e.serverCache);u=null!=y?t.filter.updateChild(s.getNode(),d,y,g,i,a):s.getNode()}}return Ge(e,u,s.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function Tn(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=pt(n);if(!c.isCompleteForPath(n)&&vt(n)>1)return e;var d=gt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,kn,null)}var v=We(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return xn(t,v,n,i,new En(i,v,o),s)}function In(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new En(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=Ge(e,u,!0,t.filter.filtersNodes());else{var h=pt(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=Ge(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=gt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(_t(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===yt(f)&&v.getChild(bt(f)).isEmpty()?v:v.updateChild(f,r):ie.EMPTY_NODE}s=d.equals(p)?e:Ge(e,t.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function Cn(t,e){return t.eventCache.isCompleteForChild(e)}function An(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Mn(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Ye(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=Tn(t,c,new ft(n),u,i,o,a,s)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=An(0,e.serverCache.getNode().getImmediateChild(n),r);c=Tn(t,c,new ft(n),h,i,o,a,s)}}),c}var Rn,On=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new be(r.getIndex()),o=(n=r).loadsAllData()?new be(n.getIndex()):n.hasLimit()?new _e(n):new we(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(ie.EMPTY_NODE,s.getNode(),null),l=new Ve(u,a.isFullyInitialized(),i.filtersNodes()),h=new Ve(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=ze(h,l),this.eventGenerator_=new Ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Pn(t,e){var n=Je(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(pt(e)).isEmpty())?n.getChild(e):null}function Nn(t){return 0===t.eventRegistrations_.length}function Dn(t,e,n){var r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function $n(t,e,n,r){e.type===$e.MERGE&&null!==e.source.queryId&&((0,o.hu)(Je(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(Ke(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=t.viewCache_,u=function(t,e,n,r,i){var a,s,u=new Sn;if(n.type===$e.OVERWRITE){var c=n;c.source.fromUser?a=In(t,e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),a=Tn(t,e,c.path,c.snap,r,i,s,u))}else if(n.type===$e.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach(function(r,u){var c=wt(n,r);Cn(e,pt(c))&&(s=In(t,s,c,u,i,o,a))}),r.foreach(function(r,u){var c=wt(n,r);Cn(e,pt(c))||(s=In(t,s,c,u,i,o,a))}),s}(t,e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=Mn(t,e,l.path,l.children,r,i,s,u))}else if(n.type===$e.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,i,a){var s;if(null!=mn(r,n))return e;var u=new En(r,e,i),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===pt(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=vn(r,Je(e));else{var f=e.serverCache.getNode();(0,o.hu)(f instanceof ie,"serverChildren would be complete if leaf node"),h=gn(r,f)}l=t.filter.updateFullNode(c,h=h,a)}else{var d=pt(n),p=bn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,gt(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,ie.EMPTY_NODE,gt(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=vn(r,Je(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=mn(r,dt()),Ge(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,a){if(null!=mn(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Tn(t,e,n,u.getNode().getChild(n),i,o,s,a);if(_t(n)){var c=new Ye(null);return u.getNode().forEachChild(Lt,function(t,e){c=c.set(new ft(t),e)}),Mn(t,e,n,c,i,o,s,a)}return e}var l=new Ye(null);return r.foreach(function(t,e){var r=wt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Mn(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==$e.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache;return xn(t,We(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,kn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ke(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ve(Ke(e)))}}(e,a,f),{viewCache:a,changes:f}}(t.processor_,s,e,n,r);return i=t.processor_,(0,o.hu)((a=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Ln(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Ln(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var jn,Un=function(){return function(){this.views=new Map}}();function Fn(t,e,n,r){var i,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return(0,o.hu)(null!=c,"SyncTree gave us an op for an invalid query."),$n(c,e,n,r)}var l=[];try{for(var h=(0,a.XA)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat($n(c=f.value,e,n,r))}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function Bn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var a=vn(n,i?r:null),s=!1;a?s=!0:r instanceof ie?(a=gn(n,r),s=!1):(a=ie.EMPTY_NODE,s=!1);var u=ze(new Ve(a,s,!1),new Ve(r,i,!1));return new On(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=(0,a.XA)(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Vn(t,e){var n,r,i=null;try{for(var o=(0,a.XA)(t.views.values()),s=o.next();!s.done;s=o.next())i=i||Pn(s.value,e)}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Zn(t,e){return e._queryParams.loadsAllData()?Gn(t):t.views.get(e._queryIdentifier)}function Hn(t,e){return null!=Zn(t,e)}function zn(t){return null!=Gn(t)}function Gn(t){var e,n;try{for(var r=(0,a.XA)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Wn=1,Kn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Jn(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Qe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?nr(t,new Be({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Yn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=t.allWrites.length-1;i&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&hn(u,r.path)?i=!1:xt(r.path,u.path)&&(a=!0)),s--}return!!i&&(a?(function(t){t.visibleWrites=dn(t.allWrites,fn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=en(t.visibleWrites,r.path):$(r.children,function(e){t.visibleWrites=en(t.visibleWrites,wt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new Ye(null);return null!=r.snap?i=i.set(dt(),!0):$(r.children,function(t){i=i.set(new ft(t),!0)}),nr(t,new Ue(r.path,i,n))}return[]}function Xn(t,e,n){return nr(t,new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Qn(t,e,n,r){var i=e._path,s=t.syncPointTree_.get(i),u=[];if(s&&("default"===e._queryIdentifier||Hn(s,e))){var c=function(t,e,n,r){var i,s,u=e._queryIdentifier,c=[],l=[],h=zn(t);if("default"===u)try{for(var f=(0,a.XA)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,v=(0,a.CR)(d.value,2),g=v[0];l=l.concat(Dn(p=v[1],n,r)),Nn(p)&&(t.views.delete(g),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(y){i={error:y}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}else(p=t.views.get(u))&&(l=l.concat(Dn(p,n,r)),Nn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!zn(t)&&c.push(new((0,o.hu)(Rn,"Reference.ts has not been loaded"),Rn)(e._repo,e._path)),{removed:c,events:l}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(i,function(t,e){return zn(e)});if(h&&!f){var d=t.syncPointTree_.subtree(i);if(!d.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&zn(e))return[Gn(e)];var r=[];return e&&(r=qn(e)),$(n,function(t,e){r=r.concat(e)}),r})}(d),v=0;v<p.length;++v){var g=p[v],y=g.query,m=or(t,g);t.listenProvider_.startListening(hr(y),ar(t,y),m.hashFn,m.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(hr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(hr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function tr(t,e,n){var r=e._path,i=null,a=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=St(t,r);i=i||Vn(e,n),a=a||zn(e)});var s,u=t.syncPointTree_.get(r);u?(a=a||zn(u),i=i||Vn(u,dt())):(u=new Un,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Vn(e,dt());n&&(i=i.updateImmediateChild(t,n))}));var c=Hn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);(0,o.hu)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Wn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var a=Bn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(ve(n.getNode())),Ln(t,r,n.getNode(),e)}(a,n)}(u,e,n,ln(t.pendingWriteTree_,r),i,s);if(!c&&!a){var d=Zn(u,e);f=f.concat(function(t,e,n){var r=e._path,i=ar(t,e),a=or(t,n),s=t.listenProvider_.startListening(hr(e),i,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&zn(e))return[Gn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),$(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(hr(h),ar(t,h))}return s}(t,e,d))}return f}function er(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Vn(n,St(t,e));if(r)return r});return pn(r,e,i,n,!0)}function nr(t,e){return rr(e,t.syncPointTree_,null,ln(t.pendingWriteTree_,dt()))}function rr(t,e,n,r){if(_t(t.path))return ir(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Vn(i,dt()));var o=[],a=pt(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=wn(r,a);o=o.concat(rr(s,u,c,l))}return i&&(o=o.concat(Fn(i,t,r,n))),o}function ir(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Vn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var a=n?n.getImmediateChild(e):null,s=wn(r,e),u=t.operationForChild(e);u&&(o=o.concat(ir(u,i,a,s)))}),i&&(o=o.concat(Fn(i,t,r,n))),o}function or(t,e){var n=e.query,r=ar(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ie.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ur(t,n);if(r){var i=cr(r),o=i.path,a=i.queryId,s=St(o,e);return lr(t,o,new Fe(Le(a),s))}return[]}(t,n._path,r):function(t,e){return nr(t,new Fe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Qn(t,n,null,i)}}}function ar(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ur(t,e){return t.tagToQueryMap.get(e)}function cr(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ft(t.substr(0,e))}}function lr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Fn(r,n,ln(t.pendingWriteTree_,e),null)}function hr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(jn,"Reference.ts has not been loaded"),jn)(t._repo,t._path):t}var fr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=wt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return er(this.syncTree_,this.path_)},t}(),pr=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?vr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},vr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!=typeof a?r:a+r},yr=function(t,e,n,r){return br(e,new dr(n,t),r)},mr=function(t,e,n){return br(t,new fr(e),n)};function br(t,e,n){var r,i=t.getPriority().val(),o=pr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=pr(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Yt(s,ae(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Yt(o))),u.forEachChild(Xt,function(t,i){var o=br(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var wr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ft?e:new ft(e),r=t,i=pt(n);null!==i;){var a=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new wr(i,r,a),i=pt(n=gt(n))}return r}function Sr(t){return t.node.value}function kr(t,e){t.node.value=e,Cr(t)}function Er(t){return t.node.childCount>0}function xr(t,e){$(t.node.children,function(n,r){e(new wr(n,t,r))})}function Tr(t,e,n,r){n&&!r&&e(t),xr(t,function(t){Tr(t,e,!0,r)}),n&&r&&e(t)}function Ir(t){return new ft(null===t.parent?t.name:Ir(t.parent)+"/"+t.name)}function Cr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Sr(t)&&!Er(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Cr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Cr(t))}(t.parent,t.name,t)}var Ar=/[\[\].#$\/\u0000-\u001F\u007F]/,Mr=/[\[\].#$\u0000-\u001F\u007F]/,Rr=10485760,Or=function(t){return"string"==typeof t&&0!==t.length&&!Ar.test(t)},Pr=function(t){return"string"==typeof t&&0!==t.length&&!Mr.test(t)},Nr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!C(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},Dr=function(t,e,n,r){r&&void 0===e||$r((0,o.gK)(t,"value"),e,n)},$r=function t(e,n,r){var i=r instanceof ft?new Tt(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+Ct(i));if("function"==typeof n)throw new Error(e+"contains a function "+Ct(i)+" with contents = "+n.toString());if(C(n))throw new Error(e+"contains "+n.toString()+" "+Ct(i));if("string"==typeof n&&n.length>Rr/3&&(0,o.ug)(n)>Rr)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Ct(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var a=!1,s=!1;if($(n,function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!Or(n)))throw new Error(e+" contains an invalid key ("+n+") "+Ct(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,c;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),It(t)}(i,n),t(e,r,i),c=(u=i).parts_.pop(),u.byteLength_-=(0,o.ug)(c),u.parts_.length>0&&(u.byteLength_-=1)}),a&&s)throw new Error(e+' contains ".value" child '+Ct(i)+" in addition to actual children.")}},Lr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var a=[];$(e,function(t,e){var r=new ft(t);if($r(i,e,wt(n,r)),".priority"===yt(r)&&!Nr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=mt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Or(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(kt);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&xt(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,a)}},jr=function(t,e,n){if(!n||void 0!==e){if(C(e))throw new Error((0,o.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nr(e))throw new Error((0,o.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ur=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Fr=function(t,e,n,r){if(!(r&&void 0===n||Or(n)))throw new Error((0,o.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Br=function(t,e,n,r){if(!(r&&void 0===n||Pr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===pt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Vr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Or(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Pr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e)+"must be a boolean.")},Hr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function zr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Et(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Gr(t,e,n){zr(t,n),Kr(t,function(t){return Et(t,e)})}function Wr(t,e,n){zr(t,n),Kr(t,function(t){return xt(t,e)||xt(e,t)})}function Kr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Jr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Jr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();w&&k("event: "+n.toString()),F(r)}}}var Yr="repo_interrupt",Xr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Me(),this.transactionQueueTree_=new wr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Qr(t){var e=t.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ti(t){return(e=(e={timestamp:Qr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ei(t,e,n,r,i){t.dataUpdateCount++;var a=new ft(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var u=(0,o.UI)(n,function(t){return ae(t)});s=function(t,e,n,r){var i=ur(t,r);if(i){var o=cr(i),a=o.path,s=o.queryId,u=St(a,e),c=Ye.fromObject(n);return lr(t,a,new qe(Le(s),u,c))}return[]}(t.serverSyncTree_,a,u,i)}else{var c=ae(n);s=function(t,e,n,r){var i=ur(t,r);if(null!=i){var o=cr(i),a=o.path,s=o.queryId,u=St(a,e);return lr(t,a,new Be(Le(s),u,n))}return[]}(t.serverSyncTree_,a,c,i)}else if(r){var l=(0,o.UI)(n,function(t){return ae(t)});s=function(t,e,n){var r=Ye.fromObject(n);return nr(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=ae(n);s=Xn(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=pi(t,a)),Wr(t.eventQueue_,f,s)}function ni(t,e){ri(t,"connected",e),!1===e&&function(t){li(t,"onDisconnectEvents");var e=ti(t),n=Me();Pe(t.onDisconnect_,dt(),function(r,i){var o=yr(r,i,t.serverSyncTree_,e);Re(n,r,o)});var r=[];Pe(n,dt(),function(e,n){r=r.concat(Xn(t.serverSyncTree_,e,n));var i=bi(t,e);pi(t,i)}),t.onDisconnect_=Me(),Wr(t.eventQueue_,dt(),r)}(t)}function ri(t,e,n){var r=new ft("/.info/"+e),i=ae(n);t.infoData_.updateSnapshot(r,i);var o=Xn(t.infoSyncTree_,r,i);Wr(t.eventQueue_,r,o)}function ii(t){return t.nextWriteId_++}function oi(t,e,n,r,i){li(t,"set",{path:e.toString(),value:n,priority:r});var o=ti(t),a=ae(n,r),s=er(t.serverSyncTree_,e),u=mr(a,s,o),c=ii(t),l=Jn(t.serverSyncTree_,e,u,c,!0);zr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),function(n,r){var o="ok"===n;o||I("set at "+e+" failed: "+n);var a=Yn(t.serverSyncTree_,c,!o);Wr(t.eventQueue_,e,a),hi(0,i,n,r)});var h=bi(t,e);pi(t,h),Wr(t.eventQueue_,h,[])}function ai(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Oe(t.onDisconnect_,e),hi(0,n,r,i)})}function si(t,e,n,r){var i=ae(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Re(t.onDisconnect_,e,i),hi(0,r,n,o)})}function ui(t,e,n){var r;r=".info"===pt(e._path)?Qn(t.infoSyncTree_,e,n):Qn(t.serverSyncTree_,e,n),Gr(t.eventQueue_,e._path,r)}function ci(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Yr)}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),k.apply(void 0,(0,a.ev)([r],(0,a.CR)(e)))}function hi(t,e,n,r){e&&F(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function fi(t,e,n){return er(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||mi(t,e),Sr(e)){var n=gi(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=fi(t,e,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=St(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,function(r){li(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(Yn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},s=0;s<n.length;s++)a(s);for(mi(t,_r(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Wr(t.eventQueue_,e,i),s=0;s<o.length;s++)F(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(I("transaction at "+f.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;pi(t,e)}},s)}(t,Ir(e),n)}else Er(e)&&xr(e,function(e){di(t,e)})}function pi(t,e){var n=vi(t,e),r=Ir(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],a=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),s=function(s){var u,c=e[s],l=St(n,c.path),h=!1;if((0,o.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=fi(t,c.path,a);c.currentInputSnapshot=f;var d=e[s].update(f.val());if(void 0!==d){$r("transaction failed: Data returned ",d,c.path);var p=ae(d);"object"==typeof d&&null!=d&&(0,o.r3)(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=c.currentWriteId,g=ti(t),y=mr(p,f,g);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ii(t),a.splice(a.indexOf(v),1),i=(i=i.concat(Jn(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Yn(t.serverSyncTree_,v,!0))}else h=!0,u="nodata",i=i.concat(Yn(t.serverSyncTree_,c.currentWriteId,!0))}Wr(t.eventQueue_,n,i),i=[],h&&(e[s].status=2,setTimeout(e[s].unwatcher,Math.floor(0)),e[s].onComplete&&r.push("nodata"===u?function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)}:function(){return e[s].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)s(u);for(mi(t,t.transactionQueueTree_),u=0;u<r.length;u++)F(r[u]);di(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function vi(t,e){var n,r=t.transactionQueueTree_;for(n=pt(e);null!==n&&void 0===Sr(r);)r=_r(r,n),n=pt(e=gt(e));return r}function gi(t,e){var n=[];return yi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function yi(t,e,n){var r=Sr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);xr(e,function(e){yi(t,e,n)})}function mi(t,e){var n=Sr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,kr(e,n.length>0?n:void 0)}xr(e,function(e){mi(t,e)})}function bi(t,e){var n=Ir(vi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){wi(t,e)}),wi(t,r),Tr(r,function(e){wi(t,e)}),n}function wi(t,e){var n=Sr(e);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?((0,o.hu)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):((0,o.hu)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Yn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?kr(e,void 0):n.length=a+1,Wr(t.eventQueue_,Ir(e),i),s=0;s<r.length;s++)F(r[s])}}var _i=function(t,e){var n=Si(t),r=n.namespace;return"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new W(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ft(n.pathString)}},Si=function(t){var e="",n="",r="",i="",o="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=(0,a.XA)(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}},ki=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Ei=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),xi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Ti=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.BH;return ai(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new o.BH;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Dr("OnDisconnect.set",t,this._path,!1);var e=new o.BH;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Dr("OnDisconnect.setWithPriority",t,this._path,!1),jr("OnDisconnect.setWithPriority",e,!1);var n=new o.BH;return function(t,e,n,r,i){var o=ae(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Re(t.onDisconnect_,e,o),hi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Lr("OnDisconnect.update",t,this._path,!1);var e=new o.BH;return function(t,e,n,r){if((0,o.xb)(n))return k("onDisconnect().update() called with empty data.  Don't do anything."),void hi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&$(n,function(n,r){var i=ae(r);Re(t.onDisconnect_,wt(e,n),i)}),hi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ii=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:yt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ri(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ie(this._queryParams),e=N(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ie(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.m9)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Et(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ci(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ai(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Lt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==A)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==M)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Xt){if(null!=e&&!Nr(e)||null!=n&&!Nr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof ce||t.getIndex()===le,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Mi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ri=function(t){function e(e,n){return t.call(this,e,n,new Se,!1)||this}return(0,a.ZT)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=bt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ii),Oi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ft(e),r=Di(this.ref,e);return new t(this._node.getChild(n),r,Xt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Di(n.ref,r),Xt))})},t.prototype.hasChild=function(t){var e=new ft(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Pi(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?Di(t._root,e):t._root}function Ni(t,e){(t=(0,o.m9)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Vr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||T("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Pi(t,n.path.toString())}function Di(t,e){var n;return null===pt((t=(0,o.m9)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Br("child","path",n,!1)):Br("child","path",e,!1),new Ri(t._repo,wt(t._path,e))}function $i(t,e){t=(0,o.m9)(t),qr("push",t._path),Dr("push",e,t._path,!0);var n,r=Qr(t._repo),i=fe(r),a=Di(t,i),s=Di(t,i);return n=null!=e?ji(s,e).then(function(){return s}):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Li(t){return qr("remove",t._path),ji(t,null)}function ji(t,e){t=(0,o.m9)(t),qr("set",t._path),Dr("set",e,t._path,!1);var n=new o.BH;return oi(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e){t=(0,o.m9)(t),qr("setPriority",t._path),jr("setPriority",e,!1);var n=new o.BH;return oi(t._repo,wt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Fi(t,e,n){if(qr("setWithPriority",t._path),Dr("setWithPriority",e,t._path,!1),jr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.BH;return oi(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Bi(t,e){Lr("update",e,t._path,!1);var n=new o.BH;return function(t,e,n,r){li(t,"update",{path:e.toString(),value:n});var i=!0,a=ti(t),s={};if($(n,function(n,r){i=!1,s[n]=yr(wt(e,n),ae(r),t.serverSyncTree_,a)}),i)k("update() called with empty data.  Don't do anything."),hi(0,r,"ok",void 0);else{var u=ii(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=tn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ye.fromObject(n);return nr(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,s,u);zr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||I("update at "+e+" failed: "+n);var a=Yn(t.serverSyncTree_,u,!o),s=a.length>0?pi(t,e):e;Wr(t.eventQueue_,s,a),hi(0,r,n,i)}),$(n,function(n){var r=bi(t,wt(e,n));pi(t,r)}),Wr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ki("value",this,new Oi(t.snapshotNode,new Ri(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Vi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ei(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=Di(new Ri(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ki(t.type,this,new Oi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){ui(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new xi(n,o||void 0),c="value"===e?new qi(u):new Vi(e,u);return function(t,e,n){var r;r=".info"===pt(e._path)?tr(t.infoSyncTree_,e,n):tr(t.serverSyncTree_,e,n),Gr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ui(t._repo,t,c)}}function Hi(t,e,n,r){return Zi(t,"value",e,n,r)}function zi(t,e,n,r){return Zi(t,"child_added",e,n,r)}function Gi(t,e,n,r){return Zi(t,"child_changed",e,n,r)}function Wi(t,e,n,r){return Zi(t,"child_moved",e,n,r)}function Ki(t,e,n,r){return Zi(t,"child_removed",e,n,r)}function Ji(t,e,n){var r=null,i=n?new xi(n):null;"value"===e?r=new qi(i):e&&(r=new Vi(e,i)),ui(t._repo,t,r)}var Yi=function(){return function(){}}(),Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Dr("endAt",this._value,t._path,!0);var e=Ee(t._queryParams,this._value,this._key);if(Mi(e),Ai(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function Qi(t,e){return Fr("endAt","key",e,!0),new Xi(t,e)}var to=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Dr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Lt?("string"==typeof n&&(n=pe(n)),i=Ee(e,n,r)):i=Ee(e,n,null==r?A:pe(r)),i.endBeforeSet_=!0,i);if(Mi(o),Ai(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function eo(t,e){return Fr("endBefore","key",e,!0),new to(t,e)}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Dr("startAt",this._value,t._path,!0);var e=ke(t._queryParams,this._value,this._key);if(Mi(e),Ai(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}(Yi);function ro(t,e){return void 0===t&&(t=null),Fr("startAt","key",e,!0),new no(t,e)}var io=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Dr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Lt?("string"==typeof n&&(n=de(n)),i=ke(e,n,r)):i=ke(e,n,null==r?M:de(r)),i.startAfterSet_=!0,i);if(Mi(o),Ai(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}(Yi);function oo(t,e){return Fr("startAfter","key",e,!0),new io(t,e)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,a.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Yi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ao(t)}var uo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return(0,a.ZT)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Yi);function co(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new uo(t)}var lo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Ci(t,"orderByChild");var e=new ft(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ce(e),r=xe(t._queryParams,n);return Ai(r),new Ii(t._repo,t._path,r,!0)},e}(Yi);function ho(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Br("orderByChild","path",t,!1),new lo(t)}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Ci(t,"orderByKey");var e=xe(t._queryParams,Lt);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}(Yi);function po(){return new fo}var vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Ci(t,"orderByPriority");var e=xe(t._queryParams,Xt);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}(Yi);function go(){return new vo}var yo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,a.ZT)(e,t),e.prototype._apply=function(t){Ci(t,"orderByValue");var e=xe(t._queryParams,le);return Ai(e),new Ii(t._repo,t._path,e,!0)},e}(Yi);function mo(){return new yo}var bo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return(0,a.ZT)(e,t),e.prototype._apply=function(t){if(Dr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xi(this._value,this._key)._apply(new no(this._value,this._key)._apply(t))},e}(Yi);function wo(t,e){return Fr("equalTo","key",e,!0),new bo(t,e)}function _o(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(0,o.m9)(t);try{for(var u=(0,a.XA)(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}!function(t){(0,o.hu)(!Rn,"__referenceConstructor has already been defined"),Rn=t}(Ri),function(t){(0,o.hu)(!jn,"__referenceConstructor has already been defined"),jn=t}(Ri);var So={},ko=!1;function Eo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=_i(o,i),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,u=(s=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new Z(Z.OWNER):new V(t.name,t.options,e);Vr("Invalid Firebase Database URL",s),_t(s.path)||T("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=So[e.name];i||(So[e.name]=i={});var o=i[t.toURLString()];return o&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xr(t,ko,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new xo(h,t)}var xo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Q(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ce(t.repoInfo_,function(e,n,r,i){ei(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ni(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}t.persistentConnection_=new Pt(t.repoInfo_,e,function(e,n,r,i){ei(t,e,n,r,i)},function(e){ni(t,e)},function(e){!function(t,e){$(e,function(e,n){ri(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new De(t.stats_,t.server_)},i=t.repoInfo_.toString(),X[i]||(X[i]=r()),X[i]),t.infoData_=new Ae,t.infoSyncTree_=new Kn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Xn(t.infoSyncTree_,e._path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ri(t,"connected",!1),t.serverSyncTree_=new Kn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Wr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ri(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=So[e=this.app.name])&&n[t.key]===t||T("Database "+e+"("+t.repoInfo_+") has already been deleted."),ci(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&T("Cannot call "+t+" on a deleted database.")},t}();function To(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),ci(t._repo)}function Io(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Yr)}var Co={".sv":"timestamp"},Ao=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Mo(t,e,n){var r;if(t=(0,o.m9)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,a=new o.BH,s=Hi(t,function(){});return function(e,n,r,i,s,u){li(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?a.reject(e):(i=new Oi(r,new Ri(t._repo,t._path),Xt),a.resolve(new Ao(n,i)))},status:null,order:y(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=fi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{$r("transaction failed: Data returned ",h,c.path),c.status=0;var f=_r(e.transactionQueueTree_,n),d=Sr(f)||[];d.push(c),kr(f,d);var p=void 0;"object"==typeof h&&null!==h&&(0,o.r3)(h,".priority")?(p=(0,o.DV)(h,".priority"),(0,o.hu)(Nr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(er(e.serverSyncTree_,n)||ie.EMPTY_NODE).getPriority().val();var v=ti(e),g=ae(h,p),m=mr(g,l,v);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=m,c.currentWriteId=ii(e);var b=Jn(e.serverSyncTree_,n,m,c.currentWriteId,c.applyLocally);Wr(e.eventQueue_,n,b),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,s,i),a.promise}var Ro=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Oo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Po=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Br("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Br("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new Do(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),No=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var a,s=this;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Po(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return Hi(this._delegate,c,l),n;case"child_added":return zi(this._delegate,c,l),n;case"child_removed":return Ki(this._delegate,c,l),n;case"child_changed":return Gi(this._delegate,c,l),n;case"child_moved":return Wi(this._delegate,c,l),n;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.Dv)("Query.off",0,3,arguments.length),Ur("Query.off",t,!0),(0,o.Wj)("Query.off","callback",e,!0),(0,o.lb)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Ji(this._delegate,t,r)}else Ji(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=St(t,n);r=r||Vn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Vn(i,dt()):(i=new Un,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Ve(r,!0,!1):null;return Ke(Bn(i,e,ln(t.pendingWriteTree_,e._path),o?a.getNode():ie.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=ae(n),i=Xn(t.serverSyncTree_,e._path,r);return Gr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return li(t,"get for query "+(0,o.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.m9)(t))._repo,t).then(function(e){return new Oi(e,new Ri(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new Po(t.database,e)})},t.prototype.once=function(e,n,r,i){var a=this;(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.BH,c=function(t,e){var r=new Po(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":zi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Gi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Wi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,co(e)))},t.prototype.orderByChild=function(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,ho(e)))},t.prototype.orderByKey=function(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,po()))},t.prototype.orderByPriority=function(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,mo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,ro(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,oo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Qi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,eo(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,wo(e,n)))},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.Wj)(t,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Do(this.database,new Ri(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Do=function(t){function e(e,n){var r=t.call(this,e,new Ii(n._repo,n._path,new Se,!1))||this;return r.database=e,r._delegate=n,r}return(0,a.ZT)(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Di(this._delegate,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",e,!0);var n=ji(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",e,!0);var i=Bi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=Fi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",t,!0);var e=Li(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,o.Wj)("Reference.transaction","onComplete",e,!0),Zr("Reference.transaction","applyLocally",n,!0);var i=Mo(this._delegate,t,{applyLocally:n}).then(function(t){return new Oo(t.committed,new Po(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",e,!0);var n=Ui(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",n,!0);var i=$i(this._delegate,t),a=i.then(function(t){return new e(r.database,t)});n&&a.then(function(){return n(null)},function(t){return n(t)});var s=new e(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new Ro(new Ti(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(No),$o=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&T("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&T('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Z(Z.OWNER);else if(r.mockUserToken){var s=(0,o.Sg)(r.mockUserToken,t.app.options.projectId);a=new Z(s)}!function(t,e,n,r){t.repoInfo_=new W(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,a)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.Dv)("database.ref",0,1,arguments.length),t instanceof Do){var e=Ni(this._delegate,t.toString());return new Do(this,e)}return e=Pi(this._delegate,t),new Do(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.Dv)(e,1,1,arguments.length);var n=Ni(this._delegate,t);return new Do(this,n)},t.prototype.goOffline=function(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),To(this._delegate)},t.prototype.goOnline=function(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),Io(this._delegate)},t.ServerValue={TIMESTAMP:Co,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Lo=Object.freeze({__proto__:null,forceLongPolling:function(){at.forceDisallow(),rt.forceAllow()},forceWebSockets:function(){rt.forceDisallow()},isWebSocketsAvailable:function(){return at.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Ne(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);$(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;c(t.version);var u=new i.zt("auth-internal",new i.H0("database-standalone"));return u.setComponent(new i.wA("auth-internal",function(){return r},"PRIVATE")),{instance:new $o(Eo(e,u,void 0,n,s),e),namespace:o}}}),jo=Pt;Pt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Pt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Uo=Object.freeze({__proto__:null,DataConnection:jo,RealTimeConnection:ut,hijackHash:function(t){var e=Pt.prototype.put;return Pt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Pt.prototype.put=e}},ConnectionTarget:W,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){ko=t}}),Fo=$o.ServerValue;!function(e){c(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.wA("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new $o(Eo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Do,Query:No,Database:$o,DataSnapshot:Po,enableLogging:S,INTERNAL:Lo,ServerValue:Fo,TEST_ACCESS:Uo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.1"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},29040:function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,{in:function(){return a},Yd:function(){return h},Ub:function(){return f},Am:function(){return d}});var o=[],a=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),s={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},u=a.INFO,c=((i={})[a.DEBUG]="log",i[a.VERBOSE]="log",i[a.INFO]="info",i[a.WARN]="warn",i[a.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.DEBUG],t)),this._logHandler.apply(this,r([this,a.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.VERBOSE],t)),this._logHandler.apply(this,r([this,a.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.INFO],t)),this._logHandler.apply(this,r([this,a.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.WARN],t)),this._logHandler.apply(this,r([this,a.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,a.ERROR],t)),this._logHandler.apply(this,r([this,a.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:a[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},27533:function(t,e,n){"use strict";n.d(e,{BH:function(){return f},LL:function(){return x},ZR:function(){return E},gQ:function(){return j},hu:function(){return i},g5:function(){return o},US:function(){return s},h$:function(){return u},$s:function(){return W},r3:function(){return P},Sg:function(){return d},ne:function(){return U},p$:function(){return l},ZB:function(){return h},gK:function(){return V},m9:function(){return K},z$:function(){return p},GJ:function(){return O},jU:function(){return y},ru:function(){return m},d:function(){return w},xb:function(){return D},w1:function(){return _},uI:function(){return v},UG:function(){return g},Yr:function(){return k},b$:function(){return b},Mn:function(){return S},w9:function(){return R},cI:function(){return C},UI:function(){return $},xO:function(){return L},DV:function(){return N},ug:function(){return G},dS:function(){return z},Pz:function(){return A},Dv:function(){return q},Wj:function(){return Z},lb:function(){return H}});var r=n(61855),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=a(t);return s.encodeByteArray(e,!0)},c=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function d(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),s.encodeString(JSON.stringify(a),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return p().indexOf("Electron/")>=0}function _(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S(){return p().indexOf("MSAppHost/")>=0}function k(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,x.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),x=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?T(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new E(i,s,r);return u},t}();function T(t,e){return t.replace(I,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var I=/\{\$([^}]+)}/g;function C(t){return JSON.parse(t)}function A(t){return JSON.stringify(t)}var M=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=C(c(o[0])||""),n=C(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=M(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},O=function(t){var e=M(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function D(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var j=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function U(t,e){var n=new F(t,e);return n.subscribe.bind(n)}var F=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function B(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function V(t,e){return t+" failed: "+e+" argument "}function Z(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(V(t,e)+"must be a valid function.")}function H(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(V(t,e)+"must be a valid context object.")}var z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function W(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function K(t){return t&&t._delegate?t._delegate:t}},88130:function(t,e,n){"use strict";n.d(e,{Gd:function(){return l}});var r=n(25679),i=n(28667),o=n(45380),a=n(48906);t=n.hmd(t);var s=function(){function t(t,e,n){void 0===e&&(e=new a.s),void 0===n&&(n=3),this._version=n,this._stack=[],this._stack.push({client:t,scope:e})}return t.prototype._invokeClient=function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.getStackTop();o&&o.client&&o.client[t]&&(e=o.client)[t].apply(e,r.fl(n,[o.scope]))},t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t},t.prototype.pushScope=function(){var t=this.getStack(),e=a.s.clone(t.length>0?t[t.length-1].scope:void 0);return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return void 0!==this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=(0,i.DM)(),o=e;if(!e){var a=void 0;try{throw new Error("Sentry syntheticException")}catch(t){a=t}o={originalException:t,syntheticException:a}}return this._invokeClient("captureException",t,r.pi({},o,{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var o=this._lastEventId=(0,i.DM)(),a=n;if(!n){var s=void 0;try{throw new Error(t)}catch(u){s=u}a={originalException:t,syntheticException:s}}return this._invokeClient("captureMessage",t,e,r.pi({},a,{event_id:o})),o},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=(0,i.DM)();return this._invokeClient("captureEvent",t,r.pi({},e,{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop();if(n.scope&&n.client){var o=n.client.getOptions&&n.client.getOptions()||{},a=o.beforeBreadcrumb,s=void 0===a?null:a,u=o.maxBreadcrumbs,c=void 0===u?100:u;if(!(c<=0)){var l=(0,i._I)(),h=r.pi({timestamp:l},t),f=s?(0,i.Cf)(function(){return s(h,e)}):h;null!==f&&n.scope.addBreadcrumb(f,Math.min(c,100))}}},t.prototype.setUser=function(t){var e=this.getStackTop();e.scope&&e.scope.setUser(t)},t.prototype.setTags=function(t){var e=this.getStackTop();e.scope&&e.scope.setTags(t)},t.prototype.setExtras=function(t){var e=this.getStackTop();e.scope&&e.scope.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop();e.scope&&e.client&&t(e.scope)},t.prototype.run=function(t){var e=c(this);try{t(this)}finally{c(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(n){return o.k.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t,e){return void 0===e&&(e=!1),this._callExtensionMethod("startSpan",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=u(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[t])return i.extensions[t].apply(this,e);o.k.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function u(){var t=(0,i.Rf)();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function c(t){var e=u(),n=f(e);return d(e,t),n}function l(){var e=u();return h(e)&&!f(e).isOlderThan(3)||d(e,new s),(0,i.KV)()?function(e){try{var n=(0,i.l$)(t,"domain").active;if(!n)return f(e);if(!h(n)||f(n).isOlderThan(3)){var r=f(e).getStackTop();d(n,new s(r.client,a.s.clone(r.scope)))}return f(n)}catch(o){return f(e)}}(e):f(e)}function h(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function f(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new s),t.__SENTRY__.hub}function d(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}},48906:function(t,e,n){"use strict";n.d(e,{s:function(){return u},c:function(){return l}});var r=n(25679),i=n(44495),o=n(66668),a=n(43919),s=n(28667),u=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._context={}}return t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,setTimeout(function(){t._scopeListeners.forEach(function(e){e(t)}),t._notifyingListeners=!1}))},t.prototype._notifyEventProcessors=function(t,e,n,a){var s=this;return void 0===a&&(a=0),new i.c(function(i,u){var c=t[a];if(null===e||"function"!=typeof c)i(e);else{var l=c(r.pi({},e),n);(0,o.J8)(l)?l.then(function(e){return s._notifyEventProcessors(t,e,n,a+1).then(i)}).then(null,u):s._notifyEventProcessors(t,l,n,a+1).then(i).then(null,u)}})},t.prototype.setUser=function(t){return this._user=(0,a.Fv)(t),this._notifyScopeListeners(),this},t.prototype.setTags=function(t){return this._tags=r.pi({},this._tags,(0,a.Fv)(t)),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=r.pi({},this._tags,((n={})[t]=(0,a.Fv)(e),n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=r.pi({},this._extra,(0,a.Fv)(t)),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=r.pi({},this._extra,((n={})[t]=(0,a.Fv)(e),n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=(0,a.Fv)(t),this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=(0,a.Fv)(t),this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this._transaction=t,this._span&&(this._span.transaction=t),this._notifyScopeListeners(),this},t.prototype.setContext=function(t,e){return this._context[t]=e?(0,a.Fv)(e):void 0,this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=r.fl(e._breadcrumbs),n._tags=r.pi({},e._tags),n._extra=r.pi({},e._extra),n._context=r.pi({},e._context),n._user=e._user,n._level=e._level,n._span=e._span,n._transaction=e._transaction,n._fingerprint=e._fingerprint,n._eventProcessors=r.fl(e._eventProcessors)),n},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._context={},this._level=void 0,this._transaction=void 0,this._fingerprint=void 0,this._span=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n=(0,s._I)(),i=r.pi({timestamp:n},t);return this._breadcrumbs=void 0!==e&&e>=0?r.fl(this._breadcrumbs,[(0,a.Fv)(i)]).slice(-e):r.fl(this._breadcrumbs,[(0,a.Fv)(i)]),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t.prototype.applyToEvent=function(t,e){return this._extra&&Object.keys(this._extra).length&&(t.extra=r.pi({},this._extra,t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=r.pi({},this._tags,t.tags)),this._user&&Object.keys(this._user).length&&(t.user=r.pi({},this._user,t.user)),this._context&&Object.keys(this._context).length&&(t.contexts=r.pi({},this._context,t.contexts)),this._level&&(t.level=this._level),this._transaction&&(t.transaction=this._transaction),this._applyFingerprint(t),t.breadcrumbs=r.fl(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(r.fl(c(),this._eventProcessors),t,e)},t}();function c(){var t=(0,s.Rf)();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function l(t){c().push(t)}},66668:function(t,e,n){"use strict";function r(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return v(t,Error)}}function i(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function o(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function a(t){return"[object DOMException]"===Object.prototype.toString.call(t)}function s(t){return"[object String]"===Object.prototype.toString.call(t)}function u(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function c(t){return"[object Object]"===Object.prototype.toString.call(t)}function l(t){return"undefined"!=typeof Event&&v(t,Event)}function h(t){return"undefined"!=typeof Element&&v(t,Element)}function f(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function d(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function p(t){return c(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function v(t,e){try{return t instanceof e}catch(n){return!1}}n.d(e,{VZ:function(){return r},VW:function(){return i},TX:function(){return o},fm:function(){return a},HD:function(){return s},pt:function(){return u},PO:function(){return c},cO:function(){return l},kK:function(){return h},Kj:function(){return f},J8:function(){return d},Cy:function(){return p},V9:function(){return v}})},45380:function(t,e,n){"use strict";n.d(e,{k:function(){return s}});var r=n(28667),i=(0,r.Rf)(),o="Sentry Logger ",a=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&(0,r.Cf)(function(){i.console.log(o+"[Log]: "+t.join(" "))})},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&(0,r.Cf)(function(){i.console.warn(o+"[Warn]: "+t.join(" "))})},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&(0,r.Cf)(function(){i.console.error(o+"[Error]: "+t.join(" "))})},t}();i.__SENTRY__=i.__SENTRY__||{};var s=i.__SENTRY__.logger||(i.__SENTRY__.logger=new a)},28667:function(t,e,n){"use strict";n.d(e,{l$:function(){return i},KV:function(){return o},Rf:function(){return s},DM:function(){return u},en:function(){return c},jH:function(){return l},Cf:function(){return h},Db:function(){return f},EG:function(){return d},l4:function(){return p},Rt:function(){return v},_I:function(){return y},JY:function(){return m},$P:function(){return w}});var r=n(66668);function i(t,e){return t.require(e)}function o(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var a={};function s(){return o()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:a}function u(){var t=s(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}function c(t){if(!t)return{};var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return e?{host:e[4],path:e[5],protocol:e[2],relative:e[5]+(e[6]||"")+(e[8]||"")}:{}}function l(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function h(t){var e=s();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach(function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)});var i=t();return Object.keys(r).forEach(function(t){n[t]=r[t]}),i}function f(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function d(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach(function(n){t.exception.values[0].mechanism[n]=e[n]})}catch(n){}}function p(){try{return document.location.href}catch(t){return""}}function v(t){try{for(var e=t,n=[],r=0,i=0,o=" > ".length,a=void 0;e&&r++<5&&!("html"===(a=g(e))||r>1&&i+n.length*o+a.length>=80);)n.push(a),i+=a.length,e=e.parentNode;return n.reverse().join(" > ")}catch(s){return"<unknown>"}}function g(t){var e,n,i,o,a,s=t,u=[];if(!s||!s.tagName)return"";if(u.push(s.tagName.toLowerCase()),s.id&&u.push("#"+s.id),(e=s.className)&&(0,r.HD)(e))for(n=e.split(/\s+/),a=0;a<n.length;a++)u.push("."+n[a]);var c=["type","name","title","alt"];for(a=0;a<c.length;a++)(o=s.getAttribute(i=c[a]))&&u.push("["+i+'="'+o+'"]');return u.join("")}function y(){return(new Date).getTime()/1e3}function m(t,e){if(!e)return 6e4;var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?6e4:r-t}var b="<anonymous>";function w(t){try{return t&&"function"==typeof t&&t.name||b}catch(e){return b}}},43919:function(t,e,n){"use strict";n.d(e,{zf:function(){return p},hl:function(){return s},Fv:function(){return d},Qy:function(){return l},_j:function(){return u}});var r=n(66668),i=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t)return!0;return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}},t}(),o=n(28667),a=n(50031);function s(t,e,n){if(e in t){var r=t[e],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(o){}t[e]=i}}function u(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}function c(t){if((0,r.VZ)(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}if((0,r.cO)(t)){var a=t,s={};s.type=a.type;try{s.target=(0,r.kK)(a.target)?(0,o.Rt)(a.target):Object.prototype.toString.call(a.target)}catch(u){s.target="<unknown>"}try{s.currentTarget=(0,r.kK)(a.currentTarget)?(0,o.Rt)(a.currentTarget):Object.prototype.toString.call(a.currentTarget)}catch(u){s.currentTarget="<unknown>"}for(var i in"undefined"!=typeof CustomEvent&&(0,r.V9)(t,CustomEvent)&&(s.detail=a.detail),a)Object.prototype.hasOwnProperty.call(a,i)&&(s[i]=a);return s}return t}function l(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r,i=d(t,e);return r=JSON.stringify(i),~-encodeURI(r).split(/%..|./).length>n?l(t,e-1,n):i}function h(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":(0,r.Cy)(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+(0,o.$P)(t)+"]":t}function f(t,e,n,o){if(void 0===n&&(n=1/0),void 0===o&&(o=new i),0===n)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var n=h(t);return(0,r.pt)(n)?n:e}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var a=h(e,t);if((0,r.pt)(a))return a;var s=c(e),u=Array.isArray(e)?[]:{};if(o.memoize(e))return"[Circular ~]";for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=f(l,s[l],n-1,o));return o.unmemoize(e),u}function d(t,e){try{return JSON.parse(JSON.stringify(t,function(t,n){return f(t,n,e)}))}catch(n){return"**non-serializable**"}}function p(t,e){void 0===e&&(e=40);var n=Object.keys(c(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return(0,a.$G)(n[0],e);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:(0,a.$G)(i,e)}return""}},50031:function(t,e,n){"use strict";n.d(e,{$G:function(){return i},nK:function(){return o},zC:function(){return a}});var r=n(66668);function i(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function o(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var i=t[r];try{n.push(String(i))}catch(o){n.push("[value cannot be serialized]")}}return n.join(e)}function a(t,e){return(0,r.Kj)(e)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e)}},44495:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r,i=n(66668);!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(r||(r={}));var o=function(){function t(t){var e=this;this._state=r.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(r.RESOLVED,t)},this._reject=function(t){e._setResult(r.REJECTED,t)},this._setResult=function(t,n){e._state===r.PENDING&&((0,i.J8)(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){e._state!==r.PENDING&&(e._handlers.forEach(e._state===r.REJECTED?function(t){t.onrejected&&t.onrejected(e._value)}:function(t){t.onfulfilled&&t.onfulfilled(e._value)}),e._handlers=[])};try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}return t.prototype.toString=function(){return"[object SyncPromise]"},t.resolve=function(e){return new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.all=function(e){return new t(function(n,r){if(Array.isArray(e))if(0!==e.length){var i=e.length,o=[];e.forEach(function(e,a){t.resolve(e).then(function(t){o[a]=t,0==(i-=1)&&n(o)}).then(null,r)})}else n([]);else r(new TypeError("Promise.all requires an array as input."))})},t.prototype.then=function(e,n){var r=this;return new t(function(t,i){r._attachHandler({onfulfilled:function(n){if(e)try{return void t(e(n))}catch(r){return void i(r)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(r){return void i(r)}else i(e)}})})},t.prototype.catch=function(t){return this.then(function(t){return t},t)},t.prototype.finally=function(e){var n=this;return new t(function(t,r){var i,o;return n.then(function(t){o=!1,i=t,e&&e()},function(t){o=!0,i=t,e&&e()}).then(function(){o?r(i):t(i)})})},t}()},25656:function(){!function(t){"use strict";var e={objectMaxDepth:5,urlErrorParamsEnabled:!0};function n(t){if(!U(t))return e;j(t.objectMaxDepth)&&(e.objectMaxDepth=r(t.objectMaxDepth)?t.objectMaxDepth:NaN),j(t.urlErrorParamsEnabled)&&J(t.urlErrorParamsEnabled)&&(e.urlErrorParamsEnabled=t.urlErrorParamsEnabled)}function r(t){return q(t)&&t>0}function i(t,n){n=n||Error;var r="https://errors.angularjs.org/1.8.2/",i=r.replace(".","\\.")+"[\\s\\S]*",o=new RegExp(i,"g");return function(){var i,a,s=arguments[0],u=arguments[1],c="["+(t?t+":":"")+s+"] ",l=ht(arguments,2).map(function(t){return qt(t,e.objectMaxDepth)});if(c+=u.replace(/\{\d+\}/g,function(t){var e=+t.slice(1,-1);return e<l.length?l[e].replace(o,""):t}),c+="\n"+r+(t?t+"/":"")+s,e.urlErrorParamsEnabled)for(a=0,i="?";a<l.length;a++,i="&")c+=i+"p"+a+"="+encodeURIComponent(l[a]);return new n(c)}}var o,a,s,u,c=/^\/(.+)\/([a-z]*)$/,l=Object.prototype.hasOwnProperty,h=function(t){return B(t)?t.toLowerCase():t},f=function(t){return B(t)?t.toUpperCase():t},d=[].slice,p=[].splice,v=[].push,g=Object.prototype.toString,y=Object.getPrototypeOf,m=i("ng"),b=t.angular||(t.angular={}),w=0;function _(t){if(null==t||W(t))return!1;if(Z(t)||B(t)||a&&t instanceof a)return!0;var e="length"in Object(t)&&t.length;return q(e)&&(e>=0&&e-1 in t||"function"==typeof t.item)}function S(t,e,n){var r,i;if(t)if(z(t))for(r in t)"prototype"!==r&&"length"!==r&&"name"!==r&&t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else if(Z(t)||_(t)){var o="object"!=typeof t;for(r=0,i=t.length;r<i;r++)(o||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==S)t.forEach(e,n,t);else if(F(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)l.call(t,r)&&e.call(n,t[r],r,t);return t}function k(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function E(t){return function(e,n){t(n,e)}}function x(){return++w}function T(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function I(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var a=e[i];if(U(a)||z(a))for(var s=Object.keys(a),u=0,c=s.length;u<c;u++){var l=s[u],h=a[l];n&&U(h)?V(h)?t[l]=new Date(h.valueOf()):G(h)?t[l]=new RegExp(h):h.nodeName?t[l]=h.cloneNode(!0):et(h)?t[l]=h.clone():"__proto__"!==l&&(U(t[l])||(t[l]=Z(h)?[]:{}),I(t[l],[h],!0)):t[l]=h}}return T(t,r),t}function C(t){return I(t,d.call(arguments,1),!1)}function A(t){return I(t,d.call(arguments,1),!0)}function M(t){return parseInt(t,10)}o=t.document.documentMode;var R=Number.isNaN||function(t){return t!=t};function O(t,e){return C(Object.create(t),e)}function P(){}function N(t){return t}function D(t){return function(){return t}}function $(t){return z(t.toString)&&t.toString!==g}function L(t){return void 0===t}function j(t){return void 0!==t}function U(t){return null!==t&&"object"==typeof t}function F(t){return null!==t&&"object"==typeof t&&!y(t)}function B(t){return"string"==typeof t}function q(t){return"number"==typeof t}function V(t){return"[object Date]"===g.call(t)}function Z(t){return Array.isArray(t)||t instanceof Array}function H(t){switch(g.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}}function z(t){return"function"==typeof t}function G(t){return"[object RegExp]"===g.call(t)}function W(t){return t&&t.window===t}function K(t){return t&&t.$evalAsync&&t.$watch}function J(t){return"boolean"==typeof t}function Y(t){return t&&z(t.then)}P.$inject=[],N.$inject=[];var X=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,Q=function(t){return B(t)?t.trim():t},tt=function(t){return t.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function et(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function nt(t){return h(t.nodeName||t[0]&&t[0].nodeName)}function rt(t,e){return-1!==Array.prototype.indexOf.call(t,e)}function it(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),n}function ot(t,e,n){var i,o=[],a=[];if(n=r(n)?n:NaN,e){if((i=e)&&q(i.length)&&X.test(g.call(i))||"[object ArrayBuffer]"===g.call(e))throw m("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw m("cpi","Can't copy! Source and destination are identical.");return Z(e)?e.length=0:S(e,function(t,n){"$$hashKey"!==n&&delete e[n]}),o.push(t),a.push(e),s(t,e,n)}return u(t,n);function s(t,e,n){if(--n<0)return"...";var r,i=e.$$hashKey;if(Z(t))for(var o=0,a=t.length;o<a;o++)e.push(u(t[o],n));else if(F(t))for(r in t)e[r]=u(t[r],n);else if(t&&"function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&(e[r]=u(t[r],n));else for(r in t)l.call(t,r)&&(e[r]=u(t[r],n));return T(e,i),e}function u(t,e){if(!U(t))return t;var n=o.indexOf(t);if(-1!==n)return a[n];if(W(t)||K(t))throw m("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,i=function(t){switch(g.call(t)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new t.constructor(u(t.buffer),t.byteOffset,t.length);case"[object ArrayBuffer]":if(!t.slice){var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}return t.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new t.constructor(t.valueOf());case"[object RegExp]":var n=new RegExp(t.source,t.toString().match(/[^/]*$/)[0]);return n.lastIndex=t.lastIndex,n;case"[object Blob]":return new t.constructor([t],{type:t.type})}if(z(t.cloneNode))return t.cloneNode(!0)}(t);return void 0===i&&(i=Z(t)?[]:Object.create(y(t)),r=!0),o.push(t),a.push(i),r?s(t,i,e):i}}function at(t,e){return t===e||t!=t&&e!=e}function st(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;var n,r,i,o=typeof t;if(o===typeof e&&"object"===o){if(!Z(t)){if(V(t))return!!V(e)&&at(t.getTime(),e.getTime());if(G(t))return!!G(e)&&t.toString()===e.toString();if(K(t)||K(e)||W(t)||W(e)||Z(e)||V(e)||G(e))return!1;for(r in i=jt(),t)if("$"!==r.charAt(0)&&!z(t[r])){if(!st(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!(r in i)&&"$"!==r.charAt(0)&&j(e[r])&&!z(e[r]))return!1;return!0}if(!Z(e))return!1;if((n=t.length)===e.length){for(r=0;r<n;r++)if(!st(t[r],e[r]))return!1;return!0}}return!1}var ut=function e(){if(!j(e.rules)){var n=t.document.querySelector("[ng-csp]")||t.document.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");e.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else e.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(t){return!0}}(),noInlineStyle:!1}}return e.rules},ct=function e(){if(j(e.name_))return e.name_;var n,r,i,o,a=xt.length;for(r=0;r<a;++r)if(n=t.document.querySelector("["+(i=xt[r]).replace(":","\\:")+"jq]")){o=n.getAttribute(i+"jq");break}return e.name_=o};function lt(t,e,n){return t.concat(d.call(e,n))}function ht(t,e){return d.call(t,e||0)}function ft(t,e){var n=arguments.length>2?ht(arguments,2):[];return!z(e)||e instanceof RegExp?e:n.length?function(){return e.apply(t,arguments.length?lt(n,arguments,0):n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function dt(e,n){var r=n;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?r=void 0:W(n)?r="$WINDOW":n&&t.document===n?r="$DOCUMENT":K(n)&&(r="$SCOPE"),r}function pt(t,e){if(!L(t))return q(e)||(e=e?2:null),JSON.stringify(t,dt,e)}function vt(t){return B(t)?JSON.parse(t):t}var gt=/:/g;function yt(t,e){t=t.replace(gt,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return R(n)?e:n}function mt(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}function bt(t,e,n){n=n?-1:1;var r=t.getTimezoneOffset();return mt(t,n*(yt(e,r)-r))}function wt(t){t=a(t).clone().empty();var e=a("<div></div>").append(t).html();try{return t[0].nodeType===Ft?h(e):e.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(t,e){return"<"+h(e)})}catch(n){return h(e)}}function _t(t){try{return decodeURIComponent(t)}catch(e){}}function St(t){var e={};return S((t||"").split("&"),function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),-1!==(n=t.indexOf("="))&&(r=t.substring(0,n),i=t.substring(n+1)),j(r=_t(r))&&(i=!j(i)||_t(i),l.call(e,r)?Z(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))}),e}function kt(t){return Et(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Et(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}var xt=["ng-","data-ng-","ng:","x-ng-"],Tt=function(e){var n=e.currentScript;if(!n)return!0;if(!(n instanceof t.HTMLScriptElement||n instanceof t.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(t){if(!t)return!0;if(!t.value)return!1;var n=e.createElement("a");if(n.href=t.value,e.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(t.document);function It(e,n,r){U(r)||(r={}),r=C({strictDi:!1},r);var i=function(){if((e=a(e)).injector()){var i=e[0]===t.document?"document":wt(e);throw m("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(t){t.value("$rootElement",e)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),n.unshift("ng");var o=Je(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(t&&o.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(o,"")),t&&!s.test(t.name))return i();t.name=t.name.replace(s,""),b.resumeBootstrap=function(t){return S(t,function(t){n.push(t)}),i()},z(b.resumeDeferredBootstrap)&&b.resumeDeferredBootstrap()}function Ct(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function At(t){var e=b.element(t).injector();if(!e)throw m("test","no injector found for element argument to getTestability");return e.get("$$testability")}var Mt=/[A-Z]/g;function Rt(t,e){return e=e||"_",t.replace(Mt,function(t,n){return(n?e:"")+t.toLowerCase()})}var Ot=!1;function Pt(){he.legacyXHTMLReplacement=!0}function Nt(t,e,n){if(!t)throw m("areq","Argument '{0}' is {1}",e||"?",n||"required");return t}function Dt(t,e,n){return n&&Z(t)&&(t=t[t.length-1]),Nt(z(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function $t(t,e){if("hasOwnProperty"===t)throw m("badname","hasOwnProperty is not a valid {0} name",e)}function Lt(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=a(d.call(t,0,i))),e.push(n));return e||t}function jt(){return Object.create(null)}function Ut(t){if(null==t)return"";switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=!$(t)||Z(t)||V(t)?pt(t):t.toString()}return t}var Ft=3;function Bt(t,e){if(Z(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(U(t))for(var i in e=e||{},t)"$"===i.charAt(0)&&"$"===i.charAt(1)||(e[i]=t[i]);return e||t}function qt(t,e){return"function"==typeof t?t.toString().replace(/ \{[\s\S]*$/,""):L(t)?"undefined":"string"!=typeof t?function(t,e){var n=[];return r(e)&&(t=b.copy(t,null,e)),JSON.stringify(t,function(t,e){if(U(e=dt(t,e))){if(n.indexOf(e)>=0)return"...";n.push(e)}return e})}(t,e):t}var Vt={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};he.expando="ng339";var Zt=he.cache={},Ht=1;he._data=function(t){return this.cache[t[this.expando]]||{}};var zt=/-([a-z])/g,Gt=/^-ms-/,Wt={mouseleave:"mouseout",mouseenter:"mouseover"},Kt=i("jqLite");function Jt(t,e){return e.toUpperCase()}function Yt(t){return t.replace(zt,Jt)}var Xt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Qt=/<|&#?\w+;/,te=/<([\w:-]+)/,ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ne={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};ne.tbody=ne.tfoot=ne.colgroup=ne.caption=ne.thead,ne.th=ne.td;var re={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(var ie in ne){var oe=ne[ie],ae=oe.slice().reverse();re[ie]=[ae.length,"<"+ae.join("><")+">","</"+oe.join("></")+">"]}function se(t){return!Qt.test(t)}function ue(t){var e=t.nodeType;return 1===e||!e||9===e}function ce(e,n){var r,i,a,s,u,c=n.createDocumentFragment(),l=[];if(se(e))l.push(n.createTextNode(e));else{if(r=c.appendChild(n.createElement("div")),i=(te.exec(e)||["",""])[1].toLowerCase(),s=he.legacyXHTMLReplacement?e.replace(ee,"<$1></$2>"):e,o<10)for(r.innerHTML=(a=re[i]||re._default)[1]+s+a[2],u=a[0];u--;)r=r.firstChild;else{for(u=(a=ne[i]||[]).length;--u>-1;)r.appendChild(t.document.createElement(a[u])),r=r.firstChild;r.innerHTML=s}l=lt(l,r.childNodes),(r=c.firstChild).textContent=""}return c.textContent="",c.innerHTML="",S(l,function(t){c.appendChild(t)}),c}re.optgroup=re.option;var le=t.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))};function he(e){if(e instanceof he)return e;var n,r,i,o;if(B(e)&&(e=Q(e),n=!0),!(this instanceof he)){if(n&&"<"!==e.charAt(0))throw Kt("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new he(e)}n?ke(this,(i=i||t.document,(o=Xt.exec(r=e))?[i.createElement(o[1])]:(o=ce(r,i))?o.childNodes:[])):z(e)?Ce(e):ke(this,e)}function fe(t){return t.cloneNode(!0)}function de(t,e){!e&&ue(t)&&a.cleanData([t]),t.querySelectorAll&&a.cleanData(t.querySelectorAll("*"))}function pe(t){var e;for(e in t)return!1;return!0}function ve(t){var e=t.ng339,n=e&&Zt[e],r=n&&n.events,i=n&&n.data;i&&!pe(i)||r&&!pe(r)||(delete Zt[e],t.ng339=void 0)}function ge(t,e,n,r){if(j(r))throw Kt("offargs","jqLite#off() does not support the `selector` argument");var i=me(t),o=i&&i.events,a=i&&i.handle;if(a){if(e){var s=function(e){var r=o[e];j(n)&&it(r||[],n),j(n)&&r&&r.length>0||(t.removeEventListener(e,a),delete o[e])};S(e.split(" "),function(t){s(t),Wt[t]&&s(Wt[t])})}else for(e in o)"$destroy"!==e&&t.removeEventListener(e,a),delete o[e];ve(t)}}function ye(t,e){var n=t.ng339,r=n&&Zt[n];r&&(e?delete r.data[e]:r.data={},ve(t))}function me(t,e){var n=t.ng339,r=n&&Zt[n];return e&&!r&&(t.ng339=n=++Ht,r=Zt[n]={events:{},data:{},handle:void 0}),r}function be(t,e,n){if(ue(t)){var r,i=j(n),o=!i&&e&&!U(e),a=!e,s=me(t,!o),u=s&&s.data;if(i)u[Yt(e)]=n;else{if(a)return u;if(o)return u&&u[Yt(e)];for(r in e)u[Yt(r)]=e[r]}}}function we(t,e){return!!t.getAttribute&&(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")>-1}function _e(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;S(e.split(" "),function(t){t=Q(t),r=r.replace(" "+t+" "," ")}),r!==n&&t.setAttribute("class",Q(r))}}function Se(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),r=n;S(e.split(" "),function(t){t=Q(t),-1===r.indexOf(" "+t+" ")&&(r+=t+" ")}),r!==n&&t.setAttribute("class",Q(r))}}function ke(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ee(t,e){return xe(t,"$"+(e||"ngController")+"Controller")}function xe(t,e,n){9===t.nodeType&&(t=t.documentElement);for(var r=Z(e)?e:[e];t;){for(var i=0,o=r.length;i<o;i++)if(j(n=a.data(t,r[i])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function Te(t){for(de(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ie(t,e){e||de(t);var n=t.parentNode;n&&n.removeChild(t)}function Ce(e){function n(){t.document.removeEventListener("DOMContentLoaded",n),t.removeEventListener("load",n),e()}"complete"===t.document.readyState?t.setTimeout(e):(t.document.addEventListener("DOMContentLoaded",n),t.addEventListener("load",n))}var Ae=he.prototype={ready:Ce,toString:function(){var t=[];return S(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return a(t>=0?this[t]:this[this.length+t])},length:0,push:v,sort:[].sort,splice:[].splice},Me={};S("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(t){Me[h(t)]=t});var Re={};S("input,select,option,textarea,button,form,details".split(","),function(t){Re[t]=!0});var Oe={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function Pe(t,e){var n=Me[e.toLowerCase()];return n&&Re[nt(t)]&&n}function Ne(t,e,n){n.call(t,e)}function De(t,e,n){var r=e.relatedTarget;r&&(r===t||le.call(t,r))||n.call(t,e)}function $e(){this.$get=function(){return C(he,{hasClass:function(t,e){return t.attr&&(t=t[0]),we(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Se(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),_e(t,e)}})}}function Le(t,e){var n=t&&t.$$hashKey;if(n)return"function"==typeof n&&(n=t.$$hashKey()),n;var r=typeof t;return"function"===r||"object"===r&&null!==t?t.$$hashKey=r+":"+(e||x)():r+":"+t}S({data:be,removeData:ye,hasData:function(t){for(var e in Zt[t.ng339])return!0;return!1},cleanData:function(t){for(var e=0,n=t.length;e<n;e++)ye(t[e]),ge(t[e])}},function(t,e){he[e]=t}),S({data:be,inheritedData:xe,scope:function(t){return a.data(t,"$scope")||xe(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return a.data(t,"$isolateScope")||a.data(t,"$isolateScopeNoTemplate")},controller:Ee,injector:function(t){return xe(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:we,css:function(t,e,n){if(e=function(t){return Yt(t.replace(Gt,"ms-"))}(e),!j(n))return t.style[e];t.style[e]=n},attr:function(t,e,n){var r,i=t.nodeType;if(i!==Ft&&2!==i&&8!==i&&t.getAttribute){var o=h(e),a=Me[o];if(!j(n))return r=t.getAttribute(e),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?t.removeAttribute(e):t.setAttribute(e,a?o:n)}},prop:function(t,e,n){if(!j(n))return t[e];t[e]=n},text:function(){return t.$dv="",t;function t(t,e){if(L(e)){var n=t.nodeType;return 1===n||n===Ft?t.textContent:""}t.textContent=e}}(),val:function(t,e){if(L(e)){if(t.multiple&&"select"===nt(t)){var n=[];return S(t.options,function(t){t.selected&&n.push(t.value||t.text)}),n}return t.value}t.value=e},html:function(t,e){if(L(e))return t.innerHTML;de(t,!0),t.innerHTML=e},empty:Te},function(t,e){he.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==Te&&L(2===t.length&&t!==we&&t!==Ee?e:n)){if(U(e)){for(r=0;r<o;r++)if(t===be)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(var a=t.$dv,s=L(a)?Math.min(o,1):o,u=0;u<s;u++){var c=t(this[u],e,n);a=a?a+c:c}return a}for(r=0;r<o;r++)t(this[r],e,n);return this}}),S({removeData:ye,on:function(t,e,n,r){if(j(r))throw Kt("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ue(t)){var i=me(t,!0),o=i.events,a=i.handle;a||(a=i.handle=function(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(L(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Ne;o>1&&(i=Bt(i));for(var u=0;u<o;u++)n.isImmediatePropagationStopped()||s(t,n,i[u])}};return n.elem=t,n}(t,o));for(var s=e.indexOf(" ")>=0?e.split(" "):[e],u=s.length,c=function(e,r,i){var s=o[e];s||((s=o[e]=[]).specialHandlerWrapper=r,"$destroy"===e||i||t.addEventListener(e,a)),s.push(n)};u--;)Wt[e=s[u]]?(c(Wt[e],De),c(e,void 0,!0)):c(e)}},off:ge,one:function(t,e,n){(t=a(t)).on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;de(t),S(new he(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return S(t.childNodes,function(t){1===t.nodeType&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(1===n||11===n)for(var r=0,i=(e=new he(e)).length;r<i;r++)t.appendChild(e[r])},prepend:function(t,e){if(1===t.nodeType){var n=t.firstChild;S(new he(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){var n,r,i;n=t,r=a(e).eq(0).clone()[0],(i=n.parentNode)&&i.replaceChild(r,n),r.appendChild(n)},remove:Ie,detach:function(t){Ie(t,!0)},after:function(t,e){var n=t,r=t.parentNode;if(r)for(var i=0,o=(e=new he(e)).length;i<o;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:Se,removeClass:_e,toggleClass:function(t,e,n){e&&S(e.split(" "),function(e){var r=n;L(r)&&(r=!we(t,e)),(r?Se:_e)(t,e)})},parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:fe,triggerHandler:function(t,e,n){var r,i,o,a=e.type||e,s=me(t),u=s&&s.events,c=u&&u[a];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:P,type:a,target:t},e.type&&(r=C(r,e)),i=Bt(c),o=n?[r].concat(n):[r],S(i,function(e){r.isImmediatePropagationStopped()||e.apply(t,o)}))}},function(t,e){he.prototype[e]=function(e,n,r){for(var i,o=0,s=this.length;o<s;o++)L(i)?j(i=t(this[o],e,n,r))&&(i=a(i)):ke(i,t(this[o],e,n,r));return j(i)?i:this}}),he.prototype.bind=he.prototype.on,he.prototype.unbind=he.prototype.off;var je=Object.create(null);function Ue(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}Ue.prototype={_idx:function(t){return t!==this._lastKey&&(this._lastKey=t,this._lastIndex=this._keys.indexOf(t)),this._lastIndex},_transformKey:function(t){return R(t)?je:t},get:function(t){t=this._transformKey(t);var e=this._idx(t);if(-1!==e)return this._values[e]},has:function(t){return t=this._transformKey(t),-1!==this._idx(t)},set:function(t,e){t=this._transformKey(t);var n=this._idx(t);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=t,this._values[n]=e},delete:function(t){t=this._transformKey(t);var e=this._idx(t);return-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Fe=Ue,Be=[function(){this.$get=[function(){return Fe}]}],qe=/^([^(]+?)=>/,Ve=/^[^(]*\(\s*([^)]*)\)/m,Ze=/,/,He=/^\s*(_?)(\S+?)\1\s*$/,ze=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ge=i("$injector");function We(t){return Function.prototype.toString.call(t)}function Ke(t){var e=We(t).replace(ze,"");return e.match(qe)||e.match(Ve)}function Je(t,e){e=!0===e;var n={},r="Provider",i=[],a=new Fe,s={$provide:{provider:p(v),factory:p(y),service:p(function(t,e){return y(t,["$injector",function(t){return t.instantiate(e)}])}),value:p(function(t,e){return y(t,D(e),!1)}),constant:p(function(t,e){$t(t,"constant"),s[t]=e,l[t]=e}),decorator:function(t,e){var n=c.get(t+r),i=n.$get;n.$get=function(){var t=f.invoke(i,n);return f.invoke(e,null,{$delegate:t})}}}},c=s.$injector=w(s,function(t,e){throw b.isString(e)&&i.push(e),Ge("unpr","Unknown provider: {0}",i.join(" <- "))}),l={},h=w(l,function(t,e){var n=c.get(t+r,e);return f.invoke(n.$get,n,void 0,t)}),f=h;s.$injectorProvider={$get:D(h)},f.modules=c.modules=jt();var d=m(t);return(f=h.get("$injector")).strictDi=e,S(d,function(t){t&&f.invoke(t)}),f.loadNewModules=function(t){S(m(t),function(t){t&&f.invoke(t)})},f;function p(t){return function(e,n){if(!U(e))return t(e,n);S(e,E(t))}}function v(t,e){if($t(t,"service"),(z(e)||Z(e))&&(e=c.instantiate(e)),!e.$get)throw Ge("pget","Provider '{0}' must define $get factory method.",t);return s[t+r]=e}function g(t,e){return function(){var n=f.invoke(e,this);if(L(n))throw Ge("undef","Provider '{0}' must return a value from $get factory method.",t);return n}}function y(t,e,n){return v(t,{$get:!1!==n?g(t,e):e})}function m(t){Nt(L(t)||Z(t),"modulesToLoad","not an array");var e,n=[];return S(t,function(t){if(!a.get(t)){a.set(t,!0);try{B(t)?(e=u(t),f.modules[t]=e,n=n.concat(m(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):z(t)||Z(t)?n.push(c.invoke(t)):Dt(t,"module")}catch(i){throw Z(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1===i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Ge("modulerr","Failed to instantiate module {0} due to:\n{1}",t,i.stack||i.message||i)}}function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=c.get(r[0]);i[r[1]].apply(i,r[2])}}}),n}function w(t,a){function u(e,r){if(t.hasOwnProperty(e)){if(t[e]===n)throw Ge("cdep","Circular dependency found: {0}",e+" <- "+i.join(" <- "));return t[e]}try{return i.unshift(e),t[e]=n,t[e]=a(e,r),t[e]}catch(o){throw t[e]===n&&delete t[e],o}finally{i.shift()}}function c(t,n,r){for(var i=[],o=Je.$$annotate(t,e,r),a=0,s=o.length;a<s;a++){var c=o[a];if("string"!=typeof c)throw Ge("itkn","Incorrect injection token! Expected service name as string, got {0}",c);i.push(n&&n.hasOwnProperty(c)?n[c]:u(c,r))}return i}return{invoke:function(t,e,n,r){"string"==typeof n&&(r=n,n=null);var i=c(t,n,r);return Z(t)&&(t=t[t.length-1]),function(t){if(o||"function"!=typeof t)return!1;var e=t.$$ngIsClass;return J(e)||(e=t.$$ngIsClass=/^class\b/.test(We(t))),e}(t)?(i.unshift(null),new(Function.prototype.bind.apply(t,i))):t.apply(e,i)},instantiate:function(t,e,n){var r=Z(t)?t[t.length-1]:t,i=c(t,e,n);return i.unshift(null),new(Function.prototype.bind.apply(r,i))},get:u,annotate:Je.$$annotate,has:function(e){return s.hasOwnProperty(e+r)||t.hasOwnProperty(e)}}}}function Ye(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var o=n.document;function s(t){if(t){t.scrollIntoView();var e=function(){var t=u.yOffset;if(z(t))t=t();else if(et(t)){var e=t[0];t="fixed"!==n.getComputedStyle(e).position?0:e.getBoundingClientRect().bottom}else q(t)||(t=0);return t}();if(e){var r=t.getBoundingClientRect().top;n.scrollBy(0,r-e)}}else n.scrollTo(0,0)}function u(t){var e,n,i;(t=B(t)?t:q(t)?t.toString():r.hash())?(e=o.getElementById(t))?s(e):(n=o.getElementsByName(t),i=null,Array.prototype.some.call(n,function(t){if("a"===nt(t))return i=t,!0}),(e=i)?s(e):"top"===t&&s(null)):s(null)}return e&&i.$watch(function(){return r.hash()},function(e,n){var r,o;e===n&&""===e||(r=function(){i.$evalAsync(u)},"complete"===(o=o||t).document.readyState?o.setTimeout(r):a(o).on("load",r))}),u}]}Je.$$annotate=function(t,e,n){var r,i;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw B(n)&&n||(n=t.name||function(t){var e=Ke(t);return e?"function("+(e[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(t)),Ge("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);S(Ke(t)[1].split(Ze),function(t){t.replace(He,function(t,e,n){r.push(n)})})}t.$inject=r}}else Z(t)?(Dt(t[i=t.length-1],"fn"),r=t.slice(0,i)):Dt(t,"fn",!0);return r};var Xe=i("$animate"),Qe="ng-animate";function tn(t,e){return t||e?t?e?(Z(t)&&(t=t.join(" ")),Z(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function en(t){return U(t)?t:{}}var nn=function(){this.$get=P},rn=function(){var t=new Fe,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:P,on:P,off:P,pin:P,push:function(a,s,u,c){c&&c(),(u=u||{}).from&&a.css(u.from),u.to&&a.css(u.to),(u.addClass||u.removeClass)&&function(n,a,s){var u=t.get(n)||{},c=i(u,a,!0),l=i(u,s,!1);(c||l)&&(t.set(n,u),e.push(n),1===e.length&&r.$$postDigest(o))}(a,u.addClass,u.removeClass);var l=new n;return l.complete(),l}};function i(t,e,n){var r=!1;return e&&S(e=B(e)?e.split(" "):Z(e)?e:[],function(e){e&&(r=!0,t[e]=n)}),r}function o(){S(e,function(e){var n=t.get(e);if(n){var r=function(t){B(t)&&(t=t.split(" "));var e=jt();return S(t,function(t){t.length&&(e[t]=!0)}),e}(e.attr("class")),i="",o="";S(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:o+=(o.length?" ":"")+e)}),S(e,function(t){i&&Se(t,i),o&&_e(t,o)}),t.delete(e)}}),e.length=0}}]},on=["$provide",function(t){var e=this,n=null,r=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Xe("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.customFilter=function(t){return 1===arguments.length&&(r=z(t)?t:null),r},this.classNameFilter=function(t){if(1===arguments.length&&(n=t instanceof RegExp?t:null)){var e=new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]");if(e.test(n.toString()))throw n=null,Xe("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Qe)}return n},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.cancel&&t.cancel()},enter:function(n,r,i,o){return r=r&&a(r),i=i&&a(i),e(n,r=r||i.parent(),i),t.push(n,"enter",en(o))},move:function(n,r,i,o){return r=r&&a(r),i=i&&a(i),e(n,r=r||i.parent(),i),t.push(n,"move",en(o))},leave:function(e,n){return t.push(e,"leave",en(n),function(){e.remove()})},addClass:function(e,n,r){return(r=en(r)).addClass=tn(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return(r=en(r)).removeClass=tn(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return(i=en(i)).addClass=tn(i.addClass,n),i.removeClass=tn(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return(o=en(o)).from=o.from?C(o.from,n):n,o.to=o.to?C(o.to,r):r,o.tempClasses=tn(o.tempClasses,i=i||"ng-inline-animate"),t.push(e,"animate",o)}}}]}],an=function(){this.$get=["$$rAF",function(t){var e=[];function n(n){e.push(n),e.length>1||t(function(){for(var t=0;t<e.length;t++)e[t]();e=[]})}return function(){var t=!1;return n(function(){t=!0}),function(e){t?e():n(e)}}}]},sn=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(t,e,n,r,i){function o(t){this.setHost(t);var e=n();this._doneCallbacks=[],this._tick=function(t){r()?function(t){i(t,0,!1)}(t):e(t)},this._state=0}return o.chain=function(t,e){var n=0;!function r(){n!==t.length?t[n](function(t){!1!==t?(n++,r()):e(!1)}):e(!0)}()},o.all=function(t,e){var n=0,r=!0;function i(i){r=r&&i,++n===t.length&&e(r)}S(t,function(t){t.done(i)})},o.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:P,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},catch:function(t){return this.getPromise().catch(t)},finally:function(t){return this.getPromise().finally(t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._tick(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(S(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},o}]},un=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(t,e,n){return function(e,r){var i=r||{};i.$$prepared||(i=ot(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(e.css(i.from),i.from=null);var o,a=new n;return{start:s,end:s};function s(){return t(function(){i.addClass&&(e.addClass(i.addClass),i.addClass=null),i.removeClass&&(e.removeClass(i.removeClass),i.removeClass=null),i.to&&(e.css(i.to),i.to=null),o||a.complete(),o=!0}),a}}}]};function cn(t,e,n,r,i){var o=this,s=t.location,u=t.history,c=t.setTimeout,l=t.clearTimeout,h={},f=i(n);o.isMock=!1,o.$$completeOutstandingRequest=f.completeTask,o.$$incOutstandingRequestCount=f.incTaskCount,o.notifyWhenNoOutstandingRequests=f.notifyWhenNoPendingTasks;var d,p,v=s.href,g=e.find("base"),y=null,m=r.history?function(){try{return u.state}catch(t){}}:P;E(),o.url=function(e,n,i){if(L(i)&&(i=null),s!==t.location&&(s=t.location),u!==t.history&&(u=t.history),e){var a=p===i;if(e=si(e).href,v===e&&(!r.history||a))return o;var c=v&&ar(v)===ar(e);return v=e,p=i,!r.history||c&&a?(c||(y=e),n?s.replace(e):c?s.hash=function(t){var e=t.indexOf("#");return-1===e?"":t.substr(e)}(e):s.href=e,s.href!==e&&(y=e)):(u[n?"replaceState":"pushState"](i,"",e),E()),y&&(y=e),o}return function(t){return t.replace(/#$/,"")}(y||s.href)},o.state=function(){return d};var b=[],w=!1;function _(){y=null,x()}var k=null;function E(){st(d=L(d=m())?null:d,k)&&(d=k),k=d,p=d}function x(){var t=p;E(),v===o.url()&&t===d||(v=o.url(),p=d,S(b,function(t){t(o.url(),d)}))}o.onUrlChange=function(e){return w||(r.history&&a(t).on("popstate",_),a(t).on("hashchange",_),w=!0),b.push(e),e},o.$$applicationDestroyed=function(){a(t).off("hashchange popstate",_)},o.$$checkUrlChange=x,o.baseHref=function(){var t=g.attr("href");return t?t.replace(/^(https?:)?\/\/[^/]*/,""):""},o.defer=function(t,e,n){var r;return e=e||0,f.incTaskCount(n=n||f.DEFAULT_TASK_TYPE),r=c(function(){delete h[r],f.completeTask(t,n)},e),h[r]=n,r},o.defer.cancel=function(t){if(h.hasOwnProperty(t)){var e=h[t];return delete h[t],l(t),f.completeTask(P,e),!0}return!1}}function ln(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(t,e,n,r,i){return new cn(t,r,e,n,i)}]}function hn(){this.$get=function(){var t={};function e(e,n){if(e in t)throw i("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var r=0,o=C({},n,{id:e}),a=jt(),s=n&&n.capacity||Number.MAX_VALUE,u=jt(),c=null,l=null;return t[e]={put:function(t,e){if(!L(e))return s<Number.MAX_VALUE&&h(u[t]||(u[t]={key:t})),t in a||r++,a[t]=e,r>s&&this.remove(l.key),e},get:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;h(e)}return a[t]},remove:function(t){if(s<Number.MAX_VALUE){var e=u[t];if(!e)return;e===c&&(c=e.p),e===l&&(l=e.n),f(e.n,e.p),delete u[t]}t in a&&(delete a[t],r--)},removeAll:function(){a=jt(),r=0,u=jt(),c=l=null},destroy:function(){a=null,o=null,u=null,delete t[e]},info:function(){return C({},o,{size:r})}};function h(t){t!==c&&(l?l===t&&(l=t.n):l=t,f(t.n,t.p),f(t,c),(c=t).n=null)}function f(t,e){t!==e&&(t&&(t.p=e),e&&(e.n=t))}}return e.info=function(){var e={};return S(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function fn(){this.$get=["$cacheFactory",function(t){return t("templates")}]}var dn=i("$compile"),pn=new function(){};function vn(e,n){var r={},i="Directive",s=/^\s*directive:\s*([\w-]+)\s+(.*)$/,u=/(([\w-]+)(?::([^;]+))?;?)/,c=function(t){var e,n={},r="ngSrc,ngSrcset,src,srcset".split(",");for(e=0;e<r.length;e++)n[r[e]]=!0;return n}(),f=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,d=/^(on[a-z]+|formaction)$/,p=jt();function v(t,e,n){var r=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,i=jt();return S(t,function(t,o){if((t=t.trim())in p)i[o]=p[t];else{var a=t.match(r);if(!a)throw dn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(p[t]=i[o])}}),i}function y(t,e){var n={isolateScope:null,bindToController:null};if(U(t.scope)&&(!0===t.bindToController?(n.bindToController=v(t.scope,e,!0),n.isolateScope={}):n.isolateScope=v(t.scope,e,!1)),U(t.bindToController)&&(n.bindToController=v(t.bindToController,e,!0)),n.bindToController&&!t.controller)throw dn("noctrl","Cannot bind to controller without directive '{0}'s controller.",e);return n}this.directive=function t(n,o){return Nt(n,"name"),$t(n,"directive"),B(n)?(function(t){var e=t.charAt(0);if(!e||e!==h(e))throw dn("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",t);if(t!==t.trim())throw dn("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",t)}(n),Nt(o,"directiveFactory"),r.hasOwnProperty(n)||(r[n]=[],e.factory(n+i,["$injector","$exceptionHandler",function(t,e){var i=[];return S(r[n],function(r,o){try{var a=t.invoke(r);z(a)?a={compile:D(a)}:!a.compile&&a.link&&(a.compile=D(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=function(t){var e=t.require||t.controller&&t.name;return!Z(e)&&U(e)&&S(e,function(t,n){var r=t.match(f);t.substring(r[0].length)||(e[n]=r[0]+n)}),e}(a),a.restrict=function(t,e){if(t&&(!B(t)||!/[EACM]/.test(t)))throw dn("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",t,e);return t||"EA"}(a.restrict,n),a.$$moduleName=r.$$moduleName,i.push(a)}catch(s){e(s)}}),i}])),r[n].push(o)):S(n,E(t)),this},this.component=function t(e,n){if(!B(e))return S(e,E(ft(this,t))),this;var r=n.controller||function(){};function i(t){function e(e){return z(e)||Z(e)?function(n,r){return t.invoke(e,this,{$element:n,$attrs:r})}:e}var i=n.template||n.templateUrl?n.template:"",o={controller:r,controllerAs:En(n.controller)||n.controllerAs||"$ctrl",template:e(i),templateUrl:e(n.templateUrl),transclude:n.transclude,scope:{},bindToController:n.bindings||{},restrict:"E",require:n.require};return S(n,function(t,e){"$"===e.charAt(0)&&(o[e]=t)}),o}return S(n,function(t,e){"$"===e.charAt(0)&&(i[e]=t,z(r)&&(r[e]=t))}),i.$inject=["$injector"],this.directive(e,i)},this.aHrefSanitizationTrustedUrlList=function(t){return j(t)?(n.aHrefSanitizationTrustedUrlList(t),this):n.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(t){this.aHrefSanitizationTrustedUrlList=t}}),this.imgSrcSanitizationTrustedUrlList=function(t){return j(t)?(n.imgSrcSanitizationTrustedUrlList(t),this):n.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(t){this.imgSrcSanitizationTrustedUrlList=t}});var m=!0;this.debugInfoEnabled=function(t){return j(t)?(m=t,this):m};var b=!1;this.strictComponentBindingsEnabled=function(t){return j(t)?(b=t,this):b};var w=10;this.onChangesTtl=function(t){return arguments.length?(w=t,this):w};var _=!0;this.commentDirectivesEnabled=function(t){return arguments.length?(_=t,this):_};var k=!0;this.cssClassDirectivesEnabled=function(t){return arguments.length?(k=t,this):k};var x=jt();this.addPropertySecurityContext=function(t,e,n){var r=t.toLowerCase()+"|"+e.toLowerCase();if(r in x&&x[r]!==n)throw dn("ctxoverride","Property context '{0}.{1}' already set to '{2}', cannot override to '{3}'.",t,e,x[r],n);return x[r]=n,this},function(){function t(t,e){S(e,function(e){x[e.toLowerCase()]=t})}t(Vr.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),t(Vr.CSS,["*|style"]),t(Vr.URL,["area|href","area|ping","a|href","a|ping","blockquote|cite","body|background","del|cite","input|src","ins|cite","q|cite"]),t(Vr.MEDIA_URL,["audio|src","img|src","img|srcset","source|src","source|srcset","track|src","video|src","video|poster"]),t(Vr.RESOURCE_URL,["*|formAction","applet|code","applet|codebase","base|href","embed|src","frame|src","form|action","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"])}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(e,n,p,v,E,T,I,A,M){var R,D=/^\w/,$=t.document.createElement("div"),j=_,F=k,q=w;function V(){try{if(!--q)throw R=void 0,dn("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);I.$apply(function(){for(var t=0,e=R.length;t<e;++t)try{R[t]()}catch(n){p(n)}R=void 0})}finally{q++}}function G(t,e){if(!t)return t;if(!B(t))throw dn("srcset",'Can\'t pass trusted values to `{0}`: "{1}"',e,t.toString());for(var n="",r=Q(t),i=/\s/.test(r)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,o=r.split(i),a=Math.floor(o.length/2),s=0;s<a;s++){var u=2*s;n+=A.getTrustedMediaUrl(Q(o[u])),n+=" "+Q(o[u+1])}var c=Q(o[2*s]).split(/\s/);return n+=A.getTrustedMediaUrl(Q(c[0])),2===c.length&&(n+=" "+Q(c[1])),n}function W(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=e[i]}else this.$attr={};this.$$element=t}function Y(t,e){try{t.addClass(e)}catch(n){}}W.prototype={$normalize:bn,$addClass:function(t){t&&t.length>0&&M.addClass(this.$$element,t)},$removeClass:function(t){t&&t.length>0&&M.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=wn(t,e);n&&n.length&&M.addClass(this.$$element,n);var r=wn(e,t);r&&r.length&&M.removeClass(this.$$element,r)},$set:function(t,e,n,r){var i=Pe(this.$$element[0],t),o=Oe[t],a=t;i?(this.$$element.prop(t,e),r=i):o&&(this[o]=e,a=o),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=Rt(t,"-")),"img"===nt(this.$$element)&&"srcset"===t&&(this[t]=e=G(e,"$set('srcset', value)")),!1!==n&&(null===e||L(e)?this.$$element.removeAttr(r):D.test(r)?i&&!1===e?this.$$element.removeAttr(r):this.$$element.attr(r,e):function(t,e,n){$.innerHTML="<span "+e+">";var r=$.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,t.attributes.setNamedItem(i)}(this.$$element[0],r,e));var s=this.$$observers;s&&S(s[a],function(t){try{t(e)}catch(n){p(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=jt()),i=r[t]||(r[t]=[]);return i.push(e),I.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||L(n[t])||e(n[t])}),function(){it(i,e)}}};var X=n.startSymbol(),tt=n.endSymbol(),et="{{"===X&&"}}"===tt?N:function(t){return t.replace(/\{\{/g,X).replace(/}}/g,tt)},rt=/^ng(Attr|Prop|On)([A-Z].*)$/,ot=/^(.+)Start$/;return ut.$$addBindingInfo=m?function(t,e){var n=t.data("$binding")||[];Z(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:P,ut.$$addBindingClass=m?function(t){Y(t,"ng-binding")}:P,ut.$$addScopeInfo=m?function(t,e,n,r){t.data(n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope",e)}:P,ut.$$addScopeClass=m?function(t,e){Y(t,e?"ng-isolate-scope":"ng-scope")}:P,ut.$$createComment=function(e,n){var r="";return m&&(r=" "+(e||"")+": ",n&&(r+=n+" ")),t.document.createComment(r)},ut;function ut(t,e,n,r,i){t instanceof a||(t=a(t));var o=ct(t,e,t,n,r,i);ut.$$addScopeClass(t);var s=null;return function(e,n,r){if(!t)throw dn("multilink","This element has already been linked.");Nt(e,"scope"),i&&i.needsNewScope&&(e=e.$parent.$new());var u,c,l,h=(r=r||{}).parentBoundTranscludeFn,f=r.transcludeControllers;if(h&&h.$$boundTransclude&&(h=h.$$boundTransclude),s||(s=(c=(u=r.futureParentElement)&&u[0])&&"foreignobject"!==nt(c)&&g.call(c).match(/SVG/)?"svg":"html"),l="html"!==s?a(Ct(s,a("<div></div>").append(t).html())):n?Ae.clone.call(t):t,f)for(var d in f)l.data("$"+d+"Controller",f[d].instance);return ut.$$addScopeInfo(l,e),n&&n(l,e),o&&o(e,l,l,h),n||(t=o=null),l}}function ct(t,e,n,r,i,s){for(var u,c,l,h,f,d,p,v=[],g=Z(t)||t instanceof a,y=0;y<t.length;y++)u=new W,11===o&&lt(t,y,g),(l=(c=pt(t[y],[],u,0===y?r:void 0,i)).length?mt(c,t[y],u,e,n,null,[],[],s):null)&&l.scope&&ut.$$addScopeClass(u.$$element),f=l&&l.terminal||!(h=t[y].childNodes)||!h.length?null:ct(h,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:e),(l||f)&&(v.push(y,l,f),d=!0,p=p||l),s=null;return d?function(t,n,r,i){var o,s,u,c,l,h,f,d;if(p)for(d=new Array(n.length),l=0;l<v.length;l+=3)d[f=v[l]]=n[f];else d=n;for(l=0,h=v.length;l<h;)u=d[v[l++]],o=v[l++],s=v[l++],o?(o.scope?(c=t.$new(),ut.$$addScopeInfo(a(u),c)):c=t,o(s,c,u,r,o.transcludeOnThisElement?dt(t,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&e?dt(t,e):null)):s&&s(t,u.childNodes,void 0,i)}:null}function lt(t,e,n){var r,i=t[e],o=i.parentNode;if(i.nodeType===Ft)for(;(r=o?i.nextSibling:t[e+1])&&r.nodeType===Ft;)i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===t[e+1]&&t.splice(e+1,1)}function dt(t,e,n){function r(r,i,o,a,s){return r||((r=t.$new(!1,s)).$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=jt();for(var o in e.$$slots)i[o]=e.$$slots[o]?dt(t,e.$$slots[o],n):null;return r}function pt(t,e,r,i,o){var a,c,l,h=r.$attr;switch(t.nodeType){case 1:St(e,bn(c=nt(t)),"E",i,o);for(var f,d,p,v,g,y=t.attributes,m=0,b=y&&y.length;m<b;m++){var w,_=!1,S=!1,k=!1,E=!1,x=!1;v=(f=y[m]).value,(g=(p=bn((d=f.name).toLowerCase())).match(rt))?(k="Attr"===g[1],E="Prop"===g[1],x="On"===g[1],d=d.replace(yn,"").toLowerCase().substr(4+g[1].length).replace(/_(.)/g,function(t,e){return e.toUpperCase()})):(w=p.match(ot))&&kt(w[1])&&(_=d,S=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),E||x?(r[p]=v,h[p]=f.name,E?Mt(t,e,p,d):Ot(e,p,d)):(h[p=bn(d.toLowerCase())]=d,!k&&r.hasOwnProperty(p)||(r[p]=v,Pe(t,p)&&(r[p]=!0)),Pt(t,e,v,p,k),St(e,p,"A",i,o,_,S))}if("input"===c&&"hidden"===t.getAttribute("type")&&t.setAttribute("autocomplete","off"),!F)break;if(U(l=t.className)&&(l=l.animVal),B(l)&&""!==l)for(;a=u.exec(l);)St(e,p=bn(a[2]),"C",i,o)&&(r[p]=Q(a[3])),l=l.substr(a.index+a[0].length);break;case Ft:!function(t,e){var r=n(e,!0);r&&t.push({priority:0,compile:function(t){var e=t.parent(),n=!!e.length;return n&&ut.$$addBindingClass(e),function(t,e){var i=e.parent();n||ut.$$addBindingClass(i),ut.$$addBindingInfo(i,r.expressions),t.$watch(r,function(t){e[0].nodeValue=t})}}})}(e,t.nodeValue);break;case 8:if(!j)break;!function(t,e,n,r,i){try{var o=s.exec(t.nodeValue);if(o){var a=bn(o[1]);St(e,a,"M",r,i)&&(n[a]=Q(o[2]))}}catch(u){}}(t,e,r,i,o)}return e.sort(Tt),e}function vt(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e))do{if(!t)throw dn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",e,n);1===t.nodeType&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0);else r.push(t);return a(r)}function gt(t,e,n){return function(r,i,o,a,s){return i=vt(i[0],e,n),t(r,i,o,a,s)}}function yt(t,e,n,r,i,o){var a;return t?ut(e,n,r,i,o):function(){return a||(a=ut(e,n,r,i,o),e=n=o=null),a.apply(this,arguments)}}function mt(e,n,r,i,o,s,u,c,l){l=l||{};for(var h,f,d,v,g,y=-Number.MAX_VALUE,m=l.newScopeDirective,b=l.controllerDirectives,w=l.newIsolateScopeDirective,_=l.templateDirective,k=l.nonTlbTranscludeDirective,E=!1,x=!1,I=l.hasElementTranscludeDirective,A=r.$$element=a(n),M=s,R=i,O=!1,P=!1,N=0,D=e.length;N<D;N++){var $=(h=e[N]).$$start,j=h.$$end;if($&&(A=vt(n,$,j)),d=void 0,y>h.priority)break;if((g=h.scope)&&(h.templateUrl||(U(g)?(It("new/isolated scope",w||m,h,A),w=h):It("new/isolated scope",w,h,A)),m=m||h),f=h.name,!O&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var F,B=N+1;F=e[B++];)if(F.transclude&&!F.$$tlb||F.replace&&(F.templateUrl||F.template)){P=!0;break}O=!0}if(!h.templateUrl&&h.controller&&(b=b||jt(),It("'"+f+"' controller",b[f],h,A),b[f]=h),g=h.transclude)if(E=!0,h.$$tlb||(It("transclusion",k,h,A),k=h),"element"===g)I=!0,y=h.priority,d=A,A=r.$$element=a(ut.$$createComment(f,r[f])),n=A[0],Dt(o,ht(d),n),R=yt(P,d,i,y,M&&M.name,{nonTlbTranscludeDirective:k});else{var q=jt();if(U(g)){d=t.document.createDocumentFragment();var V=jt(),H=jt();for(var G in S(g,function(t,e){var n="?"===t.charAt(0);t=n?t.substring(1):t,V[t]=e,q[e]=null,H[e]=n}),S(A.contents(),function(e){var n=V[bn(nt(e))];n?(H[n]=!0,q[n]=q[n]||t.document.createDocumentFragment(),q[n].appendChild(e)):d.appendChild(e)}),S(H,function(t,e){if(!t)throw dn("reqslot","Required transclusion slot `{0}` was not filled.",e)}),q)if(q[G]){var J=a(q[G].childNodes);q[G]=yt(P,J,i)}d=a(d.childNodes)}else d=a(fe(n)).contents();A.empty(),(R=yt(P,d,i,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=q}if(h.template)if(x=!0,It("template",_,h,A),_=h,g=z(h.template)?h.template(A,r):h.template,g=et(g),h.replace){if(M=h,d=se(g)?[]:_n(Ct(h.templateNamespace,Q(g))),n=d[0],1!==d.length||1!==n.nodeType)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f,"");Dt(o,A,n);var Y={$attr:{}},X=pt(n,[],Y),tt=e.splice(N+1,e.length-(N+1));(w||m)&&_t(X,w,m),e=e.concat(X).concat(tt),Et(r,Y),D=e.length}else A.html(g);if(h.templateUrl)x=!0,It("template",_,h,A),_=h,h.replace&&(M=h),ot=xt(e.splice(N,e.length-N),A,r,o,E&&R,u,c,{controllerDirectives:b,newScopeDirective:m!==h&&m,newIsolateScopeDirective:w,templateDirective:_,nonTlbTranscludeDirective:k}),D=e.length;else if(h.compile)try{v=h.compile(A,r,R);var rt=h.$$originalDirective||h;z(v)?it(null,ft(rt,v),$,j):v&&it(ft(rt,v.pre),ft(rt,v.post),$,j)}catch(at){p(at,wt(A))}h.terminal&&(ot.terminal=!0,y=Math.max(y,h.priority))}return ot.scope=m&&!0===m.scope,ot.transcludeOnThisElement=E,ot.templateOnThisElement=x,ot.transclude=R,l.hasElementTranscludeDirective=I,ot;function it(t,e,n,r){t&&(n&&(t=gt(t,n,r)),t.require=h.require,t.directiveName=f,(w===h||h.$$isolateScope)&&(t=$t(t,{isolateScope:!0})),u.push(t)),e&&(n&&(e=gt(e,n,r)),e.require=h.require,e.directiveName=f,(w===h||h.$$isolateScope)&&(e=$t(e,{isolateScope:!0})),c.push(e))}function ot(t,e,i,o,s){var l,h,f,d,v,g,y,k,E,x;for(var A in n===i?(E=r,k=r.$$element):E=new W(k=a(i),r),v=e,w?d=e.$new(!0):m&&(v=e.$parent),s&&((y=function(t,e,n,r){var i;if(K(t)||(r=n,n=e,e=t,t=void 0),I&&(i=g),n||(n=I?k.parent():k),!r)return s(t,e,i,n,P);var o=s.$$slots[r];if(o)return o(t,e,i,n,P);if(L(o))throw dn("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,wt(k))}).$$boundTransclude=s,y.isSlotFilled=function(t){return!!s.$$slots[t]}),b&&(g=function(t,e,n,r,i,o,a){var s=jt();for(var u in r){var c=r[u],l=c.controller;"@"===l&&(l=e[c.name]);var h=T(l,{$scope:c===a||c.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},!0,c.controllerAs);s[c.name]=h,t.data("$"+c.name+"Controller",h.instance)}return s}(k,E,y,b,d,e,w)),w&&(ut.$$addScopeInfo(k,d,!0,!(_&&(_===w||_===w.$$originalDirective))),ut.$$addScopeClass(k,!0),d.$$isolateBindings=w.$$isolateBindings,(x=Bt(e,E,d,d.$$isolateBindings,w)).removeWatches&&d.$on("$destroy",x.removeWatches)),g){var M=b[A],R=g[A],O=M.$$bindings.bindToController;R.instance=R(),k.data("$"+M.name+"Controller",R.instance),R.bindingInfo=Bt(v,E,R.instance,O,M)}for(S(b,function(t,e){var n=t.require;t.bindToController&&!Z(n)&&U(n)&&C(g[e].instance,bt(e,n,k,g))}),S(g,function(t){var e=t.instance;if(z(e.$onChanges))try{e.$onChanges(t.bindingInfo.initialChanges)}catch(at){p(at)}if(z(e.$onInit))try{e.$onInit()}catch(at){p(at)}z(e.$doCheck)&&(v.$watch(function(){e.$doCheck()}),e.$doCheck()),z(e.$onDestroy)&&v.$on("$destroy",function(){e.$onDestroy()})}),l=0,h=u.length;l<h;l++)Lt(f=u[l],f.isolateScope?d:e,k,E,f.require&&bt(f.directiveName,f.require,k,g),y);var P=e;for(w&&(w.template||null===w.templateUrl)&&(P=d),t&&t(P,i.childNodes,void 0,s),l=c.length-1;l>=0;l--)Lt(f=c[l],f.isolateScope?d:e,k,E,f.require&&bt(f.directiveName,f.require,k,g),y);S(g,function(t){var e=t.instance;z(e.$postLink)&&e.$postLink()})}}function bt(t,e,n,r){var i;if(B(e)){var o=e.match(f),a=e.substring(o[0].length),s=o[1]||o[3],u="?"===o[2];if("^^"===s?n=n.parent():i=(i=r&&r[a])&&i.instance,!i){var c="$"+a+"Controller";i="^^"===s&&n[0]&&9===n[0].nodeType?null:s?n.inheritedData(c):n.data(c)}if(!i&&!u)throw dn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,t)}else if(Z(e)){i=[];for(var l=0,h=e.length;l<h;l++)i[l]=bt(t,e[l],n,r)}else U(e)&&(i={},S(e,function(e,o){i[o]=bt(t,e,n,r)}));return i||null}function _t(t,e,n){for(var r=0,i=t.length;r<i;r++)t[r]=O(t[r],{$$isolateScope:e,$$newScope:n})}function St(t,n,o,a,s,u,c){if(n===s)return null;var l=null;if(r.hasOwnProperty(n))for(var h,f=e.get(n+i),d=0,p=f.length;d<p;d++)if(h=f[d],(L(a)||a>h.priority)&&-1!==h.restrict.indexOf(o)){if(u&&(h=O(h,{$$start:u,$$end:c})),!h.$$bindings){var v=h.$$bindings=y(h,h.name);U(v.isolateScope)&&(h.$$isolateBindings=v.isolateScope)}t.push(h),l=h}return l}function kt(t){if(r.hasOwnProperty(t))for(var n=e.get(t+i),o=0,a=n.length;o<a;o++)if(n[o].multiElement)return!0;return!1}function Et(t,e){var n=e.$attr,r=t.$attr;S(t,function(r,i){"$"!==i.charAt(0)&&(e[i]&&e[i]!==r&&(r.length?r+=("style"===i?";":" ")+e[i]:r=e[i]),t.$set(i,r,!0,n[i]))}),S(e,function(e,i){t.hasOwnProperty(i)||"$"===i.charAt(0)||(t[i]=e,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function xt(t,e,n,r,i,o,s,u){var c,l,h=[],f=e[0],d=t.shift(),g=O(d,{templateUrl:null,transclude:null,replace:null,$$originalDirective:d}),y=z(d.templateUrl)?d.templateUrl(e,n):d.templateUrl,m=d.templateNamespace;return e.empty(),v(y).then(function(p){var v,b,w,_;if(p=et(p),d.replace){if(w=se(p)?[]:_n(Ct(m,Q(p))),v=w[0],1!==w.length||1!==v.nodeType)throw dn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d.name,y);b={$attr:{}},Dt(r,e,v);var k=pt(v,[],b);U(d.scope)&&_t(k,!0),t=k.concat(t),Et(n,b)}else v=f,e.html(p);for(t.unshift(g),c=mt(t,v,n,i,e,d,o,s,u),S(r,function(t,n){t===v&&(r[n]=e[0])}),l=ct(e[0].childNodes,i);h.length;){var E=h.shift(),x=h.shift(),T=h.shift(),I=h.shift(),C=e[0];if(!E.$$destroyed){if(x!==f){var A=x.className;u.hasElementTranscludeDirective&&d.replace||(C=fe(v)),Dt(T,a(x),C),Y(a(C),A)}_=c.transcludeOnThisElement?dt(E,c.transclude,I):I,c(l,E,C,r,_)}}h=null}).catch(function(t){H(t)&&p(t)}),function(t,e,n,r,i){var o=i;e.$$destroyed||(h?h.push(e,n,r,o):(c.transcludeOnThisElement&&(o=dt(e,c.transclude,i)),c(l,e,n,r,o)))}}function Tt(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function It(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw dn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,wt(r))}function Ct(e,n){switch(e=h(e||"html")){case"svg":case"math":var r=t.document.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function At(t){return G(A.valueOf(t),"ng-prop-srcset")}function Mt(t,e,n,r){if(d.test(r))throw dn("nodomevents","Property bindings for HTML DOM event properties are disallowed");var i=nt(t),o=function(t,e){var n=e.toLowerCase();return x[t+"|"+n]||x["*|"+n]}(i,r),a=N;"srcset"!==r||"img"!==i&&"source"!==i?o&&(a=A.getTrusted.bind(A,o)):a=At,e.push({priority:100,compile:function(t,e){var i=E(e[n]),o=E(e[n],function(t){return A.valueOf(t)});return{pre:function(t,e){function n(){var n=i(t);e[0][r]=a(n)}n(),t.$watch(o,n)}}}})}function Ot(t,e,n){t.push(Po(E,I,p,e,n,!1))}function Pt(t,e,r,i,o){var a=nt(t),s=function(t,e){return"srcdoc"===e?A.HTML:"src"===e||"ngSrc"===e?-1===["img","video","audio","source","track"].indexOf(t)?A.RESOURCE_URL:A.MEDIA_URL:"xlinkHref"===e?"image"===t?A.MEDIA_URL:"a"===t?A.URL:A.RESOURCE_URL:"form"===t&&"action"===e||"base"===t&&"href"===e||"link"===t&&"href"===e?A.RESOURCE_URL:"a"!==t||"href"!==e&&"ngHref"!==e?void 0:A.URL}(a,i),u=c[i]||o,l=n(r,!o,s,u);if(l){if("multiple"===i&&"select"===a)throw dn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",wt(t));if(d.test(i))throw dn("nodomevents","Interpolations for HTML DOM event attributes are disallowed");e.push({priority:100,compile:function(){return{pre:function(t,e,o){var a=o.$$observers||(o.$$observers=jt()),c=o[i];c!==r&&(l=c&&n(c,!0,s,u),r=c),l&&(o[i]=l(t),(a[i]||(a[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||t).$watch(l,function(t,e){"class"===i&&t!==e?o.$updateClass(t,e):o.$set(i,t)}))}}}})}}function Dt(e,n,r){var i,o,s=n[0],u=n.length,c=s.parentNode;if(e)for(i=0,o=e.length;i<o;i++)if(e[i]===s){e[i++]=r;for(var l=i,h=l+u-1,f=e.length;l<f;l++,h++)h<f?e[l]=e[h]:delete e[l];e.length-=u-1,e.context===s&&(e.context=r);break}c&&c.replaceChild(r,s);var d=t.document.createDocumentFragment();for(i=0;i<u;i++)d.appendChild(n[i]);for(a.hasData(s)&&(a.data(r,a.data(s)),a(s).off("$destroy")),a.cleanData(d.querySelectorAll("*")),i=1;i<u;i++)delete n[i];n[0]=r,n.length=1}function $t(t,e){return C(function(){return t.apply(null,arguments)},t,e)}function Lt(t,e,n,r,i,o){try{t(e,n,r,i,o)}catch(a){p(a,wt(n))}}function Ut(t,e){if(b)throw dn("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",t,e)}function Bt(t,e,r,i,o){var a,s=[],u={};function c(e,n,i){z(r.$onChanges)&&!at(n,i)&&(R||(t.$$postDigest(V),R=[]),a||(a={},R.push(h)),a[e]&&(i=a[e].previousValue),a[e]=new gn(i,n))}function h(){r.$onChanges(a),a=void 0}return S(i,function(i,a){var h,f,d,p,v,g=i.attrName,y=i.optional;switch(i.mode){case"@":y||l.call(e,g)||(Ut(g,o.name),r[a]=e[g]=void 0),v=e.$observe(g,function(t){(B(t)||J(t))&&(c(a,t,r[a]),r[a]=t)}),e.$$observers[g].$$scope=t,B(h=e[g])?r[a]=n(h)(t):J(h)&&(r[a]=h),u[a]=new gn(pn,r[a]),s.push(v);break;case"=":if(!l.call(e,g)){if(y)break;Ut(g,o.name),e[g]=void 0}if(y&&!e[g])break;f=E(e[g]),p=f.literal?st:at,d=f.assign||function(){throw h=r[a]=f(t),dn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",e[g],g,o.name)},h=r[a]=f(t);var m=function(e){return p(e,r[a])||(p(e,h)?d(t,e=r[a]):r[a]=e),h=e};m.$stateful=!0,v=i.collection?t.$watchCollection(e[g],m):t.$watch(E(e[g],m),null,f.literal),s.push(v);break;case"<":if(!l.call(e,g)){if(y)break;Ut(g,o.name),e[g]=void 0}if(y&&!e[g])break;var b=(f=E(e[g])).literal,w=r[a]=f(t);u[a]=new gn(pn,r[a]),v=t[i.collection?"$watchCollection":"$watch"](f,function(t,e){if(e===t){if(e===w||b&&st(e,w))return;e=w}c(a,t,e),r[a]=t}),s.push(v);break;case"&":if(y||l.call(e,g)||Ut(g,o.name),(f=e.hasOwnProperty(g)?E(e[g]):P)===P&&y)break;r[a]=function(e){return f(t,e)}}}),{initialChanges:u,removeWatches:s.length&&function(){for(var t=0,e=s.length;t<e;++t)s[t]()}}}}]}function gn(t,e){this.previousValue=t,this.currentValue=e}vn.$inject=["$provide","$$sanitizeUriProvider"],gn.prototype.isFirstChange=function(){return this.previousValue===pn};var yn=/^((?:x|data)[:\-_])/i,mn=/[:\-_]+(.)/g;function bn(t){return t.replace(yn,"").replace(mn,function(t,e,n){return n?e.toUpperCase():e})}function wn(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/);t:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue t;n+=(n.length>0?" ":"")+a}return n}function _n(t){var e=(t=a(t)).length;if(e<=1)return t;for(;e--;){var n=t[e];(8===n.nodeType||n.nodeType===Ft&&""===n.nodeValue.trim())&&p.call(t,e,1)}return t}var Sn=i("$controller"),kn=/^(\S+)(\s+as\s+([\w$]+))?$/;function En(t,e){if(e&&B(e))return e;if(B(t)){var n=kn.exec(t);if(n)return n[3]}}function xn(){var t={};this.has=function(e){return t.hasOwnProperty(e)},this.register=function(e,n){$t(e,"controller"),U(e)?C(t,e):t[e]=n},this.$get=["$injector",function(e){return function(r,i,o,a){var s,u,c,l;if(o=!0===o,a&&B(a)&&(l=a),B(r)){if(!(u=r.match(kn)))throw Sn("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(l=l||u[3],!(r=t.hasOwnProperty(c=u[1])?t[c]:function(t,e,n){if(!e)return t;for(var r=e.split("."),i=r.length,o=0;o<i;o++)t&&(t=t[r[o]]);return t}(i.$scope,c)))throw Sn("ctrlreg","The controller with the name '{0}' is not registered.",c);Dt(r,c,!0)}if(o){var h=(Z(r)?r[r.length-1]:r).prototype;return s=Object.create(h||null),l&&n(i,l,s,c||r.name),C(function(){var t=e.invoke(r,s,i,c);return t!==s&&(U(t)||z(t))&&(s=t,l&&n(i,l,s,c||r.name)),s},{instance:s,identifier:l})}return s=e.instantiate(r,i,c),l&&n(i,l,s,c||r.name),s};function n(t,e,n,r){if(!t||!U(t.$scope))throw i("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,e);t.$scope[e]=n}}]}function Tn(){this.$get=["$window",function(t){return a(t.document)}]}function In(){this.$get=["$document","$rootScope",function(t,e){var n=t[0],r=n&&n.hidden;function i(){r=n.hidden}return t.on("visibilitychange",i),e.$on("$destroy",function(){t.off("visibilitychange",i)}),function(){return r}}]}function Cn(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}var An=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof a&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Mn={"Content-Type":"application/json;charset=utf-8"},Rn=/^\[|^\{(?!\{)/,On={"[":/]$/,"{":/}$/},Pn=/^\)]\}',?\n/,Nn=i("$http");function Dn(t){return U(t)?V(t)?t.toISOString():pt(t):t}function $n(){this.$get=function(){return function(t){if(!t)return"";var e=[];return k(t,function(t,n){null===t||L(t)||z(t)||(Z(t)?S(t,function(t){e.push(Et(n)+"="+Et(Dn(t)))}):e.push(Et(n)+"="+Et(Dn(t))))}),e.join("&")}}}function Ln(){this.$get=function(){return function(t){if(!t)return"";var e=[];return function t(n,r,i){Z(n)?S(n,function(e,n){t(e,r+"["+(U(e)?n:"")+"]")}):U(n)&&!V(n)?k(n,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):(z(n)&&(n=n()),e.push(Et(r)+"="+(null==n?"":Et(Dn(n)))))}(t,"",!0),e.join("&")}}}function jn(t,e){if(B(t)){var n=t.replace(Pn,"").trim();if(n){var r=e("Content-Type"),i=r&&0===r.indexOf("application/json");if(i||(a=(o=n).match(Rn))&&On[a[0]].test(o))try{t=vt(n)}catch(s){if(!i)return t;throw Nn("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',t,s)}}}var o,a;return t}function Un(t){var e,n=jt();function r(t,e){t&&(n[t]=n[t]?n[t]+", "+e:e)}return B(t)?S(t.split("\n"),function(t){e=t.indexOf(":"),r(h(Q(t.substr(0,e))),Q(t.substr(e+1)))}):U(t)&&S(t,function(t,e){r(h(e),Q(t))}),n}function Fn(t){var e;return function(n){if(e||(e=Un(t)),n){var r=e[h(n)];return void 0===r&&(r=null),r}return e}}function Bn(t,e,n,r){return z(r)?r(t,e,n):(S(r,function(r){t=r(t,e,n)}),t)}function qn(t){return 200<=t&&t<300}function Vn(){var t=this.defaults={transformResponse:[jn],transformRequest:[function(t){return U(t)&&"[object File]"!==g.call(t)&&"[object Blob]"!==g.call(t)&&"[object FormData]"!==g.call(t)?pt(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:Bt(Mn),put:Bt(Mn),patch:Bt(Mn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},e=!1;this.useApplyAsync=function(t){return j(t)?(e=!!t,this):e};var n=this.interceptors=[],r=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(t){this.xsrfTrustedOrigins=t}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(o,a,s,u,c,l,d,p){var v=u("$http");t.paramSerializer=B(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var g=[];S(n,function(t){g.unshift(B(t)?d.get(t):d.invoke(t))});var y,m=(y=[oi].concat(r.map(si)),function(t){var e=si(t);return y.some(ui.bind(null,e))});function b(n){if(!U(n))throw i("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!B(p.valueOf(n.url)))throw i("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var r=C({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer,jsonpCallbackParam:t.jsonpCallbackParam},n);r.headers=function(e){var n,r,i,o=t.headers,a=C({},e.headers);o=C({},o.common,o[h(e.method)]);t:for(n in o){for(i in r=h(n),a)if(h(i)===r)continue t;a[n]=o[n]}return function(t,e){var n,r={};return S(t,function(t,i){z(t)?null!=(n=t(e))&&(r[i]=n):r[i]=t}),r}(a,Bt(e))}(n),r.method=f(r.method),r.paramSerializer=B(r.paramSerializer)?d.get(r.paramSerializer):r.paramSerializer,o.$$incOutstandingRequestCount("$http");var u=[],y=[],w=l.resolve(r);return S(g,function(t){(t.request||t.requestError)&&u.unshift(t.request,t.requestError),(t.response||t.responseError)&&y.push(t.response,t.responseError)}),w=_(w,u),(w=_(w=w.then(function(n){var r=n.headers,i=Bn(n.data,Fn(r),void 0,n.transformRequest);return L(i)&&S(r,function(t,e){"content-type"===h(e)&&delete r[e]}),L(n.withCredentials)&&!L(t.withCredentials)&&(n.withCredentials=t.withCredentials),function(n,r){var i,o,u=l.defer(),f=u.promise,d=n.headers,g="jsonp"===h(n.method),y=n.url;if(g?y=p.getTrustedResourceUrl(y):B(y)||(y=p.valueOf(y)),y=function(t,e){return e.length>0&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}(y,n.paramSerializer(n.params)),g&&(y=function(t,e){var n=t.split("?");if(n.length>2)throw Nn("badjsonp",'Illegal use more than one "?", in url, "{1}"',t);return S(St(n[1]),function(n,r){if("JSON_CALLBACK"===n)throw Nn("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',t);if(r===e)throw Nn("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',e,t)}),t+=(-1===t.indexOf("?")?"?":"&")+e+"=JSON_CALLBACK"}(y,n.jsonpCallbackParam)),b.pendingRequests.push(n),f.then(x,x),!n.cache&&!t.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(i=U(n.cache)?n.cache:U(t.cache)?t.cache:v),i&&(j(o=i.get(y))?Y(o)?o.then(E,E):Z(o)?k(o[1],o[0],Bt(o[2]),o[3],o[4]):k(o,200,{},"OK","complete"):i.put(y,f)),L(o)){var w=m(n.url)?s()[n.xsrfCookieName||t.xsrfCookieName]:void 0;w&&(d[n.xsrfHeaderName||t.xsrfHeaderName]=w),a(n.method,y,r,function(t,n,r,o,a){function s(){k(n,t,r,o,a)}i&&(qn(t)?i.put(y,[t,n,Un(r),o,a]):i.remove(y)),e?c.$applyAsync(s):(s(),c.$$phase||c.$apply())},d,n.timeout,n.withCredentials,n.responseType,_(n.eventHandlers),_(n.uploadEventHandlers))}return f;function _(t){if(t){var n={};return S(t,function(t,r){n[r]=function(n){function r(){t(n)}e?c.$applyAsync(r):c.$$phase?r():c.$apply(r)}}),n}}function k(t,e,r,i,o){(qn(e=e>=-1?e:0)?u.resolve:u.reject)({data:t,status:e,headers:Fn(r),config:n,statusText:i,xhrStatus:o})}function E(t){k(t.data,t.status,Bt(t.headers()),t.statusText,t.xhrStatus)}function x(){var t=b.pendingRequests.indexOf(n);-1!==t&&b.pendingRequests.splice(t,1)}}(n,i).then(k,k)}),y)).finally(function(){o.$$completeOutstandingRequest(P,"$http")});function _(t,e){for(var n=0,r=e.length;n<r;){var i=e[n++],o=e[n++];t=t.then(i,o)}return e.length=0,t}function k(t){var e=C({},t);return e.data=Bn(t.data,t.headers,t.status,r.transformResponse),qn(t.status)?e:l.reject(e)}}return b.pendingRequests=[],function(t){S(arguments,function(t){b[t]=function(e,n){return b(C({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){S(arguments,function(t){b[t]=function(e,n,r){return b(C({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),b.defaults=t,b}]}function Zn(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function Hn(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(t,e,n,r){return function(t,e,n,r,i){return function(o,a,s,u,c,l,f,d,p,v){if(a=a||t.url(),"jsonp"===h(o))var g=r.createCallback(a),y=function(t,e,n){t=t.replace("JSON_CALLBACK",e);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=t,o.async=!0,a=function(t){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var s=-1,u="unknown";t&&("load"!==t.type||r.wasCalled(e)||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}(a,g,function(t,e){var n=200===t&&r.getResponse(g);k(u,t,n,"",e,"complete"),r.removeCallback(g)});else{var m=e(o,a),b=!1;if(m.open(o,a,!0),S(c,function(t,e){j(t)&&m.setRequestHeader(e,t)}),m.onload=function(){var t=m.statusText||"",e="response"in m?m.response:m.responseText,n=1223===m.status?204:m.status;0===n&&(n=e?200:"file"===si(a).protocol?404:0),k(u,n,e,m.getAllResponseHeaders(),t,"complete")},m.onerror=function(){k(u,-1,null,null,"","error")},m.ontimeout=function(){k(u,-1,null,null,"","timeout")},m.onabort=function(){k(u,-1,null,null,"",b?"timeout":"abort")},S(p,function(t,e){m.addEventListener(e,t)}),S(v,function(t,e){m.upload.addEventListener(e,t)}),f&&(m.withCredentials=!0),d)try{m.responseType=d}catch(E){if("json"!==d)throw E}m.send(L(s)?null:s)}if(l>0)var w=n(function(){_("timeout")},l);else Y(l)&&l.then(function(){_(j(l.$$timeoutId)?"timeout":"abort")});function _(t){b="timeout"===t,y&&y(),m&&m.abort()}function k(t,e,r,i,o,a){j(w)&&n.cancel(w),y=m=null,t(e,r,i,o,a)}}}(t,r,t.defer,e,n[0])}]}var zn=b.$interpolateMinErr=i("$interpolate");function Gn(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var o=t.length,a=e.length,s=new RegExp(t.replace(/./g,c),"g"),u=new RegExp(e.replace(/./g,c),"g");function c(t){return"\\\\\\"+t}function l(n){return n.replace(s,t).replace(u,e)}function h(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function f(s,u,c,f){var d=c===i.URL||c===i.MEDIA_URL;if(!s.length||-1===s.indexOf(t)){if(u)return;var p=l(s);d&&(p=i.getTrusted(c,p));var v=D(p);return v.exp=s,v.expressions=[],v.$$watchDelegate=h,v}f=!!f;for(var g,y,m,b,w,_=0,S=[],k=s.length,E=[],x=[];_<k;){if(-1===(g=s.indexOf(t,_))||-1===(y=s.indexOf(e,g+o))){_!==k&&E.push(l(s.substring(_)));break}_!==g&&E.push(l(s.substring(_,g))),b=s.substring(g+o,y),S.push(b),_=y+a,x.push(E.length),E.push("")}w=1===E.length&&1===x.length;var T=d&&w?void 0:function(t){try{return t=c&&!d?i.getTrusted(c,t):i.valueOf(t),f&&!j(t)?t:Ut(t)}catch(e){r(zn.interr(s,e))}};if(m=S.map(function(t){return n(t,T)}),!u||S.length){var I=function(t){for(var e=0,n=S.length;e<n;e++){if(f&&L(t[e]))return;E[x[e]]=t[e]}return d?i.getTrusted(c,w?E[0]:E.join("")):(c&&E.length>1&&zn.throwNoconcat(s),E.join(""))};return C(function(t){var e=0,n=S.length,i=new Array(n);try{for(;e<n;e++)i[e]=m[e](t);return I(i)}catch(o){r(zn.interr(s,o))}},{exp:s,expressions:S,$$watchDelegate:function(t,e){var n;return t.$watchGroup(m,function(r,i){var o=I(r);e.call(this,o,r!==i?n:o,t),n=o})}})}}return f.startSymbol=function(){return t},f.endSymbol=function(){return e},f}]}zn.throwNoconcat=function(t){throw zn("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",t)},zn.interr=function(t,e){return zn("interr","Can't interpolate: {0}\n{1}",t,e.toString())};var Wn=i("$interval");function Kn(){this.$get=["$$intervalFactory","$window",function(t,e){var n={},r=function(t){e.clearInterval(t),delete n[t]},i=t(function(t,r,i){var o=e.setInterval(t,r);return n[o]=i,o},r);return i.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$intervalId"))throw Wn("badprom","`$interval.cancel()` called with a promise that was not generated by `$interval()`.");if(!n.hasOwnProperty(t.$$intervalId))return!1;var e=t.$$intervalId,i=n[e];return jr(i.promise),i.reject("canceled"),r(e),!0},i}]}function Jn(){this.$get=["$browser","$q","$$q","$rootScope",function(t,e,n,r){return function(i,o){return function(a,s,u,c){var l=arguments.length>4,h=l?ht(arguments,4):[],f=0,d=j(c)&&!c,p=(d?n:e).defer(),v=p.promise;function g(){l?a.apply(null,h):a(f)}function y(){d?t.defer(g):r.$evalAsync(g),p.notify(f++),u>0&&f>=u&&(p.resolve(f),o(v.$$intervalId)),d||r.$apply()}return u=j(u)?u:0,v.$$intervalId=i(y,s,p,d),v}}}]}var Yn=function(){this.$get=function(){var t=b.callbacks,e={};return{createCallback:function(n){var r="_"+(t.$$counter++).toString(36),i="angular.callbacks."+r,o=function(t){var e=function t(e){t.data=e,t.called=!0};return e.id=t,e}(r);return e[i]=t[r]=o,i},wasCalled:function(t){return e[t].called},getResponse:function(t){return e[t].data},removeCallback:function(n){delete t[e[n].id],delete e[n]}}}},Xn=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Qn={http:80,https:443,ftp:21},tr=i("$location");function er(t,e){var n=si(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=M(n.port)||Qn[n.protocol]||null}var nr=/^\s*[\\/]{2,}/;function rr(t,e,n){if(nr.test(t))throw tr("badpath",'Invalid url "{0}".',t);var r="/"!==t.charAt(0);r&&(t="/"+t);var i=si(t),o=r&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname;e.$$path=function(t,e){for(var n=t.split("/"),r=n.length;r--;)n[r]=decodeURIComponent(n[r]),e&&(n[r]=n[r].replace(/\//g,"%2F"));return n.join("/")}(o,n),e.$$search=St(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!==e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ir(t,e){return t.slice(0,e.length)===e}function or(t,e){if(ir(e,t))return e.substr(t.length)}function ar(t){var e=t.indexOf("#");return-1===e?t:t.substr(0,e)}function sr(t,e,n){this.$$html5=!0,n=n||"",er(t,this),this.$$parse=function(t){var n=or(e,t);if(!B(n))throw tr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',t,e);rr(n,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(t){return e+t.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(j(o=or(t,r))?(a=o,s=n&&j(o=or(n,o))?e+(or("/",o)||o):t+a):j(o=or(e,r))?s=e+o:e===r+"/"&&(s=e),s&&this.$$parse(s),!!s);var o,a,s}}function ur(t,e,n){er(t,this),this.$$parse=function(r){var i,o=or(t,r)||or(e,r);L(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",L(o)&&(t=r,this.replace())):L(i=or(n,o))&&(i=o),rr(i,this,!1),this.$$path=function(t,e,n){var r,i=/^\/[A-Z]:(\/.*)/;return ir(e,n)&&(e=e.replace(n,"")),i.exec(e)?t:(r=i.exec(t))?r[1]:t}(this.$$path,i,t),this.$$compose()},this.$$normalizeUrl=function(e){return t+(e?n+e:"")},this.$$parseLinkUrl=function(e,n){return ar(t)===ar(e)&&(this.$$parse(e),!0)}}function cr(t,e,n){this.$$html5=!0,ur.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(t===ar(r)?o=r:(a=or(e,r))?o=t+n+a:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o);var o,a},this.$$normalizeUrl=function(e){return t+n+e}}var lr={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){var t,e,n,r,i;this.$$url=(t=this.$$path,e=this.$$hash,n=[],S(this.$$search,function(t,e){Z(t)?S(t,function(t){n.push(Et(e,!0)+(!0===t?"":"="+Et(t,!0)))}):n.push(Et(e,!0)+(!0===t?"":"="+Et(t,!0)))}),r=n.length?n.join("&"):"",i=e?"#"+kt(e):"",function(t){for(var e=t.split("/"),n=e.length;n--;)e[n]=kt(e[n].replace(/%2F/g,"/"));return e.join("/")}(t)+(r?"?"+r:"")+i),this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:hr("$$absUrl"),url:function(t){if(L(t))return this.$$url;var e=Xn.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:hr("$$protocol"),host:hr("$$host"),port:hr("$$port"),path:fr("$$path",function(t){return"/"===(t=null!==t?t.toString():"").charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(B(t)||q(t))t=t.toString(),this.$$search=St(t);else{if(!U(t))throw tr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");S(t=ot(t,{}),function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:L(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:fr("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};function hr(t){return function(){return this[t]}}function fr(t,e){return function(n){return L(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function dr(){var t="!",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return j(e)?(t=e,this):t},this.html5Mode=function(t){return J(t)?(e.enabled=t,this):U(t)?(J(t.enabled)&&(e.enabled=t.enabled),J(t.requireBase)&&(e.requireBase=t.requireBase),(J(t.rewriteLinks)||B(t.rewriteLinks))&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,s){var u,c,l,h,f=r.baseHref(),d=r.url();if(e.enabled){if(!f&&e.requireBase)throw tr("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=(h=d).substring(0,h.indexOf("/",h.indexOf("//")+2))+(f||"/"),c=i.history?sr:cr}else l=ar(d),c=ur;var p=function(t){return t.substr(0,ar(t).lastIndexOf("/")+1)}(l);(u=new c(l,p,"#"+t)).$$parseLinkUrl(d,d),u.$$state=r.state();var v=/^\s*(javascript|mailto):/i;function g(t,e,n){var i=u.url(),o=u.$$state;try{r.url(t,e,n),u.$$state=r.state()}catch(a){throw u.url(i),u.$$state=o,a}}o.on("click",function(t){var i=e.rewriteLinks;if(i&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!==t.which&&2!==t.button){for(var s=a(t.target);"a"!==nt(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!B(i)||!L(s.attr(i))){var c=s.prop("href"),l=s.attr("href")||s.attr("xlink:href");U(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=si(c.animVal).href),v.test(c)||!c||s.attr("target")||t.isDefaultPrevented()||u.$$parseLinkUrl(c,l)&&(t.preventDefault(),u.absUrl()!==r.url()&&n.$apply())}}}),u.absUrl()!==d&&r.url(u.absUrl(),!0);var y=!0;return r.onUrlChange(function(t,e){ir(t,p)?(n.$evalAsync(function(){var r,i=u.absUrl(),o=u.$$state;u.$$parse(t),u.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,u.absUrl()===t&&(r?(u.$$parse(i),u.$$state=o,g(i,!1,o)):(y=!1,m(i,o)))}),n.$$phase||n.$digest()):s.location.href=t}),n.$watch(function(){if(y||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var t=r.url(),e=u.absUrl(),o=r.state(),a=u.$$replace,s=!((c=t)===(l=e)||si(c).href===si(l).href)||u.$$html5&&i.history&&o!==u.$$state;(y||s)&&(y=!1,n.$evalAsync(function(){var e=u.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,u.$$state,o).defaultPrevented;u.absUrl()===e&&(r?(u.$$parse(t),u.$$state=o):(s&&g(e,a,o===u.$$state?null:u.$$state),m(t,o)))}))}var c,l;u.$$replace=!1}),u;function m(t,e){n.$broadcast("$locationChangeSuccess",u.absUrl(),t,u.$$state,e)}}]}function pr(){var t=!0,e=this;this.debugEnabled=function(e){return j(e)?(t=e,this):t},this.$get=["$window",function(n){var r,i=o||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:s("log"),info:s("info"),warn:s("warn"),error:s("error"),debug:(r=s("debug"),function(){t&&r.apply(e,arguments)})};function a(t){return H(t)&&(t.stack&&i?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function s(t){var e=n.console||{},r=e[t]||e.log||P;return function(){var t=[];return S(arguments,function(e){t.push(a(e))}),Function.prototype.apply.call(r,e,t)}}}]}S([cr,ur,sr],function(t){t.prototype=Object.create(lr),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==sr||!this.$$html5)throw tr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=L(e)?null:e,this.$$urlUpdatedByLocation=!0,this}});var vr=i("$parse"),gr={}.constructor.prototype.valueOf;function yr(t){return t+""}var mr=jt();S("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){mr[t]=!0});var br={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},wr=function(t){this.options=t};wr.prototype={constructor:wr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=mr[n],o=mr[r];if(mr[e]||i||o){var a=o?r:i?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},isNumber:function(t){return"0"<=t&&t<="9"&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"\xa0"===t},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){n=n||this.index;var r=j(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw vr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,r,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=h(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else n+=br[o]||o;i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var _r=function(t,e){this.lexer=t,this.options=e};function Sr(t,e){return void 0!==t?t:e}function kr(t,e){return void 0===t?e:void 0===e?t:t+e}function Er(t,e,n){var r,i,o,a=t.isPure=function(t,e){switch(t.type){case _r.MemberExpression:if(t.computed)return!1;break;case _r.UnaryExpression:return 1;case _r.BinaryExpression:return"+"!==t.operator&&1;case _r.CallExpression:return!1}return void 0===e?2:e}(t,n);switch(t.type){case _r.Program:r=!0,S(t.body,function(t){Er(t.expression,e,a),r=r&&t.expression.constant}),t.constant=r;break;case _r.Literal:t.constant=!0,t.toWatch=[];break;case _r.UnaryExpression:Er(t.argument,e,a),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case _r.BinaryExpression:Er(t.left,e,a),Er(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case _r.LogicalExpression:Er(t.left,e,a),Er(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case _r.ConditionalExpression:Er(t.test,e,a),Er(t.alternate,e,a),Er(t.consequent,e,a),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case _r.Identifier:t.constant=!1,t.toWatch=[t];break;case _r.MemberExpression:Er(t.object,e,a),t.computed&&Er(t.property,e,a),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=t.constant?[]:[t];break;case _r.CallExpression:o=!!t.filter&&function(t,e){return!t(e).$stateful}(e,t.callee.name),r=o,i=[],S(t.arguments,function(t){Er(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=o?i:[t];break;case _r.AssignmentExpression:Er(t.left,e,a),Er(t.right,e,a),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case _r.ArrayExpression:r=!0,i=[],S(t.elements,function(t){Er(t,e,a),r=r&&t.constant,i.push.apply(i,t.toWatch)}),t.constant=r,t.toWatch=i;break;case _r.ObjectExpression:r=!0,i=[],S(t.properties,function(t){Er(t.value,e,a),r=r&&t.value.constant,i.push.apply(i,t.value.toWatch),t.computed&&(Er(t.key,e,!1),r=r&&t.key.constant,i.push.apply(i,t.key.toWatch))}),t.constant=r,t.toWatch=i;break;case _r.ThisExpression:case _r.LocalsExpression:t.constant=!1,t.toWatch=[]}}function xr(t){if(1===t.length){var e=t[0].expression,n=e.toWatch;return 1!==n.length||n[0]!==e?n:void 0}}function Tr(t){return t.type===_r.Identifier||t.type===_r.MemberExpression}function Ir(t){if(1===t.body.length&&Tr(t.body[0].expression))return{type:_r.AssignmentExpression,left:t.body[0].expression,right:{type:_r.NGValueParameter},operator:"="}}function Cr(t){this.$filter=t}function Ar(t){this.$filter=t}function Mr(t,e,n){this.ast=new _r(t,n),this.astCompiler=n.csp?new Ar(e):new Cr(e)}function Rr(t){return z(t.valueOf)?t.valueOf():gr.call(t)}function Or(){var t,e,n=jt(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(t,e){r[t]=e},this.setIdentifierFns=function(n,r){return t=n,e=r,this},this.$get=["$filter",function(i){var o={csp:ut().noUnsafeEval,literals:ot(r),isIdentifierStart:z(t)&&t,isIdentifierContinue:z(e)&&e};return a.$$getAst=function(t){return new Mr(new wr(o),i,o).getAst(t).ast},a;function a(t,e){var r,a;switch(typeof t){case"string":return t=t.trim(),(r=n[a=t])||(r=new Mr(new wr(o),i,o).parse(t),n[a]=f(r)),d(r,e);case"function":return d(t,e);default:return d(P,e)}}function s(t,e,n){return null==t||null==e?t===e:!("object"==typeof t&&"object"==typeof(t=Rr(t))&&!n)&&(t===e||t!=t&&e!=e)}function u(t,e,n,r,i){var o,a=r.inputs;if(1===a.length){var u=s;return a=a[0],t.$watch(function(t){var e=a(t);return s(e,u,a.isPure)||(o=r(t,void 0,void 0,[e]),u=e&&Rr(e)),o},e,n,i)}for(var c=[],l=[],h=0,f=a.length;h<f;h++)c[h]=s,l[h]=null;return t.$watch(function(t){for(var e=!1,n=0,i=a.length;n<i;n++){var u=a[n](t);(e||(e=!s(u,c[n],a[n].isPure)))&&(l[n]=u,c[n]=u&&Rr(u))}return e&&(o=r(t,void 0,void 0,l)),o},e,n,i)}function c(t,e,n,r,i){var o,a,s=r.literal?l:j,u=r.$$intercepted||r,c=r.$$interceptor||N,h=r.inputs&&!u.inputs;return p.literal=r.literal,p.constant=r.constant,p.inputs=r.inputs,f(p),o=t.$watch(p,e,n,i);function d(){s(a)&&o()}function p(t,e,n,r){return a=h&&r?r[0]:u(t,e,n,r),s(a)&&t.$$postDigest(d),c(a)}}function l(t){var e=!0;return S(t,function(t){j(t)||(e=!1)}),e}function h(t,e,n,r){var i=t.$watch(function(t){return i(),r(t)},e,n);return i}function f(t){return t.constant?t.$$watchDelegate=h:t.oneTime?t.$$watchDelegate=c:t.inputs&&(t.$$watchDelegate=u),t}function d(t,e){if(!e)return t;t.$$interceptor&&(e=function(t,e){function n(n){return e(t(n))}return n.$stateful=t.$stateful||e.$stateful,n.$$pure=t.$$pure&&e.$$pure,n}(t.$$interceptor,e),t=t.$$intercepted);var n=!1,r=function(r,i,o,a){var s=n&&a?a[0]:t(r,i,o,a);return e(s)};return r.$$intercepted=t,r.$$interceptor=e,r.literal=t.literal,r.oneTime=t.oneTime,r.constant=t.constant,e.$stateful||(n=!t.inputs,r.inputs=t.inputs?t.inputs:[t],e.$$pure||(r.inputs=r.inputs.map(function(t){return 2===t.isPure?function(e){return t(e)}:t}))),f(r)}}]}function Pr(){var t=!0;this.$get=["$rootScope","$exceptionHandler",function(e,n){return Dr(function(t){e.$evalAsync(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return j(e)?(t=e,this):t}}function Nr(){var t=!0;this.$get=["$browser","$exceptionHandler",function(e,n){return Dr(function(t){e.defer(t)},n,t)}],this.errorOnUnhandledRejections=function(e){return j(e)?(t=e,this):t}}function Dr(t,e,n){var r=i("$q",TypeError),o=0,a=[];function s(){return new u}function u(){var t=this.promise=new c;this.resolve=function(e){f(t,e)},this.reject=function(e){p(t,e)},this.notify=function(e){g(t,e)}}function c(){this.$$state={status:0}}function l(){for(;!o&&a.length;){var t=a.shift();if(!$r(t)){Lr(t);var n="Possibly unhandled rejection: "+qt(t.value);H(t.value)?e(t.value,n):e(n)}}}function h(r){!n||r.pending||2!==r.status||$r(r)||(0===o&&0===a.length&&t(l),a.push(r)),!r.processScheduled&&r.pending&&(r.processScheduled=!0,++o,t(function(){!function(r){var i,a,s;s=r.pending,r.processScheduled=!1,r.pending=void 0;try{for(var u=0,c=s.length;u<c;++u){Lr(r),a=s[u][0],i=s[u][r.status];try{z(i)?f(a,i(r.value)):1===r.status?f(a,r.value):p(a,r.value)}catch(h){p(a,h),h&&!0===h.$$passToExceptionHandler&&e(h)}}}finally{--o,n&&0===o&&t(l)}}(r)}))}function f(t,e){t.$$state.status||(e===t?v(t,r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):d(t,e))}function d(t,e){var n,r=!1;try{(U(e)||z(e))&&(n=e.then),z(n)?(t.$$state.status=-1,n.call(e,function(e){r||(r=!0,d(t,e))},i,function(e){g(t,e)})):(t.$$state.value=e,t.$$state.status=1,h(t.$$state))}catch(o){i(o)}function i(e){r||(r=!0,v(t,e))}}function p(t,e){t.$$state.status||v(t,e)}function v(t,e){t.$$state.value=e,t.$$state.status=2,h(t.$$state)}function g(n,r){var i=n.$$state.pending;n.$$state.status<=0&&i&&i.length&&t(function(){for(var t,n,o=0,a=i.length;o<a;o++){n=i[o][0],t=i[o][3];try{g(n,z(t)?t(r):r)}catch(s){e(s)}}})}function y(t){var e=new c;return p(e,t),e}function m(t,e,n){var r=null;try{z(n)&&(r=n())}catch(i){return y(i)}return Y(r)?r.then(function(){return e(t)},y):e(t)}function b(t,e,n,r){var i=new c;return f(i,t),i.then(e,n,r)}C(c.prototype,{then:function(t,e,n){if(L(t)&&L(e)&&L(n))return this;var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),this.$$state.status>0&&h(this.$$state),r},catch:function(t){return this.then(null,t)},finally:function(t,e){return this.then(function(e){return m(e,w,t)},function(e){return m(e,y,t)},e)}});var w=b;function _(t){if(!z(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);var e=new c;return t(function(t){f(e,t)},function(t){p(e,t)}),e}return _.prototype=c.prototype,_.defer=s,_.reject=y,_.when=b,_.resolve=w,_.all=function(t){var e=new c,n=0,r=Z(t)?[]:{};return S(t,function(t,i){n++,b(t).then(function(t){r[i]=t,--n||f(e,r)},function(t){p(e,t)})}),0===n&&f(e,r),e},_.race=function(t){var e=s();return S(t,function(t){b(t).then(e.resolve,e.reject)}),e.promise},_}function $r(t){return!!t.pur}function Lr(t){t.pur=!0}function jr(t){t.$$state&&Lr(t.$$state)}function Ur(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Fr(){var t=10,e=i("$rootScope"),n=null,r=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$exceptionHandler","$parse","$browser",function(i,a,s){function u(t){t.currentScope.$$destroyed=!0}function c(t){9===o&&(t.$$childHead&&c(t.$$childHead),t.$$nextSibling&&c(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}function h(){this.$id=x(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$suspended=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}h.prototype={constructor:h,$new:function(t,e){var n;return e=e||this,t?(n=new h).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=x(),this.$$ChildScope=null,this.$$suspended=!1}return e.prototype=t,e}(this)),n=new this.$$ChildScope),n.$parent=e,n.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=n,e.$$childTail=n):e.$$childHead=e.$$childTail=n,(t||e!==this)&&n.$on("$destroy",u),n},$watch:function(t,e,r,i){var o=a(t),s=z(e)?e:P;if(o.$$watchDelegate)return o.$$watchDelegate(this,s,r,o,t);var u=this,c=u.$$watchers,l={fn:s,last:k,get:o,exp:i||t,eq:!!r};return n=null,c||((c=u.$$watchers=[]).$$digestWatchIndex=-1),c.unshift(l),c.$$digestWatchIndex++,b(this,1),function(){var t=it(c,l);t>=0&&(b(u,-1),t<c.$$digestWatchIndex&&c.$$digestWatchIndex--),n=null}},$watchGroup:function(t,e){var n=new Array(t.length),r=new Array(t.length),i=[],o=this,a=!1,s=!0;if(!t.length){var u=!0;return o.$evalAsync(function(){u&&e(r,r,o)}),function(){u=!1}}if(1===t.length)return this.$watch(t[0],function(t,i,o){r[0]=t,n[0]=i,e(r,t===i?r:n,o)});function c(){a=!1;try{s?(s=!1,e(r,r,o)):e(r,n,o)}finally{for(var i=0;i<t.length;i++)n[i]=r[i]}}return S(t,function(t,e){var n=o.$watch(t,function(t){r[e]=t,a||(a=!0,o.$evalAsync(c))});i.push(n)}),function(){for(;i.length;)i.shift()()}},$watchCollection:function(t,e){v.$$pure=a(t).literal,v.$stateful=!v.$$pure;var n,r,i,o=this,s=e.length>1,u=0,c=a(t,v),h=[],f={},d=!0,p=0;function v(t){var e,i,o,a;if(!L(n=t)){if(U(n))if(_(n)){r!==h&&(p=(r=h).length=0,u++),p!==(e=n.length)&&(u++,r.length=p=e);for(var s=0;s<e;s++)o=n[s],(a=r[s])!=a&&o!=o||a===o||(u++,r[s]=o)}else{for(i in r!==f&&(r=f={},p=0,u++),e=0,n)l.call(n,i)&&(e++,o=n[i],a=r[i],i in r?a!=a&&o!=o||a===o||(u++,r[i]=o):(p++,r[i]=o,u++));if(p>e)for(i in u++,r)l.call(n,i)||(p--,delete r[i])}else r!==n&&(r=n,u++);return u}}return this.$watch(c,function(){if(d?(d=!1,e(n,n,o)):e(n,i,o),s)if(U(n))if(_(n)){i=new Array(n.length);for(var t=0;t<n.length;t++)i[t]=n[t]}else for(var r in i={},n)l.call(n,r)&&(i[r]=n[r]);else i=n})},$digest:function(){var o,a,u,c,l,h,v,b,w,_=t,S=d.length?f:this,x=[];y("$digest"),s.$$checkUrlChange(),this===f&&null!==r&&(s.defer.cancel(r),E()),n=null;do{l=!1,v=S;for(var T=0;T<d.length;T++){try{(0,(w=d[T]).fn)(w.scope,w.locals)}catch(I){i(I)}n=null}d.length=0;t:do{if(c=!v.$$suspended&&v.$$watchers)for(c.$$digestWatchIndex=c.length;c.$$digestWatchIndex--;)try{if(o=c[c.$$digestWatchIndex])if((a=(0,o.get)(v))===(u=o.last)||(o.eq?st(a,u):R(a)&&R(u))){if(o===n){l=!1;break t}}else l=!0,n=o,o.last=o.eq?ot(a,null):a,(0,o.fn)(a,u===k?a:u,v),_<5&&(x[b=4-_]||(x[b]=[]),x[b].push({msg:z(o.exp)?"fn: "+(o.exp.name||o.exp.toString()):o.exp,newVal:a,oldVal:u}))}catch(I){i(I)}if(!(h=!v.$$suspended&&v.$$watchersCount&&v.$$childHead||v!==S&&v.$$nextSibling))for(;v!==S&&!(h=v.$$nextSibling);)v=v.$parent}while(v=h);if((l||d.length)&&!_--)throw m(),e("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,x)}while(l||d.length);for(m();g<p.length;)try{p[g++]()}catch(I){i(I)}p.length=g=0,s.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;for(var e in this.$broadcast("$destroy"),this.$$destroyed=!0,this===f&&s.$$applicationDestroyed(),b(this,-this.$$watchersCount),this.$$listenerCount)w(this,this.$$listenerCount[e],e);t&&t.$$childHead===this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail===this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=P,this.$on=this.$watch=this.$watchGroup=function(){return P},this.$$listeners={},this.$$nextSibling=null,c(this)}},$eval:function(t,e){return a(t)(this,e)},$evalAsync:function(t,e){f.$$phase||d.length||s.defer(function(){d.length&&f.$digest()},null,"$evalAsync"),d.push({scope:this,fn:a(t),locals:e})},$$postDigest:function(t){p.push(t)},$apply:function(t){try{y("$apply");try{return this.$eval(t)}finally{m()}}catch(e){i(e)}finally{try{f.$digest()}catch(e){throw i(e),e}}},$applyAsync:function(t){var e=this;t&&v.push(function(){e.$eval(t)}),t=a(t),null===r&&(r=s.defer(function(){f.$apply(E)},null,"$applyAsync"))},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do{r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(delete n[r],w(i,1,t))}},$emit:function(t,e){var n,r,o,a=[],s=this,u=!1,c={name:t,targetScope:s,stopPropagation:function(){u=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=lt([c],arguments,1);do{for(n=s.$$listeners[t]||a,c.currentScope=s,r=0,o=n.length;r<o;r++)if(n[r])try{n[r].apply(null,l)}catch(h){i(h)}else n.splice(r,1),r--,o--;if(u)break;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,r=n,o=n,a={name:t,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[t])return a;for(var s,u,c,l=lt([a],arguments,1);r=o;){for(a.currentScope=r,u=0,c=(s=r.$$listeners[t]||[]).length;u<c;u++)if(s[u])try{s[u].apply(null,l)}catch(h){i(h)}else s.splice(u,1),u--,c--;if(!(o=r.$$listenerCount[t]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(o=r.$$nextSibling);)r=r.$parent}return a.currentScope=null,a}};var f=new h,d=f.$$asyncQueue=[],p=f.$$postDigestQueue=[],v=f.$$applyAsyncQueue=[],g=0;return f;function y(t){if(f.$$phase)throw e("inprog","{0} already in progress",f.$$phase);f.$$phase=t}function m(){f.$$phase=null}function b(t,e){do{t.$$watchersCount+=e}while(t=t.$parent)}function w(t,e,n){do{t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n]}while(t=t.$parent)}function k(){}function E(){for(;v.length;)try{v.shift()()}catch(t){i(t)}r=null}}]}function Br(){var t=/^\s*(https?|s?ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(e){return j(e)?(t=e,this):t},this.imgSrcSanitizationTrustedUrlList=function(t){return j(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i=r?e:t,o=si(n&&n.trim()).href;return""===o||o.match(i)?n:"unsafe:"+o}}}_r.Program="Program",_r.ExpressionStatement="ExpressionStatement",_r.AssignmentExpression="AssignmentExpression",_r.ConditionalExpression="ConditionalExpression",_r.LogicalExpression="LogicalExpression",_r.BinaryExpression="BinaryExpression",_r.UnaryExpression="UnaryExpression",_r.CallExpression="CallExpression",_r.MemberExpression="MemberExpression",_r.Identifier="Identifier",_r.Literal="Literal",_r.ArrayExpression="ArrayExpression",_r.Property="Property",_r.ObjectExpression="ObjectExpression",_r.ThisExpression="ThisExpression",_r.LocalsExpression="LocalsExpression",_r.NGValueParameter="NGValueParameter",_r.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:_r.Program,body:t}},expressionStatement:function(){return{type:_r.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!Tr(t))throw vr("lval","Trying to assign a value to a non l-value");t={type:_r.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:_r.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:_r.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:_r.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:_r.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:_r.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:_r.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:_r.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:_r.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=ot(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:_r.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());e=this.expect("(","[",".");)"("===e.text?(t={type:_r.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:_r.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:_r.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],n={type:_r.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return n},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:_r.Identifier,name:t.text}},constant:function(){return{type:_r.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:_r.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:_r.Property,kind:"init"},this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),{type:_r.ObjectExpression,properties:e}},throwError:function(t,e){throw vr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw vr("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw vr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],a=o.text;if(a===e||a===n||a===r||a===i||!e&&!n&&!r&&!i)return o}return!1},expect:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:_r.ThisExpression},$locals:{type:_r.LocalsExpression}}},Cr.prototype={compile:function(t){var e=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Er(t,e.$filter);var n,r="";if(this.stage="assign",n=Ir(t)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var o=xr(t.body);e.stage="inputs",S(o,function(t,n){var r="fn"+n;e.state[r]={vars:[],body:[],own:{}},e.state.computing=r;var i=e.nextId();e.recurse(t,i),e.return_(i),e.state.inputs.push({name:r,isPure:t.isPure}),t.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(t);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,yr,Sr,kr);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return S(e,function(e){t.push("var "+e.name+"="+n.generateFunction(e.name,"s")),e.isPure&&t.push(e.name,".isPure="+JSON.stringify(e.isPure)+";")}),e.length&&t.push("fn.inputs=["+e.map(function(t){return t.name}).join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return S(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,n,r,i,o){var a,s,u,c,l,h=this;if(r=r||P,!o&&j(t.watchId))return e=e||this.nextId(),void this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,n,r,i,!0));switch(t.type){case _r.Program:S(t.body,function(e,n){h.recurse(e.expression,void 0,void 0,function(t){s=t}),n!==t.body.length-1?h.current().body.push(s,";"):h.return_(s)});break;case _r.Literal:c=this.escape(t.value),this.assign(e,c),r(e||c);break;case _r.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(t){s=t}),c=t.operator+"("+this.ifDefined(s,0)+")",this.assign(e,c),r(c);break;case _r.BinaryExpression:this.recurse(t.left,void 0,void 0,function(t){a=t}),this.recurse(t.right,void 0,void 0,function(t){s=t}),c="+"===t.operator?this.plus(a,s):"-"===t.operator?this.ifDefined(a,0)+t.operator+this.ifDefined(s,0):"("+a+")"+t.operator+"("+s+")",this.assign(e,c),r(c);break;case _r.LogicalExpression:e=e||this.nextId(),h.recurse(t.left,e),h.if_("&&"===t.operator?e:h.not(e),h.lazyRecurse(t.right,e)),r(e);break;case _r.ConditionalExpression:e=e||this.nextId(),h.recurse(t.test,e),h.if_(e,h.lazyRecurse(t.alternate,e),h.lazyRecurse(t.consequent,e)),r(e);break;case _r.Identifier:e=e||this.nextId(),n&&(n.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),n.computed=!1,n.name=t.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",t.name)),function(){h.if_("inputs"===h.stage||"s",function(){i&&1!==i&&h.if_(h.isNull(h.nonComputedMember("s",t.name)),h.lazyAssign(h.nonComputedMember("s",t.name),"{}")),h.assign(e,h.nonComputedMember("s",t.name))})},e&&h.lazyAssign(e,h.nonComputedMember("l",t.name))),r(e);break;case _r.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),e=e||this.nextId(),h.recurse(t.object,a,void 0,function(){h.if_(h.notNull(a),function(){t.computed?(s=h.nextId(),h.recurse(t.property,s),h.getStringValue(s),i&&1!==i&&h.if_(h.not(h.computedMember(a,s)),h.lazyAssign(h.computedMember(a,s),"{}")),c=h.computedMember(a,s),h.assign(e,c),n&&(n.computed=!0,n.name=s)):(i&&1!==i&&h.if_(h.isNull(h.nonComputedMember(a,t.property.name)),h.lazyAssign(h.nonComputedMember(a,t.property.name),"{}")),c=h.nonComputedMember(a,t.property.name),h.assign(e,c),n&&(n.computed=!1,n.name=t.property.name))},function(){h.assign(e,"undefined")}),r(e)},!!i);break;case _r.CallExpression:e=e||this.nextId(),t.filter?(s=h.filter(t.callee.name),u=[],S(t.arguments,function(t){var e=h.nextId();h.recurse(t,e),u.push(e)}),c=s+"("+u.join(",")+")",h.assign(e,c),r(e)):(s=h.nextId(),u=[],h.recurse(t.callee,s,a={},function(){h.if_(h.notNull(s),function(){S(t.arguments,function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,function(t){u.push(t)})}),c=a.name?h.member(a.context,a.name,a.computed)+"("+u.join(",")+")":s+"("+u.join(",")+")",h.assign(e,c)},function(){h.assign(e,"undefined")}),r(e)}));break;case _r.AssignmentExpression:s=this.nextId(),this.recurse(t.left,void 0,a={},function(){h.if_(h.notNull(a.context),function(){h.recurse(t.right,s),c=h.member(a.context,a.name,a.computed)+t.operator+s,h.assign(e,c),r(e||c)})},1);break;case _r.ArrayExpression:u=[],S(t.elements,function(e){h.recurse(e,t.constant?void 0:h.nextId(),void 0,function(t){u.push(t)})}),c="["+u.join(",")+"]",this.assign(e,c),r(e||c);break;case _r.ObjectExpression:u=[],l=!1,S(t.properties,function(t){t.computed&&(l=!0)}),l?(e=e||this.nextId(),this.assign(e,"{}"),S(t.properties,function(t){t.computed?(a=h.nextId(),h.recurse(t.key,a)):a=t.key.type===_r.Identifier?t.key.name:""+t.key.value,s=h.nextId(),h.recurse(t.value,s),h.assign(h.member(e,a,t.computed),s)})):(S(t.properties,function(e){h.recurse(e.value,t.constant?void 0:h.nextId(),void 0,function(t){u.push(h.escape(e.key.type===_r.Identifier?e.key.name:""+e.key.value)+":"+t)})}),c="{"+u.join(",")+"}",this.assign(e,c)),r(e||c);break;case _r.ThisExpression:this.assign(e,"s"),r(e||"s");break;case _r.LocalsExpression:this.assign(e,"l"),r(e||"l");break;case _r.NGValueParameter:this.assign(e,"v"),r(e||"v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(e)?t+"."+e:t+'["'+e.replace(/[^$_a-zA-Z0-9]/g,this.stringEscapeFn)+'"]'},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,n,r,i,o){var a=this;return function(){a.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(B(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(q(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(void 0===t)return"undefined";throw vr("esc","IMPOSSIBLE")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Ar.prototype={compile:function(t){var e,n,r=this;Er(t,r.$filter),(e=Ir(t))&&(n=this.recurse(e));var i,o=xr(t.body);o&&(i=[],S(o,function(t,e){var n=r.recurse(t);n.isPure=t.isPure,t.input=n,i.push(n),t.watchId=e}));var a=[];S(t.body,function(t){a.push(r.recurse(t.expression))});var s=0===t.body.length?P:1===t.body.length?a[0]:function(t,e){var n;return S(a,function(r){n=r(t,e)}),n};return n&&(s.assign=function(t,e,r){return n(t,r,e)}),i&&(s.inputs=i),s},recurse:function(t,e,n){var r,i,o,a=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case _r.Literal:return this.value(t.value,e);case _r.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case _r.BinaryExpression:case _r.LogicalExpression:return r=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](r,i,e);case _r.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case _r.Identifier:return a.identifier(t.name,e,n);case _r.MemberExpression:return r=this.recurse(t.object,!1,!!n),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(r,i,e,n):this.nonComputedMember(r,i,e,n);case _r.CallExpression:return o=[],S(t.arguments,function(t){o.push(a.recurse(t))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(t,n,r,a){for(var s=[],u=0;u<o.length;++u)s.push(o[u](t,n,r,a));var c=i.apply(void 0,s,a);return e?{context:void 0,name:void 0,value:c}:c}:function(t,n,r,a){var s,u=i(t,n,r,a);if(null!=u.value){for(var c=[],l=0;l<o.length;++l)c.push(o[l](t,n,r,a));s=u.value.apply(u.context,c)}return e?{value:s}:s};case _r.AssignmentExpression:return r=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(t,n,o,a){var s=r(t,n,o,a),u=i(t,n,o,a);return s.context[s.name]=u,e?{value:u}:u};case _r.ArrayExpression:return o=[],S(t.elements,function(t){o.push(a.recurse(t))}),function(t,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](t,n,r,i));return e?{value:a}:a};case _r.ObjectExpression:return o=[],S(t.properties,function(t){o.push(t.computed?{key:a.recurse(t.key),computed:!0,value:a.recurse(t.value)}:{key:t.key.type===_r.Identifier?t.key.name:""+t.key.value,computed:!1,value:a.recurse(t.value)})}),function(t,n,r,i){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(t,n,r,i)]=o[s].value(t,n,r,i):a[o[s].key]=o[s].value(t,n,r,i);return e?{value:a}:a};case _r.ThisExpression:return function(t){return e?{value:t}:t};case _r.LocalsExpression:return function(t,n){return e?{value:n}:n};case _r.NGValueParameter:return function(t,n,r){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=j(a)?+a:0,e?{value:a}:a}},"unary-":function(t,e){return function(n,r,i,o){var a=t(n,r,i,o);return a=j(a)?-a:-0,e?{value:a}:a}},"unary!":function(t,e){return function(n,r,i,o){var a=!t(n,r,i,o);return e?{value:a}:a}},"binary+":function(t,e,n){return function(r,i,o,a){var s=kr(t(r,i,o,a),e(r,i,o,a));return n?{value:s}:s}},"binary-":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a),u=e(r,i,o,a),c=(j(s)?s:0)-(j(u)?u:0);return n?{value:c}:c}},"binary*":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)*e(r,i,o,a);return n?{value:s}:s}},"binary/":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)/e(r,i,o,a);return n?{value:s}:s}},"binary%":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)%e(r,i,o,a);return n?{value:s}:s}},"binary===":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)===e(r,i,o,a);return n?{value:s}:s}},"binary!==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!==e(r,i,o,a);return n?{value:s}:s}},"binary==":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)==e(r,i,o,a);return n?{value:s}:s}},"binary!=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)!=e(r,i,o,a);return n?{value:s}:s}},"binary<":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<e(r,i,o,a);return n?{value:s}:s}},"binary>":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>e(r,i,o,a);return n?{value:s}:s}},"binary<=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)<=e(r,i,o,a);return n?{value:s}:s}},"binary>=":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)>=e(r,i,o,a);return n?{value:s}:s}},"binary&&":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)&&e(r,i,o,a);return n?{value:s}:s}},"binary||":function(t,e,n){return function(r,i,o,a){var s=t(r,i,o,a)||e(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s)?e(i,o,a,s):n(i,o,a,s);return r?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,n){return function(r,i,o,a){var s=i&&t in i?i:r;n&&1!==n&&s&&null==s[t]&&(s[t]={});var u=s?s[t]:void 0;return e?{context:s,name:t,value:u}:u}},computedMember:function(t,e,n,r){return function(i,o,a,s){var u,c,l=t(i,o,a,s);return null!=l&&(u=yr(u=e(i,o,a,s)),r&&1!==r&&l&&!l[u]&&(l[u]={}),c=l[u]),n?{context:l,name:u,value:c}:c}},nonComputedMember:function(t,e,n,r){return function(i,o,a,s){var u=t(i,o,a,s);r&&1!==r&&u&&null==u[e]&&(u[e]={});var c=null!=u?u[e]:void 0;return n?{context:u,name:e,value:c}:c}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}},Mr.prototype={constructor:Mr,parse:function(t){var e=this.getAst(t),n=this.astCompiler.compile(e.ast);return n.literal=function(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===_r.Literal||t.body[0].expression.type===_r.ArrayExpression||t.body[0].expression.type===_r.ObjectExpression)}(e.ast),n.constant=function(t){return t.constant}(e.ast),n.oneTime=e.oneTime,n},getAst:function(t){var e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{ast:this.ast.ast(t),oneTime:e}}};var qr=i("$sce"),Vr={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Zr=/_([a-z])/g;function Hr(t){return t.replace(Zr,Jt)}function zr(t){var e=[];return j(t)&&S(t,function(t){e.push(function(t){if("self"===t)return t;if(B(t)){if(t.indexOf("***")>-1)throw qr("iwcard","Illegal sequence *** in string matcher.  String: {0}",t);return t=tt(t).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+t+"$")}if(G(t))return new RegExp("^"+t.source+"$");throw qr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(t))}),e}function Gr(){this.SCE_CONTEXTS=Vr;var e=["self"],n=[];this.trustedResourceUrlList=function(t){return arguments.length&&(e=zr(t)),e},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(t){this.trustedResourceUrlList=t}}),this.bannedResourceUrlList=function(t){return arguments.length&&(n=zr(t)),n},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(t){this.bannedResourceUrlList=t}}),this.$get=["$injector","$$sanitizeUri",function(r,i){var o=function(t){throw qr("unsafe","Attempting to use an unsafe value in a safe context.")};function a(e,n){return"self"===e?ui(n,oi)||ui(n,t.document.baseURI?t.document.baseURI:(ri||((ri=t.document.createElement("a")).href=".",ri=ri.cloneNode(!1)),ri.href)):!!e.exec(n.href)}function s(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}r.has("$sanitize")&&(o=r.get("$sanitize"));var u=s(),c={};return c[Vr.HTML]=s(u),c[Vr.CSS]=s(u),c[Vr.MEDIA_URL]=s(u),c[Vr.URL]=s(c[Vr.MEDIA_URL]),c[Vr.JS]=s(u),c[Vr.RESOURCE_URL]=s(c[Vr.URL]),{trustAs:function(t,e){var n=c.hasOwnProperty(t)?c[t]:null;if(!n)throw qr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",t,e);if(null===e||L(e)||""===e)return e;if("string"!=typeof e)throw qr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",t);return new n(e)},getTrusted:function(t,r){if(null===r||L(r)||""===r)return r;var s=c.hasOwnProperty(t)?c[t]:null;if(s&&r instanceof s)return r.$$unwrapTrustedValue();if(z(r.$$unwrapTrustedValue)&&(r=r.$$unwrapTrustedValue()),t===Vr.MEDIA_URL||t===Vr.URL)return i(r.toString(),t===Vr.MEDIA_URL);if(t===Vr.RESOURCE_URL){if(function(t){var r,i,o=si(t.toString()),s=!1;for(r=0,i=e.length;r<i;r++)if(a(e[r],o)){s=!0;break}if(s)for(r=0,i=n.length;r<i;r++)if(a(n[r],o)){s=!1;break}return s}(r))return r;throw qr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",r.toString())}if(t===Vr.HTML)return o(r);throw qr("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(t){return t instanceof u?t.$$unwrapTrustedValue():t}}}]}function Wr(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&o<8)throw qr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=Bt(Vr);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=N),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return S(Vr,function(t,e){var n=h(e);r[Hr("parse_as_"+n)]=function(e){return i(t,e)},r[Hr("get_trusted_"+n)]=function(e){return a(t,e)},r[Hr("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function Kr(){this.$get=["$window","$document",function(t,e){var n={},r=!((!t.nw||!t.nw.process)&&t.chrome&&(t.chrome.app&&t.chrome.app.runtime||!t.chrome.app&&t.chrome.runtime&&t.chrome.runtime.id))&&t.history&&t.history.pushState,i=M((/android (\d+)/.exec(h((t.navigator||{}).userAgent))||[])[1]),a=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},u=s.body&&s.body.style,c=!1,l=!1;return u&&(c=!(!("transition"in u)&&!("webkitTransition"in u)),l=!(!("animation"in u)&&!("webkitAnimation"in u))),{history:!(!r||i<4||a),hasEvent:function(t){if("input"===t&&o)return!1;if(L(n[t])){var e=s.createElement("div");n[t]="on"+t in e}return n[t]},csp:ut(),transitions:c,animations:l,android:i}}]}function Jr(){this.$get=D(function(t){return new Yr(t)})}function Yr(t){var e=this,n={},r=[],i=e.ALL_TASKS_TYPE="$$all$$",o=e.DEFAULT_TASK_TYPE="$$default$$";function a(){var t=r.pop();return t&&t.cb}function s(t){for(var e=r.length-1;e>=0;--e){var n=r[e];if(n.type===t)return r.splice(e,1),n.cb}}e.completeTask=function(e,r){r=r||o;try{e()}finally{!function(t){n[t=t||o]&&(n[t]--,n[i]--)}(r);var u=n[i];if(!u||!n[r])for(var c,l=u?s:a;c=l(r);)try{c()}catch(h){t.error(h)}}},e.incTaskCount=function(t){n[t=t||o]=(n[t]||0)+1,n[i]=(n[i]||0)+1},e.notifyWhenNoPendingTasks=function(t,e){n[e=e||i]?r.push({type:e,cb:t}):t()}}var Xr=i("$templateRequest");function Qr(){var t;this.httpOptions=function(e){return e?(t=e,this):t},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(e,n,r,i,o){function a(s,u){a.totalPendingRequests++,B(s)&&!L(n.get(s))||(s=o.getTrustedResourceUrl(s));var c=r.defaults&&r.defaults.transformResponse;return Z(c)?c=c.filter(function(t){return t!==jn}):c===jn&&(c=null),r.get(s,C({cache:n,transformResponse:c},t)).finally(function(){a.totalPendingRequests--}).then(function(t){return n.put(s,t.data)},function(t){return u||(t=Xr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,t.status,t.statusText),e(t)),i.reject(t)})}return a.totalPendingRequests=0,a}]}function ti(){this.$get=["$rootScope","$browser","$location",function(t,e,n){return{findBindings:function(t,e,n){var r=t.getElementsByClassName("ng-binding"),i=[];return S(r,function(t){var r=b.element(t).data("$binding");r&&S(r,function(r){n?new RegExp("(^|\\s)"+tt(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!==r.indexOf(e)&&i.push(t)})}),i},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=t.querySelectorAll("["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]');if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}var ei=i("$timeout");function ni(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){var o={};function a(a,s,u){z(a)||(u=s,s=a,a=P);var c,l=ht(arguments,3),h=j(u)&&!u,f=(h?r:n).defer(),d=f.promise;return c=e.defer(function(){try{f.resolve(a.apply(null,l))}catch(e){f.reject(e),i(e)}finally{delete o[d.$$timeoutId]}h||t.$apply()},s,"$timeout"),d.$$timeoutId=c,o[c]=f,d}return a.cancel=function(t){if(!t)return!1;if(!t.hasOwnProperty("$$timeoutId"))throw ei("badprom","`$timeout.cancel()` called with a promise that was not generated by `$timeout()`.");if(!o.hasOwnProperty(t.$$timeoutId))return!1;var n=t.$$timeoutId,r=o[n];return jr(r.promise),r.reject("canceled"),delete o[n],e.defer.cancel(n)},a}]}var ri,ii=t.document.createElement("a"),oi=si(t.location.href);ii.href="http://[::1]";var ai="[::1]"===ii.hostname;function si(t){if(!B(t))return t;var e=t;o&&(ii.setAttribute("href",e),e=ii.href),ii.setAttribute("href",e);var n=ii.hostname;return!ai&&n.indexOf(":")>-1&&(n="["+n+"]"),{href:ii.href,protocol:ii.protocol?ii.protocol.replace(/:$/,""):"",host:ii.host,search:ii.search?ii.search.replace(/^\?/,""):"",hash:ii.hash?ii.hash.replace(/^#/,""):"",hostname:n,port:ii.port,pathname:"/"===ii.pathname.charAt(0)?ii.pathname:"/"+ii.pathname}}function ui(t,e){return t=si(t),e=si(e),t.protocol===e.protocol&&t.host===e.host}function ci(){this.$get=D(t)}function li(t){var e=t[0]||{},n={},r="";function i(t){try{return decodeURIComponent(t)}catch(e){return t}}return function(){var t,o,a,s,u,c=function(t){try{return t.cookie||""}catch(e){return""}}(e);if(c!==r)for(t=(r=c).split("; "),n={},a=0;a<t.length;a++)(s=(o=t[a]).indexOf("="))>0&&(u=i(o.substring(0,s)),L(n[u])&&(n[u]=i(o.substring(s+1))));return n}}function hi(){this.$get=li}function fi(t){var e="Filter";function n(r,i){if(U(r)){var o={};return S(r,function(t,e){o[e]=n(e,t)}),o}return t.factory(r+e,i)}this.register=n,this.$get=["$injector",function(t){return function(n){return t.get(n+e)}}],n("currency",gi),n("date",Ci),n("filter",di),n("json",Ai),n("limitTo",Oi),n("lowercase",Mi),n("number",yi),n("orderBy",Ni),n("uppercase",Ri)}function di(){return function(t,e,n,r){if(!_(t)){if(null==t)return t;throw i("filter")("notarray","Expected array but received: {0}",t)}var o,a;switch(r=r||"$",vi(e)){case"function":o=e;break;case"boolean":case"null":case"number":case"string":a=!0;case"object":o=function(t,e,n,r){var i=U(t)&&n in t;return!0===e?e=st:z(e)||(e=function(t,e){return!(L(t)||(null===t||null===e?t!==e:U(e)||U(t)&&!$(t)||(t=h(""+t),e=h(""+e),-1===t.indexOf(e))))}),function(o){return i&&!U(o)?pi(o,t[n],e,n,!1):pi(o,t,e,n,r)}}(e,n,r,a);break;default:return t}return Array.prototype.filter.call(t,o)}}function pi(t,e,n,r,i,o){var a=vi(t),s=vi(e);if("string"===s&&"!"===e.charAt(0))return!pi(t,e.substring(1),n,r,i);if(Z(t))return t.some(function(t){return pi(t,e,n,r,i)});switch(a){case"object":var u;if(i){for(u in t)if(u.charAt&&"$"!==u.charAt(0)&&pi(t[u],e,n,r,!0))return!0;return!o&&pi(t,e,n,r,!1)}if("object"===s){for(u in e){var c=e[u];if(!z(c)&&!L(c)){var l=u===r;if(!pi(l?t:t[u],c,n,r,l,l))return!1}}return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function vi(t){return null===t?"null":typeof t}function gi(t){var e=t.NUMBER_FORMATS;return function(t,n,r){L(n)&&(n=e.CURRENCY_SYM),L(r)&&(r=e.PATTERNS[1].maxFrac);var i=n?/\u00A4/g:/\s*\u00A4\s*/g;return null==t?t:mi(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(i,n)}}function yi(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:mi(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function mi(t,e,n,r,i){if(!B(t)&&!q(t)||isNaN(t))return"";var o,a=!isFinite(t),s=!1,u=Math.abs(t)+"",c="";if(a)c="\u221e";else{!function(t,e,n,r){var i=t.d,o=i.length-t.i,a=(e=L(e)?Math.min(Math.max(n,o),r):+e)+t.i,s=i[a];if(a>0){i.splice(Math.max(t.i,a));for(var u=a;u<i.length;u++)i[u]=0}else{o=Math.max(0,o),t.i=1,i.length=Math.max(1,a=e+1),i[0]=0;for(var c=1;c<a;c++)i[c]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)i.unshift(0),t.i++;i.unshift(1),t.i++}else i[a-1]++;for(;o<Math.max(0,e);o++)i.push(0);var h=i.reduceRight(function(t,e,n,r){return r[n]=(e+=t)%10,Math.floor(e/10)},0);h&&(i.unshift(h),t.i++)}(o=function(t){var e,n,r,i,o,a=0;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;"0"===t.charAt(r);r++);if(r===(o=t.length))e=[0],n=1;else{for(o--;"0"===t.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=+t.charAt(r)}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{d:e,e:a,i:n}}(u),i,e.minFrac,e.maxFrac);var l=o.d,h=o.i,f=o.e,d=[];for(s=l.reduce(function(t,e){return t&&!e},!0);h<0;)l.unshift(0),h++;h>0?d=l.splice(h,l.length):(d=l,l=[0]);var p=[];for(l.length>=e.lgSize&&p.unshift(l.splice(-e.lgSize,l.length).join(""));l.length>e.gSize;)p.unshift(l.splice(-e.gSize,l.length).join(""));l.length&&p.unshift(l.join("")),c=p.join(n),d.length&&(c+=r+d.join("")),f&&(c+="e+"+f)}return t<0&&!s?e.negPre+c+e.negSuf:e.posPre+c+e.posSuf}function bi(t,e,n,r){var i="";for((t<0||r&&t<=0)&&(r?t=1-t:(t=-t,i="-")),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function wi(t,e,n,r,i){return n=n||0,function(o){var a=o["get"+t]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),bi(a,e,r,i)}}function _i(t,e,n){return function(r,i){var o=r["get"+t]();return i[f((n?"STANDALONE":"")+(e?"SHORT":"")+t)][o]}}function Si(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(e<=4?5:12)-e)}function ki(t){return function(e){var n,r=Si(e.getFullYear()),i=(n=e,new Date(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay())));return bi(1+Math.round((+i-+r)/6048e5),t)}}function Ei(t,e){return t.getFullYear()<=0?e.ERAS[0]:e.ERAS[1]}li.$inject=["$document"],fi.$inject=["$provide"],gi.$inject=["$locale"],yi.$inject=["$locale"];var xi={yyyy:wi("FullYear",4,0,!1,!0),yy:wi("FullYear",2,0,!0,!0),y:wi("FullYear",1,0,!1,!0),MMMM:_i("Month"),MMM:_i("Month",!0),MM:wi("Month",2,1),M:wi("Month",1,1),LLLL:_i("Month",!1,!0),dd:wi("Date",2),d:wi("Date",1),HH:wi("Hours",2),H:wi("Hours",1),hh:wi("Hours",2,-12),h:wi("Hours",1,-12),mm:wi("Minutes",2),m:wi("Minutes",1),ss:wi("Seconds",2),s:wi("Seconds",1),sss:wi("Milliseconds",3),EEEE:_i("Day"),EEE:_i("Day",!0),a:function(t,e){return t.getHours()<12?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){var r=-1*n;return(r>=0?"+":"")+(bi(Math[r>0?"floor":"ceil"](r/60),2)+bi(Math.abs(r%60),2))},ww:ki(2),w:ki(1),G:Ei,GG:Ei,GGG:Ei,GGGG:function(t,e){return t.getFullYear()<=0?e.ERANAMES[0]:e.ERANAMES[1]}},Ti=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Ii=/^-?\d+$/;function Ci(t){var e=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,a,s="",u=[];if(r=t.DATETIME_FORMATS[r=r||"mediumDate"]||r,B(n)&&(n=Ii.test(n)?M(n):function(t){var n;if(n=t.match(e)){var r=new Date(0),i=0,o=0,a=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=M(n[9]+n[10]),o=M(n[9]+n[11])),a.call(r,M(n[1]),M(n[2])-1,M(n[3]));var u=M(n[4]||0)-i,c=M(n[5]||0)-o,l=M(n[6]||0),h=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,u,c,l,h),r}return t}(n)),q(n)&&(n=new Date(n)),!V(n)||!isFinite(n.getTime()))return n;for(;r;)(a=Ti.exec(r))?r=(u=lt(u,a,1)).pop():(u.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=yt(i,c),n=bt(n,i,!0)),S(u,function(e){s+=(o=xi[e])?o(n,t.DATETIME_FORMATS,c):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),s}}function Ai(){return function(t,e){return L(e)&&(e=2),pt(t,e)}}Ci.$inject=["$locale"];var Mi=D(h),Ri=D(f);function Oi(){return function(t,e,n){return e=Math.abs(Number(e))===1/0?Number(e):M(e),R(e)?t:(q(t)&&(t=t.toString()),_(t)?(n=(n=!n||isNaN(n)?0:M(n))<0?Math.max(0,t.length+n):n,e>=0?Pi(t,n,n+e):0===n?Pi(t,e,t.length):Pi(t,Math.max(0,n+e),n)):t)}}function Pi(t,e,n){return B(t)?t.slice(e,n):d.call(t,e,n)}function Ni(t){return function(r,o,a,s){if(null==r)return r;if(!_(r))throw i("orderBy")("notarray","Expected array but received: {0}",r);Z(o)||(o=[o]),0===o.length&&(o=["+"]);var u=o.map(function(e){var n=1,r=N;if(z(e))r=e;else if(B(e)&&("+"!==e.charAt(0)&&"-"!==e.charAt(0)||(n="-"===e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(r=t(e)).constant)){var i=r();r=function(t){return t[i]}}return{get:r,descending:n}}),c=a?-1:1,l=z(s)?s:n,h=Array.prototype.map.call(r,function(t,n){return{value:t,tieBreaker:{value:n,type:"number",index:n},predicateValues:u.map(function(r){return function(t,n){var r=typeof t;return null===t?r="null":"object"===r&&(t=function(t){return z(t.valueOf)&&e(t=t.valueOf())||$(t)&&e(t=t.toString()),t}(t)),{value:t,type:r,index:n}}(r.get(t),n)})}});return h.sort(function(t,e){for(var r=0,i=u.length;r<i;r++){var o=l(t.predicateValues[r],e.predicateValues[r]);if(o)return o*u[r].descending*c}return(l(t.tieBreaker,e.tieBreaker)||n(t.tieBreaker,e.tieBreaker))*c}),h.map(function(t){return t.value})};function e(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function n(t,e){var n=0,r=t.type,i=e.type;if(r===i){var o=t.value,a=e.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(U(o)&&(o=t.index),U(a)&&(a=e.index)),o!==a&&(n=o<a?-1:1)}else n="undefined"===r?1:"undefined"===i?-1:"null"===r?1:"null"===i||r<i?-1:1;return n}}function Di(t){return z(t)&&(t={link:t}),t.restrict=t.restrict||"AC",D(t)}Ni.$inject=["$parse"];var $i=D({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Li={};S(Me,function(t,e){if("multiple"!==t){var n=bn("ng-"+e),r=i;"checked"===t&&(r=function(t,e,r){r.ngModel!==r[n]&&i(t,0,r)}),Li[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}),S(Oe,function(t,e){Li[e]=function(){return{priority:100,link:function(t,n,r){if("ngPattern"===e&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(c);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}t.$watch(r[e],function(t){r.$set(e,t)})}}}}),S(["src","srcset","href"],function(t){var e=bn("ng-"+t);Li[e]=["$sce",function(n){return{priority:99,link:function(r,i,a){var s=t,u=t;"href"===t&&"[object SVGAnimatedString]"===g.call(i.prop("href"))&&(a.$attr[u="xlinkHref"]="xlink:href",s=null),a.$set(e,n.getTrustedMediaUrl(a[e])),a.$observe(e,function(e){e?(a.$set(u,e),o&&s&&i.prop(s,a[u])):"href"===t&&a.$set(u,null)})}}}]});var ji={$addControl:P,$getControls:D([]),$$renameControl:function(t,e){t.$name=e},$removeControl:P,$setValidity:P,$setDirty:P,$setPristine:P,$setSubmitted:P,$$setSubmitted:P},Ui="ng-pending",Fi="ng-submitted";function Bi(t,e,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(e.name||e.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=ji,this.$$element=t,this.$$animate=r,Hi(this)}Bi.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Bi.prototype={$rollbackViewValue:function(){S(this.$$controls,function(t){t.$rollbackViewValue()})},$commitViewValue:function(){S(this.$$controls,function(t){t.$commitViewValue()})},$addControl:function(t){$t(t.$name,"input"),this.$$controls.push(t),t.$name&&(this[t.$name]=t),t.$$parentForm=this},$getControls:function(){return Bt(this.$$controls)},$$renameControl:function(t,e){var n=t.$name;this[n]===t&&delete this[n],this[e]=t,t.$name=e},$removeControl:function(t){t.$name&&this[t.$name]===t&&delete this[t.$name],S(this.$pending,function(e,n){this.$setValidity(n,null,t)},this),S(this.$error,function(e,n){this.$setValidity(n,null,t)},this),S(this.$$success,function(e,n){this.$setValidity(n,null,t)},this),it(this.$$controls,t),t.$$parentForm=ji},$setDirty:function(){this.$$animate.removeClass(this.$$element,Bo),this.$$animate.addClass(this.$$element,qo),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Bo,qo+" "+Fi),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,S(this.$$controls,function(t){t.$setPristine()})},$setUntouched:function(){S(this.$$controls,function(t){t.$setUntouched()})},$setSubmitted:function(){for(var t=this;t.$$parentForm&&t.$$parentForm!==ji;)t=t.$$parentForm;t.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,Fi),this.$submitted=!0,S(this.$$controls,function(t){t.$$setSubmitted&&t.$$setSubmitted()})}},zi({clazz:Bi,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(it(r,n),0===r.length&&delete t[e])}});var qi=function(t){return["$timeout","$parse",function(e,n){return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Bi,compile:function(n,i){n.addClass(Bo).addClass(Uo);var o=i.name?"name":!(!t||!i.ngForm)&&"ngForm";return{pre:function(t,n,i,a){var s=a[0];if(!("action"in i)){var u=function(e){t.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),e.preventDefault()};n[0].addEventListener("submit",u),n.on("$destroy",function(){e(function(){n[0].removeEventListener("submit",u)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var c=o?r(s.$name):P;o&&(c(t,s),i.$observe(o,function(e){s.$name!==e&&(c(t,void 0),s.$$parentForm.$$renameControl(s,e),(c=r(s.$name))(t,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),c(t,void 0),C(s,ji)})}}}};function r(t){return""===t?n('this[""]').assign:n(t).assign||P}}]},Vi=qi(),Zi=qi(!0);function Hi(t){t.$$classCache={},t.$$classCache[Fo]=!(t.$$classCache[Uo]=t.$$element.hasClass(Uo))}function zi(t){var e=t.set,n=t.unset;function r(t,e,n){n&&!t.$$classCache[e]?(t.$$animate.addClass(t.$$element,e),t.$$classCache[e]=!0):!n&&t.$$classCache[e]&&(t.$$animate.removeClass(t.$$element,e),t.$$classCache[e]=!1)}function i(t,e,n){e=e?"-"+Rt(e,"-"):"",r(t,Uo+e,!0===n),r(t,Fo+e,!1===n)}t.clazz.prototype.$setValidity=function(t,o,a){var s;L(o)?function(t,n,r,i){t[n]||(t[n]={}),e(t[n],r,i)}(this,"$pending",t,a):function(t,e,r,i){t[e]&&n(t[e],r,i),Gi(t[e])&&(t[e]=void 0)}(this,"$pending",t,a),J(o)?o?(n(this.$error,t,a),e(this.$$success,t,a)):(e(this.$error,t,a),n(this.$$success,t,a)):(n(this.$error,t,a),n(this.$$success,t,a)),this.$pending?(r(this,Ui,!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(r(this,Ui,!1),this.$valid=Gi(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid)),i(this,t,s=this.$pending&&this.$pending[t]?void 0:!this.$error[t]&&(!!this.$$success[t]||null)),this.$$parentForm.$setValidity(t,s,this)}}function Gi(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var Wi=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Ki=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Ji=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Yi=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Xi=/^(\d{4,})-(\d{2})-(\d{2})$/,Qi=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,to=/^(\d{4,})-W(\d\d)$/,eo=/^(\d{4,})-(\d\d)$/,no=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ro=jt();S("date,datetime-local,month,time,week".split(","),function(t){ro[t]=!0});var io={text:function(t,e,n,r,i,o){ao(0,e,n,r,i,o),oo(r)},date:uo("date",Xi,so(Xi,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":uo("datetimelocal",Qi,so(Qi,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:uo("time",no,so(no,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:uo("week",to,function(t,e){if(V(t))return t;if(B(t)){to.lastIndex=0;var n=to.exec(t);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,u=0,c=Si(r),l=7*(i-1);return e&&(o=e.getHours(),a=e.getMinutes(),s=e.getSeconds(),u=e.getMilliseconds()),new Date(r,0,c.getDate()+l,o,a,s,u)}}return NaN},"yyyy-Www"),month:uo("month",eo,so(eo,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,n,r,i,o,a,s){var u;if(co(0,e,0,r,"number"),lo(r),ao(0,e,n,r,i,o),j(n.min)||n.ngMin){var c=n.min||s(n.ngMin)(t);u=ho(c),r.$validators.min=function(t,e){return r.$isEmpty(e)||L(u)||e>=u},n.$observe("min",function(t){t!==c&&(u=ho(t),c=t,r.$validate())})}if(j(n.max)||n.ngMax){var l=n.max||s(n.ngMax)(t),h=ho(l);r.$validators.max=function(t,e){return r.$isEmpty(e)||L(h)||e<=h},n.$observe("max",function(t){t!==l&&(h=ho(t),l=t,r.$validate())})}if(j(n.step)||n.ngStep){var f=n.step||s(n.ngStep)(t),d=ho(f);r.$validators.step=function(t,e){return r.$isEmpty(e)||L(d)||vo(e,u||0,d)},n.$observe("step",function(t){t!==f&&(d=ho(t),f=t,r.$validate())})}},url:function(t,e,n,r,i,o){ao(0,e,n,r,i,o),oo(r),r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Ki.test(n)}},email:function(t,e,n,r,i,o){ao(0,e,n,r,i,o),oo(r),r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Ji.test(n)}},radio:function(t,e,n,r){var i=!n.ngTrim||"false"!==Q(n.ngTrim);L(n.name)&&e.attr("name",x()),e.on("change",function(t){var o;e[0].checked&&(o=n.value,i&&(o=Q(o)),r.$setViewValue(o,t&&t.type))}),r.$render=function(){var t=n.value;i&&(t=Q(t)),e[0].checked=t===r.$viewValue},n.$observe("value",r.$render)},range:function(t,e,n,r,i,o){co(0,e,0,r,"range"),lo(r),ao(0,e,n,r,i,o);var a=r.$$hasNativeValidators&&"range"===e[0].type,s=a?0:void 0,u=a?100:void 0,c=a?1:void 0,l=e[0].validity,h=j(n.min),f=j(n.max),d=j(n.step),p=r.$render;function v(t,r){e.attr(t,n[t]);var i=n[t];n.$observe(t,function(t){t!==i&&(i=t,r(t))})}r.$render=a&&j(l.rangeUnderflow)&&j(l.rangeOverflow)?function(){p(),r.$setViewValue(e.val())}:p,h&&(s=ho(n.min),r.$validators.min=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||L(s)||e>=s},v("min",function(t){if(s=ho(t),!R(r.$modelValue))if(a){var n=e.val();s>n&&e.val(n=s),r.$setViewValue(n)}else r.$validate()})),f&&(u=ho(n.max),r.$validators.max=a?function(){return!0}:function(t,e){return r.$isEmpty(e)||L(u)||e<=u},v("max",function(t){if(u=ho(t),!R(r.$modelValue))if(a){var n=e.val();u<n&&(e.val(u),n=u<s?s:u),r.$setViewValue(n)}else r.$validate()})),d&&(c=ho(n.step),r.$validators.step=a?function(){return!l.stepMismatch}:function(t,e){return r.$isEmpty(e)||L(c)||vo(e,s||0,c)},v("step",function(t){c=ho(t),R(r.$modelValue)||(a?r.$viewValue!==e.val()&&r.$setViewValue(e.val()):r.$validate())}))},checkbox:function(t,e,n,r,i,o,a,s){var u=go(s,t,"ngTrueValue",n.ngTrueValue,!0),c=go(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("change",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return st(t,u)}),r.$parsers.push(function(t){return t?u:c})},hidden:P,button:P,submit:P,reset:P,file:P};function oo(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function ao(t,e,n,r,i,o){var a,s=h(e[0].type);if(!i.android){var u=!1;e.on("compositionstart",function(){u=!0}),e.on("compositionupdate",function(t){(L(t.data)||""===t.data)&&(u=!1)}),e.on("compositionend",function(){u=!1,c()})}var c=function(t){if(a&&(o.defer.cancel(a),a=null),!u){var i=e.val(),c=t&&t.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=Q(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,c)}};if(i.hasEvent("input"))e.on("input",c);else{var l=function(t,e,n){a||(a=o.defer(function(){a=null,e&&e.value===n||c(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&e<19||37<=e&&e<=40||l(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut drop",l)}e.on("change",c),ro[s]&&r.$$hasNativeValidators&&s===n.type&&e.on("keydown wheel mousedown",function(t){if(!a){var e=this.validity,n=e.badInput,r=e.typeMismatch;a=o.defer(function(){a=null,e.badInput===n&&e.typeMismatch===r||c(t)})}}),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function so(t,e){return function(n,r){var i,o;if(V(n))return n;if(B(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Wi.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n)){i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},S(i,function(t,n){n<e.length&&(o[e[n]]=+t)});var a=new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0);return o.yyyy<100&&a.setFullYear(o.yyyy),a}}return NaN}}function uo(t,e,n,r){return function(i,o,a,s,u,c,l,h){co(0,o,0,s,t),ao(0,o,a,s,u,c);var f,d,p="time"===t||"datetimelocal"===t;if(s.$parsers.push(function(n){return s.$isEmpty(n)?null:e.test(n)?_(n,f):void(s.$$parserName=t)}),s.$formatters.push(function(t){if(t&&!V(t))throw Go("datefmt","Expected `{0}` to be a date",t);if(b(t)){f=t;var e=s.$options.getOption("timezone");return e&&(d=e,f=bt(f,e,!0)),function(t,e){var n=r;p&&B(s.$options.getOption("timeSecondsFormat"))&&(n=r.replace("ss.sss",s.$options.getOption("timeSecondsFormat")).replace(/:$/,""));var i=l("date")(t,n,e);return p&&s.$options.getOption("timeStripZeroSeconds")&&(i=i.replace(/(?::00)?(?:\.000)?$/,"")),i}(t,e)}return f=null,d=null,""}),j(a.min)||a.ngMin){var v=a.min||h(a.ngMin)(i),g=w(v);s.$validators.min=function(t){return!b(t)||L(g)||n(t)>=g},a.$observe("min",function(t){t!==v&&(g=w(t),v=t,s.$validate())})}if(j(a.max)||a.ngMax){var y=a.max||h(a.ngMax)(i),m=w(y);s.$validators.max=function(t){return!b(t)||L(m)||n(t)<=m},a.$observe("max",function(t){t!==y&&(m=w(t),y=t,s.$validate())})}function b(t){return t&&!(t.getTime&&t.getTime()!=t.getTime())}function w(t){return j(t)&&!V(t)?_(t)||void 0:t}function _(t,e){var r=s.$options.getOption("timezone");d&&d!==r&&(e=mt(e,yt(d)));var i=n(t,e);return!isNaN(i)&&r&&(i=bt(i,r)),i}}}function co(t,e,n,r,i){(r.$$hasNativeValidators=U(e[0].validity))&&r.$parsers.push(function(t){var n=e.prop("validity")||{};if(!n.badInput&&!n.typeMismatch)return t;r.$$parserName=i})}function lo(t){t.$parsers.push(function(e){return t.$isEmpty(e)?null:Yi.test(e)?parseFloat(e):void(t.$$parserName="number")}),t.$formatters.push(function(e){if(!t.$isEmpty(e)){if(!q(e))throw Go("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})}function ho(t){return j(t)&&!q(t)&&(t=parseFloat(t)),R(t)?void 0:t}function fo(t){return(0|t)===t}function po(t){var e=t.toString(),n=e.indexOf(".");if(-1===n){if(-1<t&&t<1){var r=/e-(\d+)$/.exec(e);if(r)return Number(r[1])}return 0}return e.length-n-1}function vo(t,e,n){var r=Number(t),i=!fo(r),o=!fo(e),a=!fo(n);if(i||o||a){var s=i?po(r):0,u=o?po(e):0,c=a?po(n):0,l=Math.max(s,u,c),h=Math.pow(10,l);r*=h,e*=h,n*=h,i&&(r=Math.round(r)),o&&(e=Math.round(e)),a&&(n=Math.round(n))}return(r-e)%n==0}function go(t,e,n,r,i){var o;if(j(r)){if(!(o=t(r)).constant)throw Go("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(e)}return i}var yo=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(io[h(a.type)]||io.text)(i,o,a,s[0],e,t,n,r)}}}}],mo=function(){var t={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(t){this.setAttribute("value",t)}};return{restrict:"E",priority:200,compile:function(e,n){if("hidden"===h(n.type))return{pre:function(e,n,r,i){var o=n[0];o.parentNode&&o.parentNode.insertBefore(o,o.nextSibling),Object.defineProperty&&Object.defineProperty(o,"value",t)}}}}},bo=/^(true|false|\d+)$/,wo=function(){function t(t,e,n){var r=j(n)?n:9===o?"":null;t.prop("value",r),e.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,n){return bo.test(n.ngValue)?function(e,n,r){t(n,r,e.$eval(r.ngValue))}:function(e,n,r){e.$watch(r.ngValue,function(e){t(n,r,e)})}}}},_o=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=Ut(t)})}}}}],So=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){var o=t(r.attr(i.$attr.ngBindTemplate));e.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=L(t)?"":t})}}}}],ko=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(e){return t.valueOf(e)});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){var n=o(e);r.html(t.getTrustedHtml(n)||"")})}}}}],Eo=D({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}});function xo(t,e){var n;return t="ngClass"+t,["$parse",function(a){return{restrict:"AC",link:function(s,u,c){var l,h=u.data("$classCounts"),f=!0;function d(t,e){var n=[];return S(t,function(t){(e>0||h[t])&&(h[t]=(h[t]||0)+e,h[t]===+(e>0)&&n.push(t))}),n.join(" ")}h||(h=jt(),u.data("$classCounts",h)),"ngClass"!==t&&(n||(n=a("$index",function(t){return 1&t})),s.$watch(n,function(t){var n;t===e?(n=d(i(n=l),1),c.$addClass(n)):function(t){t=d(i(t),-1),c.$removeClass(t)}(l),f=t})),s.$watch(a(c[t],o),function(t){f===e&&function(t,e){var n=i(t),o=i(e),a=r(n,o),s=r(o,n),u=d(a,-1),l=d(s,1);c.$addClass(l),c.$removeClass(u)}(l,t),l=t})}}}];function r(t,e){if(!t||!t.length)return[];if(!e||!e.length)return t;var n=[];t:for(var r=0;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i===e[o])continue t;n.push(i)}return n}function i(t){return t&&t.split(" ")}function o(t){if(!t)return t;var e=t;return Z(t)?e=t.map(o).join(" "):U(t)?e=Object.keys(t).filter(function(e){return t[e]}).join(" "):B(t)||(e=t+""),e}}var To=xo("",!0),Io=xo("Odd",0),Co=xo("Even",1),Ao=Di({compile:function(t,e){e.$set("ngCloak",void 0),t.removeClass("ng-cloak")}}),Mo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Ro={},Oo={blur:!0,focus:!0};function Po(t,e,n,r,i,o){return{restrict:"A",compile:function(a,s){var u=t(s[r]);return function(t,r){r.on(i,function(r){var i=function(){u(t,{$event:r})};if(e.$$phase)if(o)t.$evalAsync(i);else try{i()}catch(a){n(a)}else t.$apply(i)})}}}}S("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=bn("ng-"+t);Ro[e]=["$parse","$rootScope","$exceptionHandler",function(n,r,i){return Po(n,r,i,e,t,Oo[t])}]});var No=["$animate","$compile",function(t,e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,c;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=e.$$createComment("end ngIf",i.ngIf),s={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=Lt(s.clone),t.leave(c).done(function(t){!1!==t&&(c=null)}),s=null))})}}}],Do=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:b.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,u,c,l){var h,f,d,p=0,v=function(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),d&&(n.leave(d).done(function(t){!1!==t&&(f=null)}),f=d,d=null)};r.$watch(o,function(o){var u=function(t){!1===t||!j(s)||s&&!r.$eval(s)||e()},f=++p;o?(t(o,!0).then(function(t){if(!r.$$destroyed&&f===p){var e=r.$new();c.template=t;var s=l(e,function(t){v(),n.enter(t,null,i).done(u)});d=s,(h=e).$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||f===p&&(v(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(v(),c.template=null)})}}}}],$o=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(g.call(r[0]).match(/SVG/))return r.empty(),void e(ce(o.template,t.document).childNodes)(n,function(t){r.append(t)},{futureParentElement:r});r.html(o.template),e(r.contents())(n)}}}],Lo=Di({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),jo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,n,r){var i=n.ngList||", ",o="false"!==n.ngTrim,a=o?Q(i):i;r.$parsers.push(function(t){if(!L(t)){var e=[];return t&&S(t.split(a),function(t){t&&e.push(o?Q(t):t)}),e}}),r.$formatters.push(function(t){if(Z(t))return t.join(i)}),r.$isEmpty=function(t){return!t||!t.length}}}},Uo="ng-valid",Fo="ng-invalid",Bo="ng-pristine",qo="ng-dirty",Vo="ng-untouched",Zo="ng-touched",Ho="ng-empty",zo="ng-not-empty",Go=i("ngModel");function Wo(t,e,n,r,i,o,a,s,u){var c;this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=u(n.name||"",!1)(t),this.$$parentForm=ji,this.$options=Ko,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=t,this.$$rootScope=t.$root,this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=e,Hi(this),(c=this).$$scope.$watch(function(t){var e=c.$$ngModelGet(t);return e===c.$modelValue||c.$modelValue!=c.$modelValue&&e!=e||c.$$setModelValue(e),e})}Wo.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Wo.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var t=this.$$parse(this.$$attr.ngModel+"()"),e=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(e){var n=this.$$parsedNgModel(e);return z(n)&&(n=t(e)),n},this.$$ngModelSet=function(t,n){z(this.$$parsedNgModel(t))?e(t,{$$$p:n}):this.$$parsedNgModelAssign(t,n)}}else if(!this.$$parsedNgModel.assign)throw Go("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,wt(this.$$element))},$render:P,$isEmpty:function(t){return L(t)||""===t||null===t||t!=t},$$updateEmptyClasses:function(t){this.$isEmpty(t)?(this.$$animate.removeClass(this.$$element,zo),this.$$animate.addClass(this.$$element,Ho)):(this.$$animate.removeClass(this.$$element,Ho),this.$$animate.addClass(this.$$element,zo))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,qo),this.$$animate.addClass(this.$$element,Bo)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Bo),this.$$animate.addClass(this.$$element,qo),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,Vo,Zo)},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,Zo,Vo)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!R(this.$modelValue)){var t=this.$$lastCommittedViewValue,e=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(e,t,function(t){i||n===t||(o.$modelValue=t?e:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(t,e,n){this.$$currentValidationRunId++;var r,i,o,a,s=this.$$currentValidationRunId,u=this;function c(t,e){s===u.$$currentValidationRunId&&u.$setValidity(t,e)}function l(t){s===u.$$currentValidationRunId&&n(t)}a=u.$$parserName,(L(u.$$parserValid)?(c(a,null),1):(u.$$parserValid||(S(u.$validators,function(t,e){c(e,null)}),S(u.$asyncValidators,function(t,e){c(e,null)})),c(a,u.$$parserValid),u.$$parserValid))?(o=!0,S(u.$validators,function(n,r){var i=Boolean(n(t,e));o=o&&i,c(r,i)}),!o&&(S(u.$asyncValidators,function(t,e){c(e,null)}),1)?l(!1):(r=[],i=!0,S(u.$asyncValidators,function(n,o){var a=n(t,e);if(!Y(a))throw Go("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);c(o,void 0),r.push(a.then(function(){c(o,!0)},function(){i=!1,c(o,!1)}))}),r.length?u.$$q.all(r).then(function(){l(i)},P):l(!0))):l(!1)},$commitViewValue:function(){var t=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==t||""===t&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(t),this.$$lastCommittedViewValue=t,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var t=this.$$lastCommittedViewValue,e=this;if(this.$$parserValid=!L(t)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var n=0;n<this.$parsers.length;n++)if(L(t=this.$parsers[n](t))){this.$$parserValid=!1;break}R(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,i=this.$options.getOption("allowInvalid");function o(){e.$modelValue!==r&&e.$$writeModelToScope()}this.$$rawModelValue=t,i&&(this.$modelValue=t,o()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(n){i||(e.$modelValue=n?t:void 0,o())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),S(this.$viewChangeListeners,function(t){try{t()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(t,e){this.$viewValue=t,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(e)},$$debounceViewValueCommit:function(t){var e=this.$options.getOption("debounce");q(e[t])?e=e[t]:q(e.default)&&-1===this.$options.getOption("updateOn").indexOf(t)?e=e.default:q(e["*"])&&(e=e["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;e>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},e):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(t){this.$options=this.$options.createChild(t),this.$$setUpdateOnEvents()},$processModelValue:function(){var t=this.$$format();this.$viewValue!==t&&(this.$$updateEmptyClasses(t),this.$viewValue=this.$$lastCommittedViewValue=t,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,P))},$$format:function(){for(var t=this.$formatters,e=t.length,n=this.$modelValue;e--;)n=t[e](n);return n},$$setModelValue:function(t){this.$modelValue=this.$$rawModelValue=t,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),this.$$updateEvents=this.$options.getOption("updateOn"),this.$$updateEvents&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(t){this.$$debounceViewValueCommit(t&&t.type)}},zi({clazz:Wo,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]}});var Ko,Jo=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Wo,priority:1,compile:function(e){return e.addClass(Bo).addClass(Vo).addClass(Uo),{pre:function(t,e,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];function a(){o.$setTouched()}o.$$setUpdateOnEvents(),n.on("blur",function(){o.$touched||(t.$$phase?e.$evalAsync(a):e.$apply(a))})}}}}}],Yo=/(\s+|^)default(\s+|$)/;function Xo(t){this.$$options=t}Xo.prototype={getOption:function(t){return this.$$options[t]},createChild:function(t){var e=!1;return S(t=C({},t),function(n,r){"$inherit"===n?"*"===r?e=!0:(t[r]=this.$$options[r],"updateOn"===r&&(t.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(t.updateOnDefault=!1,t[r]=Q(n.replace(Yo,function(){return t.updateOnDefault=!0," "})))},this),e&&(delete t["*"],ta(t,this.$$options)),ta(t,Ko.$$options),new Xo(t)}},Ko=new Xo({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Qo=function(){function t(t,e){this.$$attrs=t,this.$$scope=e}return t.$inject=["$attrs","$scope"],t.prototype={$onInit:function(){var t=this.parentCtrl?this.parentCtrl.$options:Ko,e=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=t.createChild(e)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:t}};function ta(t,e){S(e,function(e,n){j(t[n])||(t[n]=e)})}var ea=Di({terminal:!0,priority:1e3}),na=i("ngOptions"),ra=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ia=["$compile","$document","$parse",function(e,n,r){var i=t.document.createElement("option"),o=t.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(t,e,n,r){r[0].registerOption=P},post:function(t,s,u,c){for(var l=c[0],h=c[1],f=u.multiple,d=0,p=s.children(),v=p.length;d<v;d++)if(""===p[d].value){l.hasEmptyOption=!0,l.emptyOption=p.eq(d);break}s.empty();var g,y=!!l.emptyOption;a(i.cloneNode(!1)).val("?");var m=function(t,e,n){var i=t.match(ra);if(!i)throw na("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,wt(e));var o=i[5]||i[7],a=i[6],s=/ as /.test(i[0])&&i[1],u=i[9],c=r(i[2]?i[1]:o),l=s&&r(s)||c,h=u&&r(u),f=u?function(t,e){return h(n,e)}:function(t){return Le(t)},d=function(t,e){return f(t,b(t,e))},p=r(i[2]||i[1]),v=r(i[3]||""),g=r(i[4]||""),y=r(i[8]),m={},b=a?function(t,e){return m[a]=e,m[o]=t,m}:function(t){return m[o]=t,m};function w(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function S(t){var e;if(!a&&_(t))e=t;else for(var n in e=[],t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n);return e}return{trackBy:u,getTrackByValue:d,getWatchables:r(y,function(t){for(var e=[],r=S(t=t||[]),o=r.length,a=0;a<o;a++){var s=t===r?a:r[a],u=t[s],c=b(u,s),l=f(u,c);if(e.push(l),i[2]||i[1]){var h=p(n,c);e.push(h)}if(i[4]){var d=g(n,c);e.push(d)}}return e}),getOptions:function(){for(var t=[],e={},r=y(n)||[],i=S(r),o=i.length,a=0;a<o;a++){var s=r===i?a:i[a],c=b(r[s],s),h=l(n,c),m=f(h,c),_=new w(m,h,p(n,c),v(n,c),g(n,c));t.push(_),e[m]=_}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[d(t)]},getViewValueFromOption:function(t){return u?ot(t.viewValue):t.viewValue}}}}}(u.ngOptions,s,t),b=n[0].createDocumentFragment();function w(t,e){var n=i.cloneNode(!1);e.appendChild(n),function(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),e.value=t.selectValue}(t,n)}function k(t){var e=g.getOptionFromViewValue(t),n=e&&e.element;return n&&!n.selected&&(n.selected=!0),e}l.generateUnknownOptionValue=function(t){return"?"},f?(l.writeValue=function(t){if(g){var e=t&&t.map(k)||[];g.items.forEach(function(t){t.element.selected&&!rt(e,t)&&(t.element.selected=!1)})}},l.readValue=function(){var t=s.val()||[],e=[];return S(t,function(t){var n=g.selectValueMap[t];n&&!n.disabled&&e.push(g.getViewValueFromOption(n))}),e},m.trackBy&&t.$watchCollection(function(){if(Z(h.$viewValue))return h.$viewValue.map(function(t){return m.getTrackByValue(t)})},function(){h.$render()})):(l.writeValue=function(t){if(g){var e=s[0].options[s[0].selectedIndex],n=g.getOptionFromViewValue(t);e&&e.removeAttribute("selected"),n?(s[0].value!==n.selectValue&&(l.removeUnknownOption(),s[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(t)}},l.readValue=function(){var t=g.selectValueMap[s.val()];return t&&!t.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),g.getViewValueFromOption(t)):null},m.trackBy&&t.$watch(function(){return m.getTrackByValue(h.$viewValue)},function(){h.$render()})),y&&(e(l.emptyOption)(t),s.prepend(l.emptyOption),8===l.emptyOption[0].nodeType?(l.hasEmptyOption=!1,l.registerOption=function(t,e){""===e.val()&&(l.hasEmptyOption=!0,l.emptyOption=e,l.emptyOption.removeClass("ng-scope"),h.$render(),e.on("$destroy",function(){var t=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,t&&h.$render()}))}):l.emptyOption.removeClass("ng-scope")),t.$watchCollection(m.getWatchables,function(){var t=g&&l.readValue();if(g)for(var e=g.items.length-1;e>=0;e--){var n=g.items[e];j(n.group)?Ie(n.element.parentNode):Ie(n.element)}g=m.getOptions();var r={};if(g.items.forEach(function(t){var e;j(t.group)?((e=r[t.group])||(e=o.cloneNode(!1),b.appendChild(e),e.label=null===t.group?"null":t.group,r[t.group]=e),w(t,e)):w(t,b)}),s[0].appendChild(b),h.$render(),!h.$isEmpty(t)){var i=l.readValue();(m.trackBy||f?st(t,i):t===i)||(h.$setViewValue(i),h.$render())}})}}}}],oa=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,a,s){var u,c=s.count,l=s.$attr.when&&a.attr(s.$attr.when),f=s.offset||0,d=o.$eval(l)||{},p={},v=e.startSymbol(),g=e.endSymbol(),y=v+c+"-"+f+g,m=b.noop;function w(t){a.text(t||"")}S(s,function(t,e){var n=i.exec(e);if(n){var r=(n[1]?"-":"")+h(n[2]);d[r]=a.attr(s.$attr[e])}}),S(d,function(t,n){p[n]=e(t.replace(r,y))}),o.$watch(c,function(e){var r=parseFloat(e),i=R(r);if(i||r in d||(r=t.pluralCat(r-f)),!(r===u||i&&R(u))){m();var a=p[r];L(a)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+l),m=P,w()):m=o.$watch(a,w),u=r}})}}}],aa=i("ngRef"),sa=["$parse",function(t){return{priority:-1,restrict:"A",compile:function(e,n){var r=bn(nt(e)),i=t(n.ngRef),o=i.assign||function(){throw aa("nonassign",'Expression in ngRef="{0}" is non-assignable!',n.ngRef)};return function(t,e,a){var s;if(a.hasOwnProperty("ngRefRead")){if("$element"===a.ngRefRead)s=e;else if(!(s=e.data("$"+a.ngRefRead+"Controller")))throw aa("noctrl",'The controller for ngRefRead="{0}" could not be found on ngRef="{1}"',a.ngRefRead,n.ngRef)}else s=e.data("$"+r+"Controller");o(t,s=s||e),e.on("$destroy",function(){i(t)===s&&o(t,null)})}}}}],ua=["$parse","$animate","$compile",function(t,e,n){var r="$$NG_REMOVED",o=i("ngRepeat"),a=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0==(1&e))},s=function(t){return t.clone[0]},u=function(t){return t.clone[t.clone.length-1]},c=function(t,e,n){return Le(n)},h=function(t,e){return e};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,f){var d=f.ngRepeat,p=n.$$createComment("end ngRepeat",d),v=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!v)throw o("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",d);var g=v[1],y=v[2],m=v[3],b=v[4];if(!(v=g.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw o("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var w,k=v[3]||v[1],E=v[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw o("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);if(b){var x={$id:Le},T=t(b);w=function(t,e,n,r){return E&&(x[E]=e),x[k]=n,x.$index=r,T(t,x)}}return function(t,n,i,f,v){var g=jt();t.$watchCollection(y,function(i){var f,y,b,T,I,C,A,M,R,O,P,N,D=n[0],$=jt();if(m&&(t[m]=i),_(i))R=i,M=w||c;else for(var L in M=w||h,R=[],i)l.call(i,L)&&"$"!==L.charAt(0)&&R.push(L);for(T=R.length,P=new Array(T),f=0;f<T;f++)if(A=M(t,I=i===R?f:R[f],C=i[I],f),g[A])O=g[A],delete g[A],$[A]=O,P[f]=O;else{if($[A])throw S(P,function(t){t&&t.scope&&(g[t.id]=t)}),o("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",d,A,C);P[f]={id:A,scope:void 0,clone:void 0},$[A]=!0}for(var j in x&&(x[k]=void 0),g){if(N=Lt((O=g[j]).clone),e.leave(N),N[0].parentNode)for(f=0,y=N.length;f<y;f++)N[f][r]=!0;O.scope.$destroy()}for(f=0;f<T;f++)if(C=i[I=i===R?f:R[f]],(O=P[f]).scope){b=D;do{b=b.nextSibling}while(b&&b[r]);s(O)!==b&&e.move(Lt(O.clone),null,D),D=u(O),a(O.scope,f,k,C,E,I,T)}else v(function(t,n){O.scope=n;var r=p.cloneNode(!1);t[t.length++]=r,e.enter(t,null,D),D=r,O.clone=t,$[O.id]=O,a(O.scope,f,k,C,E,I,T)});g=$})}}}}],ca="ng-hide",la="ng-hide-animate",ha=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,ca,{tempClasses:la})})}}}],fa=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,ca,{tempClasses:la})})}}}],da=Di(function(t,e,n){t.$watchCollection(n.ngStyle,function(t,n){n&&t!==n&&S(n,function(t,n){e.css(n,"")}),t&&e.css(t)})}),pa=["$animate","$compile",function(t,e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var a=[],s=[],u=[],c=[],l=function(t,e){return function(n){!1!==n&&t.splice(e,1)}};n.$watch(i.ngSwitch||i.on,function(n){for(var r,i;u.length;)t.cancel(u.pop());for(r=0,i=c.length;r<i;++r){var h=Lt(s[r].clone);c[r].$destroy(),(u[r]=t.leave(h)).done(l(u,r))}s.length=0,c.length=0,(a=o.cases["!"+n]||o.cases["?"])&&S(a,function(n){n.transclude(function(r,i){c.push(i);var o=n.element;r[r.length++]=e.$$createComment("end ngSwitchWhen"),s.push({clone:r}),t.enter(r,o.parent(),o)})})})}}}],va=Di({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){S(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(t,e,n){return n[e-1]!==t}),function(t){r.cases["!"+t]=r.cases["!"+t]||[],r.cases["!"+t].push({transclude:i,element:e})})}}),ga=Di({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),ya=i("ngTransclude"),ma=["$compile",function(t){return{restrict:"EAC",compile:function(e){var n=t(e.contents());return e.empty(),function(t,e,r,i,o){if(!o)throw ya("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",wt(e));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var a=r.ngTransclude||r.ngTranscludeSlot;function s(){n(t,function(t){e.append(t)})}o(function(t,n){t.length&&function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];if(r.nodeType!==Ft||r.nodeValue.trim())return!0}}(t)?e.append(t):(s(),n.$destroy())},null,a),a&&!o.isSlotFilled(a)&&s()}}}}],ba=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){"text/ng-template"===n.type&&t.put(n.id,e[0].text)}}}],wa={$setViewValue:P,$render:P};function _a(t,e){t.prop("selected",e),t.attr("selected",e)}var Sa=["$element","$scope",function(e,n){var r=this,i=new Fe;r.selectValueMap={},r.ngModelCtrl=wa,r.multiple=!1,r.unknownOption=a(t.document.createElement("option")),r.hasEmptyOption=!1,r.emptyOption=void 0,r.renderUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),e.prepend(r.unknownOption),_a(r.unknownOption,!0),e.val(n)},r.updateUnknownOption=function(t){var n=r.generateUnknownOptionValue(t);r.unknownOption.val(n),_a(r.unknownOption,!0),e.val(n)},r.generateUnknownOptionValue=function(t){return"? "+Le(t)+" ?"},r.removeUnknownOption=function(){r.unknownOption.parent()&&r.unknownOption.remove()},r.selectEmptyOption=function(){r.emptyOption&&(e.val(""),_a(r.emptyOption,!0))},r.unselectEmptyOption=function(){r.hasEmptyOption&&_a(r.emptyOption,!1)},n.$on("$destroy",function(){r.renderUnknownOption=P}),r.readValue=function(){var t=e.val(),n=t in r.selectValueMap?r.selectValueMap[t]:t;return r.hasOption(n)?n:null},r.writeValue=function(t){var n=e[0].options[e[0].selectedIndex];if(n&&_a(a(n),!1),r.hasOption(t)){r.removeUnknownOption();var i=Le(t);e.val(i in r.selectValueMap?i:t),_a(a(e[0].options[e[0].selectedIndex]),!0)}else r.selectUnknownOrEmptyOption(t)},r.addOption=function(t,e){if(8!==e[0].nodeType){$t(t,'"option value"'),""===t&&(r.hasEmptyOption=!0,r.emptyOption=e);var n=i.get(t)||0;i.set(t,n+1),s()}},r.removeOption=function(t){var e=i.get(t);e&&(1===e?(i.delete(t),""===t&&(r.hasEmptyOption=!1,r.emptyOption=void 0)):i.set(t,e-1))},r.hasOption=function(t){return!!i.get(t)},r.$hasEmptyOption=function(){return r.hasEmptyOption},r.$isUnknownOptionSelected=function(){return e[0].options[0]===r.unknownOption[0]},r.$isEmptyOptionSelected=function(){return r.hasEmptyOption&&e[0].options[e[0].selectedIndex]===r.emptyOption[0]},r.selectUnknownOrEmptyOption=function(t){null==t&&r.emptyOption?(r.removeUnknownOption(),r.selectEmptyOption()):r.unknownOption.parent().length?r.updateUnknownOption(t):r.renderUnknownOption(t)};var o=!1;function s(){o||(o=!0,n.$$postDigest(function(){o=!1,r.ngModelCtrl.$render()}))}var u=!1;function c(t){u||(u=!0,n.$$postDigest(function(){n.$$destroyed||(u=!1,r.ngModelCtrl.$setViewValue(r.readValue()),t&&r.ngModelCtrl.$render())}))}r.registerOption=function(t,e,n,i,o){var a,u;n.$attr.ngValue?n.$observe("value",function(t){var n,i=e.prop("selected");j(u)&&(r.removeOption(a),delete r.selectValueMap[u],n=!0),u=Le(t),a=t,r.selectValueMap[u]=t,r.addOption(t,e),e.attr("value",u),n&&i&&c()}):i?n.$observe("value",function(t){var n;r.readValue();var i=e.prop("selected");j(a)&&(r.removeOption(a),n=!0),a=t,r.addOption(t,e),n&&i&&c()}):o?t.$watch(o,function(t,i){n.$set("value",t);var o=e.prop("selected");i!==t&&r.removeOption(i),r.addOption(t,e),i&&o&&c()}):r.addOption(n.value,e),n.$observe("disabled",function(t){("true"===t||t&&e.prop("selected"))&&(r.multiple?c(!0):(r.ngModelCtrl.$setViewValue(null),r.ngModelCtrl.$render()))}),e.on("$destroy",function(){var t=r.readValue(),e=n.value;r.removeOption(e),s(),(r.multiple&&t&&-1!==t.indexOf(e)||t===e)&&c(!0)})}}],ka=function(){return{restrict:"E",require:["select","?ngModel"],controller:Sa,priority:1,link:{pre:function(t,e,n,r){var i=r[0],o=r[1];if(o){if(i.ngModelCtrl=o,e.on("change",function(){i.removeUnknownOption(),t.$apply(function(){o.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var t=[];return S(e.find("option"),function(e){if(e.selected&&!e.disabled){var n=e.value;t.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),t},i.writeValue=function(t){S(e.find("option"),function(e){var n=!!t&&(rt(t,e.value)||rt(t,i.selectValueMap[e.value]));n!==e.selected&&_a(a(e),n)})};var s,u=NaN;t.$watch(function(){u!==o.$viewValue||st(s,o.$viewValue)||(s=Bt(o.$viewValue),o.$render()),u=o.$viewValue}),o.$isEmpty=function(t){return!t||0===t.length}}}else i.registerOption=P},post:function(t,e,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}}}},Ea=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){var r,i;return j(n.ngValue)||(j(n.value)?r=t(n.value,!0):(i=t(e.text(),!0))||n.$set("value",e.text())),function(t,e,n){var o="$selectController",a=e.parent(),s=a.data(o)||a.parent().data(o);s&&s.registerOption(t,e,n,r,i)}}}}],xa=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o=r.hasOwnProperty("required")||t(r.ngRequired)(e);r.ngRequired||(r.required=!0),i.$validators.required=function(t,e){return!o||!i.$isEmpty(e)},r.$observe("required",function(t){o!==t&&(o=t,i.$validate())})}}}}],Ta=["$parse",function(t){return{restrict:"A",require:"?ngModel",compile:function(e,n){var r,i;return n.ngPattern&&(r=n.ngPattern,i="/"===n.ngPattern.charAt(0)&&c.test(n.ngPattern)?function(){return n.ngPattern}:t(n.ngPattern)),function(t,e,n,o){if(o){var a=n.pattern;n.ngPattern?a=i(t):r=n.pattern;var s=Aa(a,r,e);n.$observe("pattern",function(t){var n=s;s=Aa(t,r,e),(n&&n.toString())!==(s&&s.toString())&&o.$validate()}),o.$validators.pattern=function(t,e){return o.$isEmpty(e)||L(s)||s.test(e)}}}}}}],Ia=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o=r.maxlength||t(r.ngMaxlength)(e),a=Ma(o);r.$observe("maxlength",function(t){o!==t&&(a=Ma(t),o=t,i.$validate())}),i.$validators.maxlength=function(t,e){return a<0||i.$isEmpty(e)||e.length<=a}}}}}],Ca=["$parse",function(t){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o=r.minlength||t(r.ngMinlength)(e),a=Ma(o)||-1;r.$observe("minlength",function(t){o!==t&&(a=Ma(t)||-1,o=t,i.$validate())}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=a}}}}}];function Aa(t,e,n){if(t){if(B(t)&&(t=new RegExp("^"+t+"$")),!t.test)throw i("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",e,t,wt(n));return t}}function Ma(t){var e=M(t);return R(e)?-1:e}t.angular.bootstrap?t.console&&console.log("WARNING: Tried to load AngularJS more than once."):(function(){var e;if(!Ot){var n=ct();(s=L(n)?t.jQuery:n?t[n]:void 0)&&s.fn.on?(a=s,C(s.fn,{scope:Ae.scope,isolateScope:Ae.isolateScope,controller:Ae.controller,injector:Ae.injector,inheritedData:Ae.inheritedData})):a=he,e=a.cleanData,a.cleanData=function(t){for(var n,r,i=0;null!=(r=t[i]);i++)(n=(a._data(r)||{}).events)&&n.$destroy&&a(r).triggerHandler("$destroy");e(t)},b.element=a,Ot=!0}}(),function(e){C(e,{errorHandlingConfig:n,bootstrap:It,copy:ot,extend:C,merge:A,equals:st,element:a,forEach:S,injector:Je,noop:P,bind:ft,toJson:pt,fromJson:vt,identity:N,isUndefined:L,isDefined:j,isString:B,isFunction:z,isObject:U,isNumber:q,isElement:et,isArray:Z,version:Vt,isDate:V,callbacks:{$$counter:0},getTestability:At,reloadWithDebugInfo:Ct,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Pt,$$minErr:i,$$csp:ut,$$encodeUriSegment:kt,$$encodeUriQuery:Et,$$lowercase:h,$$stringify:Ut,$$uppercase:f}),(u=function(t){var e=i("$injector"),n=i("ng");function r(t,e,n){return t[e]||(t[e]=n())}var o=r(t,"angular",Object);return o.$$minErr=o.$$minErr||i,r(o,"module",function(){var t={};return function(i,o,a){var s={};return function(t,e){if("hasOwnProperty"===t)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(i),o&&t.hasOwnProperty(i)&&(t[i]=null),r(t,i,function(){if(!o)throw e("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var t=[],r=[],u=[],c=h("$injector","invoke","push",r),l={_invokeQueue:t,_configBlocks:r,_runBlocks:u,info:function(t){if(j(t)){if(!U(t))throw n("aobj","Argument '{0}' must be an object","value");return s=t,this}return s},requires:o,name:i,provider:f("$provide","provider"),factory:f("$provide","factory"),service:f("$provide","service"),value:h("$provide","value"),constant:h("$provide","constant","unshift"),decorator:f("$provide","decorator",r),animation:f("$animateProvider","register"),filter:f("$filterProvider","register"),controller:f("$controllerProvider","register"),directive:f("$compileProvider","directive"),component:f("$compileProvider","component"),config:c,run:function(t){return u.push(t),this}};return a&&c(a),l;function h(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),l}}function f(e,n,r){return r||(r=t),function(t,o){return o&&z(o)&&(o.$$moduleName=i),r.push([e,n,arguments]),l}}})}})}(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Br}),t.provider("$compile",vn).directive({a:$i,input:yo,textarea:yo,form:Vi,script:ba,select:ka,option:Ea,ngBind:_o,ngBindHtml:ko,ngBindTemplate:So,ngClass:To,ngClassEven:Co,ngClassOdd:Io,ngCloak:Ao,ngController:Mo,ngForm:Zi,ngHide:fa,ngIf:No,ngInclude:Do,ngInit:Lo,ngNonBindable:ea,ngPluralize:oa,ngRef:sa,ngRepeat:ua,ngShow:ha,ngStyle:da,ngSwitch:pa,ngSwitchWhen:va,ngSwitchDefault:ga,ngOptions:ia,ngTransclude:ma,ngModel:Jo,ngList:jo,ngChange:Eo,pattern:Ta,ngPattern:Ta,required:xa,ngRequired:xa,minlength:Ca,ngMinlength:Ca,maxlength:Ia,ngMaxlength:Ia,ngValue:wo,ngModelOptions:Qo}).directive({ngInclude:$o,input:mo}).directive(Li).directive(Ro),t.provider({$anchorScroll:Ye,$animate:on,$animateCss:un,$$animateJs:nn,$$animateQueue:rn,$$AnimateRunner:sn,$$animateAsyncRun:an,$browser:ln,$cacheFactory:hn,$controller:xn,$document:Tn,$$isDocumentHidden:In,$exceptionHandler:Cn,$filter:fi,$$forceReflow:An,$interpolate:Gn,$interval:Kn,$$intervalFactory:Jn,$http:Vn,$httpParamSerializer:$n,$httpParamSerializerJQLike:Ln,$httpBackend:Hn,$xhrFactory:Zn,$jsonpCallbacks:Yn,$location:dr,$log:pr,$parse:Or,$rootScope:Fr,$q:Pr,$$q:Nr,$sce:Wr,$sceDelegate:Gr,$sniffer:Kr,$$taskTrackerFactory:Jr,$templateCache:fn,$templateRequest:Qr,$$testability:ti,$timeout:ni,$window:ci,$$rAF:Ur,$$jqLite:$e,$$Map:Be,$$cookieReader:hi})}]).info({angularVersion:"1.8.2"})}(b),b.module("ngLocale",[],["$provide",function(t){t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\xa4",negSuf:"",posPre:"\xa4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(t,e){var n=0|t,r=function(t,e){var n=e;void 0===n&&(n=Math.min(function(t){var e=(t+="").indexOf(".");return-1==e?0:t.length-e-1}(t),3));var r=Math.pow(10,n);return{v:n,f:(t*r|0)%r}}(t,e);return 1==n&&0==r.v?"one":"other"}})}]),a(function(){!function(e,n){var r,i,o={};if(S(xt,function(t){var n=t+"app";!r&&e.hasAttribute&&e.hasAttribute(n)&&(r=e,i=e.getAttribute(n))}),S(xt,function(t){var n,o=t+"app";!r&&(n=e.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!Tt)return void t.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==function(t,e){var n,r,i=xt.length;for(r=0;r<i;++r)if(B(n=t.getAttribute(n=xt[r]+"strict-di")))return n;return null}(r),n(r,i?[i]:[],o)}}(t.document,It)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}'))},15592:function(t,e,n){n(25656),t.exports=angular},75751:function(t,e,n){"use strict";var r=e;r.bignum=n(80127),r.define=n(89256).define,r.base=n(75442),r.constants=n(71650),r.decoders=n(16234),r.encoders=n(55987)},89256:function(t,e,n){"use strict";var r=n(55987),i=n(16234),o=n(72783);function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){var e=this.name;function n(t){this._initNamed(t,e)}return o(n,t),n.prototype._initNamed=function(e,n){t.call(this,e,n)},new n(this)},a.prototype._getDecoder=function(t){return this.decoders.hasOwnProperty(t=t||"der")||(this.decoders[t]=this._createNamed(i[t])),this.decoders[t]},a.prototype.decode=function(t,e,n){return this._getDecoder(e).decode(t,n)},a.prototype._getEncoder=function(t){return this.encoders.hasOwnProperty(t=t||"der")||(this.encoders[t]=this._createNamed(r[t])),this.encoders[t]},a.prototype.encode=function(t,e,n){return this._getEncoder(e).encode(t,n)}},72665:function(t,e,n){"use strict";var r=n(72783),i=n(41894).b,o=n(45517).Buffer;function a(t,e){i.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return s.isEncoderBuffer(t)||(t=new s(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(a,i),e.C=a,a.isDecoderBuffer=function(t){return t instanceof a||"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},a.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},a.prototype.restore=function(t){var e=new a(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},a.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var n=new a(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},a.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.R=s,s.isEncoderBuffer=function(t){return t instanceof s||"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},s.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(n){n.join(t,e),e+=n.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},75442:function(t,e,n){"use strict";var r=e;r.Reporter=n(41894).b,r.DecoderBuffer=n(72665).C,r.EncoderBuffer=n(72665).R,r.Node=n(44274)},44274:function(t,e,n){"use strict";var r=n(41894).b,i=n(72665).R,o=n(72665).C,a=n(18036),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function c(t,e,n){var r={};this._baseState=r,r.name=n,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=c;var l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){var t=this._baseState,e={};l.forEach(function(n){e[n]=t[n]});var n=new this.constructor(e.parent);return n._baseState=e,n},c.prototype._wrap=function(){var t=this._baseState;u.forEach(function(e){this[e]=function(){var n=new this.constructor(this);return t.children.push(n),n[e].apply(n,arguments)}},this)},c.prototype._init=function(t){var e=this._baseState;a(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),a.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(t){var e=this._baseState,n=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==n.length&&(a(null===e.children),e.children=n,n.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(a(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(n){n==(0|n)&&(n|=0),e[t[n]]=n}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){c.prototype[t]=function(){throw new Error(t+" not implemented for encoding: "+this._baseState.enc)}}),s.forEach(function(t){c.prototype[t]=function(){var e=this._baseState,n=Array.prototype.slice.call(arguments);return a(null===e.tag),e.tag=t,this._useArgs(n),this}}),c.prototype.use=function(t){a(t);var e=this._baseState;return a(null===e.use),e.use=t,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(t){var e=this._baseState;return a(null===e.default),e.default=t,e.optional=!0,this},c.prototype.explicit=function(t){var e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.explicit=t,this},c.prototype.implicit=function(t){var e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.implicit=t,this},c.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},c.prototype.key=function(t){var e=this._baseState;return a(null===e.key),e.key=t,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(t){var e=this._baseState;return a(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},c.prototype.contains=function(t){var e=this._baseState;return a(null===e.use),e.contains=t,this},c.prototype._decode=function(t,e){var n=this._baseState;if(null===n.parent)return t.wrapResult(n.children[0]._decode(t,e));var r,i=n.default,a=!0,s=null;if(null!==n.key&&(s=t.enterKey(n.key)),n.optional){var u=null;if(null!==n.explicit?u=n.explicit:null!==n.implicit?u=n.implicit:null!==n.tag&&(u=n.tag),null!==u||n.any){if(a=this._peekTag(t,u,n.any),t.isError(a))return a}else{var c=t.save();try{null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),a=!0}catch(v){a=!1}t.restore(c)}}if(n.obj&&a&&(r=t.enterObject()),a){if(null!==n.explicit){var l=this._decodeTag(t,n.explicit);if(t.isError(l))return l;t=l}var h=t.offset;if(null===n.use&&null===n.choice){var f;n.any&&(f=t.save());var d=this._decodeTag(t,null!==n.implicit?n.implicit:n.tag,n.any);if(t.isError(d))return d;n.any?i=t.raw(f):t=d}if(e&&e.track&&null!==n.tag&&e.track(t.path(),h,t.length,"tagged"),e&&e.track&&null!==n.tag&&e.track(t.path(),t.offset,t.length,"content"),n.any||(i=null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e)),t.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(t,e)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var p=new o(i);i=this._getUse(n.contains,t._reporterState.obj)._decode(p,e)}}return n.obj&&a&&(i=t.leaveObject(r)),null===n.key||null===i&&!0!==a?null!==s&&t.exitKey(s):t.leaveKey(s,n.key,i),i},c.prototype._decodeGeneric=function(t,e,n){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],n):/str$/.test(t)?this._decodeStr(e,t,n):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],n):"objid"===t?this._decodeObjid(e,null,null,n):"gentime"===t||"utctime"===t?this._decodeTime(e,t,n):"null_"===t?this._decodeNull(e,n):"bool"===t?this._decodeBool(e,n):"objDesc"===t?this._decodeStr(e,t,n):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,n):e.error("unknown tag: "+t)},c.prototype._getUse=function(t,e){var n=this._baseState;return n.useDecoder=this._use(t,e),a(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(t,e){var n=this._baseState,r=null,i=!1;return Object.keys(n.choice).some(function(o){var a=t.save(),s=n.choice[o];try{var u=s._decode(t,e);if(t.isError(u))return!1;r={type:o,value:u},i=!0}catch(c){return t.restore(a),!1}return!0},this),i?r:t.error("Choice not matched")},c.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},c.prototype._encode=function(t,e,n){var r=this._baseState;if(null===r.default||r.default!==t){var i=this._encodeValue(t,e,n);if(void 0!==i&&!this._skipDefault(i,e,n))return i}},c.prototype._encodeValue=function(t,e,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new r);var o=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}var a=null,s=!1;if(i.any)o=this._createEncoderBuffer(t);else if(i.choice)o=this._encodeChoice(t,e);else if(i.contains)a=this._getUse(i.contains,n)._encode(t,e),s=!0;else if(i.children)a=i.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,e,t);if(null===n._baseState.key)return e.error("Child should have a key");var r=e.enterKey(n._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var i=n._encode(t[n._baseState.key],e,t);return e.leaveKey(r),i},this).filter(function(t){return t}),a=this._createEncoderBuffer(a);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,a=this._createEncoderBuffer(t.map(function(n){return this._getUse(this._baseState.args[0],t)._encode(n,e)},u))}else null!==i.use?o=this._getUse(i.use,n)._encode(t,e):(a=this._encodePrimitive(i.tag,t),s=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,l=null===i.implicit?"universal":"context";null===c?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(c,s,l,a))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},c.prototype._encodeChoice=function(t,e){var n=this._baseState,r=n.choice[t.type];return r||a(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(t.value,e)},c.prototype._encodePrimitive=function(t,e){var n=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},c.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},c.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},41894:function(t,e,n){"use strict";var r=n(72783);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.b=i,i.prototype.isError=function(t){return t instanceof o},i.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,n){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){var e=this._reporterState,n=e.obj;return e.obj=t,n},i.prototype.error=function(t){var e,n=this._reporterState,r=t instanceof o;if(e=r?t:new o(n.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!n.options.partial)throw e;return r||n.errors.push(e),e},i.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},50120:function(t,e){"use strict";function n(t){var e={};return Object.keys(t).forEach(function(n){(0|n)==n&&(n|=0),e[t[n]]=n}),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n(e.tag)},71650:function(t,e,n){"use strict";var r=e;r._reverse=function(t){var e={};return Object.keys(t).forEach(function(n){(0|n)==n&&(n|=0),e[t[n]]=n}),e},r.der=n(50120)},87294:function(t,e,n){"use strict";var r=n(72783),i=n(80127),o=n(72665).C,a=n(44274),s=n(50120);function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){a.call(this,"der",t)}function l(t,e){var n=t.readUInt8(e);if(t.isError(n))return n;var r=s.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){var o=n;for(n=0;128==(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;n<<=7,n|=127&o}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:s.tag[n]}}function h(t,e,n){var r=t.readUInt8(n);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;var i=127&r;if(i>4)return t.error("length octect is too long");r=0;for(var o=0;o<i;o++){r<<=8;var a=t.readUInt8(n);if(t.isError(a))return a;r|=a}return r}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},r(c,a),c.prototype._peekTag=function(t,e,n){if(t.isEmpty())return!1;var r=t.save(),i=l(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(r),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||n)},c.prototype._decodeTag=function(t,e,n){var r=l(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var i=h(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!n&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');var o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(i=t.offset-o.offset,t.restore(o),t.skip(i,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(t,e){for(;;){var n=l(t,e);if(t.isError(n))return n;var r,i=h(t,n.primitive,e);if(t.isError(i))return i;if(r=n.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,e),t.isError(r))return r;if("end"===n.tagStr)break}},c.prototype._decodeList=function(t,e,n,r){for(var i=[];!t.isEmpty();){var o=this._peekTag(t,"end");if(t.isError(o))return o;var a=n.decode(t,"der",r);if(t.isError(a)&&o)break;i.push(a)}return i},c.prototype._decodeStr=function(t,e){if("bitstr"===e){var n=t.readUInt8();return t.isError(n)?n:{unused:n,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var i="",o=0;o<r.length/2;o++)i+=String.fromCharCode(r.readUInt16BE(2*o));return i}if("numstr"===e){var a=t.raw().toString("ascii");return this._isNumstr(a)?a:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var s=t.raw().toString("ascii");return this._isPrintstr(s)?s:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(t,e,n){for(var r,i=[],o=0,a=0;!t.isEmpty();)o<<=7,o|=127&(a=t.readUInt8()),0==(128&a)&&(i.push(o),o=0);if(128&a&&i.push(o),r=n?i:[i[0]/40|0,i[0]%40].concat(i.slice(1)),e){var s=e[r.join(" ")];void 0===s&&(s=e[r.join(".")]),void 0!==s&&(r=s)}return r},c.prototype._decodeTime=function(t,e){var n,r,i,o,a,s,u=t.raw().toString();if("gentime"===e)n=0|u.slice(0,4),r=0|u.slice(4,6),i=0|u.slice(6,8),o=0|u.slice(8,10),a=0|u.slice(10,12),s=0|u.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|u.slice(0,2),r=0|u.slice(2,4),i=0|u.slice(4,6),o=0|u.slice(6,8),a=0|u.slice(8,10),s=0|u.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,r-1,i,o,a,s,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},c.prototype._decodeInt=function(t,e){var n=t.raw(),r=new i(n);return e&&(r=e[r.toString(10)]||r),r},c.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},16234:function(t,e,n){"use strict";var r=e;r.der=n(87294),r.pem=n(28885)},28885:function(t,e,n){"use strict";var r=n(72783),i=n(45517).Buffer,o=n(87294);function a(t){o.call(this,t),this.enc="pem"}r(a,o),t.exports=a,a.prototype.decode=function(t,e){for(var n=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,u=-1,c=0;c<n.length;c++){var l=n[c].match(a);if(null!==l&&l[2]===r){if(-1!==s){if("END"!==l[1])break;u=c;break}if("BEGIN"!==l[1])break;s=c}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+r);var h=n.slice(s+1,u).join("");h.replace(/[^a-z0-9+/=]+/gi,"");var f=i.from(h,"base64");return o.prototype.decode.call(this,f,e)}},92616:function(t,e,n){"use strict";var r=n(72783),i=n(45517).Buffer,o=n(44274),a=n(50120);function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function c(t){return t<10?"0"+t:t}t.exports=s,s.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(u,o),u.prototype._encodeComposite=function(t,e,n,r){var o=function(t,e,n,r){var i;if("seqof"===t?t="seq":"setof"===t&&(t="set"),a.tagByName.hasOwnProperty(t))i=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);i=t}return i>=31?r.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|a.tagClassByName[n||"universal"]<<6)}(t,e,n,this.reporter);if(r.length<128){var s=i.alloc(2);return s[0]=o,s[1]=r.length,this._createEncoderBuffer([s,r])}for(var u=1,c=r.length;c>=256;c>>=8)u++;var l=i.alloc(2+u);l[0]=o,l[1]=128|u;for(var h=1+u,f=r.length;f>0;h--,f>>=8)l[h]=255&f;return this._createEncoderBuffer([l,r])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var n=i.alloc(2*t.length),r=0;r<t.length;r++)n.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(n)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,n){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(var r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t)){t=t.slice();for(var o=0;o<t.length;o++)t[o]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}for(var a=0,s=0;s<t.length;s++){var u=t[s];for(a++;u>=128;u>>=7)a++}for(var c=i.alloc(a),l=c.length-1,h=t.length-1;h>=0;h--){var f=t[h];for(c[l--]=127&f;(f>>=7)>0;)c[l--]=128|127&f}return this._createEncoderBuffer(c)},u.prototype._encodeTime=function(t,e){var n,r=new Date(t);return"gentime"===e?n=[c(r.getUTCFullYear()),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?n=[c(r.getUTCFullYear()%100),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(n,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){var n=t.toArray();!t.sign&&128&n[0]&&n.unshift(0),t=i.from(n)}if(i.isBuffer(t)){var r=t.length;0===t.length&&r++;var o=i.alloc(r);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);for(var a=1,s=t;s>=256;s>>=8)a++;for(var u=new Array(a),c=u.length-1;c>=0;c--)u[c]=255&t,t>>=8;return 128&u[0]&&u.unshift(0),this._createEncoderBuffer(i.from(u))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,n){var r,i=this._baseState;if(null===i.default)return!1;var o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,n).join()),o.length!==i.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==i.defaultBuffer[r])return!1;return!0}},55987:function(t,e,n){"use strict";var r=e;r.der=n(92616),r.pem=n(16655)},16655:function(t,e,n){"use strict";var r=n(72783),i=n(92616);function o(t){i.call(this,t),this.enc="pem"}r(o,i),t.exports=o,o.prototype.encode=function(t,e){for(var n=i.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"],o=0;o<n.length;o+=64)r.push(n.slice(o,o+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},41355:function(t,e){"use strict";e.byteLength=function(t){var e=u(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){var e,n,o=u(t),a=o[0],s=o[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=16383,s=0,u=r-i;s<u;s+=a)o.push(c(t,s,s+a>u?u:s+a));return 1===i?o.push(n[(e=t[r-1])>>2]+n[e<<4&63]+"=="):2===i&&o.push(n[(e=(t[r-2]<<8)+t[r-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var i,o=[],a=e;a<r;a+=3)o.push(n[(i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},80127:function(t,e,n){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(46601).Buffer}catch(x){}function s(t,e){var n=t.charCodeAt(e);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(t,e,n){var r=s(t,n);return n-1>=e&&(r|=s(t,n-1)<<4),r}function c(t,e,n,r){for(var i=0,o=Math.min(t.length,n),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)this.words[o]|=(a=t[i]|t[i-1]<<8|t[i-2]<<16)<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)this.words[o]|=(a=t[i]|t[i+1]<<8|t[i+2]<<16)<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,this.words[a+=1]|=i>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,this.words[a+=1]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(t,l,l+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(t,l,t.length,e),l=0;l<a;l++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=a/67108864|0;n.words[0]=67108863&a;for(var u=1;u<r;u++){for(var c=s>>>26,l=67108863&s,h=Math.min(u,e.length-1),f=Math.max(0,u-t.length+1);f<=h;f++)c+=(a=(i=0|t.words[u-f|0])*(o=0|e.words[f])+l)/67108864|0,l=67108863&a;n.words[u]=0|l,s=0|c}return 0!==s?n.words[u]=0|s:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);n=0!=(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=h[t],d=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?v+n:l[c-v.length]+v+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,c=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)this.words[o]=67108863&(e=(0|n.words[o])+(0|r.words[o])+i),i=e>>>26;for(;0!==i&&o<n.length;o++)this.words[o]=67108863&(e=(0|n.words[o])+i),i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,v=d>>>13,g=0|a[2],y=8191&g,m=g>>>13,b=0|a[3],w=8191&b,_=b>>>13,S=0|a[4],k=8191&S,E=S>>>13,x=0|a[5],T=8191&x,I=x>>>13,C=0|a[6],A=8191&C,M=C>>>13,R=0|a[7],O=8191&R,P=R>>>13,N=0|a[8],D=8191&N,$=N>>>13,L=0|a[9],j=8191&L,U=L>>>13,F=0|s[0],B=8191&F,q=F>>>13,V=0|s[1],Z=8191&V,H=V>>>13,z=0|s[2],G=8191&z,W=z>>>13,K=0|s[3],J=8191&K,Y=K>>>13,X=0|s[4],Q=8191&X,tt=X>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ht=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,vt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(r=Math.imul(h,B))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,B)|0))<<13)|0;c=((o=Math.imul(f,q))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,B),i=(i=Math.imul(p,q))+Math.imul(v,B)|0,o=Math.imul(v,q);var yt=(c+(r=r+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,B),i=(i=Math.imul(y,q))+Math.imul(m,B)|0,o=Math.imul(m,q),r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0;var mt=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(w,B),i=(i=Math.imul(w,q))+Math.imul(_,B)|0,o=Math.imul(_,q),r=r+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,W)|0;var bt=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(k,B),i=(i=Math.imul(k,q))+Math.imul(E,B)|0,o=Math.imul(E,q),r=r+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(y,G)|0,i=(i=i+Math.imul(y,W)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,W)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Y)|0;var wt=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,B),i=(i=Math.imul(T,q))+Math.imul(I,B)|0,o=Math.imul(I,q),r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,W)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,r=r+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Y)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0;var _t=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(A,B),i=(i=Math.imul(A,q))+Math.imul(M,B)|0,o=Math.imul(M,q),r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,W)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,W)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,rt)|0;var St=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(O,B),i=(i=Math.imul(O,q))+Math.imul(P,B)|0,o=Math.imul(P,q),r=r+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,W)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,W)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(y,nt)|0,i=(i=i+Math.imul(y,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0;var kt=(c+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(f,ut)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(D,B),i=(i=Math.imul(D,q))+Math.imul($,B)|0,o=Math.imul($,q),r=r+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,W)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,W)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Y)|0,r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(_,nt)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ct)|0;var Et=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(j,B),i=(i=Math.imul(j,q))+Math.imul(U,B)|0,o=Math.imul(U,q),r=r+Math.imul(D,Z)|0,i=(i=i+Math.imul(D,H)|0)+Math.imul($,Z)|0,o=o+Math.imul($,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(P,G)|0,o=o+Math.imul(P,W)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,r=r+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var xt=(c+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,vt)|0)+Math.imul(f,pt)|0))<<13)|0;c=((o=o+Math.imul(f,vt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(j,Z),i=(i=Math.imul(j,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),r=r+Math.imul(D,G)|0,i=(i=i+Math.imul(D,W)|0)+Math.imul($,G)|0,o=o+Math.imul($,W)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Y)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,r=r+Math.imul(w,ut)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,r=r+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Tt=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,vt)|0)+Math.imul(v,pt)|0))<<13)|0;c=((o=o+Math.imul(v,vt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(j,G),i=(i=Math.imul(j,W))+Math.imul(U,G)|0,o=Math.imul(U,W),r=r+Math.imul(D,J)|0,i=(i=i+Math.imul(D,Y)|0)+Math.imul($,J)|0,o=o+Math.imul($,Y)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(M,nt)|0,o=o+Math.imul(M,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(w,ht)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var It=(c+(r=r+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,vt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,vt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(j,J),i=(i=Math.imul(j,Y))+Math.imul(U,J)|0,o=Math.imul(U,Y),r=r+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,tt)|0)+Math.imul($,Q)|0,o=o+Math.imul($,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,at)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,ct)|0,r=r+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var Ct=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,vt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,vt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(j,Q),i=(i=Math.imul(j,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(D,nt)|0,i=(i=i+Math.imul(D,rt)|0)+Math.imul($,nt)|0,o=o+Math.imul($,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(I,ht)|0,o=o+Math.imul(I,ft)|0;var At=(c+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,vt)|0)+Math.imul(E,pt)|0))<<13)|0;c=((o=o+Math.imul(E,vt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(j,nt),i=(i=Math.imul(j,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(D,ot)|0,i=(i=i+Math.imul(D,at)|0)+Math.imul($,ot)|0,o=o+Math.imul($,at)|0,r=r+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(M,ht)|0,o=o+Math.imul(M,ft)|0;var Mt=(c+(r=r+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,vt)|0)+Math.imul(I,pt)|0))<<13)|0;c=((o=o+Math.imul(I,vt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(j,ot),i=(i=Math.imul(j,at))+Math.imul(U,ot)|0,o=Math.imul(U,at),r=r+Math.imul(D,ut)|0,i=(i=i+Math.imul(D,ct)|0)+Math.imul($,ut)|0,o=o+Math.imul($,ct)|0,r=r+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,vt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,vt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(j,ut),i=(i=Math.imul(j,ct))+Math.imul(U,ut)|0,o=Math.imul(U,ct),r=r+Math.imul(D,ht)|0,i=(i=i+Math.imul(D,ft)|0)+Math.imul($,ht)|0,o=o+Math.imul($,ft)|0;var Ot=(c+(r=r+Math.imul(O,pt)|0)|0)+((8191&(i=(i=i+Math.imul(O,vt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,vt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(j,ht),i=(i=Math.imul(j,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(c+(r=r+Math.imul(D,pt)|0)|0)+((8191&(i=(i=i+Math.imul(D,vt)|0)+Math.imul($,pt)|0))<<13)|0;c=((o=o+Math.imul($,vt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Nt=(c+(r=Math.imul(j,pt))|0)+((8191&(i=(i=Math.imul(j,vt))+Math.imul(U,pt)|0))<<13)|0;return c=((o=Math.imul(U,vt))+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,u[0]=gt,u[1]=yt,u[2]=mt,u[3]=bt,u[4]=wt,u[5]=_t,u[6]=St,u[7]=kt,u[8]=Et,u[9]=xt,u[10]=Tt,u[11]=It,u[12]=Ct,u[13]=At,u[14]=Mt,u[15]=Rt,u[16]=Ot,u[17]=Pt,u[18]=Nt,0!==c&&(u[19]=c,n.length++),n};function v(t,e,n){return(new g).mulp(t,e,n)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?d(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=(0|t.words[o-c])*(0|e.words[c]),h=67108863&l;s=67108863&(h=h+s|0),i+=(a=(a=a+(l/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):v(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},g.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},g.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},g.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],v=r[l+d],g=n[l+d+a],y=r[l+d+a],m=h*g-f*y;y=h*y+f*g,n[l+d]=p+(g=m),r[l+d]=v+y,n[l+d+a]=p-g,r[l+d+a]=v-y,d!==s&&(m=u*h-c*f,f=u*f+c*h,h=m)}},g.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},g.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,n,i){for(var o=0,a=0;a<e;a++)n[2*a]=8191&(o+=0|t[a]),n[2*a+1]=8191&(o>>>=13),o>>>=13;for(a=2*e;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},g.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n%26;e[n]=(t.words[n/26|0]&1<<r)>>>r}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o;this.words[e]=(0|this.words[e])-s<<n|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;return!(this.length<=n||!(this.words[n]&1<<e))},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n?this:(0!==e&&n++,this.length=Math.min(n,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o;this._expand(t.length+n);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var s=(0|t.words[i])*e;a=((o-=67108863&s)>>26)-(s/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n,r=this.clone(),i=t,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var p=0,v=1;0==(n.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),a.isub(u)):(n.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),a.isub(s)):(n.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,this.words[a]=s&=67108863}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new k(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){k.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(b,m),b.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(a&n)<<4|o>>>22,o=a}t.words[i-10]=o>>>=22,t.length-=0===o&&t.length>10?10:9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];t.words[n]=67108863&(e+=977*r),e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,m),i(_,m),i(S,m),S.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new w;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return y[t]=e,e},k.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},k.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},k.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},k.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},k.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},k.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},k.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},k.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},k.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},k.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},k.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},k.prototype.isqr=function(t){return this.imul(t,t.clone())},k.prototype.sqr=function(t){return this.mul(t,t)},k.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=a;0!==d.cmp(s);){for(var v=d,g=0;0!==v.cmp(s);g++)v=v.redSqr();r(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},k.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},k.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4==++s||0===r&&0===l)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}u=26}return i},k.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},k.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},i(E,k),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=n.nmd(t),this)},58408:function(t,e,n){var r;function i(t){this.rand=t}if(t.exports=function(t){return r||(r=new i(null)),r.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),n=0;n<e.length;n++)e[n]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=n(51887);if("function"!=typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return o.randomBytes(t)}}catch(a){}},30347:function(t,e,n){var r=n(30095).Buffer;function i(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,n=new Array(e),i=0;i<e;i++)n[i]=t.readUInt32BE(4*i);return n}function o(t){for(;0<t.length;t++)t[0]=0}function a(t,e,n,r,i){for(var o,a,s,u,c=n[0],l=n[1],h=n[2],f=n[3],d=t[0]^e[0],p=t[1]^e[1],v=t[2]^e[2],g=t[3]^e[3],y=4,m=1;m<i;m++)o=c[d>>>24]^l[p>>>16&255]^h[v>>>8&255]^f[255&g]^e[y++],a=c[p>>>24]^l[v>>>16&255]^h[g>>>8&255]^f[255&d]^e[y++],s=c[v>>>24]^l[g>>>16&255]^h[d>>>8&255]^f[255&p]^e[y++],u=c[g>>>24]^l[d>>>16&255]^h[p>>>8&255]^f[255&v]^e[y++],d=o,p=a,v=s,g=u;return o=(r[d>>>24]<<24|r[p>>>16&255]<<16|r[v>>>8&255]<<8|r[255&g])^e[y++],a=(r[p>>>24]<<24|r[v>>>16&255]<<16|r[g>>>8&255]<<8|r[255&d])^e[y++],s=(r[v>>>24]<<24|r[g>>>16&255]<<16|r[d>>>8&255]<<8|r[255&p])^e[y++],u=(r[g>>>24]<<24|r[d>>>16&255]<<16|r[p>>>8&255]<<8|r[255&v])^e[y++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var n=[],r=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var c=s^s<<1^s<<2^s<<3^s<<4;n[a]=c=c>>>8^255&c^99,r[c]=a;var l=t[a],h=t[l],f=t[h],d=257*t[c]^16843008*c;i[0][a]=d<<24|d>>>8,i[1][a]=d<<16|d>>>16,i[2][a]=d<<8|d>>>24,i[3][a]=d,o[0][c]=(d=16843009*f^65537*h^257*l^16843008*a)<<24|d>>>8,o[1][c]=d<<16|d>>>16,o[2][c]=d<<8|d>>>24,o[3][c]=d,0===a?a=s=1:(a=l^t[t[t[f^l]]],s^=t[t[s]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:o}}();function c(t){this._key=i(t),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,r=4*(n+1),i=[],o=0;o<e;o++)i[o]=t[o];for(o=e;o<r;o++){var a=i[o-1];o%e==0?(a=u.SBOX[(a=a<<8|a>>>24)>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/e|0]<<24):e>6&&o%e==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),i[o]=i[o-e]^a}for(var c=[],l=0;l<r;l++){var h=r-l,f=i[h-(l%4?0:4)];c[l]=l<4||h<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(t){return a(t=i(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},c.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=r.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n},c.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var n=a(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=r.allocUnsafe(16);return o.writeUInt32BE(n[0],0),o.writeUInt32BE(n[3],4),o.writeUInt32BE(n[2],8),o.writeUInt32BE(n[1],12),o},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=c},88100:function(t,e,n){var r=n(30347),i=n(30095).Buffer,o=n(37897),a=n(72783),s=n(49109),u=n(9932),c=n(36614);function l(t,e,n,a){o.call(this);var u=i.alloc(4,0);this._cipher=new r.AES(e);var l=this._cipher.encryptBlock(u);this._ghash=new s(l),n=function(t,e,n){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var r=new s(n),o=e.length,a=o%16;r.update(e),a&&r.update(i.alloc(a=16-a,0)),r.update(i.alloc(8,0));var u=8*o,l=i.alloc(8);l.writeUIntBE(u,0,8),r.update(l),t._finID=r.state;var h=i.from(t._finID);return c(h),h}(this,n,l),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}a(l,o),l.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._ghash.update(this._decrypt?t:n),this._len+=t.length,n},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var n=0;t.length!==e.length&&n++;for(var r=Math.min(t.length,e.length),i=0;i<r;++i)n+=t[i]^e[i];return n}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},l.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=l},34077:function(t,e,n){var r=n(95862),i=n(51081),o=n(55415);e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},51081:function(t,e,n){var r=n(88100),i=n(30095).Buffer,o=n(69749),a=n(17871),s=n(37897),u=n(30347),c=n(41111);function l(t,e,n){s.call(this),this._cache=new h,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(n),this._mode=t,this._autopadding=!0}function h(){this.cache=i.allocUnsafe(0)}function f(t,e,n){var s=o[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=i.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof e&&(e=i.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,n,!0):"auth"===s.type?new r(s.module,e,n,!0):new l(s.module,e,n)}n(72783)(l,s),l.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),r.push(n);return i.concat(r)},l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var n=-1;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=i.concat([this.cache,t])},h.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},h.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var n=o[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=c(e,!1,n.key,n.iv);return f(t,r.key,r.iv)},e.createDecipheriv=f},95862:function(t,e,n){var r=n(69749),i=n(88100),o=n(30095).Buffer,a=n(17871),s=n(37897),u=n(30347),c=n(41111);function l(t,e,n){s.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(n),this._mode=t,this._autopadding=!0}n(72783)(l,s),l.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get();)n=this._mode.encrypt(this,e),r.push(n);return o.concat(r)};var h=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function d(t,e,n){var s=r[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof n&&(n=o.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===s.type?new a(s.module,e,n):"auth"===s.type?new i(s.module,e,n):new l(s.module,e,n)}l.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(h))throw this._cipher.scrub(),new Error("data not multiple of block length")},l.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return o.concat([this.cache,e])},e.createCipheriv=d,e.createCipher=function(t,e){var n=r[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=c(e,!1,n.key,n.iv);return d(t,i.key,i.iv)}},49109:function(t,e,n){var r=n(30095).Buffer,i=r.alloc(16,0);function o(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,n,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),n=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=o(i)},a.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a},36614:function(t){t.exports=function(t){for(var e,n=t.length;n--;){if(255!==(e=t.readUInt8(n))){e++,t.writeUInt8(e,n);break}t.writeUInt8(0,n)}}},1776:function(t,e,n){var r=n(9932);e.encrypt=function(t,e){var n=r(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},e.decrypt=function(t,e){var n=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return r(i,n)}},35776:function(t,e,n){var r=n(30095).Buffer,i=n(9932);function o(t,e,n){var o=e.length,a=i(e,t._cache);return t._cache=t._cache.slice(o),t._prev=r.concat([t._prev,n?e:a]),a}e.encrypt=function(t,e,n){for(var i,a=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){a=r.concat([a,o(t,e,n)]);break}a=r.concat([a,o(t,e.slice(0,i=t._cache.length),n)]),e=e.slice(i)}return a}},8866:function(t,e,n){var r=n(30095).Buffer;function i(t,e,n){for(var r,i,a=-1,s=0;++a<8;)s+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^(r=e&1<<7-a?128:0)))>>a%8,t._prev=o(t._prev,n?r:i);return s}function o(t,e){var n=t.length,i=-1,o=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++i<n;)o[i]=t[i]<<1|t[i+1]>>7;return o}e.encrypt=function(t,e,n){for(var o=e.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],n);return a}},89274:function(t,e,n){var r=n(30095).Buffer;function i(t,e,n){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([n?e:i])]),i}e.encrypt=function(t,e,n){for(var o=e.length,a=r.allocUnsafe(o),s=-1;++s<o;)a[s]=i(t,e[s],n);return a}},1968:function(t,e,n){var r=n(9932),i=n(30095).Buffer,o=n(36614);function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var n=Math.ceil(e.length/16),o=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*n)]);for(var s=0;s<n;s++){var u=a(t),c=o+16*s;t._cache.writeUInt32BE(u[0],c+0),t._cache.writeUInt32BE(u[1],c+4),t._cache.writeUInt32BE(u[2],c+8),t._cache.writeUInt32BE(u[3],c+12)}var l=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,l)}},30808:function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},69749:function(t,e,n){var r={ECB:n(30808),CBC:n(1776),CFB:n(35776),CFB8:n(89274),CFB1:n(8866),OFB:n(56070),CTR:n(1968),GCM:n(1968)},i=n(55415);for(var o in i)i[o].module=r[i[o].mode];t.exports=i},56070:function(t,e,n){var r=n(9932);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=Buffer.concat([t._cache,i(t)]);var n=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,n)}},17871:function(t,e,n){var r=n(30347),i=n(30095).Buffer,o=n(37897);function a(t,e,n,a){o.call(this),this._cipher=new r.AES(e),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._mode=t}n(72783)(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},30753:function(t,e,n){var r=n(48792),i=n(34077),o=n(69749),a=n(18471),s=n(41111);function u(t,e,n){if(t=t.toLowerCase(),o[t])return i.createCipheriv(t,e,n);if(a[t])return new r({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function c(t,e,n){if(t=t.toLowerCase(),o[t])return i.createDecipheriv(t,e,n);if(a[t])return new r({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var n,r;if(t=t.toLowerCase(),o[t])n=o[t].key,r=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");n=8*a[t].key,r=a[t].iv}var i=s(e,!1,n,r);return u(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var n,r;if(t=t.toLowerCase(),o[t])n=o[t].key,r=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");n=8*a[t].key,r=a[t].iv}var i=s(e,!1,n,r);return c(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=c,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(i.getCiphers())}},48792:function(t,e,n){var r=n(37897),i=n(38288),o=n(72783),a=n(30095).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){r.call(this);var e,n=t.mode.toLowerCase(),i=s[n];e=t.decrypt?"decrypt":"encrypt";var o=t.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==n&&"des-ede-cbc"!==n||(o=a.concat([o,o.slice(0,8)]));var u=t.iv;a.isBuffer(u)||(u=a.from(u)),this._des=i.create({key:o,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,r),u.prototype._update=function(t){return a.from(this._des.update(t))},u.prototype._final=function(){return a.from(this._des.final())}},18471:function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},29969:function(t,e,n){var r=n(17489),i=n(34871);function o(t){var e,n=t.modulus.byteLength();do{e=new r(i(n))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,e){var n=function(t){var e=o(t);return{blinder:e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(e),i=e.modulus.byteLength(),a=new r(t).mul(n.blinder).umod(e.modulus),s=a.toRed(r.mont(e.prime1)),u=a.toRed(r.mont(e.prime2)),c=e.coefficient,l=e.prime1,h=e.prime2,f=s.redPow(e.exponent1).fromRed(),d=u.redPow(e.exponent2).fromRed(),p=f.isub(d).imul(c).umod(l).imul(h);return d.iadd(p).imul(n.unblinder).umod(e.modulus).toArrayLike(Buffer,"be",i)}a.getr=o,t.exports=a},17489:function(t,e,n){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(2363).Buffer}catch(C){}function s(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function u(t,e,n){var r=s(t,n);return n-1>=e&&(r|=s(t,n-1)<<4),r}function c(t,e,n,i){for(var o=0,a=0,s=Math.min(t.length,n),u=e;u<s;u++){var c=t.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)this.words[o]|=(a=t[i]|t[i-1]<<8|t[i-2]<<16)<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)this.words[o]|=(a=t[i]|t[i+1]<<8|t[i+2]<<16)<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,this.words[a+=1]|=i>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,this.words[a+=1]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(t,l,l+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(t,l,t.length,e),l=0;l<a;l++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){l(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(C){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=a/67108864|0;n.words[0]=67108863&a;for(var u=1;u<r;u++){for(var c=s>>>26,l=67108863&s,h=Math.min(u,e.length-1),f=Math.max(0,u-t.length+1);f<=h;f++)c+=(a=(i=0|t.words[u-f|0])*(o=0|e.words[f])+l)/67108864|0,l=67108863&a;n.words[u]=0|l,s=0|c}return 0!==s?n.words[u]=0|s:n.length--,n._strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);n=0!=(o=s>>>24-i&16777215)||a!==this.length-1?f[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],l=p[t];n="";var h=this.clone();for(h.negative=0;!h.isZero();){var v=h.modrn(l).toString(t);n=(h=h.idivn(l)).isZero()?v+n:f[c-v.length]+v+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(t,e){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n++]=255&a,n<t.length&&(t[n++]=a>>8&255),n<t.length&&(t[n++]=a>>16&255),6===o?(n<t.length&&(t[n++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n<t.length)for(t[n++]=r;n<t.length;)t[n++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var n=t.length-1,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n--]=255&a,n>=0&&(t[n--]=a>>8&255),n>=0&&(t[n--]=a>>16&255),6===o?(n>=0&&(t[n--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n>=0)for(t[n--]=r;n>=0;)t[n--]=0},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)this.words[o]=67108863&(e=(0|n.words[o])+(0|r.words[o])+i),i=e>>>26;for(;0!==i&&o<n.length;o++)this.words[o]=67108863&(e=(0|n.words[o])+i),i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,v=d>>>13,g=0|a[2],y=8191&g,m=g>>>13,b=0|a[3],w=8191&b,_=b>>>13,S=0|a[4],k=8191&S,E=S>>>13,x=0|a[5],T=8191&x,I=x>>>13,C=0|a[6],A=8191&C,M=C>>>13,R=0|a[7],O=8191&R,P=R>>>13,N=0|a[8],D=8191&N,$=N>>>13,L=0|a[9],j=8191&L,U=L>>>13,F=0|s[0],B=8191&F,q=F>>>13,V=0|s[1],Z=8191&V,H=V>>>13,z=0|s[2],G=8191&z,W=z>>>13,K=0|s[3],J=8191&K,Y=K>>>13,X=0|s[4],Q=8191&X,tt=X>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ht=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,vt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(r=Math.imul(h,B))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,B)|0))<<13)|0;c=((o=Math.imul(f,q))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,B),i=(i=Math.imul(p,q))+Math.imul(v,B)|0,o=Math.imul(v,q);var yt=(c+(r=r+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,B),i=(i=Math.imul(y,q))+Math.imul(m,B)|0,o=Math.imul(m,q),r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0;var mt=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(w,B),i=(i=Math.imul(w,q))+Math.imul(_,B)|0,o=Math.imul(_,q),r=r+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,W)|0;var bt=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(k,B),i=(i=Math.imul(k,q))+Math.imul(E,B)|0,o=Math.imul(E,q),r=r+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(y,G)|0,i=(i=i+Math.imul(y,W)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,W)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Y)|0;var wt=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,B),i=(i=Math.imul(T,q))+Math.imul(I,B)|0,o=Math.imul(I,q),r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,W)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,r=r+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Y)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0;var _t=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(A,B),i=(i=Math.imul(A,q))+Math.imul(M,B)|0,o=Math.imul(M,q),r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,W)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,W)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,rt)|0;var St=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(O,B),i=(i=Math.imul(O,q))+Math.imul(P,B)|0,o=Math.imul(P,q),r=r+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,W)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,W)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(y,nt)|0,i=(i=i+Math.imul(y,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0;var kt=(c+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(f,ut)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(D,B),i=(i=Math.imul(D,q))+Math.imul($,B)|0,o=Math.imul($,q),r=r+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,W)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,W)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Y)|0,r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(_,nt)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ct)|0;var Et=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(j,B),i=(i=Math.imul(j,q))+Math.imul(U,B)|0,o=Math.imul(U,q),r=r+Math.imul(D,Z)|0,i=(i=i+Math.imul(D,H)|0)+Math.imul($,Z)|0,o=o+Math.imul($,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(P,G)|0,o=o+Math.imul(P,W)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,r=r+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var xt=(c+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,vt)|0)+Math.imul(f,pt)|0))<<13)|0;c=((o=o+Math.imul(f,vt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(j,Z),i=(i=Math.imul(j,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),r=r+Math.imul(D,G)|0,i=(i=i+Math.imul(D,W)|0)+Math.imul($,G)|0,o=o+Math.imul($,W)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Y)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,r=r+Math.imul(w,ut)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,r=r+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Tt=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,vt)|0)+Math.imul(v,pt)|0))<<13)|0;c=((o=o+Math.imul(v,vt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(j,G),i=(i=Math.imul(j,W))+Math.imul(U,G)|0,o=Math.imul(U,W),r=r+Math.imul(D,J)|0,i=(i=i+Math.imul(D,Y)|0)+Math.imul($,J)|0,o=o+Math.imul($,Y)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(M,nt)|0,o=o+Math.imul(M,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(w,ht)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var It=(c+(r=r+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,vt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,vt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(j,J),i=(i=Math.imul(j,Y))+Math.imul(U,J)|0,o=Math.imul(U,Y),r=r+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,tt)|0)+Math.imul($,Q)|0,o=o+Math.imul($,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,at)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,ct)|0,r=r+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var Ct=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,vt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,vt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(j,Q),i=(i=Math.imul(j,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(D,nt)|0,i=(i=i+Math.imul(D,rt)|0)+Math.imul($,nt)|0,o=o+Math.imul($,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(I,ht)|0,o=o+Math.imul(I,ft)|0;var At=(c+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,vt)|0)+Math.imul(E,pt)|0))<<13)|0;c=((o=o+Math.imul(E,vt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(j,nt),i=(i=Math.imul(j,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(D,ot)|0,i=(i=i+Math.imul(D,at)|0)+Math.imul($,ot)|0,o=o+Math.imul($,at)|0,r=r+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(M,ht)|0,o=o+Math.imul(M,ft)|0;var Mt=(c+(r=r+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,vt)|0)+Math.imul(I,pt)|0))<<13)|0;c=((o=o+Math.imul(I,vt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(j,ot),i=(i=Math.imul(j,at))+Math.imul(U,ot)|0,o=Math.imul(U,at),r=r+Math.imul(D,ut)|0,i=(i=i+Math.imul(D,ct)|0)+Math.imul($,ut)|0,o=o+Math.imul($,ct)|0,r=r+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,vt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,vt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(j,ut),i=(i=Math.imul(j,ct))+Math.imul(U,ut)|0,o=Math.imul(U,ct),r=r+Math.imul(D,ht)|0,i=(i=i+Math.imul(D,ft)|0)+Math.imul($,ht)|0,o=o+Math.imul($,ft)|0;var Ot=(c+(r=r+Math.imul(O,pt)|0)|0)+((8191&(i=(i=i+Math.imul(O,vt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,vt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(j,ht),i=(i=Math.imul(j,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(c+(r=r+Math.imul(D,pt)|0)|0)+((8191&(i=(i=i+Math.imul(D,vt)|0)+Math.imul($,pt)|0))<<13)|0;c=((o=o+Math.imul($,vt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Nt=(c+(r=Math.imul(j,pt))|0)+((8191&(i=(i=Math.imul(j,vt))+Math.imul(U,pt)|0))<<13)|0;return c=((o=Math.imul(U,vt))+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,u[0]=gt,u[1]=yt,u[2]=mt,u[3]=bt,u[4]=wt,u[5]=_t,u[6]=St,u[7]=kt,u[8]=Et,u[9]=xt,u[10]=Tt,u[11]=It,u[12]=Ct,u[13]=At,u[14]=Mt,u[15]=Rt,u[16]=Ot,u[17]=Pt,u[18]=Nt,0!==c&&(u[19]=c,n.length++),n};function y(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=(0|t.words[o-c])*(0|e.words[c]),h=67108863&l;s=67108863&(h=h+s|0),i+=(a=(a=a+(l/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function m(t,e,n){return y(t,e,n)}function b(t,e){this.x=t,this.y=e}Math.imul||(g=v),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?v(this,t,e):n<1024?y(this,t,e):m(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},b.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},b.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},b.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],v=r[l+d],g=n[l+d+a],y=r[l+d+a],m=h*g-f*y;y=h*y+f*g,n[l+d]=p+(g=m),r[l+d]=v+y,n[l+d+a]=p-g,r[l+d+a]=v-y,d!==s&&(m=u*h-c*f,f=u*f+c*h,h=m)}},b.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},b.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,n,i){for(var o=0,a=0;a<e;a++)n[2*a]=8191&(o+=0|t[a]),n[2*a+1]=8191&(o>>>=13),o>>>=13;for(a=2*e;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},b.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,a=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=a>>>26,this.words[i]=67108863&a}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++)e[n]=t.words[n/26|0]>>>n%26&1;return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o;this.words[e]=(0|this.words[e])-s<<n|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;return!(this.length<=n||!(this.words[n]&1<<e))},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n?this:(0!==e&&n++,this.length=Math.min(n,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o;this._expand(t.length+n);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var s=(0|t.words[i])*e;a=((o-=67108863&s)>>26)-(s/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var n,r=this.clone(),i=t,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s._strip(),r._strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var p=0,v=1;0==(n.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),a.isub(u)):(n.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),a.isub(s)):(n.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,this.words[a]=s&=67108863}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new T(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){T.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(S,_),S.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(a&n)<<4|o>>>22,o=a}t.words[i-10]=o>>>=22,t.length-=0===o&&t.length>10?10:9},S.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];t.words[n]=67108863&(e+=977*r),e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(k,_),i(E,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new S;else if("p224"===t)e=new k;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return w[t]=e,e},T.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},T.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},T.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},T.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},T.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},T.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},T.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},T.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},T.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},T.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},T.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},T.prototype.isqr=function(t){return this.imul(t,t.clone())},T.prototype.sqr=function(t){return this.mul(t,t)},T.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=a;0!==d.cmp(s);){for(var v=d,g=0;0!==v.cmp(s);g++)v=v.redSqr();r(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},T.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},T.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4==++s||0===r&&0===l)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}u=26}return i},T.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},T.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new I(t)},i(I,T),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=n.nmd(t),this)},70773:function(t,e,n){t.exports=n(42063)},86422:function(t,e,n){var r=n(30095).Buffer,i=n(40710),o=n(80179),a=n(72783),s=n(38492),u=n(14127),c=n(42063);function l(t){o.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){o.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new l(t)}function d(t){return new h(t)}Object.keys(c).forEach(function(t){c[t].id=r.from(c[t].id,"hex"),c[t.toLowerCase()]=c[t]}),a(l,o.Writable),l.prototype._write=function(t,e,n){this._hash.update(t),n()},l.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},l.prototype.sign=function(t,e){this.end();var n=this._hash.digest(),r=s(n,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},a(h,o.Writable),h.prototype._write=function(t,e,n){this._hash.update(t),n()},h.prototype.update=function(t,e){return"string"==typeof t&&(t=r.from(t,e)),this._hash.update(t),this},h.prototype.verify=function(t,e,n){"string"==typeof e&&(e=r.from(e,n)),this.end();var i=this._hash.digest();return u(e,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:d,createSign:f,createVerify:d}},38492:function(t,e,n){var r=n(30095).Buffer,i=n(7651),o=n(29969),a=n(98397).ec,s=n(35524),u=n(4840),c=n(42236);function l(t,e,n,o){if((t=r.from(t.toArray())).length<e.byteLength()){var a=r.alloc(e.byteLength()-t.length);t=r.concat([a,t])}var s=n.length,u=function(t,e){t=(t=h(t,e)).mod(e);var n=r.from(t.toArray());if(n.length<e.byteLength()){var i=r.alloc(e.byteLength()-n.length);n=r.concat([i,n])}return n}(n,e),c=r.alloc(s);c.fill(1);var l=r.alloc(s);return l=i(o,l).update(c).update(r.from([0])).update(t).update(u).digest(),c=i(o,l).update(c).digest(),{k:l=i(o,l).update(c).update(r.from([1])).update(t).update(u).digest(),v:c=i(o,l).update(c).digest()}}function h(t,e){var n=new s(t),r=(t.length<<3)-e.bitLength();return r>0&&n.ishrn(r),n}function f(t,e,n){var o,a;do{for(o=r.alloc(0);8*o.length<t.bitLength();)e.v=i(n,e.k).update(e.v).digest(),o=r.concat([o,e.v]);a=h(o,t),e.k=i(n,e.k).update(e.v).update(r.from([0])).digest(),e.v=i(n,e.k).update(e.v).digest()}while(-1!==a.cmp(t));return a}function d(t,e,n,r){return t.toRed(s.mont(n)).redPow(e).fromRed().mod(r)}t.exports=function(t,e,n,i,p){var v=u(e);if(v.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(t,e){var n=c[e.curve.join(".")];if(!n)throw new Error("unknown curve "+e.curve.join("."));var i=new a(n).keyFromPrivate(e.privateKey).sign(t);return r.from(i.toDER())}(t,v)}if("dsa"===v.type){if("dsa"!==i)throw new Error("wrong private key type");return function(t,e,n){for(var i,o=e.params.priv_key,a=e.params.p,u=e.params.q,c=e.params.g,p=new s(0),v=h(t,u).mod(u),g=!1,y=l(o,u,t,n);!1===g;)p=d(c,i=f(u,y,n),a,u),0===(g=i.invm(u).imul(v.add(o.mul(p))).mod(u)).cmpn(0)&&(g=!1,p=new s(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var n=[48,t.length+e.length+4,2,t.length];return n=n.concat(t,[2,e.length],e),r.from(n)}(p,g)}(t,v,n)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");t=r.concat([p,t]);for(var g=v.modulus.byteLength(),y=[0,1];t.length+y.length+1<g;)y.push(255);y.push(0);for(var m=-1;++m<t.length;)y.push(t[m]);return o(y,v)},t.exports.getKey=l,t.exports.makeKey=f},14127:function(t,e,n){var r=n(30095).Buffer,i=n(35524),o=n(98397).ec,a=n(4840),s=n(42236);function u(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,n,c,l){var h=a(n);if("ec"===h.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(t,e,n){var r=s[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));return new o(r).verify(e,t,n.data.subjectPrivateKey.data)}(t,e,h)}if("dsa"===h.type){if("dsa"!==c)throw new Error("wrong public key type");return function(t,e,n){var r=n.data.p,o=n.data.q,s=n.data.g,c=n.data.pub_key,l=a.signature.decode(t,"der"),h=l.s,f=l.r;u(h,o),u(f,o);var d=i.mont(r),p=h.invm(o);return 0===s.toRed(d).redPow(new i(e).mul(p).mod(o)).fromRed().mul(c.toRed(d).redPow(f.mul(p).mod(o)).fromRed()).mod(r).mod(o).cmp(f)}(t,e,h)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");e=r.concat([l,e]);for(var f=h.modulus.byteLength(),d=[1],p=0;e.length+d.length+2<f;)d.push(255),p++;d.push(0);for(var v=-1;++v<e.length;)d.push(e[v]);d=r.from(d);var g=i.mont(h.modulus);t=(t=new i(t).toRed(g)).redPow(new i(h.publicExponent)),t=r.from(t.fromRed().toArray());var y=p<8?1:0;for(f=Math.min(t.length,d.length),t.length!==d.length&&(y=1),v=-1;++v<f;)y|=t[v]^d[v];return 0===y}},35524:function(t,e,n){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(2363).Buffer}catch(C){}function s(t,e){var n=t.charCodeAt(e);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+t)}function u(t,e,n){var r=s(t,n);return n-1>=e&&(r|=s(t,n-1)<<4),r}function c(t,e,n,i){for(var o=0,a=0,s=Math.min(t.length,n),u=e;u<s;u++){var c=t.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)this.words[o]|=(a=t[i]|t[i-1]<<8|t[i-2]<<16)<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)this.words[o]|=(a=t[i]|t[i+1]<<8|t[i+2]<<16)<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,this.words[a+=1]|=i>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,this.words[a+=1]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(t,l,l+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(t,l,t.length,e),l=0;l<a;l++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){l(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(C){o.prototype.inspect=h}else o.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=a/67108864|0;n.words[0]=67108863&a;for(var u=1;u<r;u++){for(var c=s>>>26,l=67108863&s,h=Math.min(u,e.length-1),f=Math.max(0,u-t.length+1);f<=h;f++)c+=(a=(i=0|t.words[u-f|0])*(o=0|e.words[f])+l)/67108864|0,l=67108863&a;n.words[u]=0|l,s=0|c}return 0!==s?n.words[u]=0|s:n.length--,n._strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);n=0!=(o=s>>>24-i&16777215)||a!==this.length-1?f[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=d[t],l=p[t];n="";var h=this.clone();for(h.negative=0;!h.isZero();){var v=h.modrn(l).toString(t);n=(h=h.idivn(l)).isZero()?v+n:f[c-v.length]+v+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(t,e){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n++]=255&a,n<t.length&&(t[n++]=a>>8&255),n<t.length&&(t[n++]=a>>16&255),6===o?(n<t.length&&(t[n++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n<t.length)for(t[n++]=r;n<t.length;)t[n++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var n=t.length-1,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;t[n--]=255&a,n>=0&&(t[n--]=a>>8&255),n>=0&&(t[n--]=a>>16&255),6===o?(n>=0&&(t[n--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n>=0)for(t[n--]=r;n>=0;)t[n--]=0},o.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0==(8191&e)&&(n+=13,e>>>=13),0==(127&e)&&(n+=7,e>>>=7),0==(15&e)&&(n+=4,e>>>=4),0==(3&e)&&(n+=2,e>>>=2),0==(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)this.words[o]=67108863&(e=(0|n.words[o])+(0|r.words[o])+i),i=e>>>26;for(;0!==i&&o<n.length;o++)this.words[o]=67108863&(e=(0|n.words[o])+i),i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(e=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)o=(e=(0|n.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,v=d>>>13,g=0|a[2],y=8191&g,m=g>>>13,b=0|a[3],w=8191&b,_=b>>>13,S=0|a[4],k=8191&S,E=S>>>13,x=0|a[5],T=8191&x,I=x>>>13,C=0|a[6],A=8191&C,M=C>>>13,R=0|a[7],O=8191&R,P=R>>>13,N=0|a[8],D=8191&N,$=N>>>13,L=0|a[9],j=8191&L,U=L>>>13,F=0|s[0],B=8191&F,q=F>>>13,V=0|s[1],Z=8191&V,H=V>>>13,z=0|s[2],G=8191&z,W=z>>>13,K=0|s[3],J=8191&K,Y=K>>>13,X=0|s[4],Q=8191&X,tt=X>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ht=8191&lt,ft=lt>>>13,dt=0|s[9],pt=8191&dt,vt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(r=Math.imul(h,B))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,B)|0))<<13)|0;c=((o=Math.imul(f,q))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,B),i=(i=Math.imul(p,q))+Math.imul(v,B)|0,o=Math.imul(v,q);var yt=(c+(r=r+Math.imul(h,Z)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,B),i=(i=Math.imul(y,q))+Math.imul(m,B)|0,o=Math.imul(m,q),r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,H)|0;var mt=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,W)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(w,B),i=(i=Math.imul(w,q))+Math.imul(_,B)|0,o=Math.imul(_,q),r=r+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(v,G)|0,o=o+Math.imul(v,W)|0;var bt=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(k,B),i=(i=Math.imul(k,q))+Math.imul(E,B)|0,o=Math.imul(E,q),r=r+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(y,G)|0,i=(i=i+Math.imul(y,W)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,W)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,Y)|0;var wt=(c+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(T,B),i=(i=Math.imul(T,q))+Math.imul(I,B)|0,o=Math.imul(I,q),r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,W)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,W)|0,r=r+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Y)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(v,Q)|0,o=o+Math.imul(v,tt)|0;var _t=(c+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(A,B),i=(i=Math.imul(A,q))+Math.imul(M,B)|0,o=Math.imul(M,q),r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,H)|0,r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,W)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,W)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,rt)|0;var St=(c+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,at)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,at)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(O,B),i=(i=Math.imul(O,q))+Math.imul(P,B)|0,o=Math.imul(P,q),r=r+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,W)|0)+Math.imul(I,G)|0,o=o+Math.imul(I,W)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,Q)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(y,nt)|0,i=(i=i+Math.imul(y,rt)|0)+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,at)|0;var kt=(c+(r=r+Math.imul(h,ut)|0)|0)+((8191&(i=(i=i+Math.imul(h,ct)|0)+Math.imul(f,ut)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(D,B),i=(i=Math.imul(D,q))+Math.imul($,B)|0,o=Math.imul($,q),r=r+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,H)|0,r=r+Math.imul(A,G)|0,i=(i=i+Math.imul(A,W)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,W)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(I,J)|0,o=o+Math.imul(I,Y)|0,r=r+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(_,nt)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ct)|0;var Et=(c+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(j,B),i=(i=Math.imul(j,q))+Math.imul(U,B)|0,o=Math.imul(U,q),r=r+Math.imul(D,Z)|0,i=(i=i+Math.imul(D,H)|0)+Math.imul($,Z)|0,o=o+Math.imul($,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,W)|0)+Math.imul(P,G)|0,o=o+Math.imul(P,W)|0,r=r+Math.imul(A,J)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(M,J)|0,o=o+Math.imul(M,Y)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,tt)|0,r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,r=r+Math.imul(y,ut)|0,i=(i=i+Math.imul(y,ct)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(v,ht)|0,o=o+Math.imul(v,ft)|0;var xt=(c+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,vt)|0)+Math.imul(f,pt)|0))<<13)|0;c=((o=o+Math.imul(f,vt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(j,Z),i=(i=Math.imul(j,H))+Math.imul(U,Z)|0,o=Math.imul(U,H),r=r+Math.imul(D,G)|0,i=(i=i+Math.imul(D,W)|0)+Math.imul($,G)|0,o=o+Math.imul($,W)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,Y)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(M,Q)|0,o=o+Math.imul(M,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(I,nt)|0,o=o+Math.imul(I,rt)|0,r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,r=r+Math.imul(w,ut)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,r=r+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(m,ht)|0,o=o+Math.imul(m,ft)|0;var Tt=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,vt)|0)+Math.imul(v,pt)|0))<<13)|0;c=((o=o+Math.imul(v,vt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(j,G),i=(i=Math.imul(j,W))+Math.imul(U,G)|0,o=Math.imul(U,W),r=r+Math.imul(D,J)|0,i=(i=i+Math.imul(D,Y)|0)+Math.imul($,J)|0,o=o+Math.imul($,Y)|0,r=r+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(M,nt)|0,o=o+Math.imul(M,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(w,ht)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(_,ht)|0,o=o+Math.imul(_,ft)|0;var It=(c+(r=r+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,vt)|0)+Math.imul(m,pt)|0))<<13)|0;c=((o=o+Math.imul(m,vt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(j,J),i=(i=Math.imul(j,Y))+Math.imul(U,J)|0,o=Math.imul(U,Y),r=r+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,tt)|0)+Math.imul($,Q)|0,o=o+Math.imul($,tt)|0,r=r+Math.imul(O,nt)|0,i=(i=i+Math.imul(O,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,at)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,ct)|0,r=r+Math.imul(k,ht)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var Ct=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,vt)|0)+Math.imul(_,pt)|0))<<13)|0;c=((o=o+Math.imul(_,vt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(j,Q),i=(i=Math.imul(j,tt))+Math.imul(U,Q)|0,o=Math.imul(U,tt),r=r+Math.imul(D,nt)|0,i=(i=i+Math.imul(D,rt)|0)+Math.imul($,nt)|0,o=o+Math.imul($,rt)|0,r=r+Math.imul(O,ot)|0,i=(i=i+Math.imul(O,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,r=r+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,r=r+Math.imul(T,ht)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(I,ht)|0,o=o+Math.imul(I,ft)|0;var At=(c+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,vt)|0)+Math.imul(E,pt)|0))<<13)|0;c=((o=o+Math.imul(E,vt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(j,nt),i=(i=Math.imul(j,rt))+Math.imul(U,nt)|0,o=Math.imul(U,rt),r=r+Math.imul(D,ot)|0,i=(i=i+Math.imul(D,at)|0)+Math.imul($,ot)|0,o=o+Math.imul($,at)|0,r=r+Math.imul(O,ut)|0,i=(i=i+Math.imul(O,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(M,ht)|0,o=o+Math.imul(M,ft)|0;var Mt=(c+(r=r+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,vt)|0)+Math.imul(I,pt)|0))<<13)|0;c=((o=o+Math.imul(I,vt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(j,ot),i=(i=Math.imul(j,at))+Math.imul(U,ot)|0,o=Math.imul(U,at),r=r+Math.imul(D,ut)|0,i=(i=i+Math.imul(D,ct)|0)+Math.imul($,ut)|0,o=o+Math.imul($,ct)|0,r=r+Math.imul(O,ht)|0,i=(i=i+Math.imul(O,ft)|0)+Math.imul(P,ht)|0,o=o+Math.imul(P,ft)|0;var Rt=(c+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,vt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,vt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(j,ut),i=(i=Math.imul(j,ct))+Math.imul(U,ut)|0,o=Math.imul(U,ct),r=r+Math.imul(D,ht)|0,i=(i=i+Math.imul(D,ft)|0)+Math.imul($,ht)|0,o=o+Math.imul($,ft)|0;var Ot=(c+(r=r+Math.imul(O,pt)|0)|0)+((8191&(i=(i=i+Math.imul(O,vt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,vt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(j,ht),i=(i=Math.imul(j,ft))+Math.imul(U,ht)|0,o=Math.imul(U,ft);var Pt=(c+(r=r+Math.imul(D,pt)|0)|0)+((8191&(i=(i=i+Math.imul(D,vt)|0)+Math.imul($,pt)|0))<<13)|0;c=((o=o+Math.imul($,vt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Nt=(c+(r=Math.imul(j,pt))|0)+((8191&(i=(i=Math.imul(j,vt))+Math.imul(U,pt)|0))<<13)|0;return c=((o=Math.imul(U,vt))+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,u[0]=gt,u[1]=yt,u[2]=mt,u[3]=bt,u[4]=wt,u[5]=_t,u[6]=St,u[7]=kt,u[8]=Et,u[9]=xt,u[10]=Tt,u[11]=It,u[12]=Ct,u[13]=At,u[14]=Mt,u[15]=Rt,u[16]=Ot,u[17]=Pt,u[18]=Nt,0!==c&&(u[19]=c,n.length++),n};function y(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=(0|t.words[o-c])*(0|e.words[c]),h=67108863&l;s=67108863&(h=h+s|0),i+=(a=(a=a+(l/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function m(t,e,n){return y(t,e,n)}function b(t,e){this.x=t,this.y=e}Math.imul||(g=v),o.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?v(this,t,e):n<1024?y(this,t,e):m(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},b.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},b.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},b.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],v=r[l+d],g=n[l+d+a],y=r[l+d+a],m=h*g-f*y;y=h*y+f*g,n[l+d]=p+(g=m),r[l+d]=v+y,n[l+d+a]=p-g,r[l+d+a]=v-y,d!==s&&(m=u*h-c*f,f=u*f+c*h,h=m)}},b.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},b.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},b.prototype.convert13b=function(t,e,n,i){for(var o=0,a=0;a<e;a++)n[2*a]=8191&(o+=0|t[a]),n[2*a+1]=8191&(o>>>=13),o>>>=13;for(a=2*e;a<i;++a)n[a]=0;r(0===o),r(0==(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},b.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,a=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=a>>>26,this.words[i]=67108863&a}return 0!==n&&(this.words[i]=n,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++)e[n]=t.words[n/26|0]>>>n%26&1;return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o;this.words[e]=(0|this.words[e])-s<<n|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;return!(this.length<=n||!(this.words[n]&1<<e))},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;return r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n?this:(0!==e&&n++,this.length=Math.min(n,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this._strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o;this._expand(t.length+n);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var s=(0|t.words[i])*e;a=((o-=67108863&s)>>26)-(s/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this._strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var n,r=this.clone(),i=t,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(i,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s._strip(),r._strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%t;return e?-i:i},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/t|0,n=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0==(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(h)),i.iushrn(1),a.iushrn(1);for(var p=0,v=1;0==(n.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),a.isub(u)):(n.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0==(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(e.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(n.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(n.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),a.isub(s)):(n.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,this.words[a]=s&=67108863}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new T(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function _(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function I(t){T.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},_.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},_.prototype.split=function(t,e){t.iushrn(this.n,0,e)},_.prototype.imulK=function(t){return t.imul(this.k)},i(S,_),S.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(a&n)<<4|o>>>22,o=a}t.words[i-10]=o>>>=22,t.length-=0===o&&t.length>10?10:9},S.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];t.words[n]=67108863&(e+=977*r),e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(k,_),i(E,_),i(x,_),x.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new S;else if("p224"===t)e=new k;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return w[t]=e,e},T.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},T.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},T.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(l(t,t.umod(this.m)._forceRed(this)),t)},T.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},T.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},T.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},T.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},T.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},T.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},T.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},T.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},T.prototype.isqr=function(t){return this.imul(t,t.clone())},T.prototype.sqr=function(t){return this.mul(t,t)},T.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=a;0!==d.cmp(s);){for(var v=d,g=0;0!==v.cmp(s);g++)v=v.redSqr();r(g<p);var y=this.pow(h,new o(1).iushln(p-g-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=g}return f},T.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},T.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],l=u-1;l>=0;l--){var h=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==h||0!==a?(a<<=1,a|=h,(4==++s||0===r&&0===l)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}u=26}return i},T.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},T.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new I(t)},i(I,T),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=n.nmd(t),this)},91183:function(t){"use strict";var e={};function n(t,n,r){r||(r=Error);var i=function(t){var e,r;function i(e,r,i){return t.call(this,function(t,e,r){return"string"==typeof n?n:n(t,e,r)}(e,r,i))||this}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=t,e[t]=i}function r(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(t){return String(t)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(t,e,n){var i,o,a,s;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))o="The ".concat(t," ").concat(i," ").concat(r(e,"type"));else{var u=("number"!=typeof s&&(s=0),s+".".length>(a=t).length||-1===a.indexOf(".",s)?"argument":"property");o='The "'.concat(t,'" ').concat(u," ").concat(i," ").concat(r(e,"type"))}return o+". Received type ".concat(typeof n)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=e},95558:function(t,e,n){"use strict";var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=c;var i=n(8089),o=n(98590);n(72783)(c,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(t){if(!(this instanceof c))return new c(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},92270:function(t,e,n){"use strict";t.exports=i;var r=n(79739);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(72783)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},8089:function(t,e,n){"use strict";var r;t.exports=E,E.ReadableState=k,n(80067);var i,o=function(t,e){return t.listeners(e).length},a=n(68239),s=n(42108).Buffer,u=global.Uint8Array||function(){},c=n(56353);i=c&&c.debuglog?c.debuglog("stream"):function(){};var l,h,f,d=n(19321),p=n(56954),v=n(74492).getHighWaterMark,g=n(91183).q,y=g.ERR_INVALID_ARG_TYPE,m=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(72783)(E,a);var _=p.errorOrDestroy,S=["error","close","destroy","pause","resume"];function k(t,e,i){r=r||n(95558),"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!(t=t||{}).objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=v(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=n(10916).s),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function E(t){if(r=r||n(95558),!(this instanceof E))return new E(t);this._readableState=new k(t,this,this instanceof r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function x(t,e,n,r,o){i("readableAddChunk",e);var a,c=t._readableState;if(null===e)c.reading=!1,function(t,e){if(i("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?A(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,M(t)))}}(t,c);else if(o||(a=function(t,e){var n,r;return s.isBuffer(r=e)||r instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],e)),n}(c,e)),a)_(t,a);else if(c.objectMode||e&&e.length>0)if("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r)c.endEmitted?_(t,new w):T(t,c,e,!0);else if(c.ended)_(t,new m);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(e=c.decoder.write(e),c.objectMode||0!==e.length?T(t,c,e,!1):R(t,c)):T(t,c,e,!1)}else r||(c.reading=!1,R(t,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&A(t)),R(t,e)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(t,e){e(t)},E.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),x(this,t,e,!1,n)},E.prototype.unshift=function(t){return x(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){l||(l=n(10916).s);var e=new l(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function C(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=I?t=I:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function A(t){var e=t._readableState;i("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(i("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(M,t))}function M(t){var e=t._readableState;i("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,$(t)}function R(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(O,t,e))}function O(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(i("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function P(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function N(t){i("readable nexttick read 0"),t.read(0)}function D(t,e){i("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),$(t),e.flowing&&!e.reading&&t.read(0)}function $(t){var e=t._readableState;for(i("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function j(t){var e=t._readableState;i("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(U,e,t))}function U(t,e){if(i("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function F(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}E.prototype.read=function(t){i("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return i("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):A(this),null;if(0===(t=C(t,e))&&e.ended)return 0===e.length&&j(this),null;var r,o=e.needReadable;return i("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&i("length less than watermark",o=!0),e.ended||e.reading?i("reading or ended",o=!1):o&&(i("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C(n,e))),null===(r=t>0?L(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==r&&this.emit("data",r),r},E.prototype._read=function(t){_(this,new b("_read()"))},E.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===process.stdout||t===process.stderr?p:s;function s(){i("onend"),t.end()}r.endEmitted?process.nextTick(a):n.once("end",a),t.on("unpipe",function e(o,a){i("onunpipe"),o===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,i("cleanup"),t.removeListener("close",f),t.removeListener("finish",d),t.removeListener("drain",u),t.removeListener("error",h),t.removeListener("unpipe",e),n.removeListener("end",s),n.removeListener("end",p),n.removeListener("data",l),c=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||u())});var u=function(t){return function(){var e=t._readableState;i("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,$(t))}}(n);t.on("drain",u);var c=!1;function l(e){i("ondata");var o=t.write(e);i("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==F(r.pipes,t))&&!c&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(e){i("onerror",e),p(),t.removeListener("error",h),0===o(t,"error")&&_(t,e)}function f(){t.removeListener("finish",d),p()}function d(){i("onfinish"),t.removeListener("close",f),p()}function p(){i("unpipe"),n.unpipe(t)}return n.on("data",l),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(n):t._events.error=[n,t._events.error]:t.on(e,n)}(t,"error",h),t.once("close",f),t.once("finish",d),t.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},E.prototype.addListener=E.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===t&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?A(this):r.reading||process.nextTick(N,this))),n},E.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(P,this),n},E.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(P,this),e},E.prototype.resume=function(){var t=this._readableState;return t.flowing||(i("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(D,t,e))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var o in t.on("end",function(){if(i("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(o){i("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))}),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var a=0;a<S.length;a++)t.on(S[a],this.emit.bind(this,S[a]));return this._read=function(e){i("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(65571)),h(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=L,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,e){return void 0===f&&(f=n(5335)),f(E,t,e)})},79739:function(t,e,n){"use strict";t.exports=l;var r=n(91183).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(95558);function c(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(e,n){f(t,e,n)})}function f(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}n(72783)(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,n){n(new i("_transform()"))},l.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,function(t){e(t)})}},98590:function(t,e,n){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var i;t.exports=E,E.WritableState=k;var o,a={deprecate:n(69092)},s=n(68239),u=n(42108).Buffer,c=global.Uint8Array||function(){},l=n(56954),h=n(74492).getHighWaterMark,f=n(91183).q,d=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,v=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,m=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function S(){}function k(t,e,o){i=i||n(95558),"boolean"!=typeof o&&(o=e instanceof i),this.objectMode=!!(t=t||{}).objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=h(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new v;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(process.nextTick(i,r),process.nextTick(M,t,e),t._writableState.errorEmitted=!0,_(t,r)):(i(r),t._writableState.errorEmitted=!0,_(t,r),M(t,e))}(t,n,r,e,i);else{var o=C(n)||t.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||I(t,n),r?process.nextTick(T,t,n,o,i):T(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function E(t){var e=this instanceof(i=i||n(95558));if(!e&&!o.call(E,this))return new E(t);this._writableState=new k(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function x(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function T(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),M(t,e)}function I(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=new Array(e.bufferedRequestCount),o=e.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)i[a]=n,n.isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,x(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk;if(x(t,e,!1,e.objectMode?1:u.length,u,n.encoding,n.callback),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function C(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function A(t,e){t._final(function(n){e.pendingcb--,n&&_(t,n),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function M(t,e){var n=C(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(A,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}n(72783)(E,s),k.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===E&&t&&t._writableState instanceof k}})):o=function(t){return t instanceof this},E.prototype.pipe=function(){_(this,new g)},E.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,a=!i.objectMode&&(u.isBuffer(r=t)||r instanceof c);return a&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=S),i.ending?function(t,e){var n=new b;_(t,n),process.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i;return null===n?i=new m:"string"==typeof n||e.objectMode||(i=new d("chunk",["string","Buffer"],n)),!i||(_(t,i),process.nextTick(r,i),!1)}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else x(t,e,!1,s,r,i,o);return c}(this,i,a,t,e,n)),o},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||I(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,n){n(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,n){e.ending=!0,M(t,e),n&&(e.finished?process.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=l.destroy,E.prototype._undestroy=l.undestroy,E.prototype._destroy=function(t,e){e(t)}},65571:function(t,e,n){"use strict";var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(61428),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function d(t,e){return{value:t,done:e}}function p(t){var e=t[a];if(null!==e){var n=t[f].read();null!==n&&(t[l]=null,t[a]=null,t[s]=null,e(d(n,!1)))}}function v(t){process.nextTick(p,t)}var g=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var t=this,e=this[u];if(null!==e)return Promise.reject(e);if(this[c])return Promise.resolve(d(void 0,!0));if(this[f].destroyed)return new Promise(function(e,n){process.nextTick(function(){t[u]?n(t[u]):e(d(void 0,!0))})});var n,r=this[l];if(r)n=new Promise(function(t,e){return function(n,r){t.then(function(){e[c]?n(d(void 0,!0)):e[h](n,r)},r)}}(r,this));else{var i=this[f].read();if(null!==i)return Promise.resolve(d(i,!1));n=new Promise(this[h])}return this[l]=n,n}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var t=this;return new Promise(function(e,n){t[f].destroy(null,function(t){t?n(t):e(d(void 0,!0))})})}),r),g);t.exports=function(t){var e,n=Object.create(y,(i(e={},f,{value:t,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,u,{value:null,writable:!0}),i(e,c,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var r=n[f].read();r?(n[l]=null,n[a]=null,n[s]=null,t(d(r,!1))):(n[a]=t,n[s]=e)},writable:!0}),e));return n[l]=null,o(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[s];return null!==e&&(n[l]=null,n[a]=null,n[s]=null,e(t)),void(n[u]=t)}var r=n[a];null!==r&&(n[l]=null,n[a]=null,n[s]=null,r(d(void 0,!0))),n[c]=!0}),t.on("readable",v.bind(null,n)),n}},19321:function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(42108).Buffer,a=n(96419).inspect,s=a&&a.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e;return(e=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return o.alloc(0);for(var e=o.allocUnsafe(t>>>0),n=this.head,r=0;n;)o.prototype.copy.call(n.data,e,r),r+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(r+=o===i.length?i:i.slice(0,t),0==(t-=o)){o===i.length?(++n,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=o.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,a=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,a),0==(t-=a)){a===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(a));break}++r}return this.length-=r,e}},{key:s,value:function(t,e){return a(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{depth:0,customInspect:!1}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},56954:function(t){"use strict";function e(t,e){r(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,i){var o=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,t)):process.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!i&&t?o._writableState?o._writableState.errorEmitted?process.nextTick(n,o):(o._writableState.errorEmitted=!0,process.nextTick(e,o,t)):process.nextTick(e,o,t):i?(process.nextTick(n,o),i(t)):process.nextTick(n,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}},61428:function(t,e,n){"use strict";var r=n(91183).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&e.readable,s=n.writable||!1!==n.writable&&e.writable,u=function(){e.writable||l()},c=e._writableState&&e._writableState.finished,l=function(){s=!1,c=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):s&&!c?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},v=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",p),e.req?v():e.on("request",v)):s&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",f),e.on("finish",l),!1!==n.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",v),e.req&&e.req.removeListener("finish",l),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},5335:function(t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},39050:function(t,e,n){"use strict";var r,i=n(91183).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",function(){s=!0}),void 0===r&&(r=n(61428)),r(t,{readable:e,writable:i},function(t){if(t)return o(t);s=!0,o()});var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function c(t){t()}function l(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map(function(t,n){var o=n<e.length-1;return u(t,o,n>0,function(t){r||(r=t),t&&a.forEach(c),o||(a.forEach(c),i(r))})});return e.reduce(l)}},74492:function(t,e,n){"use strict";var r=n(91183).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},68239:function(t,e,n){t.exports=n(80067).EventEmitter},80179:function(t,e,n){(e=t.exports=n(8089)).Stream=e,e.Readable=e,e.Writable=n(98590),e.Duplex=n(95558),e.Transform=n(79739),e.PassThrough=n(92270),e.finished=n(61428),e.pipeline=n(39050)},10916:function(t,e,n){"use strict";var r=n(30095).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}e.s=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},9932:function(t){t.exports=function(t,e){for(var n=Math.min(t.length,e.length),r=new Buffer(n),i=0;i<n;++i)r[i]=t[i]^e[i];return r}},42108:function(t,e,n){"use strict";var r=n(41355),i=n(47090),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;var a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|v(t,e),r=s(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(B(t,Uint8Array)){var e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(B(t,ArrayBuffer)||t&&B(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(B(t,SharedArrayBuffer)||t&&B(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,n);var i=function(t){if(u.isBuffer(t)){var e=0|p(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||q(t.length)?s(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return l(t),s(t<0?0:0|p(t))}function f(t){for(var e=t.length<0?0:0|p(t.length),n=s(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,u.prototype),r}function p(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function v(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||B(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(i)return r?-1:j(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(q(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return F(j(e,t.length-n),t,n,r)}function S(t,e,n,r){return F(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return F(U(e),t,n,r)}function E(t,e,n,r){return F(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function x(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,u,c=t[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=I)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=I));return n}(r)}e.kMaxLength=a,(u.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(n){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,n){return function(t,e,n){return l(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},u.allocUnsafe=function(t){return h(t)},u.allocUnsafeSlow=function(t){return h(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(B(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),B(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(B(o,Uint8Array))i+o.length>r.length?u.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},u.byteLength=v,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,n,r,i){if(B(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(c[h]!==l[h]){o=c[h],a=l[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":case"latin1":case"binary":return S(this,t,e,n);case"base64":return k(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V[t[o]];return i}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function D(t,e,n,r,o){return e=+e,n>>>=0,o||N(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function $(t,e,n,r,o){return e=+e,n>>>=0,o||N(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||O(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||O(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||O(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||O(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){t>>>=0,e||O(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||O(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||O(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||O(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||P(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeFloatLE=function(t,e,n){return D(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return D(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return $(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return $(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:u.from(t,r),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var L=/[^+/0-9A-Za-z-_]/g;function j(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function B(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function q(t){return t!=t}var V=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},37897:function(t,e,n){var r=n(30095).Buffer,i=n(34179).Transform,o=n(57476).s;function a(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(72783)(a,i),a.prototype.update=function(t,e,n){"string"==typeof t&&(t=r.from(t,e));var i=this._update(t);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,n){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){r=i}finally{n(r)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(n){e=n}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var r=this._decoder.write(t);return n&&(r+=this._decoder.end()),r},t.exports=a},54718:function(t,e,n){var r=n(98397),i=n(80127);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function s(t,e,n){Array.isArray(t)||(t=t.toArray());var r=new Buffer(t);if(n&&r.length<n){var i=new Buffer(n-r.length);i.fill(0),r=Buffer.concat([i,r])}return e?r.toString(e):r}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,e,n){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var n=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(n[0]=n[n.length-1]%2?7:6),s(n,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,e){e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e));var n=new i(t);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}},40710:function(t,e,n){"use strict";var r=n(72783),i=n(37616),o=n(90665),a=n(45837),s=n(37897);function u(t){s.call(this,"digest"),this._hash=t}r(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new o:new u(a(t))}},25510:function(t,e,n){var r=n(37616);t.exports=function(t){return(new r).update(t).digest()}},7651:function(t,e,n){"use strict";var r=n(72783),i=n(18585),o=n(37897),a=n(30095).Buffer,s=n(25510),u=n(90665),c=n(45837),l=a.alloc(128);function h(t,e){o.call(this,"digest"),"string"==typeof e&&(e=a.from(e));var n="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>n?e=("rmd160"===t?new u:c(t)).update(e).digest():e.length<n&&(e=a.concat([e,l],n));for(var r=this._ipad=a.allocUnsafe(n),i=this._opad=a.allocUnsafe(n),s=0;s<n;s++)r[s]=54^e[s],i[s]=92^e[s];this._hash="rmd160"===t?new u:c(t),this._hash.update(r)}r(h,o),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:c(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new i(s,e):new h(t,e)}},18585:function(t,e,n){"use strict";var r=n(72783),i=n(30095).Buffer,o=n(37897),a=i.alloc(128),s=64;function u(t,e){o.call(this,"digest"),"string"==typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>s?e=t(e):e.length<s&&(e=i.concat([e,a],s));for(var n=this._ipad=i.allocUnsafe(s),r=this._opad=i.allocUnsafe(s),u=0;u<s;u++)n[u]=54^e[u],r[u]=92^e[u];this._hash=[n]}r(u,o),u.prototype._update=function(t){this._hash.push(t)},u.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=u},51887:function(t,e,n){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=n(34871),e.createHash=e.Hash=n(40710),e.createHmac=e.Hmac=n(7651);var r=n(70773),i=Object.keys(r),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return o};var a=n(41085);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var s=n(30753);e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=n(3615);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var c=n(86422);e.createSign=c.createSign,e.Sign=c.Sign,e.createVerify=c.createVerify,e.Verify=c.Verify,e.createECDH=n(54718);var l=n(76527);e.publicEncrypt=l.publicEncrypt,e.privateEncrypt=l.privateEncrypt,e.publicDecrypt=l.publicDecrypt,e.privateDecrypt=l.privateDecrypt;var h=n(13167);e.randomFill=h.randomFill,e.randomFillSync=h.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},88510:function(t,e,n){var r;t.exports=(r=n(85536),n(12927),n(63443),n(42845),n(67401),function(){var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],o=[],a=[],s=[],u=[],c=[],l=[],h=[],f=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var p=r^r<<1^r<<2^r<<3^r<<4;i[n]=p=p>>>8^255&p^99,o[p]=n;var v,g=t[n],y=t[g],m=t[y];a[n]=(v=257*t[p]^16843008*p)<<24|v>>>8,s[n]=v<<16|v>>>16,u[n]=v<<8|v>>>24,c[n]=v,l[p]=(v=16843009*m^65537*y^257*g^16843008*n)<<24|v>>>8,h[p]=v<<16|v>>>16,f[p]=v<<8|v>>>24,d[p]=v,n?(n=g^t[t[t[m^g]]],r^=t[t[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=n.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],a=0;a<r;a++)a<n?o[a]=e[a]:(c=o[a-1],a%n?n>6&&a%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=p[a/n|0]<<24),o[a]=o[a-n]^c);for(var s=this._invKeySchedule=[],u=0;u<r;u++){if(a=r-u,u%4)var c=o[a];else c=o[a-4];s[u]=u<4||a<=4?c:l[i[c>>>24]]^h[i[c>>>16&255]]^f[i[c>>>8&255]]^d[i[255&c]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,u,c,i)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,l,h,f,d,o),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,a,s){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],f=t[e+3]^n[3],d=4,p=1;p<u;p++){var v=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^a[255&f]^n[d++],g=r[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^a[255&c]^n[d++],y=r[h>>>24]^i[f>>>16&255]^o[c>>>8&255]^a[255&l]^n[d++],m=r[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^a[255&h]^n[d++];c=v,l=g,h=y,f=m}v=(s[c>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&f])^n[d++],g=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[f>>>8&255]<<8|s[255&c])^n[d++],y=(s[h>>>24]<<24|s[f>>>16&255]<<16|s[c>>>8&255]<<8|s[255&l])^n[d++],m=(s[f>>>24]<<24|s[c>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^n[d++],t[e]=v,t[e+1]=g,t[e+2]=y,t[e+3]=m},keySize:8});t.AES=e._createHelper(v)}(),r.AES)},67401:function(t,e,n){var r,i,o,a,s,u,c,l,h,f,d,p,v,g,y,m,b,w;t.exports=(r=n(85536),n(42845),void(r.lib.Cipher||(i=r,o=i.lib,a=o.Base,s=o.WordArray,u=o.BufferedBlockAlgorithm,c=i.enc.Base64,l=i.algo.EvpKDF,h=o.Cipher=u.extend({cfg:a.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:m}return function(e){return{encrypt:function(n,r,i){return t(r).encrypt(e,n,r,i)},decrypt:function(n,r,i){return t(r).decrypt(e,n,r,i)}}}}()}),o.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),f=i.mode={},d=o.BlockCipherMode=a.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=f.CBC=function(){var t=d.extend();function e(t,e,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)t[e+o]^=r[o]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i),r.encryptBlock(t,n),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);r.decryptBlock(t,n),e.call(this,t,n,i),this._prevBlock=o}}),t}(),v=(i.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(i);var u=s.create(o,r);t.concat(u)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:p,padding:v}),reset:function(){var t;h.reset.call(this);var e=this.cfg,n=e.iv,r=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=r.createEncryptor:(t=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,n&&n.words):(this._mode=t.call(r,this,n&&n.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),g=o.CipherParams=a.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),y=(i.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?s.create([1398893684,1701076831]).concat(n).concat(e):e).toString(c)},parse:function(t){var e,n=c.parse(t),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(e=s.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:e})}},m=o.SerializableCipher=a.extend({cfg:a.extend({format:y}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r),o=i.finalize(e),a=i.cfg;return g.create({ciphertext:o,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),b=(i.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=s.random(8));var i=l.create({keySize:e+n}).compute(t,r),o=s.create(i.words.slice(e),4*n);return i.sigBytes=4*e,g.create({key:i,iv:o,salt:r})}},w=o.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:b}),encrypt:function(t,e,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=i.iv;var o=m.encrypt.call(this,t,e,i.key,r);return o.mixIn(i),o},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var i=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=i.iv,m.decrypt.call(this,t,e,i.key,r)}}))))},85536:function(t,e,n){var r;t.exports=r=r||function(t,e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r)try{r=n(51887)}catch(g){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},s=a.lib={},u=s.Base={extend:function(t){var e=o(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=u.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=u.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(i());return new c.init(e,t)}}),l=a.enc={},h=l.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new c.init(n,e/2)}},f=l.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new c.init(n,e)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},p=s.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=d.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,l=t.min(4*u,o);if(u){for(var h=0;h<u;h+=a)this._doProcessBlock(i,h);n=i.splice(0,u),r.sigBytes-=l}return new c.init(n,l)},clone:function(){var t=u.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),v=(s.Hasher=p.extend({cfg:u.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new v.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math)},12927:function(t,e,n){var r,i;t.exports=(r=n(85536),i=r.lib.WordArray,r.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var a=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)i.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var a=n.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return function(t,e,n){for(var r=[],o=0,a=0;a<e;a++)if(a%4){var s=n[t.charCodeAt(a-1)]<<a%4*2,u=n[t.charCodeAt(a)]>>>6-a%4*2;r[o>>>2]|=(s|u)<<24-o%4*8,o++}return i.create(r,o)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},39474:function(t,e,n){var r;t.exports=(r=n(85536),function(){var t=r.lib.WordArray,e=r.enc;function n(t){return t<<8&4278255360|t>>>8&16711935}e.Utf16=e.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=2)r.push(String.fromCharCode(e[i>>>2]>>>16-i%4*8&65535));return r.join("")},parse:function(e){for(var n=e.length,r=[],i=0;i<n;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(r,2*n)}},e.Utf16LE={stringify:function(t){for(var e=t.words,r=t.sigBytes,i=[],o=0;o<r;o+=2){var a=n(e[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var r=e.length,i=[],o=0;o<r;o++)i[o>>>1]|=n(e.charCodeAt(o)<<16-o%2*16);return t.create(i,2*r)}}}(),r.enc.Utf16)},42845:function(t,e,n){var r,i,o,a,s,u,c;t.exports=(c=n(85536),n(18064),n(357),a=(i=(r=c).lib).WordArray,u=(s=r.algo).EvpKDF=(o=i.Base).extend({cfg:o.extend({keySize:4,hasher:s.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),o=a.create(),s=o.words,u=r.keySize,c=r.iterations;s.length<u;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var l=1;l<c;l++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*u,o}}),r.EvpKDF=function(t,e,n){return u.create(n).compute(t,e)},c.EvpKDF)},99522:function(t,e,n){var r,i,o;t.exports=(o=n(85536),n(67401),r=o.lib.CipherParams,i=o.enc.Hex,o.format.Hex={stringify:function(t){return t.ciphertext.toString(i)},parse:function(t){var e=i.parse(t);return r.create({ciphertext:e})}},o.format.Hex)},357:function(t,e,n){var r,i;t.exports=(r=n(85536),i=r.enc.Utf8,void(r.algo.HMAC=r.lib.Base.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),a=this._iKey=e.clone(),s=o.words,u=a.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})))},18839:function(t,e,n){var r;t.exports=(r=n(85536),n(14987),n(28402),n(39474),n(12927),n(63443),n(18064),n(16683),n(48372),n(24988),n(66646),n(88445),n(14970),n(357),n(64985),n(42845),n(67401),n(56539),n(14329),n(70596),n(55719),n(36124),n(37194),n(89712),n(37121),n(81990),n(50348),n(99522),n(88510),n(60029),n(7845),n(27430),n(96579),r)},28402:function(t,e,n){var r;t.exports=(r=n(85536),function(){if("function"==typeof ArrayBuffer){var t=r.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var n=t.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=t[i]<<24-i%4*8;e.call(this,r,n)}else e.apply(this,arguments)}).prototype=t}}(),r.lib.WordArray)},63443:function(t,e,n){var r;t.exports=(r=n(85536),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var u=a.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,a=t[e+0],u=t[e+1],d=t[e+2],p=t[e+3],v=t[e+4],g=t[e+5],y=t[e+6],m=t[e+7],b=t[e+8],w=t[e+9],_=t[e+10],S=t[e+11],k=t[e+12],E=t[e+13],x=t[e+14],T=t[e+15],I=o[0],C=o[1],A=o[2],M=o[3];I=c(I,C,A,M,a,7,s[0]),M=c(M,I,C,A,u,12,s[1]),A=c(A,M,I,C,d,17,s[2]),C=c(C,A,M,I,p,22,s[3]),I=c(I,C,A,M,v,7,s[4]),M=c(M,I,C,A,g,12,s[5]),A=c(A,M,I,C,y,17,s[6]),C=c(C,A,M,I,m,22,s[7]),I=c(I,C,A,M,b,7,s[8]),M=c(M,I,C,A,w,12,s[9]),A=c(A,M,I,C,_,17,s[10]),C=c(C,A,M,I,S,22,s[11]),I=c(I,C,A,M,k,7,s[12]),M=c(M,I,C,A,E,12,s[13]),A=c(A,M,I,C,x,17,s[14]),I=l(I,C=c(C,A,M,I,T,22,s[15]),A,M,u,5,s[16]),M=l(M,I,C,A,y,9,s[17]),A=l(A,M,I,C,S,14,s[18]),C=l(C,A,M,I,a,20,s[19]),I=l(I,C,A,M,g,5,s[20]),M=l(M,I,C,A,_,9,s[21]),A=l(A,M,I,C,T,14,s[22]),C=l(C,A,M,I,v,20,s[23]),I=l(I,C,A,M,w,5,s[24]),M=l(M,I,C,A,x,9,s[25]),A=l(A,M,I,C,p,14,s[26]),C=l(C,A,M,I,b,20,s[27]),I=l(I,C,A,M,E,5,s[28]),M=l(M,I,C,A,d,9,s[29]),A=l(A,M,I,C,m,14,s[30]),I=h(I,C=l(C,A,M,I,k,20,s[31]),A,M,g,4,s[32]),M=h(M,I,C,A,b,11,s[33]),A=h(A,M,I,C,S,16,s[34]),C=h(C,A,M,I,x,23,s[35]),I=h(I,C,A,M,u,4,s[36]),M=h(M,I,C,A,v,11,s[37]),A=h(A,M,I,C,m,16,s[38]),C=h(C,A,M,I,_,23,s[39]),I=h(I,C,A,M,E,4,s[40]),M=h(M,I,C,A,a,11,s[41]),A=h(A,M,I,C,p,16,s[42]),C=h(C,A,M,I,y,23,s[43]),I=h(I,C,A,M,w,4,s[44]),M=h(M,I,C,A,k,11,s[45]),A=h(A,M,I,C,T,16,s[46]),I=f(I,C=h(C,A,M,I,d,23,s[47]),A,M,a,6,s[48]),M=f(M,I,C,A,m,10,s[49]),A=f(A,M,I,C,x,15,s[50]),C=f(C,A,M,I,g,21,s[51]),I=f(I,C,A,M,k,6,s[52]),M=f(M,I,C,A,p,10,s[53]),A=f(A,M,I,C,_,15,s[54]),C=f(C,A,M,I,u,21,s[55]),I=f(I,C,A,M,b,6,s[56]),M=f(M,I,C,A,T,10,s[57]),A=f(A,M,I,C,y,15,s[58]),C=f(C,A,M,I,E,21,s[59]),I=f(I,C,A,M,v,6,s[60]),M=f(M,I,C,A,S,10,s[61]),A=f(A,M,I,C,d,15,s[62]),C=f(C,A,M,I,w,21,s[63]),o[0]=o[0]+I|0,o[1]=o[1]+C|0,o[2]=o[2]+A|0,o[3]=o[3]+M|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),a=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+i+a;return(s<<o|s>>>32-o)+e}function l(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+i+a;return(s<<o|s>>>32-o)+e}function h(t,e,n,r,i,o,a){var s=t+(e^n^r)+i+a;return(s<<o|s>>>32-o)+e}function f(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+i+a;return(s<<o|s>>>32-o)+e}e.MD5=o._createHelper(u),e.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5)},56539:function(t,e,n){var r;t.exports=(r=n(85536),n(67401),r.mode.CFB=function(){var t=r.lib.BlockCipherMode.extend();function e(t,e,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)t[e+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize;e.call(this,t,n,i,r),this._prevBlock=t.slice(n,n+i)}}),t.Decryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=t.slice(n,n+i);e.call(this,t,n,i,r),this._prevBlock=o}}),t}(),r.mode.CFB)},70596:function(t,e,n){var r;t.exports=(r=n(85536),n(67401),r.mode.CTRGladman=function(){var t=r.lib.BlockCipherMode.extend();function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,r=255&t;255===e?(e=0,255===n?(n=0,255===r?r=0:++r):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=r}else t+=1<<24;return t}var n=t.Encryptor=t.extend({processBlock:function(t,n){var r=this._cipher,i=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),function(t){0===(t[0]=e(t[0]))&&(t[1]=e(t[1]))}(a);var s=a.slice(0);r.encryptBlock(s,0);for(var u=0;u<i;u++)t[n+u]^=s[u]}});return t.Decryptor=n,t}(),r.mode.CTRGladman)},14329:function(t,e,n){var r,i,o;t.exports=(o=n(85536),n(67401),o.mode.CTR=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);n.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)t[e+s]^=a[s]}}),r.Decryptor=i,r),o.mode.CTR)},36124:function(t,e,n){var r,i;t.exports=(i=n(85536),n(67401),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),r.Decryptor=r.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),r),i.mode.ECB)},55719:function(t,e,n){var r,i,o;t.exports=(o=n(85536),n(67401),o.mode.OFB=(i=(r=o.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var a=0;a<r;a++)t[e+a]^=o[a]}}),r.Decryptor=i,r),o.mode.OFB)},37194:function(t,e,n){var r;t.exports=(r=n(85536),n(67401),r.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,r=4*e,i=r-n%r,o=n+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.pad.Ansix923)},89712:function(t,e,n){var r;t.exports=(r=n(85536),n(67401),r.pad.Iso10126={pad:function(t,e){var n=4*e,i=n-t.sigBytes%n;t.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},r.pad.Iso10126)},37121:function(t,e,n){var r;t.exports=(r=n(85536),n(67401),r.pad.Iso97971={pad:function(t,e){t.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(t,e)},unpad:function(t){r.pad.ZeroPadding.unpad(t),t.sigBytes--}},r.pad.Iso97971)},50348:function(t,e,n){var r;t.exports=(r=n(85536),n(67401),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},81990:function(t,e,n){var r;t.exports=(r=n(85536),n(67401),r.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){var e=t.words,n=t.sigBytes-1;for(n=t.sigBytes-1;n>=0;n--)if(e[n>>>2]>>>24-n%4*8&255){t.sigBytes=n+1;break}}},r.pad.ZeroPadding)},64985:function(t,e,n){var r,i,o,a,s,u,c,l;t.exports=(l=n(85536),n(18064),n(357),a=(i=(r=l).lib).WordArray,u=(s=r.algo).HMAC,c=s.PBKDF2=(o=i.Base).extend({cfg:o.extend({keySize:4,hasher:s.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=u.create(n.hasher,t),i=a.create(),o=a.create([1]),s=i.words,c=o.words,l=n.keySize,h=n.iterations;s.length<l;){var f=r.update(e).finalize(o);r.reset();for(var d=f.words,p=d.length,v=f,g=1;g<h;g++){v=r.finalize(v),r.reset();for(var y=v.words,m=0;m<p;m++)d[m]^=y[m]}i.concat(f),c[0]++}return i.sigBytes=4*l,i}}),r.PBKDF2=function(t,e,n){return c.create(n).compute(t,e)},l.PBKDF2)},96579:function(t,e,n){var r;t.exports=(r=n(85536),n(12927),n(63443),n(42845),n(67401),function(){var t=r,e=t.lib.StreamCipher,n=[],i=[],o=[],a=t.algo.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var i=0;i<4;i++)s.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(e){var o=e.words,a=o[0],u=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,f=l<<16|65535&c;for(r[0]^=c,r[1]^=h,r[2]^=l,r[3]^=f,r[4]^=c,r[5]^=h,r[6]^=l,r[7]^=f,i=0;i<4;i++)s.call(this)}},_doProcessBlock:function(t,e){var r=this._X;s.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),t[e+i]^=n[i]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],a=65535&r,s=r>>>16;o[n]=((a*a>>>17)+a*s>>>15)+s*s^((4294901760&r)*r|0)+((65535&r)*r|0)}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.RabbitLegacy=e._createHelper(a)}(),r.RabbitLegacy)},27430:function(t,e,n){var r;t.exports=(r=n(85536),n(12927),n(63443),n(42845),n(67401),function(){var t=r,e=t.lib.StreamCipher,n=[],i=[],o=[],a=t.algo.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,n=0;n<4;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,n=0;n<4;n++)s.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(e){var o=e.words,a=o[0],u=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,f=l<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=l,i[3]^=f,i[4]^=c,i[5]^=h,i[6]^=l,i[7]^=f,n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(t,e){var r=this._X;s.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),t[e+i]^=n[i]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,n=0;n<8;n++)i[n]=e[n];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<i[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<i[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<i[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<i[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<i[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<i[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<i[6]>>>0?1:0)|0,this._b=e[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=t[n]+e[n],a=65535&r,s=r>>>16;o[n]=((a*a>>>17)+a*s>>>15)+s*s^((4294901760&r)*r|0)+((65535&r)*r|0)}t[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,t[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,t[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,t[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,t[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,t[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,t[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,t[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}t.Rabbit=e._createHelper(a)}(),r.Rabbit)},7845:function(t,e,n){var r;t.exports=(r=n(85536),n(12927),n(63443),n(42845),n(67401),function(){var t=r,e=t.lib.StreamCipher,n=t.algo,i=n.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var a=i%n,s=r[i];r[i]=r[o=(o+r[i]+(e[a>>>2]>>>24-a%4*8&255))%256],r[o]=s}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var t=this._S,e=this._i,n=this._j,r=0,i=0;i<4;i++){var o=t[e=(e+1)%256];t[e]=t[n=(n+t[e])%256],t[n]=o,r|=t[(t[e]+t[n])%256]<<24-8*i}return this._i=e,this._j=n,r}t.RC4=e._createHelper(i);var a=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)o.call(this)}});t.RC4Drop=e._createHelper(a)}(),r.RC4)},14970:function(t,e,n){var r;t.exports=(r=n(85536),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,s=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),f=i.create([1352829926,1548603684,1836072691,2053994217,0]),d=a.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,i=t[r];t[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,a,d,w,_,S,k,E,x,T,I,C=this._hash.words,A=h.words,M=f.words,R=s.words,O=u.words,P=c.words,N=l.words;for(S=o=C[0],k=a=C[1],E=d=C[2],x=w=C[3],T=_=C[4],n=0;n<80;n+=1)I=o+t[e+R[n]]|0,I+=n<16?p(a,d,w)+A[0]:n<32?v(a,d,w)+A[1]:n<48?g(a,d,w)+A[2]:n<64?y(a,d,w)+A[3]:m(a,d,w)+A[4],I=(I=b(I|=0,P[n]))+_|0,o=_,_=w,w=b(d,10),d=a,a=I,I=S+t[e+O[n]]|0,I+=n<16?m(k,E,x)+M[0]:n<32?y(k,E,x)+M[1]:n<48?g(k,E,x)+M[2]:n<64?v(k,E,x)+M[3]:p(k,E,x)+M[4],I=(I=b(I|=0,N[n]))+T|0,S=T,T=x,x=b(E,10),E=k,k=I;I=C[1]+d+x|0,C[1]=C[2]+w+T|0,C[2]=C[3]+_+S|0,C[3]=C[4]+o+k|0,C[4]=C[0]+a+E|0,C[0]=I},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});function p(t,e,n){return t^e^n}function v(t,e,n){return t&e|~t&n}function g(t,e,n){return(t|~e)^n}function y(t,e,n){return t&n|e&~n}function m(t,e,n){return t^(e|~n)}function b(t,e){return t<<e|t>>>32-e}e.RIPEMD160=o._createHelper(d),e.HmacRIPEMD160=o._createHmacHelper(d)}(Math),r.RIPEMD160)},18064:function(t,e,n){var r,i,o,a,s,u,c;t.exports=(c=n(85536),o=(i=(r=c).lib).WordArray,s=[],u=r.algo.SHA1=(a=i.Hasher).extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=0;c<80;c++){if(c<16)s[c]=0|t[e+c];else{var l=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=l<<1|l>>>31}var h=(r<<5|r>>>27)+u+s[c];h+=c<20?1518500249+(i&o|~i&a):c<40?1859775393+(i^o^a):c<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,u=a,a=o,o=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),r.SHA1=a._createHelper(u),r.HmacSHA1=a._createHmacHelper(u),c.SHA1)},48372:function(t,e,n){var r,i,o,a,s,u;t.exports=(u=n(85536),n(16683),i=(r=u).lib.WordArray,s=(o=r.algo).SHA224=(a=o.SHA256).extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=a._doFinalize.call(this);return t.sigBytes-=4,t}}),r.SHA224=a._createHelper(s),r.HmacSHA224=a._createHmacHelper(s),u.SHA224)},16683:function(t,e,n){var r;t.exports=(r=n(85536),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.algo,s=[],u=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(s[i]=n(t.pow(r,.5))),u[i]=n(t.pow(r,1/3)),i++),r++}();var c=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],h=n[6],f=n[7],d=0;d<64;d++){if(d<16)c[d]=0|t[e+d];else{var p=c[d-15],v=c[d-2];c[d]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+c[d-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+c[d-16]}var g=r&i^r&o^i&o,y=f+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&h)+u[d]+c[d];f=h,h=l,l=s,s=a+y|0,a=o,o=i,i=r,r=y+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+g)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=o._createHelper(l),e.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},88445:function(t,e,n){var r;t.exports=(r=n(85536),n(14987),function(t){var e=r,n=e.lib,i=n.WordArray,o=n.Hasher,a=e.x64.Word,s=e.algo,u=[],c=[],l=[];!function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var r=(2*t+3*e)%5;t=e%5,e=r}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var i=1,o=0;o<24;o++){for(var s=0,h=0,f=0;f<7;f++){if(1&i){var d=(1<<f)-1;d<32?h^=1<<d:s^=1<<d-32}128&i?i=i<<1^113:i<<=1}l[o]=a.create(s,h)}}();var h=[];!function(){for(var t=0;t<25;t++)h[t]=a.create()}();var f=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=t[e+2*i],a=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(R=n[i]).high^=a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),R.low^=o}for(var s=0;s<24;s++){for(var f=0;f<5;f++){for(var d=0,p=0,v=0;v<5;v++)d^=(R=n[f+5*v]).high,p^=R.low;var g=h[f];g.high=d,g.low=p}for(f=0;f<5;f++){var y=h[(f+4)%5],m=h[(f+1)%5],b=m.high,w=m.low;for(d=y.high^(b<<1|w>>>31),p=y.low^(w<<1|b>>>31),v=0;v<5;v++)(R=n[f+5*v]).high^=d,R.low^=p}for(var _=1;_<25;_++){var S=(R=n[_]).high,k=R.low,E=u[_];E<32?(d=S<<E|k>>>32-E,p=k<<E|S>>>32-E):(d=k<<E-32|S>>>64-E,p=S<<E-32|k>>>64-E);var x=h[c[_]];x.high=d,x.low=p}var T=h[0],I=n[0];for(T.high=I.high,T.low=I.low,f=0;f<5;f++)for(v=0;v<5;v++){var C=h[_=f+5*v],A=h[(f+1)%5+5*v],M=h[(f+2)%5+5*v];(R=n[_]).high=C.high^~A.high&M.high,R.low=C.low^~A.low&M.low}var R,O=l[s];(R=n[0]).high^=O.high,R.low^=O.low}},_doFinalize:function(){var e=this._data,n=e.words,r=8*e.sigBytes,o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,u=s/8,c=[],l=0;l<u;l++){var h=a[l],f=h.high,d=h.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c.push(d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)),c.push(f)}return new i.init(c,s)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});e.SHA3=o._createHelper(f),e.HmacSHA3=o._createHmacHelper(f)}(Math),r.SHA3)},66646:function(t,e,n){var r,i,o,a,s,u,c,l;t.exports=(l=n(85536),n(14987),n(24988),o=(i=(r=l).x64).Word,a=i.WordArray,c=(s=r.algo).SHA384=(u=s.SHA512).extend({_doReset:function(){this._hash=new a.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=u._doFinalize.call(this);return t.sigBytes-=16,t}}),r.SHA384=u._createHelper(c),r.HmacSHA384=u._createHmacHelper(c),l.SHA384)},24988:function(t,e,n){var r;t.exports=(r=n(85536),n(14987),function(){var t=r,e=t.lib.Hasher,n=t.x64,i=n.Word,o=n.WordArray,a=t.algo;function s(){return i.create.apply(i,arguments)}var u=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],c=[];!function(){for(var t=0;t<80;t++)c[t]=s()}();var l=a.SHA512=e.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],h=n[6],f=n[7],d=r.high,p=r.low,v=i.high,g=i.low,y=o.high,m=o.low,b=a.high,w=a.low,_=s.high,S=s.low,k=l.high,E=l.low,x=h.high,T=h.low,I=f.high,C=f.low,A=d,M=p,R=v,O=g,P=y,N=m,D=b,$=w,L=_,j=S,U=k,F=E,B=x,q=T,V=I,Z=C,H=0;H<80;H++){var z,G,W=c[H];if(H<16)G=W.high=0|t[e+2*H],z=W.low=0|t[e+2*H+1];else{var K=c[H-15],J=K.high,Y=K.low,X=(Y>>>1|J<<31)^(Y>>>8|J<<24)^(Y>>>7|J<<25),Q=c[H-2],tt=Q.high,et=Q.low,nt=(et>>>19|tt<<13)^(et<<3|tt>>>29)^(et>>>6|tt<<26),rt=c[H-7],it=c[H-16],ot=it.low;W.high=G=(G=(G=((J>>>1|Y<<31)^(J>>>8|Y<<24)^J>>>7)+rt.high+((z=X+rt.low)>>>0<X>>>0?1:0))+((tt>>>19|et<<13)^(tt<<3|et>>>29)^tt>>>6)+((z+=nt)>>>0<nt>>>0?1:0))+it.high+((z+=ot)>>>0<ot>>>0?1:0),W.low=z}var at,st=L&U^~L&B,ut=j&F^~j&q,ct=A&R^A&P^R&P,lt=(M>>>28|A<<4)^(M<<30|A>>>2)^(M<<25|A>>>7),ht=u[H],ft=ht.low,dt=V+((L>>>14|j<<18)^(L>>>18|j<<14)^(L<<23|j>>>9))+((at=Z+((j>>>14|L<<18)^(j>>>18|L<<14)^(j<<23|L>>>9)))>>>0<Z>>>0?1:0),pt=lt+(M&O^M&N^O&N);V=B,Z=q,B=U,q=F,U=L,F=j,L=D+(dt=(dt=(dt=dt+st+((at+=ut)>>>0<ut>>>0?1:0))+ht.high+((at+=ft)>>>0<ft>>>0?1:0))+G+((at+=z)>>>0<z>>>0?1:0))+((j=$+at|0)>>>0<$>>>0?1:0)|0,D=P,$=N,P=R,N=O,R=A,O=M,A=dt+(((A>>>28|M<<4)^(A<<30|M>>>2)^(A<<25|M>>>7))+ct+(pt>>>0<lt>>>0?1:0))+((M=at+pt|0)>>>0<at>>>0?1:0)|0}p=r.low=p+M,r.high=d+A+(p>>>0<M>>>0?1:0),g=i.low=g+O,i.high=v+R+(g>>>0<O>>>0?1:0),m=o.low=m+N,o.high=y+P+(m>>>0<N>>>0?1:0),w=a.low=w+$,a.high=b+D+(w>>>0<$>>>0?1:0),S=s.low=S+j,s.high=_+L+(S>>>0<j>>>0?1:0),E=l.low=E+F,l.high=k+U+(E>>>0<F>>>0?1:0),T=h.low=T+q,h.high=x+B+(T>>>0<q>>>0?1:0),C=f.low=C+Z,f.high=I+V+(C>>>0<Z>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(r+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(l),t.HmacSHA512=e._createHmacHelper(l)}(),r.SHA512)},60029:function(t,e,n){var r;t.exports=(r=n(85536),n(12927),n(63443),n(42845),n(67401),function(){var t=r,e=t.lib,n=e.WordArray,i=e.BlockCipher,o=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var r=a[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],l=u[o];for(n=0;n<24;n++)c[n/6|0]|=e[(s[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=e[28+(s[n+24]-1+l)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,n){this._lBlock=t[e],this._rBlock=t[e+1],f.call(this,4,252645135),f.call(this,16,65535),d.call(this,2,858993459),d.call(this,8,16711935),f.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,a=this._rBlock,s=0,u=0;u<8;u++)s|=c[u][((a^i[u])&l[u])>>>0];this._lBlock=a,this._rBlock=o^s}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,f.call(this,1,1431655765),d.call(this,8,16711935),d.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function d(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}t.DES=i._createHelper(h);var p=o.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e=t.slice(0,2),r=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6);this._des1=h.createEncryptor(n.create(e)),this._des2=h.createEncryptor(n.create(r)),this._des3=h.createEncryptor(n.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(p)}(),r.TripleDES)},14987:function(t,e,n){var r,i,o,a,s;t.exports=(r=n(85536),o=(i=r.lib).Base,a=i.WordArray,(s=r.x64={}).Word=o.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var i=t[r];n.push(i.high),n.push(i.low)}return a.create(n,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),n=e.length,r=0;r<n;r++)e[r]=e[r].clone();return t}}),r)},38288:function(t,e,n){"use strict";e.utils=n(9941),e.Cipher=n(91057),e.DES=n(63461),e.CBC=n(31769),e.EDE=n(46502)},31769:function(t,e,n){"use strict";var r=n(18036),i=n(72783),o={};function a(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var n=Object.keys(o),r=0;r<n.length;r++){var a=n[r];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,n,r){var i=this.constructor.super_.prototype,o=this._cbcState.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)o[a]^=t[e+a];for(i._update.call(this,o,0,n,r),a=0;a<this.blockSize;a++)o[a]=n[r+a]}else{for(i._update.call(this,t,e,n,r),a=0;a<this.blockSize;a++)n[r+a]^=o[a];for(a=0;a<this.blockSize;a++)o[a]=t[e+a]}}},91057:function(t,e,n){"use strict";var r=n(18036);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var n=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<n;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,n=0,r=new Array(((this.bufferOff+t.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(r,n)));for(var i=t.length-(t.length-e)%this.blockSize;e<i;e+=this.blockSize)this._update(t,e,r,n),n+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return r},i.prototype._updateDecrypt=function(t){for(var e=0,n=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),n+=this._flushBuffer(i,n);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,n;return t&&(e=this.update(t)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(n):n},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},63461:function(t,e,n){"use strict";var r=n(18036),i=n(72783),o=n(9941),a=n(91057);function s(){this.tmp=new Array(2),this.keys=null}function u(t){a.call(this,t);var e=new s;this._desState=e,this.deriveKeys(e,t.key)}i(u,a),t.exports=u,u.create=function(t){return new u(t)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var n=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(n,i,t.tmp,0),n=t.tmp[0],i=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=c[a>>>1];n=o.r28shl(n,s),i=o.r28shl(i,s),o.pc2(n,i,t.keys,a)}},u.prototype._update=function(t,e,n,r){var i=this._desState,a=o.readUInt32BE(t,e),s=o.readUInt32BE(t,e+4);o.ip(a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,a,s,i.tmp,0):this._decrypt(i,a,s,i.tmp,0),s=i.tmp[1],o.writeUInt32BE(n,a=i.tmp[0],r),o.writeUInt32BE(n,s,r+4)},u.prototype._pad=function(t,e){for(var n=t.length-e,r=e;r<t.length;r++)t[r]=n;return!0},u.prototype._unpad=function(t){for(var e=t[t.length-1],n=t.length-e;n<t.length;n++)r.equal(t[n],e);return t.slice(0,t.length-e)},u.prototype._encrypt=function(t,e,n,r,i){for(var a=e,s=n,u=0;u<t.keys.length;u+=2){var c=t.keys[u],l=t.keys[u+1];o.expand(s,t.tmp,0);var h=o.substitute(c^=t.tmp[0],l^=t.tmp[1]),f=s;s=(a^o.permute(h))>>>0,a=f}o.rip(s,a,r,i)},u.prototype._decrypt=function(t,e,n,r,i){for(var a=n,s=e,u=t.keys.length-2;u>=0;u-=2){var c=t.keys[u],l=t.keys[u+1];o.expand(a,t.tmp,0);var h=o.substitute(c^=t.tmp[0],l^=t.tmp[1]),f=a;a=(s^o.permute(h))>>>0,s=f}o.rip(a,s,r,i)}},46502:function(t,e,n){"use strict";var r=n(18036),i=n(72783),o=n(91057),a=n(63461);function s(t,e){r.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),i=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:n}),a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:n})]}function u(t){o.call(this,t);var e=new s(this.type,this.options.key);this._edeState=e}i(u,o),t.exports=u,u.create=function(t){return new u(t)},u.prototype._update=function(t,e,n,r){var i=this._edeState;i.ciphers[0]._update(t,e,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},9941:function(t,e){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,n){t[0+n]=e>>>24,t[1+n]=e>>>16&255,t[2+n]=e>>>8&255,t[3+n]=255&e},e.ip=function(t,e,n,r){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}n[r+0]=i>>>0,n[r+1]=o>>>0},e.rip=function(t,e,n,r){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+a&1,i<<=1,i|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},e.pc1=function(t,e,n,r){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,i){for(var o=0,a=0,s=n.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>n[u]&1;for(u=s;u<n.length;u++)a<<=1,a|=e>>>n[u]&1;r[i+0]=o>>>0,r[i+1]=a>>>0},e.expand=function(t,e,n){var r=0,i=0;r=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=t>>>o&63;for(o=11;o>=3;o-=4)i|=t>>>o&63,i<<=6;i|=(31&t)<<1|t>>>31,e[n+0]=r>>>0,e[n+1]=i>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var n=0,i=0;i<4;i++)n<<=4,n|=r[64*i+(t>>>18-6*i&63)];for(i=0;i<4;i++)n<<=4,n|=r[256+64*i+(e>>>18-6*i&63)];return n>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,n=0;n<i.length;n++)e<<=1,e|=t>>>i[n]&1;return e>>>0},e.padSplit=function(t,e,n){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var i=[],o=0;o<e;o+=n)i.push(r.slice(o,o+n));return i.join(" ")}},3615:function(t,e,n){var r=n(68544),i=n(61930),o=n(91918),a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(t){var e=new Buffer(i[t].prime,"hex"),n=new Buffer(i[t].gen,"hex");return new o(e,n)},e.createDiffieHellman=e.DiffieHellman=function t(e,n,i,s){return Buffer.isBuffer(n)||void 0===a[n]?t(e,"binary",n,i):(n=n||"binary",s=s||"binary",i=i||new Buffer([2]),Buffer.isBuffer(i)||(i=new Buffer(i,s)),"number"==typeof e?new o(r(e,i),i,!0):(Buffer.isBuffer(e)||(e=new Buffer(e,n)),new o(e,i,!0)))}},91918:function(t,e,n){var r=n(80127),i=new(n(70754)),o=new r(24),a=new r(11),s=new r(10),u=new r(3),c=new r(7),l=n(68544),h=n(34871);function f(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this._pub=new r(t),this}function d(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this._priv=new r(t),this}t.exports=v;var p={};function v(t,e,n){this.setGenerator(e),this.__prime=new r(t),this._prime=r.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=f,this.setPrivateKey=d):this._primeCode=8}function g(t,e){var n=new Buffer(t.toArray());return e?n.toString(e):n}Object.defineProperty(v.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var n=e.toString("hex"),r=[n,t.toString(16)].join("_");if(r in p)return p[r];var h,f=0;if(t.isEven()||!l.simpleSieve||!l.fermatTest(t)||!i.test(t))return f+=1,p[r]=f+="02"===n||"05"===n?8:4,f;switch(i.test(t.shrn(1))||(f+=2),n){case"02":t.mod(o).cmp(a)&&(f+=8);break;case"05":(h=t.mod(s)).cmp(u)&&h.cmp(c)&&(f+=8);break;default:f+=4}return p[r]=f,f}(this.__prime,this.__gen)),this._primeCode}}),v.prototype.generateKeys=function(){return this._priv||(this._priv=new r(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},v.prototype.computeSecret=function(t){var e=(t=(t=new r(t)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new Buffer(e.toArray()),i=this.getPrime();if(n.length<i.length){var o=new Buffer(i.length-n.length);o.fill(0),n=Buffer.concat([o,n])}return n},v.prototype.getPublicKey=function(t){return g(this._pub,t)},v.prototype.getPrivateKey=function(t){return g(this._priv,t)},v.prototype.getPrime=function(t){return g(this.__prime,t)},v.prototype.getGenerator=function(t){return g(this._gen,t)},v.prototype.setGenerator=function(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this.__gen=t,this._gen=new r(t),this}},68544:function(t,e,n){var r=n(34871);t.exports=m,m.simpleSieve=g,m.fermatTest=y;var i=n(80127),o=new i(24),a=new(n(70754)),s=new i(1),u=new i(2),c=new i(5),l=(new i(16),new i(8),new i(10)),h=new i(3),f=(new i(7),new i(11)),d=new i(4),p=(new i(12),null);function v(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<e&&t[i]<=r&&n%t[i]!=0;i++);e!==i&&t[i]<=r||(t[e++]=n)}return p=t,t}function g(t){for(var e=v(),n=0;n<e.length;n++)if(0===t.modn(e[n]))return 0===t.cmpn(e[n]);return!0}function y(t){var e=i.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function m(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var n,p;for(e=new i(e);;){for(n=new i(r(Math.ceil(t/8)));n.bitLength()>t;)n.ishrn(1);if(n.isEven()&&n.iadd(s),n.testn(1)||n.iadd(u),e.cmp(u)){if(!e.cmp(c))for(;n.mod(l).cmp(h);)n.iadd(d)}else for(;n.mod(o).cmp(f);)n.iadd(d);if(g(p=n.shrn(1))&&g(n)&&y(p)&&y(n)&&a.test(p)&&a.test(n))return n}}},98397:function(t,e,n){"use strict";var r=e;r.version=n(17519).i8,r.utils=n(69536),r.rand=n(58408),r.curve=n(20987),r.curves=n(71891),r.ec=n(65988),r.eddsa=n(22188)},26720:function(t,e,n){"use strict";var r=n(80127),i=n(69536),o=i.getNAF,a=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var n=t._getDoubles(),r=o(e,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;var a,u,c=[];for(a=0;a<r.length;a+=n.step){u=0;for(var l=a+n.step-1;l>=a;l--)u=(u<<1)+r[l];c.push(u)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=i;d>0;d--){for(a=0;a<c.length;a++)(u=c[a])===d?f=f.mixedAdd(n.points[a]):u===-d&&(f=f.mixedAdd(n.points[a].neg()));h=h.add(f)}return h.toP()},u.prototype._wnafMul=function(t,e){for(var n=4,r=t._getNAFPoints(n),i=r.points,a=o(e,n=r.wnd,this._bitLength),u=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var l=0;c>=0&&0===a[c];c--)l++;if(c>=0&&l++,u=u.dblp(l),c<0)break;var h=a[c];s(0!==h),u="affine"===t.type?u.mixedAdd(h>0?i[h-1>>1]:i[-h-1>>1].neg()):u.add(h>0?i[h-1>>1]:i[-h-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,n,r,i){var s,u,c,l=this._wnafT1,h=this._wnafT2,f=this._wnafT3,d=0;for(s=0;s<r;s++){var p=(c=e[s])._getNAFPoints(t);l[s]=p.wnd,h[s]=p.points}for(s=r-1;s>=1;s-=2){var v=s-1,g=s;if(1===l[v]&&1===l[g]){var y=[e[v],null,null,e[g]];0===e[v].y.cmp(e[g].y)?(y[1]=e[v].add(e[g]),y[2]=e[v].toJ().mixedAdd(e[g].neg())):0===e[v].y.cmp(e[g].y.redNeg())?(y[1]=e[v].toJ().mixedAdd(e[g]),y[2]=e[v].add(e[g].neg())):(y[1]=e[v].toJ().mixedAdd(e[g]),y[2]=e[v].toJ().mixedAdd(e[g].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],b=a(n[v],n[g]);for(d=Math.max(b[0].length,d),f[v]=new Array(d),f[g]=new Array(d),u=0;u<d;u++)f[v][u]=m[3*(1+(0|b[0][u]))+(1+(0|b[1][u]))],f[g][u]=0,h[v]=y}else f[v]=o(n[v],l[v],this._bitLength),f[g]=o(n[g],l[g],this._bitLength),d=Math.max(f[v].length,d),d=Math.max(f[g].length,d)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(s=d;s>=0;s--){for(var S=0;s>=0;){var k=!0;for(u=0;u<r;u++)_[u]=0|f[u][s],0!==_[u]&&(k=!1);if(!k)break;S++,s--}if(s>=0&&S++,w=w.dblp(S),s<0)break;for(u=0;u<r;u++){var E=_[u];0!==E&&(E>0?c=h[u][E-1>>1]:E<0&&(c=h[u][-E-1>>1].neg()),w="affine"===c.type?w.mixedAdd(c):w.add(c))}}for(s=0;s<r;s++)h[s]=null;return i?w:w.toP()},u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*n)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},54908:function(t,e,n){"use strict";var r=n(69536),i=n(80127),o=n(72783),a=n(26720),s=r.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,a.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function c(t,e,n,r,o){a.BasePoint.call(this,t,"projective"),null===e&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(n,16),this.z=r?new i(r,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,n,r){return this.point(t,e,n,r)},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=r.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},u.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=r.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),n=t.y.redSqr(),r=e.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(n)));return 0===r.cmp(i)},o(c,a.BasePoint),u.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},u.prototype.point=function(t,e,n,r){return new c(this,t,e,n,r)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=r.redAdd(e),a=o.redSub(n),s=r.redSub(e),u=i.redMul(a),c=o.redMul(s),l=i.redMul(s),h=a.redMul(o);return this.curve.point(u,c,h,l)},c.prototype._projDbl=function(){var t,e,n,r,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(r=this.curve._mulA(s)).redAdd(u);this.zOne?(t=a.redSub(s).redSub(u).redMul(c.redSub(this.curve.two)),e=c.redMul(r.redSub(u)),n=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),t=a.redSub(s).redISub(u).redMul(o),e=c.redMul(r.redSub(u)),n=c.redMul(o))}else r=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=r.redSub(i).redSub(i),t=this.curve._mulC(a.redISub(r)).redMul(o),e=this.curve._mulC(r).redMul(s.redISub(u)),n=r.redMul(o);return this.curve.point(t,e,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(e),a=i.redSub(r),s=i.redAdd(r),u=n.redAdd(e),c=o.redMul(a),l=s.redMul(u),h=o.redMul(u),f=a.redMul(s);return this.curve.point(c,l,f,h)},c.prototype._projAdd=function(t){var e,n,r=this.z.redMul(t.z),i=r.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),c=i.redAdd(s),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),h=r.redMul(u).redMul(l);return this.curve.twisted?(e=r.redMul(c).redMul(a.redSub(this.curve._mulA(o))),n=u.redMul(c)):(e=r.redMul(c).redMul(a.redSub(o)),n=this.curve._mulC(u).redMul(c)),this.curve.point(h,e,n)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!1)},c.prototype.jmulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var n=t.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},20987:function(t,e,n){"use strict";var r=e;r.base=n(26720),r.short=n(48243),r.mont=n(76369),r.edwards=n(54908)},76369:function(t,e,n){"use strict";var r=n(80127),i=n(72783),o=n(26720),a=n(69536);function s(t){o.call(this,"mont",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,n){o.BasePoint.call(this,t,"projective"),null===e&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(e,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,o),t.exports=s,s.prototype.validate=function(t){var e=t.normalize().x,n=e.redSqr(),r=n.redMul(e).redAdd(n.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},i(u,o.BasePoint),s.prototype.decodePoint=function(t,e){return this.point(a.toArray(t,e),1)},s.prototype.point=function(t,e){return new u(this,t,e)},s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),n=t.redSub(e),r=t.redMul(e),i=n.redMul(e.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(n),a=i.redMul(r),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(t){for(var e=t.clone(),n=this,r=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},48243:function(t,e,n){"use strict";var r=n(69536),i=n(80127),o=n(72783),a=n(26720),s=r.assert;function u(t){a.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,n,r){a.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(t,e,n,r){a.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)n=new i(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?n=o[0]:s(0===this.g.mul(n=o[1]).x.cmp(this.g.x.redMul(e)))}return{beta:e,lambda:n,basis:t.basis?t.basis.map(function(t){return{a:new i(t.a,16),b:new i(t.b,16)}}):this._getEndoBasis(n)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),n=new i(2).toRed(e).redInvm(),r=n.redNeg(),o=new i(3).toRed(e).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,n,r,o,a,s,u,c,l,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i(1),v=new i(0),g=new i(0),y=new i(1),m=0;0!==f.cmpn(0);){var b=d.div(f);c=d.sub(b.mul(f)),l=g.sub(b.mul(p));var w=y.sub(b.mul(v));if(!r&&c.cmp(h)<0)e=u.neg(),n=p,r=c.neg(),o=l;else if(r&&2==++m)break;u=c,d=f,f=c,g=p,p=l,y=v,v=w}a=c.neg(),s=l;var _=r.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(_)>=0&&(a=e,s=n),r.negative&&(r=r.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:r,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),a=i.mul(n.a),s=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b);return{k1:t.sub(a).sub(s),k2:u.add(c).neg()}},u.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(e&&!o||!e&&o)&&(r=r.redNeg()),this.point(t,r)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),r[2*o]=s,r[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,r,i,2*o,n),l=0;l<2*o;l++)r[l]=null,i[l]=null;return c},o(c,a.BasePoint),u.prototype.point=function(t,e,n){return new c(this,t,e,n)},u.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,n){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],n);if(!e[2])return r;function i(e){return t.point(e[0],e[1],n)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,a.BasePoint),u.prototype.jpoint=function(t,e,n){return new l(this,t,e,n)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(n.redMul(this.z)),s=r.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),h=r.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,d,p)},l.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),a=n.redSub(r),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=n.redMul(u),h=s.redSqr().redIAdd(c).redISub(l).redISub(l),f=s.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(h,f,d)},l.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var n=this;for(e=0;e<t;e++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(e=0;e<t;e++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(u)),p=o.redMul(h),v=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(v),y=d.redMul(g);y=y.redIAdd(y).redISub(f);var m=c.redMul(s);e+1<t&&(u=u.redMul(f)),o=v,s=m,c=y}return this.curve.jpoint(o,c.redMul(i),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=u,e=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),v=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=v.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},l.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),v=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(v),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,n)},l.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=e.redSqr(),a=n.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),c=(u=u.redIAdd(u)).redMul(a),l=s.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=s.redMul(h).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(l,d,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(r),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),l=e.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(s).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(h,f,d)},l.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},l.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},71891:function(t,e,n){"use strict";var r,i=e,o=n(73801),a=n(20987),s=n(69536).assert;function u(t){this.curve="short"===t.type?new a.short(t):"edwards"===t.type?new a.edwards(t):new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var n=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(43639)}catch(l){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},65988:function(t,e,n){"use strict";var r=n(80127),i=n(50724),o=n(69536),a=n(71891),s=n(58408),u=o.assert,c=n(93829),l=n(80882);function h(t){if(!(this instanceof h))return new h(t);"string"==typeof t&&(u(Object.prototype.hasOwnProperty.call(a,t),"Unknown curve "+t),t=a[t]),t instanceof a.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=h,h.prototype.keyPair=function(t){return new c(this,t)},h.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||s(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new r(2));;){var a=new r(e.generate(n));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},h.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},h.prototype.sign=function(t,e,n,o){"object"==typeof n&&(o=n,n=null),o||(o={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new r(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),u=t.toArray("be",a),c=new i({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new r(1)),f=0;;f++){var d=o.k?o.k(f):new r(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(h)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var v=p.getX(),g=v.umod(this.n);if(0!==g.cmpn(0)){var y=d.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(y=y.umod(this.n)).cmpn(0)){var m=(p.getY().isOdd()?1:0)|(0!==v.cmp(g)?2:0);return o.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),m^=1),new l({r:g,s:y,recoveryParam:m})}}}}}},h.prototype.verify=function(t,e,n,i){t=this._truncateToN(new r(t,16)),n=this.keyFromPublic(n,i);var o=(e=new l(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),c=u.mul(t).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,n.getPublic(),h)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(c,n.getPublic(),h)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(t,e,n,i){u((3&n)===n,"The recovery param is more than two bits"),e=new l(e,i);var o=this.n,a=new r(t),s=e.r,c=e.s,h=1&n,f=n>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");s=this.curve.pointFromX(f?s.add(this.curve.n):s,h);var d=e.r.invm(o),p=o.sub(a).mul(d).umod(o),v=c.mul(d).umod(o);return this.g.mulAdd(p,s,v)},h.prototype.getKeyRecoveryParam=function(t,e,n,r){if(null!==(e=new l(e,r)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},93829:function(t,e,n){"use strict";var r=n(80127),i=n(69536).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,n){return e instanceof o?e:new o(t,{pub:e,pubEnc:n})},o.fromPrivate=function(t,e,n){return e instanceof o?e:new o(t,{priv:e,privEnc:n})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.validate()||i(t.validate(),"public point not validated"),t.mul(this.priv).getX()},o.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},80882:function(t,e,n){"use strict";var r=n(80127),i=n(69536),o=i.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),this.recoveryParam=void 0===t.recoveryParam?null:t.recoveryParam)}function s(){this.place=0}function u(t,e){var n=t[e.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,o=0,a=e.place;o<r;o++,a++)i<<=8,i|=t[a],i>>>=0;return!(i<=127)&&(e.place=a,i)}function c(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function l(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}t.exports=a,a.prototype._importDER=function(t,e){t=i.toArray(t,e);var n=new s;if(48!==t[n.place++])return!1;var o=u(t,n);if(!1===o)return!1;if(o+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var a=u(t,n);if(!1===a)return!1;var c=t.slice(n.place,a+n.place);if(n.place+=a,2!==t[n.place++])return!1;var l=u(t,n);if(!1===l)return!1;if(t.length!==l+n.place)return!1;var h=t.slice(n.place,l+n.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new r(c),this.s=new r(h),this.recoveryParam=null,!0},a.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=c(e),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];l(r,e.length),(r=r.concat(e)).push(2),l(r,n.length);var o=r.concat(n),a=[48];return l(a,o.length),a=a.concat(o),i.encode(a,t)}},22188:function(t,e,n){"use strict";var r=n(73801),i=n(71891),o=n(69536),a=o.assert,s=o.parseBytes,u=n(5354),c=n(11083);function l(t){if(a("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof l))return new l(t);this.curve=t=i[t].curve,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}t.exports=l,l.prototype.sign=function(t,e){t=s(t);var n=this.keyFromSecret(e),r=this.hashInt(n.messagePrefix(),t),i=this.g.mul(r),o=this.encodePoint(i),a=this.hashInt(o,n.pubBytes(),t).mul(n.priv()),u=r.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},l.prototype.verify=function(t,e,n){t=s(t),e=this.makeSignature(e);var r=this.keyFromPublic(n),i=this.hashInt(e.Rencoded(),r.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(r.pub().mul(i)).eq(o)},l.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},l.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},l.prototype.makeSignature=function(t){return t instanceof c?t:new c(this,t)},l.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},l.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,n=t.slice(0,e).concat(-129&t[e]),r=0!=(128&t[e]),i=o.intFromLE(n);return this.curve.pointFromY(i,r)},l.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(t){return o.intFromLE(t)},l.prototype.isPoint=function(t){return t instanceof this.pointClass}},5354:function(t,e,n){"use strict";var r=n(69536),i=r.assert,o=r.parseBytes,a=r.cachedProperty;function s(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),a(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),a(s,"privBytes",function(){var t=this.eddsa,e=this.hash(),n=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r}),a(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),a(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),a(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},s.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=s},11083:function(t,e,n){"use strict";var r=n(80127),i=n(69536),o=i.assert,a=i.cachedProperty,s=i.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=s(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof r&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}a(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),a(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),a(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),a(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},43639:function(t){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},69536:function(t,e,n){"use strict";var r=e,i=n(80127),o=n(18036),a=n(68486);r.assert=o,r.toArray=a.toArray,r.zero2=a.zero2,r.toHex=a.toHex,r.encode=a.encode,r.getNAF=function(t,e,n){var r=new Array(Math.max(t.bitLength(),n)+1);r.fill(0);for(var i=1<<e+1,o=t.clone(),a=0;a<r.length;a++){var s,u=o.andln(i-1);o.isOdd()?o.isubn(s=u>(i>>1)-1?(i>>1)-u:u):s=0,r[a]=s,o.iushrn(1)}return r},r.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var a,s,u=t.andln(3)+i&3,c=e.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0==(1&u)?0:3!=(r=t.andln(7)+i&7)&&5!==r||2!==c?u:-u,n[0].push(a),s=0==(1&c)?0:3!=(r=e.andln(7)+o&7)&&5!==r||2!==u?c:-c,n[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return n},r.cachedProperty=function(t,e,n){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new i(t,"hex","le")}},80067:function(t){"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise(function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}v(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&v(t,"error",e,{once:!0})}(t,i)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,a;if(s(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,console&&console.warn&&console.warn(c)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[t];if(void 0===u)return!1;if("function"==typeof u)r(u,this,e);else{var c=u.length,l=p(u,c);for(n=0;n<c;++n)r(l[n],this,e)}return!0},o.prototype.on=o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,h(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,h(this,t,e)),this},o.prototype.off=o.prototype.removeListener=function(t,e){var n,r,i,o,a;if(s(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return f(this,t,!0)},o.prototype.rawListeners=function(t){return f(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},41111:function(t,e,n){var r=n(30095).Buffer,i=n(37616);t.exports=function(t,e,n,o){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&(r.isBuffer(e)||(e=r.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,s=r.alloc(a),u=r.alloc(o||0),c=r.alloc(0);a>0||o>0;){var l=new i;l.update(c),l.update(t),e&&l.update(e),c=l.digest();var h=0;if(a>0){var f=s.length-a;h=Math.min(a,c.length),c.copy(s,f,0,h),a-=h}if(h<c.length&&o>0){var d=u.length-o,p=Math.min(o,c.length-h);c.copy(u,d,h,h+p),o-=p}}return c.fill(0),{key:s,iv:u}}},60117:function(t,e,n){"use strict";var r=n(30095).Buffer,i=n(14988).Transform;function o(t){i.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(72783)(o,i),o.prototype._transform=function(t,e,n){var r=null;try{this.update(t,e)}catch(i){r=i}n(r)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(n){e=n}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer")}(t),this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var n=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)n[this._blockOffset++]=t[i++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},14988:function(t,e,n){(e=t.exports=n(8089)).Stream=e,e.Readable=e,e.Writable=n(98590),e.Duplex=n(95558),e.Transform=n(79739),e.PassThrough=n(92270),e.finished=n(61428),e.pipeline=n(39050)},73801:function(t,e,n){var r=e;r.utils=n(45586),r.common=n(16014),r.sha=n(50162),r.ripemd=n(72927),r.hmac=n(67199),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},16014:function(t,e,n){"use strict";var r=n(45586),i=n(18036);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending=this.pending?this.pending.concat(t):t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t}else for(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},67199:function(t,e,n){"use strict";var r=n(45586),i=n(18036);function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,n))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},72927:function(t,e,n){"use strict";var r=n(45586),i=n(16014),o=r.rotl32,a=r.sum32,s=r.sum32_3,u=r.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function h(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(l,c),e.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(t,e){for(var n=this.h[0],r=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],m=n,b=r,w=i,_=c,S=l,k=0;k<80;k++){var E=a(o(u(n,h(k,r,i,c),t[p[k]+e],f(k)),g[k]),l);n=l,l=c,c=o(i,10),i=r,r=E,E=a(o(u(m,h(79-k,b,w,_),t[v[k]+e],d(k)),y[k]),S),m=S,S=_,_=o(w,10),w=b,b=E}E=s(this.h[1],i,_),this.h[1]=s(this.h[2],c,S),this.h[2]=s(this.h[3],l,m),this.h[3]=s(this.h[4],n,b),this.h[4]=s(this.h[0],r,w),this.h[0]=E},l.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},50162:function(t,e,n){"use strict";e.sha1=n(55856),e.sha224=n(77871),e.sha256=n(88178),e.sha384=n(96780),e.sha512=n(71302)},55856:function(t,e,n){"use strict";var r=n(45586),i=n(16014),o=n(45960),a=r.rotl32,s=r.sum32,u=r.sum32_5,c=o.ft_1,l=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(f,l),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=a(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],f=this.h[3],d=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),v=u(a(i,5),c(p,o,l,f),d,n[r],h[p]);d=f,f=l,l=a(o,30),o=i,i=v}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],l),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},77871:function(t,e,n){"use strict";var r=n(45586),i=n(88178);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},88178:function(t,e,n){"use strict";var r=n(45586),i=n(16014),o=n(45960),a=n(18036),s=r.sum32,u=r.sum32_4,c=r.sum32_5,l=o.ch32,h=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,v=o.g1_256,g=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}r.inherits(m,g),t.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=u(v(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],g=this.h[2],y=this.h[3],m=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var S=c(_,d(m),l(m,b,w),this.k[r],n[r]),k=s(f(i),h(i,o,g));_=w,w=b,b=m,m=s(y,S),y=g,g=o,o=i,i=s(S,k)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],y),this.h[4]=s(this.h[4],m),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],w),this.h[7]=s(this.h[7],_)},m.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},96780:function(t,e,n){"use strict";var r=n(45586),i=n(71302);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},71302:function(t,e,n){"use strict";var r=n(45586),i=n(16014),o=n(18036),a=r.rotr64_hi,s=r.rotr64_lo,u=r.shr64_hi,c=r.shr64_lo,l=r.sum64,h=r.sum64_hi,f=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,v=r.sum64_5_hi,g=r.sum64_5_lo,y=i.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function w(t,e,n,r,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function _(t,e,n,r,i,o){var a=e&r^~e&o;return a<0&&(a+=4294967296),a}function S(t,e,n,r,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function k(t,e,n,r,i,o){var a=e&r^e&o^r&o;return a<0&&(a+=4294967296),a}function E(t,e){var n=a(t,e,28)^a(e,t,2)^a(e,t,7);return n<0&&(n+=4294967296),n}function x(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function T(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function I(t,e){var n=a(t,e,1)^a(t,e,8)^u(t,e,7);return n<0&&(n+=4294967296),n}function C(t,e){var n=s(t,e,1)^s(t,e,8)^c(t,e,7);return n<0&&(n+=4294967296),n}function A(t,e){var n=s(t,e,19)^s(e,t,29)^c(t,e,6);return n<0&&(n+=4294967296),n}r.inherits(b,y),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,r=0;r<32;r++)n[r]=t[e+r];for(;r<n.length;r+=2){var i=(m=void 0,(m=a(g=n[r-4],y=n[r-3],19)^a(y,g,29)^u(g,y,6))<0&&(m+=4294967296),m),o=A(n[r-4],n[r-3]),s=n[r-14],c=n[r-13],l=I(n[r-30],n[r-29]),h=C(n[r-30],n[r-29]),f=n[r-32],v=n[r-31];n[r]=d(i,o,s,c,l,h,f,v),n[r+1]=p(i,o,s,c,l,h,f,v)}var g,y,m},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n,r,i,s=this.W,u=this.h[0],c=this.h[1],d=this.h[2],p=this.h[3],y=this.h[4],m=this.h[5],b=this.h[6],I=this.h[7],C=this.h[8],A=this.h[9],M=this.h[10],R=this.h[11],O=this.h[12],P=this.h[13],N=this.h[14],D=this.h[15];o(this.k.length===s.length);for(var $=0;$<s.length;$+=2){var L=N,j=D,U=(i=void 0,(i=a(n=C,r=A,14)^a(n,r,18)^a(r,n,9))<0&&(i+=4294967296),i),F=T(C,A),B=w(C,0,M,0,O),q=_(0,A,0,R,0,P),V=this.k[$],Z=this.k[$+1],H=s[$],z=s[$+1],G=v(L,j,U,F,B,q,V,Z,H,z),W=g(L,j,U,F,B,q,V,Z,H,z);L=E(u,c),j=x(u,c),U=S(u,0,d,0,y),F=k(0,c,0,p,0,m);var K=h(L,j,U,F),J=f(L,j,U,F);N=O,D=P,O=M,P=R,M=C,R=A,C=h(b,I,G,W),A=f(I,I,G,W),b=y,I=m,y=d,m=p,d=u,p=c,u=h(G,W,K,J),c=f(G,W,K,J)}l(this.h,0,u,c),l(this.h,2,d,p),l(this.h,4,y,m),l(this.h,6,b,I),l(this.h,8,C,A),l(this.h,10,M,R),l(this.h,12,O,P),l(this.h,14,N,D)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},45960:function(t,e,n){"use strict";var r=n(45586).rotr32;function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function a(t,e,n){return t^e^n}e.ft_1=function(t,e,n,r){return 0===t?i(e,n,r):1===t||3===t?a(e,n,r):2===t?o(e,n,r):void 0},e.ch32=i,e.maj32=o,e.p32=a,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},45586:function(t,e,n){"use strict";var r=n(18036),i=n(72783);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function s(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(var r=0,i=0;i<t.length;i++){var a=t.charCodeAt(i);a<128?n[r++]=a:a<2048?(n[r++]=a>>6|192,n[r++]=63&a|128):o(t,i)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++i)),n[r++]=a>>18|240,n[r++]=a>>12&63|128,n[r++]=a>>6&63|128,n[r++]=63&a|128):(n[r++]=a>>12|224,n[r++]=a>>6&63|128,n[r++]=63&a|128)}else for(i=0;i<t.length;i++)n[i]=0|t[i];return n},e.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=s(t[n].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=a(i)),n+=u(i.toString(16))}return n},e.zero2=s,e.zero8=u,e.join32=function(t,e,n,i){var o=n-e;r(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4)a[s]=("big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u])>>>0;return a},e.split32=function(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var o=t[r];"big"===e?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,n){return t+e+n>>>0},e.sum32_4=function(t,e,n,r){return t+e+n+r>>>0},e.sum32_5=function(t,e,n,r,i){return t+e+n+r+i>>>0},e.sum64=function(t,e,n,r){var i=r+t[e+1]>>>0;t[e]=(i<r?1:0)+n+t[e]>>>0,t[e+1]=i},e.sum64_hi=function(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0},e.sum64_lo=function(t,e,n,r){return e+r>>>0},e.sum64_4_hi=function(t,e,n,r,i,o,a,s){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+n+i+a+(u+=(c=c+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,n,r,i,o,a,s){return e+r+o+s>>>0},e.sum64_5_hi=function(t,e,n,r,i,o,a,s,u,c){var l=0,h=e;return l+=(h=h+r>>>0)<e?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+s>>>0)<s?1:0,t+n+i+a+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(t,e,n,r,i,o,a,s,u,c){return e+r+o+s+c>>>0},e.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},e.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},e.shr64_hi=function(t,e,n){return t>>>n},e.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},50724:function(t,e,n){"use strict";var r=n(73801),i=n(68486),o=n(18036);function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),n=i.toArray(t.nonce,t.nonceEnc||"hex"),r=i.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}t.exports=a,a.prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,n,r){"string"!=typeof e&&(r=n,n=e,e=null),t=i.toArray(t,e),n=i.toArray(n,r),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},a.prototype.generate=function(t,e,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=n,n=e,e=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(n),this._reseed++,i.encode(a,e)}},53474:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,a){n(i=t[e].apply(t,r)).then(o,a)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function a(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function s(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},47090:function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*v}},72783:function(t){t.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},37616:function(t,e,n){"use strict";var r=n(72783),i=n(60117),o=n(30095).Buffer,a=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function c(t,e,n,r,i,o,a){return u(t+(e&n|~e&r)+i+o|0,a)+e|0}function l(t,e,n,r,i,o,a){return u(t+(e&r|n&~r)+i+o|0,a)+e|0}function h(t,e,n,r,i,o,a){return u(t+(e^n^r)+i+o|0,a)+e|0}function f(t,e,n,r,i,o,a){return u(t+(n^(e|~r))+i+o|0,a)+e|0}r(s,i),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var n=this._a,r=this._b,i=this._c,o=this._d;n=c(n,r,i,o,t[0],3614090360,7),o=c(o,n,r,i,t[1],3905402710,12),i=c(i,o,n,r,t[2],606105819,17),r=c(r,i,o,n,t[3],3250441966,22),n=c(n,r,i,o,t[4],4118548399,7),o=c(o,n,r,i,t[5],1200080426,12),i=c(i,o,n,r,t[6],2821735955,17),r=c(r,i,o,n,t[7],4249261313,22),n=c(n,r,i,o,t[8],1770035416,7),o=c(o,n,r,i,t[9],2336552879,12),i=c(i,o,n,r,t[10],4294925233,17),r=c(r,i,o,n,t[11],2304563134,22),n=c(n,r,i,o,t[12],1804603682,7),o=c(o,n,r,i,t[13],4254626195,12),i=c(i,o,n,r,t[14],2792965006,17),n=l(n,r=c(r,i,o,n,t[15],1236535329,22),i,o,t[1],4129170786,5),o=l(o,n,r,i,t[6],3225465664,9),i=l(i,o,n,r,t[11],643717713,14),r=l(r,i,o,n,t[0],3921069994,20),n=l(n,r,i,o,t[5],3593408605,5),o=l(o,n,r,i,t[10],38016083,9),i=l(i,o,n,r,t[15],3634488961,14),r=l(r,i,o,n,t[4],3889429448,20),n=l(n,r,i,o,t[9],568446438,5),o=l(o,n,r,i,t[14],3275163606,9),i=l(i,o,n,r,t[3],4107603335,14),r=l(r,i,o,n,t[8],1163531501,20),n=l(n,r,i,o,t[13],2850285829,5),o=l(o,n,r,i,t[2],4243563512,9),i=l(i,o,n,r,t[7],1735328473,14),n=h(n,r=l(r,i,o,n,t[12],2368359562,20),i,o,t[5],4294588738,4),o=h(o,n,r,i,t[8],2272392833,11),i=h(i,o,n,r,t[11],1839030562,16),r=h(r,i,o,n,t[14],4259657740,23),n=h(n,r,i,o,t[1],2763975236,4),o=h(o,n,r,i,t[4],1272893353,11),i=h(i,o,n,r,t[7],4139469664,16),r=h(r,i,o,n,t[10],3200236656,23),n=h(n,r,i,o,t[13],681279174,4),o=h(o,n,r,i,t[0],3936430074,11),i=h(i,o,n,r,t[3],3572445317,16),r=h(r,i,o,n,t[6],76029189,23),n=h(n,r,i,o,t[9],3654602809,4),o=h(o,n,r,i,t[12],3873151461,11),i=h(i,o,n,r,t[15],530742520,16),n=f(n,r=h(r,i,o,n,t[2],3299628645,23),i,o,t[0],4096336452,6),o=f(o,n,r,i,t[7],1126891415,10),i=f(i,o,n,r,t[14],2878612391,15),r=f(r,i,o,n,t[5],4237533241,21),n=f(n,r,i,o,t[12],1700485571,6),o=f(o,n,r,i,t[3],2399980690,10),i=f(i,o,n,r,t[10],4293915773,15),r=f(r,i,o,n,t[1],2240044497,21),n=f(n,r,i,o,t[8],1873313359,6),o=f(o,n,r,i,t[15],4264355552,10),i=f(i,o,n,r,t[6],2734768916,15),r=f(r,i,o,n,t[13],1309151649,21),n=f(n,r,i,o,t[4],4149444226,6),o=f(o,n,r,i,t[11],3174756917,10),i=f(i,o,n,r,t[2],718787259,15),r=f(r,i,o,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},70754:function(t,e,n){var r=n(80127),i=n(58408);function o(t){this.rand=t||new i.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),n=Math.ceil(e/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(t)>=0);return i},o.prototype._randrange=function(t,e){var n=e.sub(t);return t.add(this._randbelow(n))},o.prototype.test=function(t,e,n){var i=t.bitLength(),o=r.mont(t),a=new r(1).toRed(o);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var c=t.shrn(u),l=s.toRed(o);e>0;e--){var h=this._randrange(new r(2),s);n&&n(h);var f=h.toRed(o).redPow(c);if(0!==f.cmp(a)&&0!==f.cmp(l)){for(var d=1;d<u;d++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(l))break}if(d===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var n=t.bitLength(),i=r.mont(t),o=new r(1).toRed(i);e||(e=Math.max(1,n/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),c=a.toRed(i);e>0;e--){var l=this._randrange(new r(2),a),h=t.gcd(l);if(0!==h.cmpn(1))return h;var f=l.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(c)){for(var d=1;d<s;d++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(c))break}if(d===s)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},18036:function(t){function e(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=e,e.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},68486:function(t,e){"use strict";var n=e;function r(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",n=0;n<t.length;n++)e+=r(t[n].toString(16));return e}n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}return n},n.zero2=r,n.toHex=i,n.encode=function(t,e){return"hex"===e?i(t):t}},35518:function(t,e,n){var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"==typeof u.get?u.get:null,l=s&&Set.prototype.forEach,h="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,v=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,m="function"==typeof BigInt?BigInt.prototype.valueOf:null,b=Object.getOwnPropertySymbols,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,_="function"==typeof Symbol&&"object"==typeof Symbol.iterator,S=Object.prototype.propertyIsEnumerable,k=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null),E=n(24654).custom,x=E&&M(E)?E:null,T="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function I(t,e,n){var r="double"===(n.quoteStyle||e)?'"':"'";return r+t+r}function C(t){return String(t).replace(/"/g,"&quot;")}function A(t){return!("[object Array]"!==P(t)||T&&"object"==typeof t&&T in t)}function M(t){if(_)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!w)return!1;try{return w.call(t),!0}catch(e){}return!1}t.exports=function t(e,n,r,i){var s=n||{};if(O(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(O(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!O(s,"customInspect")||s.customInspect;if("boolean"!=typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(O(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return D(e,s);if("number"==typeof e)return 0===e?1/0/e>0?"0":"-0":String(e);if("bigint"==typeof e)return String(e)+"n";var v=void 0===s.depth?5:s.depth;if(void 0===r&&(r=0),r>=v&&v>0&&"object"==typeof e)return A(e)?"[Array]":"[Object]";var b,S=function(t,e){var n;if("\t"===t.indent)n="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;n=Array(t.indent+1).join(" ")}return{base:n,prev:Array(e+1).join(n)}}(s,r);if(void 0===i)i=[];else if(N(i,e)>=0)return"[Circular]";function E(e,n,o){if(n&&(i=i.slice()).push(n),o){var a={depth:s.depth};return O(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),t(e,a,r+1,i)}return t(e,s,r+1,i)}if("function"==typeof e){var R=function(t){if(t.name)return t.name;var e=y.call(g.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}(e),$=B(e,E);return"[Function"+(R?": "+R:" (anonymous)")+"]"+($.length>0?" { "+$.join(", ")+" }":"")}if(M(e)){var q=_?String(e).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):w.call(e);return"object"!=typeof e||_?q:L(q)}if((b=e)&&"object"==typeof b&&("undefined"!=typeof HTMLElement&&b instanceof HTMLElement||"string"==typeof b.nodeName&&"function"==typeof b.getAttribute)){for(var V="<"+String(e.nodeName).toLowerCase(),Z=e.attributes||[],H=0;H<Z.length;H++)V+=" "+Z[H].name+"="+I(C(Z[H].value),"double",s);return V+=">",e.childNodes&&e.childNodes.length&&(V+="..."),V+"</"+String(e.nodeName).toLowerCase()+">"}if(A(e)){if(0===e.length)return"[]";var z=B(e,E);return S&&!function(t){for(var e=0;e<t.length;e++)if(N(t[e],"\n")>=0)return!1;return!0}(z)?"["+F(z,S)+"]":"[ "+z.join(", ")+" ]"}if(function(t){return!("[object Error]"!==P(t)||T&&"object"==typeof t&&T in t)}(e)){var G=B(e,E);return 0===G.length?"["+String(e)+"]":"{ ["+String(e)+"] "+G.join(", ")+" }"}if("object"==typeof e&&u){if(x&&"function"==typeof e[x])return e[x]();if("symbol"!==u&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!o||!t||"object"!=typeof t)return!1;try{o.call(t);try{c.call(t)}catch(V){return!0}return t instanceof Map}catch(e){}return!1}(e)){var W=[];return a.call(e,function(t,n){W.push(E(n,e,!0)+" => "+E(t,e))}),U("Map",o.call(e),W,S)}if(function(t){if(!c||!t||"object"!=typeof t)return!1;try{c.call(t);try{o.call(t)}catch(e){return!0}return t instanceof Set}catch(n){}return!1}(e)){var K=[];return l.call(e,function(t){K.push(E(t,e))}),U("Set",c.call(e),K,S)}if(function(t){if(!h||!t||"object"!=typeof t)return!1;try{h.call(t,h);try{f.call(t,f)}catch(V){return!0}return t instanceof WeakMap}catch(e){}return!1}(e))return j("WeakMap");if(function(t){if(!f||!t||"object"!=typeof t)return!1;try{f.call(t,f);try{h.call(t,h)}catch(V){return!0}return t instanceof WeakSet}catch(e){}return!1}(e))return j("WeakSet");if(function(t){if(!d||!t||"object"!=typeof t)return!1;try{return d.call(t),!0}catch(e){}return!1}(e))return j("WeakRef");if(function(t){return!("[object Number]"!==P(t)||T&&"object"==typeof t&&T in t)}(e))return L(E(Number(e)));if(function(t){if(!t||"object"!=typeof t||!m)return!1;try{return m.call(t),!0}catch(e){}return!1}(e))return L(E(m.call(e)));if(function(t){return!("[object Boolean]"!==P(t)||T&&"object"==typeof t&&T in t)}(e))return L(p.call(e));if(function(t){return!("[object String]"!==P(t)||T&&"object"==typeof t&&T in t)}(e))return L(E(String(e)));if(!function(t){return!("[object Date]"!==P(t)||T&&"object"==typeof t&&T in t)}(e)&&!function(t){return!("[object RegExp]"!==P(t)||T&&"object"==typeof t&&T in t)}(e)){var J=B(e,E),Y=k?k(e)===Object.prototype:e instanceof Object||e.constructor===Object,X=e instanceof Object?"":"null prototype",Q=!Y&&T&&Object(e)===e&&T in e?P(e).slice(8,-1):X?"Object":"",tt=(Y||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(Q||X?"["+[].concat(Q||[],X||[]).join(": ")+"] ":"");return 0===J.length?tt+"{}":S?tt+"{"+F(J,S)+"}":tt+"{ "+J.join(", ")+" }"}return String(e)};var R=Object.prototype.hasOwnProperty||function(t){return t in this};function O(t,e){return R.call(t,e)}function P(t){return v.call(t)}function N(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function D(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return D(t.slice(0,e.maxStringLength),e)+r}return I(t.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,$),"single",e)}function $(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+e.toString(16).toUpperCase()}function L(t){return"Object("+t+")"}function j(t){return t+" { ? }"}function U(t,e,n,r){return t+" ("+e+") {"+(r?F(n,r):n.join(", "))+"}"}function F(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+t.join(","+n)+"\n"+e.prev}function B(t,e){var n=A(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=O(t,i)?e(t[i],t):""}var o,a="function"==typeof b?b(t):[];if(_){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var u in t)O(t,u)&&(n&&String(Number(u))===u&&u<t.length||_&&o["$"+u]instanceof Symbol||(/[^\w$]/.test(u)?r.push(e(u,t)+": "+e(t[u],t)):r.push(u+": "+e(t[u],t))));if("function"==typeof b)for(var c=0;c<a.length;c++)S.call(t,a[c])&&r.push("["+e(a[c])+"]: "+e(t[a[c]],t));return r}},6272:function(t,e,n){"use strict";var r=n(75751);e.certificate=n(21414);var i=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=i;var o=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=o;var a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});e.PublicKey=a;var s=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});e.PrivateKey=u;var c=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=c;var l=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=l,e.DSAparam=r.define("DSAparam",function(){this.int()});var h=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=h;var f=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},21414:function(t,e,n){"use strict";var r=n(75751),i=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),u=r.define("RelativeDistinguishedName",function(){this.setof(o)}),c=r.define("RDNSequence",function(){this.seqof(u)}),l=r.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),h=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),f=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),d=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(l),this.key("validity").use(h),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())}),p=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});t.exports=p},59578:function(t,e,n){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=n(41111),s=n(34077),u=n(30095).Buffer;t.exports=function(t,e){var n,c=t.toString(),l=c.match(r);if(l){var h="aes"+l[1],f=u.from(l[2],"hex"),d=u.from(l[3].replace(/[\r\n]/g,""),"base64"),p=a(e,f.slice(0,8),parseInt(l[1],10)).key,v=[],g=s.createDecipheriv(h,p,f);v.push(g.update(d)),v.push(g.final()),n=u.concat(v)}else{var y=c.match(o);n=u.from(y[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(i)[1],data:n}}},4840:function(t,e,n){var r=n(6272),i=n(873),o=n(59578),a=n(34077),s=n(41085),u=n(30095).Buffer;function c(t){var e;"object"!=typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=u.from(t));var n,c,l=o(t,e),h=l.tag,f=l.data;switch(h){case"CERTIFICATE":c=r.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=r.PublicKey.decode(f,"der")),n=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=r.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var n=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=i[t.algorithm.decrypt.cipher.algo.join(".")],c=t.algorithm.decrypt.cipher.iv,l=t.subjectPrivateKey,h=parseInt(o.split("-")[1],10)/8,f=s.pbkdf2Sync(e,n,r,h,"sha1"),d=a.createDecipheriv(o,f,c),p=[];return p.push(d.update(l)),p.push(d.final()),u.concat(p)}(f=r.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(n=(c=r.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:r.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=r.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=r.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+h)}}t.exports=c,c.signature=r.signature},41085:function(t,e,n){e.pbkdf2=n(22043),e.pbkdf2Sync=n(72537)},22043:function(t,e,n){var r,i,o=n(30095).Buffer,a=n(48812),s=n(8534),u=n(72537),c=n(18670),l=global.crypto&&global.crypto.subtle,h={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function d(){return i||(i=global.process&&global.process.nextTick?global.process.nextTick:global.queueMicrotask?global.queueMicrotask:global.setImmediate?global.setImmediate:global.setTimeout)}function p(t,e,n,r,i){return l.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return l.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:i}},t,r<<3)}).then(function(t){return o.from(t)})}t.exports=function(t,e,n,i,v,g){"function"==typeof v&&(g=v,v=void 0);var y=h[(v=v||"sha1").toLowerCase()];if(y&&"function"==typeof global.Promise){if(a(n,i),t=c(t,s,"Password"),e=c(e,s,"Salt"),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then(function(t){d()(function(){e(null,t)})},function(t){d()(function(){e(t)})})}(function(t){if(global.process&&!global.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var e=p(r=r||o.alloc(8),r,10,128,t).then(function(){return!0}).catch(function(){return!1});return f[t]=e,e}(y).then(function(r){return r?p(t,e,n,i,y):u(t,e,n,i,v)}),g)}else d()(function(){var r;try{r=u(t,e,n,i,v)}catch(o){return g(o)}g(null,r)})}},8534:function(t){var e;e=global.process&&global.process.browser?"utf-8":global.process&&global.process.version?parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=e},48812:function(t){var e=Math.pow(2,30)-1;t.exports=function(t,n){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof n)throw new TypeError("Key length not a number");if(n<0||n>e||n!=n)throw new TypeError("Bad key length")}},72537:function(t,e,n){var r=n(25510),i=n(90665),o=n(45837),a=n(30095).Buffer,s=n(48812),u=n(8534),c=n(18670),l=a.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,n){var s=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new i).update(t).digest()}:"md5"===t?r:function(e){return o(t).update(e).digest()}}(t),u="sha512"===t||"sha384"===t?128:64;e.length>u?e=s(e):e.length<u&&(e=a.concat([e,l],u));for(var c=a.allocUnsafe(u+h[t]),f=a.allocUnsafe(u+h[t]),d=0;d<u;d++)c[d]=54^e[d],f[d]=92^e[d];var p=a.allocUnsafe(u+n+4);c.copy(p,0,0,u),this.ipad1=p,this.ipad2=c,this.opad=f,this.alg=t,this.blocksize=u,this.hash=s,this.size=h[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,n,r,i){s(n,r);var o=new f(i=i||"sha1",t=c(t,u,"Password"),(e=c(e,u,"Salt")).length),l=a.allocUnsafe(r),d=a.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var p=0,v=h[i],g=Math.ceil(r/v),y=1;y<=g;y++){d.writeUInt32BE(y,e.length);for(var m=o.run(d,o.ipad1),b=m,w=1;w<n;w++){b=o.run(b,o.ipad2);for(var _=0;_<v;_++)m[_]^=b[_]}m.copy(l,p),p+=v}return l}},18670:function(t,e,n){var r=n(30095).Buffer;t.exports=function(t,e,n){if(r.isBuffer(t))return t;if("string"==typeof t)return r.from(t,e);if(ArrayBuffer.isView(t))return r.from(t.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},76527:function(t,e,n){e.publicEncrypt=n(45064),e.privateDecrypt=n(43947),e.privateEncrypt=function(t,n){return e.publicEncrypt(t,n,!0)},e.publicDecrypt=function(t,n){return e.privateDecrypt(t,n,!0)}},21519:function(t,e,n){var r=n(40710),i=n(30095).Buffer;function o(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var n,a=i.alloc(0),s=0;a.length<e;)n=o(s++),a=i.concat([a,r("sha1").update(t).update(n).digest()]);return a.slice(0,e)}},43947:function(t,e,n){var r=n(4840),i=n(21519),o=n(32234),a=n(80127),s=n(29969),u=n(40710),c=n(93579),l=n(30095).Buffer;t.exports=function(t,e,n){var h;h=t.padding?t.padding:n?1:4;var f,d=r(t),p=d.modulus.byteLength();if(e.length>p||new a(e).cmp(d.modulus)>=0)throw new Error("decryption error");f=n?c(new a(e),d):s(e,d);var v=l.alloc(p-f.length);if(f=l.concat([v,f],p),4===h)return function(t,e){var n=t.modulus.byteLength(),r=u("sha1").update(l.alloc(0)).digest(),a=r.length;if(0!==e[0])throw new Error("decryption error");var s=e.slice(1,a+1),c=e.slice(a+1),h=o(s,i(c,a)),f=o(c,i(h,n-a-1));if(function(t,e){t=l.from(t),e=l.from(e);var n=0,r=t.length;t.length!==e.length&&(n++,r=Math.min(t.length,e.length));for(var i=-1;++i<r;)n+=t[i]^e[i];return n}(r,f.slice(0,a)))throw new Error("decryption error");for(var d=a;0===f[d];)d++;if(1!==f[d++])throw new Error("decryption error");return f.slice(d)}(d,f);if(1===h)return function(t,e,n){for(var r=e.slice(0,2),i=2,o=0;0!==e[i++];)if(i>=e.length){o++;break}var a=e.slice(2,i-1);if(("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&o++,a.length<8&&o++,o)throw new Error("decryption error");return e.slice(i)}(0,f,n);if(3===h)return f;throw new Error("unknown padding")}},45064:function(t,e,n){var r=n(4840),i=n(34871),o=n(40710),a=n(21519),s=n(32234),u=n(80127),c=n(93579),l=n(29969),h=n(30095).Buffer;t.exports=function(t,e,n){var f;f=t.padding?t.padding:n?1:4;var d,p=r(t);if(4===f)d=function(t,e){var n=t.modulus.byteLength(),r=e.length,c=o("sha1").update(h.alloc(0)).digest(),l=c.length,f=2*l;if(r>n-f-2)throw new Error("message too long");var d=h.alloc(n-r-f-2),p=n-l-1,v=i(l),g=s(h.concat([c,d,h.alloc(1,1),e],p),a(v,p)),y=s(v,a(g,l));return new u(h.concat([h.alloc(1),y,g],n))}(p,e);else if(1===f)d=function(t,e,n){var r,o=e.length,a=t.modulus.byteLength();if(o>a-11)throw new Error("message too long");return r=n?h.alloc(a-o-3,255):function(t){for(var e,n=h.allocUnsafe(t),r=0,o=i(2*t),a=0;r<t;)a===o.length&&(o=i(2*t),a=0),(e=o[a++])&&(n[r++]=e);return n}(a-o-3),new u(h.concat([h.from([0,n?1:2]),r,h.alloc(1),e],a))}(p,e,n);else{if(3!==f)throw new Error("unknown padding");if((d=new u(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return n?l(d,p):c(d,p)}},93579:function(t,e,n){var r=n(80127),i=n(30095).Buffer;t.exports=function(t,e){return i.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},32234:function(t){t.exports=function(t,e){for(var n=t.length,r=-1;++r<n;)t[r]^=e[r];return t}},34871:function(t,e,n){"use strict";var r=65536,i=n(30095).Buffer,o=global.crypto||global.msCrypto;t.exports=o&&o.getRandomValues?function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var n=i.allocUnsafe(t);if(t>0)if(t>r)for(var a=0;a<t;a+=r)o.getRandomValues(n.slice(a,a+r));else o.getRandomValues(n);return"function"==typeof e?process.nextTick(function(){e(null,n)}):n}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},13167:function(t,e,n){"use strict";function r(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var i=n(30095),o=n(34871),a=i.Buffer,s=i.kMaxLength,u=global.crypto||global.msCrypto,c=Math.pow(2,32)-1;function l(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>s||t>e)throw new RangeError("offset out of range")}function h(t,e,n){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>s)throw new RangeError("buffer too small")}function f(t,e,n,r){if(process.browser){var i=new Uint8Array(t.buffer,e,n);return u.getRandomValues(i),r?void process.nextTick(function(){r(null,t)}):t}if(!r)return o(n).copy(t,e),t;o(n,function(n,i){if(n)return r(n);i.copy(t,e),r(null,t)})}u&&u.getRandomValues||!process.browser?(e.randomFill=function(t,e,n,r){if(!(a.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)r=e,e=0,n=t.length;else if("function"==typeof n)r=n,n=t.length-e;else if("function"!=typeof r)throw new TypeError('"cb" argument must be a function');return l(e,t.length),h(n,e,t.length),f(t,e,n,r)},e.randomFillSync=function(t,e,n){if(void 0===e&&(e=0),!(a.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(e,t.length),void 0===n&&(n=t.length-e),h(n,e,t.length),f(t,e,n)}):(e.randomFill=r,e.randomFillSync=r)},39747:function(){var t;!function(t){!function(e){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!o&&!a,u={create:o?function(){return N(Object.create(null))}:a?function(){return N({__proto__:null})}:function(){return N({})},has:s?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:s?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function a(t,e){return[t,e]}}():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,d=new(l||"function"!=typeof WeakMap?function(){var t=u.create(),n=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+a()}while(u.has(t,e));return t[e]=!0,e}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:u.create()})}return t[n]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function p(t,e,n){var r=d.get(t);if(k(r)){if(!n)return;r=new h,d.set(t,r)}var i=r.get(e);if(k(i)){if(!n)return;i=new h,r.set(e,i)}return i}function v(t,e,n){if(g(t,e,n))return!0;var r=P(e);return!E(r)&&v(t,r,n)}function g(t,e,n){var r=p(e,n,!1);return!k(r)&&!!r.has(t)}function y(t,e,n){if(g(t,e,n))return m(t,e,n);var r=P(e);return E(r)?void 0:y(t,r,n)}function m(t,e,n){var r=p(e,n,!1);if(!k(r))return r.get(t)}function b(t,e,n,r){p(n,r,!0).set(t,e)}function w(t,e){var n=_(t,e),r=P(t);if(null===r)return n;var i=w(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new f,a=[],s=0,u=n;s<u.length;s++)o.has(h=u[s])||(o.add(h),a.push(h));for(var c=0,l=i;c<l.length;c++){var h;o.has(h=l[c])||(o.add(h),a.push(h))}return a}function _(t,e){var n=[],r=p(t,e,!1);if(k(r))return n;for(var o=function(t){var e=M(t,i);if(!C(e))throw new TypeError;var n=e.call(t);if(!x(n))throw new TypeError;return n}(r.keys()),a=0;;){var s=R(o);if(!s)return n.length=a,n;var u=s.value;try{n[a]=u}catch(c){try{O(o)}finally{throw c}}a++}}function S(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function k(t){return void 0===t}function E(t){return null===t}function x(t){return"object"==typeof t?null!==t:"function"==typeof t}function T(t){var e=function(t,e){switch(S(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=M(t,r);if(void 0!==i){var o=i.call(t,n);if(x(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(C(n)&&!x(i=n.call(t)))return i;if(C(r=t.valueOf)&&!x(i=r.call(t)))return i}else{var r;if(C(r=t.valueOf)&&!x(i=r.call(t)))return i;var i,o=t.toString;if(C(o)&&!x(i=o.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function C(t){return"function"==typeof t}function A(t){return"function"==typeof t}function M(t,e){var n=t[e];if(null!=n){if(!C(n))throw new TypeError;return n}}function R(t){var e=t.next();return!e.done&&e}function O(t){var e=t.return;e&&e.call(t)}function P(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function N(t){return t.__=void 0,delete t.__,t}t("decorate",function(t,e,n,r){if(k(n)){if(!I(t))throw new TypeError;if(!A(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!k(r)&&!E(r)){if(!A(r))throw new TypeError;e=r}}return e}(t,e)}if(!I(t))throw new TypeError;if(!x(e))throw new TypeError;if(!x(r)&&!k(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!k(o)&&!E(o)){if(!x(o))throw new TypeError;r=o}}return r}(t,e,n=T(n),r)}),t("metadata",function(t,e){return function(n,r){if(!x(n))throw new TypeError;if(!k(r)&&!function(t){switch(S(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}}),t("defineMetadata",function(t,e,n,r){if(!x(n))throw new TypeError;return k(r)||(r=T(r)),b(t,e,n,r)}),t("hasMetadata",function(t,e,n){if(!x(e))throw new TypeError;return k(n)||(n=T(n)),v(t,e,n)}),t("hasOwnMetadata",function(t,e,n){if(!x(e))throw new TypeError;return k(n)||(n=T(n)),g(t,e,n)}),t("getMetadata",function(t,e,n){if(!x(e))throw new TypeError;return k(n)||(n=T(n)),y(t,e,n)}),t("getOwnMetadata",function(t,e,n){if(!x(e))throw new TypeError;return k(n)||(n=T(n)),m(t,e,n)}),t("getMetadataKeys",function(t,e){if(!x(t))throw new TypeError;return k(e)||(e=T(e)),w(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!x(t))throw new TypeError;return k(e)||(e=T(e)),_(t,e)}),t("deleteMetadata",function(t,e,n){if(!x(e))throw new TypeError;k(n)||(n=T(n));var r=p(e,n,!1);if(k(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=d.get(e);return i.delete(n),i.size>0||d.delete(e),!0})}(r)}()}(t||(t={}))},98270:function(t){var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(R){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=Object.create((e&&e.prototype instanceof g?e:g).prototype),o=new C(r||[]);return i._invoke=function(t,e,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,o),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(R){return{type:"throw",arg:R}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function g(){}function y(){}function m(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(A([])));_&&_!==n&&r.call(_,o)&&(b=_);var S=m.prototype=g.prototype=Object.create(b);function k(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(h).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e(function(e,i){n(t,r,e,i)})}return i=i?i.then(o,o):o()}}function x(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:e,done:!0}}return y.prototype=S.constructor=m,m.constructor=y,y.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},k(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new E(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},k(S),u(S,s,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(n){Function("r","regeneratorRuntime = r")(e)}},90665:function(t,e,n){"use strict";var r=n(42108).Buffer,i=n(72783),o=n(60117),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function v(t,e,n,r,i,o,a,s){return p(t+(e^n^r)+o+a|0,s)+i|0}function g(t,e,n,r,i,o,a,s){return p(t+(e&n|~e&r)+o+a|0,s)+i|0}function y(t,e,n,r,i,o,a,s){return p(t+((e|~n)^r)+o+a|0,s)+i|0}function m(t,e,n,r,i,o,a,s){return p(t+(e&r|n&~r)+o+a|0,s)+i|0}function b(t,e,n,r,i,o,a,s){return p(t+(e^(n|~r))+o+a|0,s)+i|0}i(d,o),d.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var n=0|this._a,r=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,w=0|this._a,_=0|this._b,S=0|this._c,k=0|this._d,E=0|this._e,x=0;x<80;x+=1){var T,I;x<16?(T=v(n,r,i,o,d,t[s[x]],h[0],c[x]),I=b(w,_,S,k,E,t[u[x]],f[0],l[x])):x<32?(T=g(n,r,i,o,d,t[s[x]],h[1],c[x]),I=m(w,_,S,k,E,t[u[x]],f[1],l[x])):x<48?(T=y(n,r,i,o,d,t[s[x]],h[2],c[x]),I=y(w,_,S,k,E,t[u[x]],f[2],l[x])):x<64?(T=m(n,r,i,o,d,t[s[x]],h[3],c[x]),I=g(w,_,S,k,E,t[u[x]],f[3],l[x])):(T=b(n,r,i,o,d,t[s[x]],h[4],c[x]),I=v(w,_,S,k,E,t[u[x]],f[4],l[x])),n=d,d=o,o=p(i,10),i=r,r=T,w=E,E=k,k=p(S,10),S=_,_=I}var C=this._b+i+k|0;this._b=this._c+o+E|0,this._c=this._d+d+w|0,this._d=this._e+n+_|0,this._e=this._a+r+S|0,this._a=C},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=d},7107:function(t,e,n){"use strict";n.r(e),n.d(e,{ArgumentOutOfRangeError:function(){return N.W},AsyncSubject:function(){return b},BehaviorSubject:function(){return y.X},ConnectableObservable:function(){return i.c},EMPTY:function(){return tt.E},EmptyError:function(){return D.K},GroupedObservable:function(){return p},NEVER:function(){return lt},Notification:function(){return A.P},NotificationKind:function(){return A.W},ObjectUnsubscribedError:function(){return $.N},Observable:function(){return r.y},ReplaySubject:function(){return m.t},Scheduler:function(){return C.b},Subject:function(){return d.xQ},Subscriber:function(){return h.L},Subscription:function(){return f.w},TimeoutError:function(){return j},UnsubscriptionError:function(){return L.B},VirtualAction:function(){return I},VirtualTimeScheduler:function(){return T},animationFrame:function(){return k.r},animationFrameScheduler:function(){return k.Z},asap:function(){return w.e},asapScheduler:function(){return w.E},async:function(){return _.P},asyncScheduler:function(){return _.z},bindCallback:function(){return Z},bindNodeCallback:function(){return G},combineLatest:function(){return Y.aj},concat:function(){return X.z},config:function(){return $t.v},defer:function(){return Q.P},empty:function(){return tt.c},forkJoin:function(){return et.D},from:function(){return nt.D},fromEvent:function(){return rt.R},fromEventPattern:function(){return it.R},generate:function(){return ot},identity:function(){return O.y},iif:function(){return st.s},interval:function(){return ut.F},isObservable:function(){return P.b},merge:function(){return ct.T},never:function(){return ht},noop:function(){return R.Z},observable:function(){return g.L},of:function(){return ft.of},onErrorResumeNext:function(){return dt},pairs:function(){return pt},partition:function(){return bt},pipe:function(){return M.z},queue:function(){return S.c},queueScheduler:function(){return S.N},race:function(){return wt.S3},range:function(){return _t},scheduled:function(){return Dt.x},throwError:function(){return kt._},timer:function(){return Et.H},using:function(){return xt},zip:function(){return At}});var r=n(63438),i=n(20655),o=n(85391),a=n(75563),s=n(74408),u=n(13118),c=n(65951),l=n(3280),h=n(22658),f=n(29737),d=n(96729),p=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r,i){var o;return(0,c.Z)(this,n),(o=e.call(this)).key=t,o.groupSubject=r,o.refCountSubscription=i,o}return(0,l.Z)(n,[{key:"_subscribe",value:function(t){var e=new f.w,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new v(n)),e.add(r.subscribe(t)),e}}]),n}(r.y),v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,c.Z)(this,n),(r=e.call(this)).parent=t,t.count++,r}return(0,l.Z)(n,[{key:"unsubscribe",value:function(){var t=this.parent;t.closed||this.closed||((0,o.Z)((0,a.Z)(n.prototype),"unsubscribe",this).call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}]),n}(f.w),g=n(5588),y=n(9225),m=n(26544),b=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){var t;return(0,c.Z)(this,n),(t=e.apply(this,arguments)).value=null,t.hasNext=!1,t.hasCompleted=!1,t}return(0,l.Z)(n,[{key:"_subscribe",value:function(t){return this.hasError?(t.error(this.thrownError),f.w.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),f.w.EMPTY):(0,o.Z)((0,a.Z)(n.prototype),"_subscribe",this).call(this,t)}},{key:"next",value:function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}},{key:"error",value:function(t){this.hasCompleted||(0,o.Z)((0,a.Z)(n.prototype),"error",this).call(this,t)}},{key:"complete",value:function(){this.hasCompleted=!0,this.hasNext&&(0,o.Z)((0,a.Z)(n.prototype),"next",this).call(this,this.value),(0,o.Z)((0,a.Z)(n.prototype),"complete",this).call(this)}}]),n}(d.xQ),w=n(54077),_=n(92011),S=n(76598),k=n(37063),E=n(91249),x=n(83498),T=function(){var t=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;return(0,c.Z)(this,n),(t=e.call(this,r,function(){return t.frame})).maxFrames=i,t.frame=0,t.index=-1,t}return(0,l.Z)(n,[{key:"flush",value:function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}}}]),n}(x.v);return t.frameTimeFactor=10,t}(),I=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.index+=1;return(0,c.Z)(this,n),(i=e.call(this,t,r)).scheduler=t,i.work=r,i.index=o,i.active=!0,i.index=t.index=o,i}return(0,l.Z)(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.id)return(0,o.Z)((0,a.Z)(n.prototype),"schedule",this).call(this,t,e);this.active=!1;var r=new n(this.scheduler,this.work);return this.add(r),r.schedule(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(n.sortActions),!0}},{key:"recycleAsyncId",value:function(t,e){}},{key:"_execute",value:function(t,e){if(!0===this.active)return(0,o.Z)((0,a.Z)(n.prototype),"_execute",this).call(this,t,e)}}],[{key:"sortActions",value:function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1}}]),n}(E.o),C=n(45477),A=n(79157),M=n(11325),R=n(99135),O=n(72311),P=n(84608),N=n(45461),D=n(22344),$=n(99214),L=n(33943),j=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}(),U=n(46534),F=n(59272),B=n(77649),q=n(79315),V=n(35582);function Z(t,e,n){if(e){if(!(0,V.K)(e))return function(){return Z(t,n).apply(void 0,arguments).pipe((0,F.U)(function(t){return(0,q.k)(t)?e.apply(void 0,(0,U.Z)(t)):e(t)}))};n=e}return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var a,s=this,u={context:s,subject:a,callbackFunc:t,scheduler:n};return new r.y(function(e){if(n)return n.schedule(H,0,{args:i,subscriber:e,params:u});if(!a){a=new b;try{t.apply(s,[].concat(i,[function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.next(e.length<=1?e[0]:e),a.complete()}]))}catch(r){(0,B._)(a)?a.error(r):console.warn(r)}}return a.subscribe(e)})}}function H(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,a=i.context,s=i.scheduler,u=i.subject;if(!u){u=i.subject=new b;try{o.apply(a,[].concat((0,U.Z)(n),[function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.add(s.schedule(z,0,{value:n.length<=1?n[0]:n,subject:u}))}]))}catch(c){u.error(c)}}this.add(u.subscribe(r))}function z(t){var e=t.subject;e.next(t.value),e.complete()}function G(t,e,n){if(e){if(!(0,V.K)(e))return function(){return G(t,n).apply(void 0,arguments).pipe((0,F.U)(function(t){return(0,q.k)(t)?e.apply(void 0,(0,U.Z)(t)):e(t)}))};n=e}return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var a={subject:void 0,args:i,callbackFunc:t,scheduler:n,context:this};return new r.y(function(e){var r=a.context,o=a.subject;if(n)return n.schedule(W,0,{params:a,subscriber:e,context:r});if(!o){o=a.subject=new b;try{t.apply(r,[].concat(i,[function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.shift();r?o.error(r):(o.next(e.length<=1?e[0]:e),o.complete())}]))}catch(s){(0,B._)(o)?o.error(s):console.warn(s)}}return o.subscribe(e)})}}function W(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,a=n.args,s=n.scheduler,u=n.subject;if(!u){u=n.subject=new b;try{o.apply(i,[].concat((0,U.Z)(a),[function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.shift();e.add(i?s.schedule(J,0,{err:i,subject:u}):s.schedule(K,0,{value:n.length<=1?n[0]:n,subject:u}))}]))}catch(c){this.add(s.schedule(J,0,{err:c,subject:u}))}}this.add(u.subscribe(r))}function K(t){var e=t.subject;e.next(t.value),e.complete()}function J(t){t.subject.error(t.err)}var Y=n(1324),X=n(54653),Q=n(4567),tt=n(31159),et=n(91212),nt=n(56560),rt=n(99750),it=n(17512);function ot(t,e,n,i,o){var a,s;return 1==arguments.length?(s=t.initialState,e=t.condition,n=t.iterate,a=t.resultSelector||O.y,o=t.scheduler):void 0===i||(0,V.K)(i)?(s=t,a=O.y,o=i):(s=t,a=i),new r.y(function(t){var r=s;if(o)return o.schedule(at,0,{subscriber:t,iterate:n,condition:e,resultSelector:a,state:r});for(;;){if(e){var i=void 0;try{i=e(r)}catch(c){return void t.error(c)}if(!i){t.complete();break}}var u=void 0;try{u=a(r)}catch(c){return void t.error(c)}if(t.next(u),t.closed)break;try{r=n(r)}catch(c){return void t.error(c)}}})}function at(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(o){return void e.error(o)}else t.needIterate=!0;if(n){var r;try{r=n(t.state)}catch(o){return void e.error(o)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(o){return void e.error(o)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}var st=n(38060),ut=n(23810),ct=n(57814),lt=new r.y(R.Z);function ht(){return lt}var ft=n(53922);function dt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return tt.E;var i=e[0],o=e.slice(1);return 1===e.length&&(0,q.k)(i)?dt.apply(void 0,(0,U.Z)(i)):new r.y(function(t){var e=function(){return t.add(dt.apply(void 0,(0,U.Z)(o)).subscribe(t))};return(0,nt.D)(i).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}function pt(t,e){return new r.y(e?function(n){var r=Object.keys(t),i=new f.w;return i.add(e.schedule(vt,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function vt(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,o[a]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function gt(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}var yt=n(85461),mt=n(90631);function bt(t,e,n){return[(0,mt.h)(e,n)(new r.y((0,yt.s)(t))),(0,mt.h)(gt(e,n))(new r.y((0,yt.s)(t)))]}var wt=n(37469);function _t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return new r.y(function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(St,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}})}function St(t){var e=t.start,n=t.index,r=t.subscriber;n>=t.count?r.complete():(r.next(e),r.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}var kt=n(59845),Et=n(9749);function xt(t,e){return new r.y(function(n){var r,i;try{r=t()}catch(a){return void n.error(a)}try{i=e(r)}catch(a){return void n.error(a)}var o=(i?(0,nt.D)(i):tt.E).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}})}var Tt=n(11547),It=n(21219),Ct=n(63847);function At(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return"function"==typeof r&&e.pop(),(0,Tt.n)(e,void 0).lift(new Mt(r))}var Mt=function(){function t(e){(0,c.Z)(this,t),this.resultSelector=e}return(0,l.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Rt(t,this.resultSelector))}}]),t}(),Rt=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var i;return arguments.length>2&&void 0!==arguments[2]||Object.create(null),(0,c.Z)(this,n),(i=e.call(this,t)).resultSelector=r,i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:void 0,i}return(0,l.Z)(n,[{key:"_next",value:function(t){var e=this.iterators;(0,q.k)(t)?e.push(new Pt(t)):e.push("function"==typeof t[It.hZ]?new Ot(t[It.hZ]()):new Nt(this.destination,this,t))}},{key:"_complete",value:function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){var i=t[r];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var o=!1,a=[],s=0;s<e;s++){var u=t[s],c=u.next();if(u.hasCompleted()&&(o=!0),c.done)return void n.complete();a.push(c.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()}},{key:"_tryresultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(h.L),Ot=function(){function t(e){(0,c.Z)(this,t),this.iterator=e,this.nextResult=e.next()}return(0,l.Z)(t,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t}},{key:"hasCompleted",value:function(){var t=this.nextResult;return Boolean(t&&t.done)}}]),t}(),Pt=function(){function t(e){(0,c.Z)(this,t),this.array=e,this.index=0,this.length=0,this.length=e.length}return(0,l.Z)(t,[{key:It.hZ,value:function(){return this}},{key:"next",value:function(t){var e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),t}(),Nt=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r,i){var o;return(0,c.Z)(this,n),(o=e.call(this,t)).parent=r,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return(0,l.Z)(n,[{key:It.hZ,value:function(){return this}},{key:"next",value:function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(t){this.buffer.push(t),this.parent.checkIterators()}},{key:"subscribe",value:function(){return(0,Ct.ft)(this.observable,new Ct.IY(this))}}]),n}(Ct.Ds),Dt=n(46173),$t=n(59072)},9225:function(t,e,n){"use strict";n.d(e,{X:function(){return h}});var r=n(65951),i=n(3280),o=n(85391),a=n(75563),s=n(74408),u=n(13118),c=n(96729),l=n(99214),h=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this))._value=t,i}return(0,i.Z)(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(t){var e=(0,o.Z)((0,a.Z)(n.prototype),"_subscribe",this).call(this,t);return e&&!e.closed&&t.next(this._value),e}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new l.N;return this._value}},{key:"next",value:function(t){(0,o.Z)((0,a.Z)(n.prototype),"next",this).call(this,this._value=t)}}]),n}(c.xQ)},92461:function(t,e,n){"use strict";n.d(e,{d:function(){return s}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,i,o){var a;return(0,r.Z)(this,n),(a=e.call(this)).parent=t,a.outerValue=i,a.outerIndex=o,a.index=0,a}return(0,i.Z)(n,[{key:"_next",value:function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}},{key:"_error",value:function(t){this.parent.notifyError(t,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(n(22658).L)},79157:function(t,e,n){"use strict";n.d(e,{W:function(){return u},P:function(){return c}});var r=n(65951),i=n(3280),o=n(31159),a=n(53922),s=n(59845),u=function(t){return t.NEXT="N",t.ERROR="E",t.COMPLETE="C",t}({}),c=function(){var t=function(){function t(e,n,i){(0,r.Z)(this,t),this.kind=e,this.value=n,this.error=i,this.hasValue="N"===e}return(0,i.Z)(t,[{key:"observe",value:function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}},{key:"do",value:function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}},{key:"accept",value:function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,a.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,o.c)()}throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}},{key:"createError",value:function(e){return new t("E",void 0,e)}},{key:"createComplete",value:function(){return t.completeNotification}}]),t}();return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},63438:function(t,e,n){"use strict";n.d(e,{y:function(){return l}});var r=n(65951),i=n(3280),o=n(77649),a=n(46911),s=n(5588),u=n(11325),c=n(59072),l=function(){var t=function(){function t(e){(0,r.Z)(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return(0,i.Z)(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(t,e,n){var r=this.operator,i=(0,a.Y)(t,e,n);if(i.add(r?r.call(i,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.v.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(t){try{return this._subscribe(t)}catch(e){c.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),(0,o._)(t)?t.error(e):console.warn(e)}}},{key:"forEach",value:function(t,e){var n=this;return new(e=h(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(n){r(n),i&&i.unsubscribe()}},r,e)})}},{key:"_subscribe",value:function(t){var e=this.source;return e&&e.subscribe(t)}},{key:s.L,value:function(){return this}},{key:"pipe",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?this:(0,u.U)(e)(this)}},{key:"toPromise",value:function(t){var e=this;return new(t=h(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})}}]),t}();return t.create=function(e){return new t(e)},t}();function h(t){if(t||(t=c.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},28457:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(59072),i=n(6906),o={closed:!0,next:function(t){},error:function(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete:function(){}}},44827:function(t,e,n){"use strict";n.d(e,{L:function(){return s}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"notifyNext",value:function(t,e,n,r,i){this.destination.next(e)}},{key:"notifyError",value:function(t,e){this.destination.error(t)}},{key:"notifyComplete",value:function(t){this.destination.complete()}}]),n}(n(22658).L)},26544:function(t,e,n){"use strict";n.d(e,{t:function(){return v}});var r=n(65951),i=n(3280),o=n(85391),a=n(75563),s=n(74408),u=n(13118),c=n(96729),l=n(76598),h=n(29737),f=n(84766),d=n(99214),p=n(37831),v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,a=arguments.length>2?arguments[2]:void 0;return(0,r.Z)(this,n),(t=e.call(this)).scheduler=a,t._events=[],t._infiniteTimeWindow=!1,t._bufferSize=i<1?1:i,t._windowTime=o<1?1:o,o===Number.POSITIVE_INFINITY?(t._infiniteTimeWindow=!0,t.next=t.nextInfiniteTimeWindow):t.next=t.nextTimeWindow,t}return(0,i.Z)(n,[{key:"nextInfiniteTimeWindow",value:function(t){if(!this.isStopped){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}(0,o.Z)((0,a.Z)(n.prototype),"next",this).call(this,t)}},{key:"nextTimeWindow",value:function(t){this.isStopped||(this._events.push(new g(this._getNow(),t)),this._trimBufferThenGetEvents()),(0,o.Z)((0,a.Z)(n.prototype),"next",this).call(this,t)}},{key:"_subscribe",value:function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new d.N;if(this.isStopped||this.hasError?e=h.w.EMPTY:(this.observers.push(t),e=new p.W(this,t)),i&&t.add(t=new f.ht(t,i)),n)for(var a=0;a<o&&!t.closed;a++)t.next(r[a]);else for(var s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e}},{key:"_getNow",value:function(){return(this.scheduler||l.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}]),n}(c.xQ),g=function t(e,n){(0,r.Z)(this,t),this.time=e,this.value=n}},45477:function(t,e,n){"use strict";n.d(e,{b:function(){return o}});var r=n(65951),i=n(3280),o=function(){var t=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.now;(0,r.Z)(this,t),this.SchedulerAction=e,this.now=n}return(0,i.Z)(t,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,t).schedule(n,e)}}]),t}();return t.now=function(){return Date.now()},t}()},96729:function(t,e,n){"use strict";n.d(e,{Yc:function(){return v},xQ:function(){return g}});var r=n(3280),i=n(85391),o=n(75563),a=n(65951),s=n(74408),u=n(13118),c=n(63438),l=n(22658),h=n(29737),f=n(99214),d=n(37831),p=n(66454),v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t)).destination=t,r}return n}(l.L),g=function(){var t=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(){var t;return(0,a.Z)(this,n),(t=e.call(this)).observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,r.Z)(n,[{key:p.b,value:function(){return new v(this)}},{key:"lift",value:function(t){var e=new y(this,this);return e.operator=t,e}},{key:"next",value:function(t){if(this.closed)throw new f.N;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)}},{key:"error",value:function(t){if(this.closed)throw new f.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new f.N;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(t){if(this.closed)throw new f.N;return(0,i.Z)((0,o.Z)(n.prototype),"_trySubscribe",this).call(this,t)}},{key:"_subscribe",value:function(t){if(this.closed)throw new f.N;return this.hasError?(t.error(this.thrownError),h.w.EMPTY):this.isStopped?(t.complete(),h.w.EMPTY):(this.observers.push(t),new d.W(this,t))}},{key:"asObservable",value:function(){var t=new c.y;return t.source=this,t}}]),n}(c.y);return t.create=function(t,e){return new y(t,e)},t}(),y=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var i;return(0,a.Z)(this,n),(i=e.call(this)).destination=t,i.source=r,i}return(0,r.Z)(n,[{key:"next",value:function(t){var e=this.destination;e&&e.next&&e.next(t)}},{key:"error",value:function(t){var e=this.destination;e&&e.error&&this.destination.error(t)}},{key:"complete",value:function(){var t=this.destination;t&&t.complete&&this.destination.complete()}},{key:"_subscribe",value:function(t){return this.source?this.source.subscribe(t):h.w.EMPTY}}]),n}(g)},37831:function(t,e,n){"use strict";n.d(e,{W:function(){return s}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,i){var o;return(0,r.Z)(this,n),(o=e.call(this)).subject=t,o.subscriber=i,o.closed=!1,o}return(0,i.Z)(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}}}]),n}(n(29737).w)},22658:function(t,e,n){"use strict";n.d(e,{L:function(){return g}});var r=n(65951),i=n(3280),o=n(3010),a=n(85391),s=n(75563),u=n(74408),c=n(13118),l=n(8336),h=n(28457),f=n(29737),d=n(66454),p=n(59072),v=n(6906),g=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t,i,a){var s;switch((0,r.Z)(this,n),(s=e.call(this)).syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=h.c;break;case 1:if(!t){s.destination=h.c;break}if("object"==typeof t){t instanceof n?(s.syncErrorThrowable=t.syncErrorThrowable,s.destination=t,t.add((0,o.Z)(s))):(s.syncErrorThrowable=!0,s.destination=new y((0,o.Z)(s),t));break}default:s.syncErrorThrowable=!0,s.destination=new y((0,o.Z)(s),t,i,a)}return s}return(0,i.Z)(n,[{key:d.b,value:function(){return this}},{key:"next",value:function(t){this.isStopped||this._next(t)}},{key:"error",value:function(t){this.isStopped||(this.isStopped=!0,this._error(t))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,(0,a.Z)((0,s.Z)(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(t){this.destination.next(t)}},{key:"_error",value:function(t){this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}],[{key:"create",value:function(t,e,r){var i=new n(t,e,r);return i.syncErrorThrowable=!1,i}}]),n}(f.w),y=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t,i,a,s){var u,c;(0,r.Z)(this,n),(u=e.call(this))._parentSubscriber=t;var f=(0,o.Z)(u);return(0,l.m)(i)?c=i:i&&(c=i.next,a=i.error,s=i.complete,i!==h.c&&(f=Object.create(i),(0,l.m)(f.unsubscribe)&&u.add(f.unsubscribe.bind(f)),f.unsubscribe=u.unsubscribe.bind((0,o.Z)(u)))),u._context=f,u._next=c,u._error=a,u._complete=s,u}return(0,i.Z)(n,[{key:"next",value:function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;p.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}},{key:"error",value:function(t){if(!this.isStopped){var e=this._parentSubscriber,n=p.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,v.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,v.z)(t)}}}},{key:"complete",value:function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};p.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),p.v.useDeprecatedSynchronousErrorHandling)throw n;(0,v.z)(n)}}},{key:"__tryOrSetError",value:function(t,e,n){if(!p.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return p.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,v.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}]),n}(g)},29737:function(t,e,n){"use strict";n.d(e,{w:function(){return c}});var r=n(65951),i=n(3280),o=n(79315),a=n(95944),s=n(8336),u=n(33943),c=function(){var t,e=function(){function t(e){(0,r.Z)(this,t),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return(0,i.Z)(t,[{key:"unsubscribe",value:function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,c=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if((0,s.m)(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(v){e=v instanceof u.B?l(v.errors):[v]}}if((0,o.k)(c))for(var f=-1,d=c.length;++f<d;){var p=c[f];if((0,a.K)(p))try{p.unsubscribe()}catch(v){e=e||[],v instanceof u.B?e=e.concat(l(v.errors)):e.push(v)}}if(e)throw new u.B(e)}}},{key:"add",value:function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}]),t}();return e.EMPTY=((t=new e).closed=!0,t),e}();function l(t){return t.reduce(function(t,e){return t.concat(e instanceof u.B?e.errors:e)},[])}},59072:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},63847:function(t,e,n){"use strict";n.d(e,{IY:function(){return l},Ds:function(){return h},ft:function(){return f}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=n(22658),u=n(63438),c=n(85461),l=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this)).parent=t,i}return(0,i.Z)(n,[{key:"_next",value:function(t){this.parent.notifyNext(t)}},{key:"_error",value:function(t){this.parent.notifyError(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(s.L),h=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyError",value:function(t){this.destination.error(t)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(s.L);function f(t,e){if(!e.closed){if(t instanceof u.y)return t.subscribe(e);var n;try{n=(0,c.s)(t)(e)}catch(r){e.error(r)}return n}}},20655:function(t,e,n){"use strict";n.d(e,{c:function(){return d},N:function(){return p}});var r=n(85391),i=n(75563),o=n(65951),a=n(3280),s=n(74408),u=n(13118),c=n(96729),l=n(63438),h=(n(22658),n(29737)),f=n(91061),d=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var i;return(0,o.Z)(this,n),(i=e.call(this)).source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return(0,a.Z)(n,[{key:"_subscribe",value:function(t){return this.getSubject().subscribe(t)}},{key:"getSubject",value:function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new h.w).add(this.source.subscribe(new v(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.w.EMPTY)),t}},{key:"refCount",value:function(){return(0,f.x)()(this)}}]),n}(l.y),p=function(){var t=d.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}}(),v=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).connectable=r,i}return(0,a.Z)(n,[{key:"_error",value:function(t){this._unsubscribe(),(0,r.Z)((0,i.Z)(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),(0,r.Z)((0,i.Z)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}]),n}(c.Yc)},1324:function(t,e,n){"use strict";n.d(e,{aj:function(){return d}});var r=n(74408),i=n(13118),o=n(65951),a=n(3280),s=n(35582),u=n(79315),c=n(44827),l=n(14109),h=n(11547),f={};function d(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=void 0,i=void 0;return(0,s.K)(e[e.length-1])&&(i=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&(0,u.k)(e[0])&&(e=e[0]),(0,h.n)(e,i).lift(new p(r))}var p=function(){function t(e){(0,o.Z)(this,t),this.resultSelector=e}return(0,a.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new v(t,this.resultSelector))}}]),t}(),v=function(t){(0,r.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return(0,a.Z)(n,[{key:"_next",value:function(t){this.values.push(f),this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++)this.add((0,l.D)(this,t[n],void 0,n))}}},{key:"notifyComplete",value:function(t){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(t,e,n){var r=this.values,i=this.toRespond?r[n]===f?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(c.L)},54653:function(t,e,n){"use strict";n.d(e,{z:function(){return o}});var r=n(53922),i=n(81250);function o(){return(0,i.u)()(r.of.apply(void 0,arguments))}},4567:function(t,e,n){"use strict";n.d(e,{P:function(){return a}});var r=n(63438),i=n(56560),o=n(31159);function a(t){return new r.y(function(e){var n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,i.D)(n):(0,o.c)()).subscribe(e)})}},31159:function(t,e,n){"use strict";n.d(e,{E:function(){return i},c:function(){return o}});var r=n(63438),i=new r.y(function(t){return t.complete()});function o(t){return t?function(t){return new r.y(function(e){return t.schedule(function(){return e.complete()})})}(t):i}},91212:function(t,e,n){"use strict";n.d(e,{D:function(){return c}});var r=n(46534),i=n(63438),o=n(79315),a=n(59272),s=n(95944),u=n(56560);function c(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){var i=e[0];if((0,o.k)(i))return l(i,null);if((0,s.K)(i)&&Object.getPrototypeOf(i)===Object.prototype){var u=Object.keys(i);return l(u.map(function(t){return i[t]}),u)}}if("function"==typeof e[e.length-1]){var c=e.pop();return l(e=1===e.length&&(0,o.k)(e[0])?e[0]:e,null).pipe((0,a.U)(function(t){return c.apply(void 0,(0,r.Z)(t))}))}return l(e,null)}function l(t,e){return new i.y(function(n){var r=t.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var c=(0,u.D)(t[s]),l=!1;n.add(c.subscribe({next:function(t){l||(l=!0,a++),i[s]=t},error:function(t){return n.error(t)},complete:function(){++o!==r&&l||(a===r&&n.next(e?e.reduce(function(t,e,n){return t[e]=i[n],t},{}):i),n.complete())}}))},c=0;c<r;c++)s(c);else n.complete()})}},56560:function(t,e,n){"use strict";n.d(e,{D:function(){return a}});var r=n(63438),i=n(85461),o=n(46173);function a(t,e){return e?(0,o.x)(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},11547:function(t,e,n){"use strict";n.d(e,{n:function(){return a}});var r=n(63438),i=n(4714),o=n(20668);function a(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},99750:function(t,e,n){"use strict";n.d(e,{R:function(){return u}});var r=n(46534),i=n(63438),o=n(79315),a=n(8336),s=n(59272);function u(t,e,n,l){return(0,a.m)(n)&&(l=n,n=void 0),l?u(t,e,n).pipe((0,s.U)(function(t){return(0,o.k)(t)?l.apply(void 0,(0,r.Z)(t)):l(t)})):new i.y(function(r){c(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function c(t,e,n,r,i){var o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var a=t;t.addEventListener(e,n,i),o=function(){return a.removeEventListener(e,n,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var s=t;t.on(e,n),o=function(){return s.off(e,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var u=t;t.addListener(e,n),o=function(){return u.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,h=t.length;l<h;l++)c(t[l],e,n,r,i)}r.add(o)}},17512:function(t,e,n){"use strict";n.d(e,{R:function(){return u}});var r=n(46534),i=n(63438),o=n(79315),a=n(8336),s=n(59272);function u(t,e,n){return n?u(t,e).pipe((0,s.U)(function(t){return(0,o.k)(t)?n.apply(void 0,(0,r.Z)(t)):n(t)})):new i.y(function(n){var r,i=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n.next(1===e.length?e[0]:e)};try{r=t(i)}catch(o){return void n.error(o)}if((0,a.m)(e))return function(){return e(i,r)}})}},38060:function(t,e,n){"use strict";n.d(e,{s:function(){return o}});var r=n(4567),i=n(31159);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.E,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.E;return(0,r.P)(function(){return t()?e:n})}},23810:function(t,e,n){"use strict";n.d(e,{F:function(){return a}});var r=n(63438),i=n(92011),o=n(98269);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.P;return(!(0,o.k)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=i.P),new r.y(function(n){return n.add(e.schedule(s,t,{subscriber:n,counter:0,period:t})),n})}function s(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}},57814:function(t,e,n){"use strict";n.d(e,{T:function(){return s}});var r=n(63438),i=n(35582),o=n(30462),a=n(11547);function s(){for(var t=Number.POSITIVE_INFINITY,e=null,n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];var c=s[s.length-1];return(0,i.K)(c)?(e=s.pop(),s.length>1&&"number"==typeof s[s.length-1]&&(t=s.pop())):"number"==typeof c&&(t=s.pop()),null===e&&1===s.length&&s[0]instanceof r.y?s[0]:(0,o.J)(t)((0,a.n)(s,e))}},53922:function(t,e,n){"use strict";n.d(e,{of:function(){return a}});var r=n(35582),i=n(11547),o=n(20668);function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=e[e.length-1];return(0,r.K)(a)?(e.pop(),(0,o.r)(e,a)):(0,i.n)(e)}},37469:function(t,e,n){"use strict";n.d(e,{S3:function(){return h}});var r=n(74408),i=n(13118),o=n(65951),a=n(3280),s=n(79315),u=n(11547),c=n(44827),l=n(14109);function h(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){if(!(0,s.k)(e[0]))return e[0];e=e[0]}return(0,u.n)(e,void 0).lift(new f)}var f=function(){function t(){(0,o.Z)(this,t)}return(0,a.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new d(t))}}]),t}(),d=function(t){(0,r.Z)(n,t);var e=(0,i.Z)(n);function n(t){var r;return(0,o.Z)(this,n),(r=e.call(this,t)).hasFirst=!1,r.observables=[],r.subscriptions=[],r}return(0,a.Z)(n,[{key:"_next",value:function(t){this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=(0,l.D)(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}},{key:"notifyNext",value:function(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(e)}}]),n}(c.L)},59845:function(t,e,n){"use strict";n.d(e,{_:function(){return i}});var r=n(63438);function i(t,e){return new r.y(e?function(n){return e.schedule(o,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function o(t){t.subscriber.error(t.error)}},9749:function(t,e,n){"use strict";n.d(e,{H:function(){return s}});var r=n(63438),i=n(92011),o=n(98269),a=n(35582);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=-1;return(0,o.k)(e)?s=Number(e)<1?1:Number(e):(0,a.K)(e)&&(n=e),(0,a.K)(n)||(n=i.P),new r.y(function(e){var r=(0,o.k)(t)?t:+t-n.now();return n.schedule(u,r,{index:0,period:s,subscriber:e})})}function u(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}},81250:function(t,e,n){"use strict";n.d(e,{u:function(){return i}});var r=n(30462);function i(){return(0,r.J)(1)}},90631:function(t,e,n){"use strict";n.d(e,{h:function(){return u}});var r=n(74408),i=n(13118),o=n(65951),a=n(3280),s=n(22658);function u(t,e){return function(n){return n.lift(new c(t,e))}}var c=function(){function t(e,n){(0,o.Z)(this,t),this.predicate=e,this.thisArg=n}return(0,a.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new l(t,this.predicate,this.thisArg))}}]),t}(),l=function(t){(0,r.Z)(n,t);var e=(0,i.Z)(n);function n(t,r,i){var a;return(0,o.Z)(this,n),(a=e.call(this,t)).predicate=r,a.thisArg=i,a.count=0,a}return(0,a.Z)(n,[{key:"_next",value:function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}]),n}(s.L)},59272:function(t,e,n){"use strict";n.d(e,{U:function(){return c}});var r=n(3010),i=n(74408),o=n(13118),a=n(65951),s=n(3280),u=n(22658);function c(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new l(t,e))}}var l=function(){function t(e,n){(0,a.Z)(this,t),this.project=e,this.thisArg=n}return(0,s.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.project,this.thisArg))}}]),t}(),h=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(t,i,o){var s;return(0,a.Z)(this,n),(s=e.call(this,t)).project=i,s.count=0,s.thisArg=o||(0,r.Z)(s),s}return(0,s.Z)(n,[{key:"_next",value:function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(u.L)},30462:function(t,e,n){"use strict";n.d(e,{J:function(){return o}});var r=n(84178),i=n(72311);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,t)}},84178:function(t,e,n){"use strict";n.d(e,{zg:function(){return l}});var r=n(74408),i=n(13118),o=n(65951),a=n(3280),s=n(59272),u=n(56560),c=n(63847);function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?function(r){return r.pipe(l(function(n,r){return(0,u.D)(t(n,r)).pipe((0,s.U)(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new h(t,n))})}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;(0,o.Z)(this,t),this.project=e,this.concurrent=n}return(0,a.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new f(t,this.project,this.concurrent))}}]),t}(),f=function(t){(0,r.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return(0,o.Z)(this,n),(i=e.call(this,t)).project=r,i.concurrent=a,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return(0,a.Z)(n,[{key:"_next",value:function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=new c.IY(this),n=this.destination;n.add(e);var r=(0,c.ft)(t,e);r!==e&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(t){this.destination.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(c.Ds)},84766:function(t,e,n){"use strict";n.d(e,{QV:function(){return c},ht:function(){return h}});var r=n(74408),i=n(13118),o=n(65951),a=n(3280),s=n(22658),u=n(79157);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new l(t,e))}}var l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,o.Z)(this,t),this.scheduler=e,this.delay=n}return(0,a.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new h(t,this.scheduler,this.delay))}}]),t}(),h=function(t){(0,r.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,o.Z)(this,n),(i=e.call(this,t)).scheduler=r,i.delay=a,i}return(0,a.Z)(n,[{key:"scheduleMessage",value:function(t){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new f(t,this.destination)))}},{key:"_next",value:function(t){this.scheduleMessage(u.P.createNext(t))}},{key:"_error",value:function(t){this.scheduleMessage(u.P.createError(t)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(u.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){t.notification.observe(t.destination),this.unsubscribe()}}]),n}(s.L),f=function t(e,n){(0,o.Z)(this,t),this.notification=e,this.destination=n}},91061:function(t,e,n){"use strict";n.d(e,{x:function(){return u}});var r=n(74408),i=n(13118),o=n(65951),a=n(3280),s=n(22658);function u(){return function(t){return t.lift(new c(t))}}var c=function(){function t(e){(0,o.Z)(this,t),this.connectable=e}return(0,a.Z)(t,[{key:"call",value:function(t,e){var n=this.connectable;n._refCount++;var r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),t}(),l=function(t){(0,r.Z)(n,t);var e=(0,i.Z)(n);function n(t,r){var i;return(0,o.Z)(this,n),(i=e.call(this,t)).connectable=r,i}return(0,a.Z)(n,[{key:"_unsubscribe",value:function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(s.L)},20668:function(t,e,n){"use strict";n.d(e,{r:function(){return o}});var r=n(63438),i=n(29737);function o(t,e){return new r.y(function(n){var r=new i.w,o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},49737:function(t,e,n){"use strict";n.d(e,{Q:function(){return a}});var r=n(63438),i=n(29737),o=n(21219);function a(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,a=new i.w;return a.add(function(){r&&"function"==typeof r.return&&r.return()}),a.add(e.schedule(function(){r=t[o.hZ](),a.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(o){return void n.error(o)}e?n.complete():(n.next(t),this.schedule())}}))})),a})}},12701:function(t,e,n){"use strict";n.d(e,{l:function(){return a}});var r=n(63438),i=n(29737),o=n(5588);function a(t,e){return new r.y(function(n){var r=new i.w;return r.add(e.schedule(function(){var i=t[o.L]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}},58662:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var r=n(63438),i=n(29737);function o(t,e){return new r.y(function(n){var r=new i.w;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}},46173:function(t,e,n){"use strict";n.d(e,{x:function(){return h}});var r=n(12701),i=n(58662),o=n(20668),a=n(49737),s=n(31340),u=n(97953),c=n(28215),l=n(12903);function h(t,e){if(null!=t){if((0,s.c)(t))return(0,r.l)(t,e);if((0,u.t)(t))return(0,i.c)(t,e);if((0,c.z)(t))return(0,o.r)(t,e);if((0,l.T)(t)||"string"==typeof t)return(0,a.Q)(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},64039:function(t,e,n){"use strict";n.d(e,{a:function(){return s}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,i){return(0,r.Z)(this,n),e.call(this)}return(0,i.Z)(n,[{key:"schedule",value:function(t){return this}}]),n}(n(29737).w)},47902:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var r=n(65951),i=n(3280),o=n(85391),a=n(75563),s=n(74408),u=n(13118),c=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,i){var o;return(0,r.Z)(this,n),(o=e.call(this,t,i)).scheduler=t,o.work=i,o}return(0,i.Z)(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?(0,o.Z)((0,a.Z)(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return(0,o.Z)((0,a.Z)(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}}]),n}(n(91249).o)},98571:function(t,e,n){"use strict";n.d(e,{N:function(){return s}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(n(83498).v)},24734:function(t,e,n){"use strict";n.d(e,{t:function(){return l}});var r=n(65951),i=n(3280),o=n(85391),a=n(75563),s=n(74408),u=n(13118),c=n(60414),l=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,i){var o;return(0,r.Z)(this,n),(o=e.call(this,t,i)).scheduler=t,o.work=i,o}return(0,i.Z)(n,[{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?(0,o.Z)((0,a.Z)(n.prototype),"requestAsyncId",this).call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=c.H.setImmediate(t.flush.bind(t,null))))}},{key:"recycleAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return(0,o.Z)((0,a.Z)(n.prototype),"recycleAsyncId",this).call(this,t,e,r);0===t.actions.length&&(c.H.clearImmediate(e),t.scheduled=void 0)}}]),n}(n(91249).o)},37489:function(t,e,n){"use strict";n.d(e,{E:function(){return s}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"flush",value:function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}}}]),n}(n(83498).v)},91249:function(t,e,n){"use strict";n.d(e,{o:function(){return s}});var r=n(65951),i=n(3280),o=n(74408),a=n(13118),s=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,i){var o;return(0,r.Z)(this,n),(o=e.call(this,t,i)).scheduler=t,o.work=i,o.pending=!1,o}return(0,i.Z)(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}},{key:"requestAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(t.flush.bind(t,this),n)}},{key:"recycleAsyncId",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}},{key:"execute",value:function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}]),n}(n(64039).a)},83498:function(t,e,n){"use strict";n.d(e,{v:function(){return h}});var r=n(65951),i=n(3280),o=n(3010),a=n(85391),s=n(75563),u=n(74408),c=n(13118),l=n(45477),h=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.b.now;return(0,r.Z)(this,n),(i=e.call(this,t,function(){return n.delegate&&n.delegate!==(0,o.Z)(i)?n.delegate.now():a()})).actions=[],i.active=!1,i.scheduled=void 0,i}return(0,i.Z)(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(t,e,r):(0,a.Z)((0,s.Z)(n.prototype),"schedule",this).call(this,t,e,r)}},{key:"flush",value:function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}}]),n}(l.b)},36394:function(t,e,n){"use strict";n.d(e,{F:function(){return c}});var r=n(65951),i=n(3280),o=n(85391),a=n(75563),s=n(74408),u=n(13118),c=function(t){(0,s.Z)(n,t);var e=(0,u.Z)(n);function n(t,i){var o;return(0,r.Z)(this,n),(o=e.call(this,t,i)).scheduler=t,o.work=i,o}return(0,i.Z)(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>0?(0,o.Z)((0,a.Z)(n.prototype),"schedule",this).call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}},{key:"execute",value:function(t,e){return e>0||this.closed?(0,o.Z)((0,a.Z)(n.prototype),"execute",this).call(this,t,e):this._execute(t,e)}},{key:"requestAsyncId",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?(0,o.Z)((0,a.Z)(n.prototype),"requestAsyncId",this).call(this,t,e,r):t.flush(this)}}]),n}(n(91249).o)},19091:function(t,e,n){"use strict";n.d(e,{o:function(){return a}});var r=n(65951),i=n(74408),o=n(13118),a=function(t){(0,i.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return n}(n(83498).v)},37063:function(t,e,n){"use strict";n.d(e,{Z:function(){return i},r:function(){return o}});var r=n(47902),i=new(n(98571).N)(r.Z),o=i},54077:function(t,e,n){"use strict";n.d(e,{E:function(){return i},e:function(){return o}});var r=n(24734),i=new(n(37489).E)(r.t),o=i},92011:function(t,e,n){"use strict";n.d(e,{z:function(){return i},P:function(){return o}});var r=n(91249),i=new(n(83498).v)(r.o),o=i},76598:function(t,e,n){"use strict";n.d(e,{N:function(){return i},c:function(){return o}});var r=n(36394),i=new(n(19091).o)(r.F),o=i},21219:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:function(){return i}});var i=r()},5588:function(t,e,n){"use strict";n.d(e,{L:function(){return r}});var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},66454:function(t,e,n){"use strict";n.d(e,{b:function(){return r}});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},45461:function(t,e,n){"use strict";n.d(e,{W:function(){return r}});var r=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}()},22344:function(t,e,n){"use strict";n.d(e,{K:function(){return r}});var r=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}()},60414:function(t,e,n){"use strict";n.d(e,{H:function(){return s}});var r=1,i=function(){return Promise.resolve()}(),o={};function a(t){return t in o&&(delete o[t],!0)}var s={setImmediate:function(t){var e=r++;return o[e]=!0,i.then(function(){return a(e)&&t()}),e},clearImmediate:function(t){a(t)}}},99214:function(t,e,n){"use strict";n.d(e,{N:function(){return r}});var r=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},33943:function(t,e,n){"use strict";n.d(e,{B:function(){return r}});var r=function(){function t(t){return Error.call(this),this.message=t?"".concat(t.length," errors occurred during unsubscription:\n").concat(t.map(function(t,e){return"".concat(e+1,") ").concat(t.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}()},77649:function(t,e,n){"use strict";n.d(e,{_:function(){return i}});var r=n(22658);function i(t){for(;t;){var e=t.destination;if(t.closed||t.isStopped)return!1;t=e&&e instanceof r.L?e:null}return!0}},6906:function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t},0)}n.d(e,{z:function(){return r}})},72311:function(t,e,n){"use strict";function r(t){return t}n.d(e,{y:function(){return r}})},79315:function(t,e,n){"use strict";n.d(e,{k:function(){return r}});var r=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}()},28215:function(t,e,n){"use strict";n.d(e,{z:function(){return r}});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},8336:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,{m:function(){return r}})},31340:function(t,e,n){"use strict";n.d(e,{c:function(){return i}});var r=n(5588);function i(t){return t&&"function"==typeof t[r.L]}},12903:function(t,e,n){"use strict";n.d(e,{T:function(){return i}});var r=n(21219);function i(t){return t&&"function"==typeof t[r.hZ]}},98269:function(t,e,n){"use strict";n.d(e,{k:function(){return i}});var r=n(79315);function i(t){return!(0,r.k)(t)&&t-parseFloat(t)+1>=0}},95944:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:function(){return r}})},84608:function(t,e,n){"use strict";n.d(e,{b:function(){return i}});var r=n(63438);function i(t){return!!t&&(t instanceof r.y||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},97953:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:function(){return r}})},35582:function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:function(){return r}})},99135:function(t,e,n){"use strict";function r(){}n.d(e,{Z:function(){return r}})},11325:function(t,e,n){"use strict";n.d(e,{z:function(){return i},U:function(){return o}});var r=n(72311);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o(e)}function o(t){return 0===t.length?r.y:1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}}},85461:function(t,e,n){"use strict";n.d(e,{s:function(){return f}});var r=n(4714),i=n(54032),o=n(25675),a=n(84378),s=n(28215),u=n(97953),c=n(95944),l=n(21219),h=n(5588),f=function(t){if(t&&"function"==typeof t[h.L])return(0,a.h)(t);if((0,s.z)(t))return(0,r.V)(t);if((0,u.t)(t))return(0,i.A)(t);if(t&&"function"==typeof t[l.hZ])return(0,o.u)(t);var e=(0,c.K)(t)?"an invalid object":"'".concat(t,"'"),n="You provided ".concat(e," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)}},4714:function(t,e,n){"use strict";n.d(e,{V:function(){return r}});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}}},25675:function(t,e,n){"use strict";n.d(e,{u:function(){return i}});var r=n(21219),i=function(t){return function(e){for(var n=t[r.hZ]();;){var i=void 0;try{i=n.next()}catch(o){return e.error(o),e}if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},84378:function(t,e,n){"use strict";n.d(e,{h:function(){return i}});var r=n(5588),i=function(t){return function(e){var n=t[r.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},54032:function(t,e,n){"use strict";n.d(e,{A:function(){return i}});var r=n(6906),i=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.z),e}}},14109:function(t,e,n){"use strict";n.d(e,{D:function(){return a}});var r=n(92461),i=n(85461),o=n(63438);function a(t,e,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r.d(t,n,a);if(!s.closed)return e instanceof o.y?e.subscribe(s):(0,i.s)(e)(s)}},46911:function(t,e,n){"use strict";n.d(e,{Y:function(){return a}});var r=n(22658),i=n(66454),o=n(28457);function a(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}},30095:function(t,e,n){var r=n(42108),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},45517:function(t,e,n){"use strict";var r,i=n(42108),o=i.Buffer,a={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(a[r]=i[r]);var s=a.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(s[r]=o[r]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,n){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,n)}),s.alloc||(s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=o(t);return e&&0!==e.length?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r}),!a.kStringMaxLength)try{a.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(u){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a},97252:function(t,e,n){var r=n(30095).Buffer;function i(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(t=r.from(t,e=e||"utf8"));for(var n=this._block,i=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var u=a%i,c=Math.min(o-s,i-u),l=0;l<c;l++)n[u+l]=t[s+l];s+=c,(a+=c)%i==0&&this._update(n)}return this._len+=o,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0;this._block.writeUInt32BE((n-r)/4294967296,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return t?i.toString(t):i},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},45837:function(t,e,n){var r=t.exports=function(t){t=t.toLowerCase();var e=r[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};r.sha=n(5586),r.sha1=n(81348),r.sha224=n(43618),r.sha256=n(63215),r.sha384=n(1260),r.sha512=n(16665)},5586:function(t,e,n){var r=n(72783),i=n(97252),o=n(30095).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function c(t){return t<<30|t>>>2}function l(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)n[h]=t.readInt32BE(4*h);for(;h<80;++h)n[h]=n[h-3]^n[h-8]^n[h-14]^n[h-16];for(var f=0;f<80;++f){var d=~~(f/20),p=0|((e=r)<<5|e>>>27)+l(d,i,o,s)+u+n[f]+a[d];u=s,s=o,o=c(i),i=r,r=p}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},81348:function(t,e,n){var r=n(72783),i=n(97252),o=n(30095).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function c(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function h(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)n[f]=t.readInt32BE(4*f);for(;f<80;++f)n[f]=(e=n[f-3]^n[f-8]^n[f-14]^n[f-16])<<1|e>>>31;for(var d=0;d<80;++d){var p=~~(d/20),v=c(r)+h(p,i,o,s)+u+n[d]+a[p]|0;u=s,s=o,o=l(i),i=r,r=v}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},43618:function(t,e,n){var r=n(72783),i=n(63215),o=n(97252),a=n(30095).Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}r(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},63215:function(t,e,n){var r=n(72783),i=n(97252),o=n(30095).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}function c(t,e,n){return n^t&(e^n)}function l(t,e,n){return t&e|n&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function d(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}r(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,p=0|this._f,v=0|this._g,g=0|this._h,y=0;y<16;++y)n[y]=t.readInt32BE(4*y);for(;y<64;++y)n[y]=0|(((e=n[y-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[y-7]+d(n[y-15])+n[y-16];for(var m=0;m<64;++m){var b=g+f(u)+c(u,p,v)+a[m]+n[m]|0,w=h(r)+l(r,i,o)|0;g=v,v=p,p=u,u=s+b|0,s=o,o=i,i=r,r=b+w|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=p+this._f|0,this._g=v+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},1260:function(t,e,n){var r=n(72783),i=n(16665),o=n(97252),a=n(30095).Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}r(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},16665:function(t,e,n){var r=n(72783),i=n(97252),o=n(30095).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}function c(t,e,n){return n^t&(e^n)}function l(t,e,n){return t&e|n&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function v(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function y(t,e){return t>>>0<e>>>0?1:0}r(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,m=0|this._gh,b=0|this._hh,w=0|this._al,_=0|this._bl,S=0|this._cl,k=0|this._dl,E=0|this._el,x=0|this._fl,T=0|this._gl,I=0|this._hl,C=0;C<32;C+=2)e[C]=t.readInt32BE(4*C),e[C+1]=t.readInt32BE(4*C+4);for(;C<160;C+=2){var A=e[C-30],M=e[C-30+1],R=d(A,M),O=p(M,A),P=v(A=e[C-4],M=e[C-4+1]),N=g(M,A),D=e[C-32],$=e[C-32+1],L=O+e[C-14+1]|0,j=R+e[C-14]+y(L,O)|0;j=(j=j+P+y(L=L+N|0,N)|0)+D+y(L=L+$|0,$)|0,e[C]=j,e[C+1]=L}for(var U=0;U<160;U+=2){j=e[U],L=e[U+1];var F=l(n,r,i),B=l(w,_,S),q=h(n,w),V=h(w,n),Z=f(s,E),H=f(E,s),z=a[U],G=a[U+1],W=c(s,u,m),K=c(E,x,T),J=I+H|0,Y=b+Z+y(J,I)|0;Y=(Y=(Y=Y+W+y(J=J+K|0,K)|0)+z+y(J=J+G|0,G)|0)+j+y(J=J+L|0,L)|0;var X=V+B|0,Q=q+F+y(X,V)|0;b=m,I=T,m=u,T=x,u=s,x=E,s=o+Y+y(E=k+J|0,k)|0,o=i,k=S,i=r,S=_,r=n,_=w,n=Y+Q+y(w=J+X|0,J)|0}this._al=this._al+w|0,this._bl=this._bl+_|0,this._cl=this._cl+S|0,this._dl=this._dl+k|0,this._el=this._el+E|0,this._fl=this._fl+x|0,this._gl=this._gl+T|0,this._hl=this._hl+I|0,this._ah=this._ah+n+y(this._al,w)|0,this._bh=this._bh+r+y(this._bl,_)|0,this._ch=this._ch+i+y(this._cl,S)|0,this._dh=this._dh+o+y(this._dl,k)|0,this._eh=this._eh+s+y(this._el,E)|0,this._fh=this._fh+u+y(this._fl,x)|0,this._gh=this._gh+m+y(this._gl,T)|0,this._hh=this._hh+b+y(this._hl,I)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},34179:function(t,e,n){t.exports=i;var r=n(80067).EventEmitter;function i(){r.call(this)}n(72783)(i,r),i.Readable=n(76073),i.Writable=n(7409),i.Duplex=n(19194),i.Transform=n(48292),i.PassThrough=n(21541),i.finished=n(92015),i.pipeline=n(50133),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",c),t.on("error",c),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},19194:function(t,e,n){"use strict";var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=c;var i=n(8089),o=n(98590);n(72783)(c,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(t){if(!(this instanceof c))return new c(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},21541:function(t,e,n){"use strict";t.exports=i;var r=n(79739);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(72783)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},76073:function(t,e,n){"use strict";var r;t.exports=E,E.ReadableState=k,n(80067);var i,o=function(t,e){return t.listeners(e).length},a=n(68239),s=n(42108).Buffer,u=global.Uint8Array||function(){},c=n(56353);i=c&&c.debuglog?c.debuglog("stream"):function(){};var l,h,f,d=n(19321),p=n(56954),v=n(74492).getHighWaterMark,g=n(91183).q,y=g.ERR_INVALID_ARG_TYPE,m=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(72783)(E,a);var _=p.errorOrDestroy,S=["error","close","destroy","pause","resume"];function k(t,e,i){r=r||n(95558),"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!(t=t||{}).objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=v(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=n(10916).s),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function E(t){if(r=r||n(95558),!(this instanceof E))return new E(t);this._readableState=new k(t,this,this instanceof r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function x(t,e,n,r,o){i("readableAddChunk",e);var a,c=t._readableState;if(null===e)c.reading=!1,function(t,e){if(i("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?A(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,M(t)))}}(t,c);else if(o||(a=function(t,e){var n,r;return s.isBuffer(r=e)||r instanceof u||"string"==typeof e||void 0===e||t.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],e)),n}(c,e)),a)_(t,a);else if(c.objectMode||e&&e.length>0)if("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),r)c.endEmitted?_(t,new w):T(t,c,e,!0);else if(c.ended)_(t,new m);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(e=c.decoder.write(e),c.objectMode||0!==e.length?T(t,c,e,!1):R(t,c)):T(t,c,e,!1)}else r||(c.reading=!1,R(t,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&A(t)),R(t,e)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(t,e){e(t)},E.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=s.from(t,e),e=""),n=!0),x(this,t,e,!1,n)},E.prototype.unshift=function(t){return x(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){l||(l=n(10916).s);var e=new l(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function C(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=I?t=I:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function A(t){var e=t._readableState;i("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(i("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(M,t))}function M(t){var e=t._readableState;i("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,$(t)}function R(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(O,t,e))}function O(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(i("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function P(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function N(t){i("readable nexttick read 0"),t.read(0)}function D(t,e){i("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),$(t),e.flowing&&!e.reading&&t.read(0)}function $(t){var e=t._readableState;for(i("flow",e.flowing);e.flowing&&null!==t.read(););}function L(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function j(t){var e=t._readableState;i("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(U,e,t))}function U(t,e){if(i("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function F(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}E.prototype.read=function(t){i("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return i("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):A(this),null;if(0===(t=C(t,e))&&e.ended)return 0===e.length&&j(this),null;var r,o=e.needReadable;return i("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&i("length less than watermark",o=!0),e.ended||e.reading?i("reading or ended",o=!1):o&&(i("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=C(n,e))),null===(r=t>0?L(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==r&&this.emit("data",r),r},E.prototype._read=function(t){_(this,new b("_read()"))},E.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===process.stdout||t===process.stderr?p:s;function s(){i("onend"),t.end()}r.endEmitted?process.nextTick(a):n.once("end",a),t.on("unpipe",function e(o,a){i("onunpipe"),o===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,i("cleanup"),t.removeListener("close",f),t.removeListener("finish",d),t.removeListener("drain",u),t.removeListener("error",h),t.removeListener("unpipe",e),n.removeListener("end",s),n.removeListener("end",p),n.removeListener("data",l),c=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||u())});var u=function(t){return function(){var e=t._readableState;i("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,$(t))}}(n);t.on("drain",u);var c=!1;function l(e){i("ondata");var o=t.write(e);i("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==F(r.pipes,t))&&!c&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(e){i("onerror",e),p(),t.removeListener("error",h),0===o(t,"error")&&_(t,e)}function f(){t.removeListener("finish",d),p()}function d(){i("onfinish"),t.removeListener("close",f),p()}function p(){i("unpipe"),n.unpipe(t)}return n.on("data",l),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(n):t._events.error=[n,t._events.error]:t.on(e,n)}(t,"error",h),t.once("close",f),t.once("finish",d),t.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=F(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},E.prototype.addListener=E.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===t&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?A(this):r.reading||process.nextTick(N,this))),n},E.prototype.removeListener=function(t,e){var n=a.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(P,this),n},E.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(P,this),e},E.prototype.resume=function(){var t=this._readableState;return t.flowing||(i("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(D,t,e))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var o in t.on("end",function(){if(i("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(o){i("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))}),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var a=0;a<S.length;a++)t.on(S[a],this.emit.bind(this,S[a]));return this._read=function(e){i("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(65571)),h(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=L,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,e){return void 0===f&&(f=n(5335)),f(E,t,e)})},48292:function(t,e,n){"use strict";t.exports=l;var r=n(91183).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,u=n(95558);function c(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(e,n){f(t,e,n)})}function f(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}n(72783)(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,n){n(new i("_transform()"))},l.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,function(t){e(t)})}},7409:function(t,e,n){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var i;t.exports=E,E.WritableState=k;var o,a={deprecate:n(69092)},s=n(68239),u=n(42108).Buffer,c=global.Uint8Array||function(){},l=n(56954),h=n(74492).getHighWaterMark,f=n(91183).q,d=f.ERR_INVALID_ARG_TYPE,p=f.ERR_METHOD_NOT_IMPLEMENTED,v=f.ERR_MULTIPLE_CALLBACK,g=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,m=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function S(){}function k(t,e,o){i=i||n(95558),"boolean"!=typeof o&&(o=e instanceof i),this.objectMode=!!(t=t||{}).objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=h(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new v;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(process.nextTick(i,r),process.nextTick(M,t,e),t._writableState.errorEmitted=!0,_(t,r)):(i(r),t._writableState.errorEmitted=!0,_(t,r),M(t,e))}(t,n,r,e,i);else{var o=C(n)||t.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||I(t,n),r?process.nextTick(T,t,n,o,i):T(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function E(t){var e=this instanceof(i=i||n(95558));if(!e&&!o.call(E,this))return new E(t);this._writableState=new k(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function x(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function T(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),M(t,e)}function I(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=new Array(e.bufferedRequestCount),o=e.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)i[a]=n,n.isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,x(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk;if(x(t,e,!1,e.objectMode?1:u.length,u,n.encoding,n.callback),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function C(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function A(t,e){t._final(function(n){e.pendingcb--,n&&_(t,n),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function M(t,e){var n=C(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(A,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}n(72783)(E,s),k.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===E&&t&&t._writableState instanceof k}})):o=function(t){return t instanceof this},E.prototype.pipe=function(){_(this,new g)},E.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,a=!i.objectMode&&(u.isBuffer(r=t)||r instanceof c);return a&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=S),i.ending?function(t,e){var n=new b;_(t,n),process.nextTick(e,n)}(this,n):(a||function(t,e,n,r){var i;return null===n?i=new m:"string"==typeof n||e.objectMode||(i=new d("chunk",["string","Buffer"],n)),!i||(_(t,i),process.nextTick(r,i),!1)}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else x(t,e,!1,s,r,i,o);return c}(this,i,a,t,e,n)),o},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||I(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new w(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,n){n(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,n){e.ending=!0,M(t,e),n&&(e.finished?process.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=l.destroy,E.prototype._undestroy=l.undestroy,E.prototype._destroy=function(t,e){e(t)}},92015:function(t,e,n){"use strict";var r=n(91183).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&e.readable,s=n.writable||!1!==n.writable&&e.writable,u=function(){e.writable||l()},c=e._writableState&&e._writableState.finished,l=function(){s=!1,c=!0,a||o.call(e)},h=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(e)},d=function(t){o.call(e,t)},p=function(){var t;return a&&!h?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):s&&!c?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},v=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",p),e.req?v():e.on("request",v)):s&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",f),e.on("finish",l),!1!==n.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",v),e.req&&e.req.removeListener("finish",l),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}},50133:function(t,e,n){"use strict";var r,i=n(91183).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",function(){s=!0}),void 0===r&&(r=n(61428)),r(t,{readable:e,writable:i},function(t){if(t)return o(t);s=!0,o()});var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function c(t){t()}function l(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map(function(t,n){var o=n<e.length-1;return u(t,o,n>0,function(t){r||(r=t),t&&a.forEach(c),o||(a.forEach(c),i(r))})});return e.reduce(l)}},57476:function(t,e,n){var r=n(42108).Buffer,i=r.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=e.s=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!i(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=a)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function a(t){return t.toString(this.encoding)}function s(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function u(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((r=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r,i=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),(r=(e+=t.toString(this.encoding,0,i)).charCodeAt(i=e.length-1))>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},o.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},o.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.encoding;e+=this.charBuffer.slice(0,this.charReceived).toString(n)}return e}},69092:function(t){function e(t){try{if(!global.localStorage)return!1}catch(n){return!1}var e=global.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,n){if(e("noDeprecation"))return t;var r=!1;return function(){if(!r){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return t.apply(this,arguments)}}},98981:function(t,e,n){"use strict";var r=n(2153).default,i=n(12693).default,o=n(71459).default,a=(function(t){var e=t.performance;function n(t){e&&e.mark&&e.mark(t)}function r(t,n){e&&e.measure&&e.measure(t,n)}n("Zone");var a=t.__Zone_symbol_prefix||"__zone_symbol__";function s(t){return a+t}var u=!0===t[s("forceDuplicateZoneCheck")];if(t.Zone){if(u||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}var c=function(){function e(t,n){i(this,e),this._parent=t,this._name=n?n.name||"unnamed":"<root>",this._properties=n&&n.properties||{},this._zoneDelegate=new f(this,this._parent&&this._parent._zoneDelegate,n)}return o(e,[{key:"parent",get:function(){return this._parent}},{key:"name",get:function(){return this._name}},{key:"get",value:function(t){var e=this.getZoneWith(t);if(e)return e._properties[t]}},{key:"getZoneWith",value:function(t){for(var e=this;e;){if(e._properties.hasOwnProperty(t))return e;e=e._parent}return null}},{key:"fork",value:function(t){if(!t)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,t)}},{key:"wrap",value:function(t,e){if("function"!=typeof t)throw new Error("Expecting function got: "+t);var n=this._zoneDelegate.intercept(this,t,e),r=this;return function(){return r.runGuarded(n,this,arguments,e)}}},{key:"run",value:function(t,e,n,r){P={parent:P,zone:this};try{return this._zoneDelegate.invoke(this,t,e,n,r)}finally{P=P.parent}}},{key:"runGuarded",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;P={parent:P,zone:this};try{try{return this._zoneDelegate.invoke(this,t,e,n,r)}catch(i){if(this._zoneDelegate.handleError(this,i))throw i}}finally{P=P.parent}}},{key:"runTask",value:function(t,e,n){if(t.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(t.zone||_).name+"; Execution: "+this.name+")");if(t.state!==S||t.type!==M&&t.type!==A){var r=t.state!=x;r&&t._transitionTo(x,E),t.runCount++;var i=N;N=t,P={parent:P,zone:this};try{t.type==A&&t.data&&!t.data.isPeriodic&&(t.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,t,e,n)}catch(o){if(this._zoneDelegate.handleError(this,o))throw o}}finally{t.state!==S&&t.state!==I&&(t.type==M||t.data&&t.data.isPeriodic?r&&t._transitionTo(E,x):(t.runCount=0,this._updateTaskCount(t,-1),r&&t._transitionTo(S,x,S))),P=P.parent,N=i}}}},{key:"scheduleTask",value:function(t){if(t.zone&&t.zone!==this)for(var e=this;e;){if(e===t.zone)throw Error("can not reschedule task to ".concat(this.name," which is descendants of the original zone ").concat(t.zone.name));e=e.parent}t._transitionTo(k,S);var n=[];t._zoneDelegates=n,t._zone=this;try{t=this._zoneDelegate.scheduleTask(this,t)}catch(r){throw t._transitionTo(I,k,S),this._zoneDelegate.handleError(this,r),r}return t._zoneDelegates===n&&this._updateTaskCount(t,1),t.state==k&&t._transitionTo(E,k),t}},{key:"scheduleMicroTask",value:function(t,e,n,r){return this.scheduleTask(new d(C,t,e,n,r,void 0))}},{key:"scheduleMacroTask",value:function(t,e,n,r,i){return this.scheduleTask(new d(A,t,e,n,r,i))}},{key:"scheduleEventTask",value:function(t,e,n,r,i){return this.scheduleTask(new d(M,t,e,n,r,i))}},{key:"cancelTask",value:function(t){if(t.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(t.zone||_).name+"; Execution: "+this.name+")");t._transitionTo(T,E,x);try{this._zoneDelegate.cancelTask(this,t)}catch(e){throw t._transitionTo(I,T),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(t,-1),t._transitionTo(S,T),t.runCount=0,t}},{key:"_updateTaskCount",value:function(t,e){var n=t._zoneDelegates;-1==e&&(t._zoneDelegates=null);for(var r=0;r<n.length;r++)n[r]._updateTaskCount(t.type,e)}}],[{key:"assertZonePatched",value:function(){if(t.Promise!==R.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}},{key:"root",get:function(){for(var t=e.current;t.parent;)t=t.parent;return t}},{key:"current",get:function(){return P.zone}},{key:"currentTask",get:function(){return N}},{key:"__load_patch",value:function(i,o){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(R.hasOwnProperty(i)){if(!a&&u)throw Error("Already loaded patch: "+i)}else if(!t["__Zone_disable_"+i]){var s="Zone:"+i;n(s),R[i]=o(t,e,O),r(s,s)}}}]),e}();c.__symbol__=s;var l,h={name:"",onHasTask:function(t,e,n,r){return t.hasTask(n,r)},onScheduleTask:function(t,e,n,r){return t.scheduleTask(n,r)},onInvokeTask:function(t,e,n,r,i,o){return t.invokeTask(n,r,i,o)},onCancelTask:function(t,e,n,r){return t.cancelTask(n,r)}},f=function(){function t(e,n,r){i(this,t),this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=e,this._parentDelegate=n,this._forkZS=r&&(r&&r.onFork?r:n._forkZS),this._forkDlgt=r&&(r.onFork?n:n._forkDlgt),this._forkCurrZone=r&&(r.onFork?this.zone:n._forkCurrZone),this._interceptZS=r&&(r.onIntercept?r:n._interceptZS),this._interceptDlgt=r&&(r.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=r&&(r.onIntercept?this.zone:n._interceptCurrZone),this._invokeZS=r&&(r.onInvoke?r:n._invokeZS),this._invokeDlgt=r&&(r.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=r&&(r.onInvoke?this.zone:n._invokeCurrZone),this._handleErrorZS=r&&(r.onHandleError?r:n._handleErrorZS),this._handleErrorDlgt=r&&(r.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=r&&(r.onHandleError?this.zone:n._handleErrorCurrZone),this._scheduleTaskZS=r&&(r.onScheduleTask?r:n._scheduleTaskZS),this._scheduleTaskDlgt=r&&(r.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=r&&(r.onScheduleTask?this.zone:n._scheduleTaskCurrZone),this._invokeTaskZS=r&&(r.onInvokeTask?r:n._invokeTaskZS),this._invokeTaskDlgt=r&&(r.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=r&&(r.onInvokeTask?this.zone:n._invokeTaskCurrZone),this._cancelTaskZS=r&&(r.onCancelTask?r:n._cancelTaskZS),this._cancelTaskDlgt=r&&(r.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=r&&(r.onCancelTask?this.zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;var o=r&&r.onHasTask;(o||n&&n._hasTaskZS)&&(this._hasTaskZS=o?r:h,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=e,r.onScheduleTask||(this._scheduleTaskZS=h,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this.zone),r.onInvokeTask||(this._invokeTaskZS=h,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this.zone),r.onCancelTask||(this._cancelTaskZS=h,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this.zone))}return o(t,[{key:"fork",value:function(t,e){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,t,e):new c(t,e)}},{key:"intercept",value:function(t,e,n){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,t,e,n):e}},{key:"invoke",value:function(t,e,n,r,i){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,t,e,n,r,i):e.apply(n,r)}},{key:"handleError",value:function(t,e){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,t,e)}},{key:"scheduleTask",value:function(t,e){var n=e;if(this._scheduleTaskZS)this._hasTaskZS&&n._zoneDelegates.push(this._hasTaskDlgtOwner),(n=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,t,e))||(n=e);else if(e.scheduleFn)e.scheduleFn(e);else{if(e.type!=C)throw new Error("Task is missing scheduleFn.");b(e)}return n}},{key:"invokeTask",value:function(t,e,n,r){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,t,e,n,r):e.callback.apply(n,r)}},{key:"cancelTask",value:function(t,e){var n;if(this._cancelTaskZS)n=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,t,e);else{if(!e.cancelFn)throw Error("Task is not cancelable");n=e.cancelFn(e)}return n}},{key:"hasTask",value:function(t,e){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,t,e)}catch(n){this.handleError(t,n)}}},{key:"_updateTaskCount",value:function(t,e){var n=this._taskCounts,r=n[t],i=n[t]=r+e;if(i<0)throw new Error("More tasks executed then were scheduled.");0!=r&&0!=i||this.hasTask(this.zone,{microTask:n.microTask>0,macroTask:n.macroTask>0,eventTask:n.eventTask>0,change:t})}}]),t}(),d=function(){function e(n,r,o,a,s,u){if(i(this,e),this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=n,this.source=r,this.data=a,this.scheduleFn=s,this.cancelFn=u,!o)throw new Error("callback is not defined");this.callback=o;var c=this;this.invoke=n===M&&a&&a.useG?e.invokeTask:function(){return e.invokeTask.call(t,c,this,arguments)}}return o(e,[{key:"zone",get:function(){return this._zone}},{key:"state",get:function(){return this._state}},{key:"cancelScheduleRequest",value:function(){this._transitionTo(S,k)}},{key:"_transitionTo",value:function(t,e,n){if(this._state!==e&&this._state!==n)throw new Error("".concat(this.type," '").concat(this.source,"': can not transition to '").concat(t,"', expecting state '").concat(e,"'").concat(n?" or '"+n+"'":"",", was '").concat(this._state,"'."));this._state=t,t==S&&(this._zoneDelegates=null)}},{key:"toString",value:function(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}},{key:"toJSON",value:function(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}],[{key:"invokeTask",value:function(t,e,n){t||(t=this),D++;try{return t.runCount++,t.zone.runTask(t,e,n)}finally{1==D&&w(),D--}}}]),e}(),p=s("setTimeout"),v=s("Promise"),g=s("then"),y=[],m=!1;function b(e){if(0===D&&0===y.length)if(l||t[v]&&(l=t[v].resolve(0)),l){var n=l[g];n||(n=l.then),n.call(l,w)}else t[p](w,0);e&&y.push(e)}function w(){if(!m){for(m=!0;y.length;){var t=y;y=[];for(var e=0;e<t.length;e++){var n=t[e];try{n.zone.runTask(n,null,null)}catch(r){O.onUnhandledError(r)}}}O.microtaskDrainDone(),m=!1}}var _={name:"NO ZONE"},S="notScheduled",k="scheduling",E="scheduled",x="running",T="canceling",I="unknown",C="microTask",A="macroTask",M="eventTask",R={},O={symbol:s,currentZoneFrame:function(){return P},onUnhandledError:$,microtaskDrainDone:$,scheduleMicroTask:b,showUncaughtError:function(){return!c[s("ignoreConsoleErrorUncaughtError")]},patchEventTarget:function(){return[]},patchOnProperties:$,patchMethod:function(){return $},bindArguments:function(){return[]},patchThen:function(){return $},patchMacroTask:function(){return $},patchEventPrototype:function(){return $},isIEOrEdge:function(){return!1},getGlobalObjects:function(){},ObjectDefineProperty:function(){return $},ObjectGetOwnPropertyDescriptor:function(){},ObjectCreate:function(){},ArraySlice:function(){return[]},patchClass:function(){return $},wrapWithCurrentZone:function(){return $},filterProperties:function(){return[]},attachOriginToPatched:function(){return $},_redefineProperty:function(){return $},patchCallbacks:function(){return $}},P={parent:null,zone:new c(null,null)},N=null,D=0;function $(){}r("Zone","Zone"),t.Zone=c}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global),Object.getOwnPropertyDescriptor),s=Object.defineProperty,u=Object.getPrototypeOf,c=Object.create,l=Array.prototype.slice,h="addEventListener",f="removeEventListener",d=Zone.__symbol__(h),p=Zone.__symbol__(f),v="true",g="false",y=Zone.__symbol__("");function m(t,e){return Zone.current.wrap(t,e)}function b(t,e,n,r,i){return Zone.current.scheduleMacroTask(t,e,n,r,i)}var w=Zone.__symbol__,_="undefined"!=typeof window,S=_?window:void 0,k=_&&S||"object"==typeof self&&self||global,E=[null];function x(t,e){for(var n=t.length-1;n>=0;n--)"function"==typeof t[n]&&(t[n]=m(t[n],e+"_"+n));return t}function T(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}var I="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,C=!("nw"in k)&&void 0!==k.process&&"[object process]"==={}.toString.call(k.process),A=!C&&!I&&!(!_||!S.HTMLElement),M=void 0!==k.process&&"[object process]"==={}.toString.call(k.process)&&!I&&!(!_||!S.HTMLElement),R={},O=function(t){if(t=t||k.event){var e=R[t.type];e||(e=R[t.type]=w("ON_PROPERTY"+t.type));var n,r=this||t.target||k,i=r[e];if(A&&r===S&&"error"===t.type){var o=t;!0===(n=i&&i.call(this,o.message,o.filename,o.lineno,o.colno,o.error))&&t.preventDefault()}else null==(n=i&&i.apply(this,arguments))||n||t.preventDefault();return n}};function P(t,e,n){var r=a(t,e);if(!r&&n&&a(n,e)&&(r={enumerable:!0,configurable:!0}),r&&r.configurable){var i=w("on"+e+"patched");if(!t.hasOwnProperty(i)||!t[i]){delete r.writable,delete r.value;var o=r.get,u=r.set,c=e.substr(2),l=R[c];l||(l=R[c]=w("ON_PROPERTY"+c)),r.set=function(e){var n=this;n||t!==k||(n=k),n&&(n[l]&&n.removeEventListener(c,O),u&&u.apply(n,E),"function"==typeof e?(n[l]=e,n.addEventListener(c,O,!1)):n[l]=null)},r.get=function(){var n=this;if(n||t!==k||(n=k),!n)return null;var i=n[l];if(i)return i;if(o){var a=o&&o.call(this);if(a)return r.set.call(this,a),"function"==typeof n.removeAttribute&&n.removeAttribute(e),a}return null},s(t,e,r),t[i]=!0}}}function N(t,e,n){if(e)for(var r=0;r<e.length;r++)P(t,"on"+e[r],n);else{var i=[];for(var o in t)"on"==o.substr(0,2)&&i.push(o);for(var a=0;a<i.length;a++)P(t,i[a],n)}}var D=w("originalInstance");function $(t){var e=k[t];if(e){k[w(t)]=e,k[t]=function(){var n=x(arguments,t);switch(n.length){case 0:this[D]=new e;break;case 1:this[D]=new e(n[0]);break;case 2:this[D]=new e(n[0],n[1]);break;case 3:this[D]=new e(n[0],n[1],n[2]);break;case 4:this[D]=new e(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},U(k[t],e);var n,r=new e(function(){});for(n in r)"XMLHttpRequest"===t&&"responseBlob"===n||function(e){"function"==typeof r[e]?k[t].prototype[e]=function(){return this[D][e].apply(this[D],arguments)}:s(k[t].prototype,e,{set:function(n){"function"==typeof n?(this[D][e]=m(n,t+"."+e),U(this[D][e],n)):this[D][e]=n},get:function(){return this[D][e]}})}(n);for(n in e)"prototype"!==n&&e.hasOwnProperty(n)&&(k[t][n]=e[n])}}function L(t,e,n){for(var r=t;r&&!r.hasOwnProperty(e);)r=u(r);!r&&t[e]&&(r=t);var i=w(e),o=null;if(r&&(!(o=r[i])||!r.hasOwnProperty(i))&&(o=r[i]=r[e],T(r&&a(r,e)))){var s=n(o,i,e);r[e]=function(){return s(this,arguments)},U(r[e],o)}return o}function j(t,e,n){var r=null;function i(t){var e=t.data;return e.args[e.cbIdx]=function(){t.invoke.apply(this,arguments)},r.apply(e.target,e.args),t}r=L(t,e,function(t){return function(e,r){var o=n(e,r);return o.cbIdx>=0&&"function"==typeof r[o.cbIdx]?b(o.name,r[o.cbIdx],o,i):t.apply(e,r)}})}function U(t,e){t[w("OriginalDelegate")]=e}var F=!1,B=!1;function q(){if(F)return B;F=!0;try{var t=S.navigator.userAgent;-1===t.indexOf("MSIE ")&&-1===t.indexOf("Trident/")&&-1===t.indexOf("Edge/")||(B=!0)}catch(e){}return B}Zone.__load_patch("ZoneAwarePromise",function(t,e,n){var a=Object.getOwnPropertyDescriptor,s=Object.defineProperty,u=n.symbol,c=[],l=!0===t[u("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],h=u("Promise"),f=u("then");n.onUnhandledError=function(t){if(n.showUncaughtError()){var e=t&&t.rejection;e?console.error("Unhandled Promise rejection:",e instanceof Error?e.message:e,"; Zone:",t.zone.name,"; Task:",t.task&&t.task.source,"; Value:",e,e instanceof Error?e.stack:void 0):console.error(t)}},n.microtaskDrainDone=function(){for(var t=function(){var t=c.shift();try{t.zone.runGuarded(function(){if(t.throwOriginal)throw t.rejection;throw t})}catch(r){!function(t){n.onUnhandledError(t);try{var r=e[d];"function"==typeof r&&r.call(this,t)}catch(i){}}(r)}};c.length;)t()};var d=u("unhandledPromiseRejectionHandler");function p(t){return t&&t.then}function v(t){return t}function g(t){return O.reject(t)}var y=u("state"),m=u("value"),b=u("finally"),w=u("parentPromiseValue"),_=u("parentPromiseState"),S=null,k=!0,E=!1;function x(t,e){return function(n){try{I(t,e,n)}catch(r){I(t,!1,r)}}}var T=u("currentTaskTrace");function I(t,r,i){var o,a,u=(o=!1,function(t){return function(){o||(o=!0,t.apply(null,arguments))}});if(t===i)throw new TypeError("Promise resolved with itself");if(t[y]===S){var h=null;try{"object"!=typeof i&&"function"!=typeof i||(h=i&&i.then)}catch(g){return u(function(){I(t,!1,g)})(),t}if(r!==E&&i instanceof O&&i.hasOwnProperty(y)&&i.hasOwnProperty(m)&&i[y]!==S)A(i),I(t,i[y],i[m]);else if(r!==E&&"function"==typeof h)try{h.call(i,u(x(t,r)),u(x(t,!1)))}catch(g){u(function(){I(t,!1,g)})()}else{t[y]=r;var f=t[m];if(t[m]=i,t[b]===b&&r===k&&(t[y]=t[_],t[m]=t[w]),r===E&&i instanceof Error){var d=e.currentTask&&e.currentTask.data&&e.currentTask.data.__creationTrace__;d&&s(i,T,{configurable:!0,enumerable:!1,writable:!0,value:d})}for(var p=0;p<f.length;)M(t,f[p++],f[p++],f[p++],f[p++]);if(0==f.length&&r==E){t[y]=0;var v=i;try{throw new Error("Uncaught (in promise): "+((a=i)&&a.toString===Object.prototype.toString?(a.constructor&&a.constructor.name||"")+": "+JSON.stringify(a):a?a.toString():Object.prototype.toString.call(a))+(i&&i.stack?"\n"+i.stack:""))}catch(g){v=g}l&&(v.throwOriginal=!0),v.rejection=i,v.promise=t,v.zone=e.current,v.task=e.currentTask,c.push(v),n.scheduleMicroTask()}}}return t}var C=u("rejectionHandledHandler");function A(t){if(0===t[y]){try{var n=e[C];n&&"function"==typeof n&&n.call(this,{rejection:t[m],promise:t})}catch(i){}t[y]=E;for(var r=0;r<c.length;r++)t===c[r].promise&&c.splice(r,1)}}function M(t,e,n,r,i){A(t);var o=t[y],a=o?"function"==typeof r?r:v:"function"==typeof i?i:g;e.scheduleMicroTask("Promise.then",function(){try{var r=t[m],i=!!n&&b===n[b];i&&(n[w]=r,n[_]=o);var s=e.run(a,void 0,i&&a!==g&&a!==v?[]:[r]);I(n,!0,s)}catch(u){I(n,!1,u)}},n)}var R=function(){},O=function(){function t(e){i(this,t);var n=this;if(!(n instanceof t))throw new Error("Must be an instanceof Promise.");n[y]=S,n[m]=[];try{e&&e(x(n,k),x(n,E))}catch(r){I(n,!1,r)}}return o(t,[{key:Symbol.toStringTag,get:function(){return"Promise"}},{key:Symbol.species,get:function(){return t}},{key:"then",value:function(n,r){var i=this.constructor[Symbol.species];i&&"function"==typeof i||(i=this.constructor||t);var o=new i(R),a=e.current;return this[y]==S?this[m].push(a,o,n,r):M(this,a,o,n,r),o}},{key:"catch",value:function(t){return this.then(null,t)}},{key:"finally",value:function(n){var r=this.constructor[Symbol.species];r&&"function"==typeof r||(r=t);var i=new r(R);i[b]=b;var o=e.current;return this[y]==S?this[m].push(o,i,n,n):M(this,o,i,n,n),i}}],[{key:"toString",value:function(){return"function ZoneAwarePromise() { [native code] }"}},{key:"resolve",value:function(t){return I(new this(null),k,t)}},{key:"reject",value:function(t){return I(new this(null),E,t)}},{key:"race",value:function(t){var e,n,i=new this(function(t,r){e=t,n=r});function o(t){e(t)}function a(t){n(t)}var s,u=r(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;p(c)||(c=this.resolve(c)),c.then(o,a)}}catch(l){u.e(l)}finally{u.f()}return i}},{key:"all",value:function(e){return t.allWithCallback(e)}},{key:"allSettled",value:function(e){return(this&&this.prototype instanceof t?this:t).allWithCallback(e,{thenCallback:function(t){return{status:"fulfilled",value:t}},errorCallback:function(t){return{status:"rejected",reason:t}}})}},{key:"allWithCallback",value:function(t,e){var n,i,o,a=this,s=new this(function(t,e){n=t,i=e}),u=2,c=0,l=[],h=r(t);try{var f=function(){var t=o.value;p(t)||(t=a.resolve(t));var r=c;try{t.then(function(t){l[r]=e?e.thenCallback(t):t,0==--u&&n(l)},function(t){e?(l[r]=e.errorCallback(t),0==--u&&n(l)):i(t)})}catch(s){i(s)}u++,c++};for(h.s();!(o=h.n()).done;)f()}catch(d){h.e(d)}finally{h.f()}return 0==(u-=2)&&n(l),s}}]),t}();O.resolve=O.resolve,O.reject=O.reject,O.race=O.race,O.all=O.all;var P=t[h]=t.Promise;t.Promise=O;var N=u("thenPatched");function D(t){var e=t.prototype,n=a(e,"then");if(!n||!1!==n.writable&&n.configurable){var r=e.then;e[f]=r,t.prototype.then=function(t,e){var n=this;return new O(function(t,e){r.call(n,t,e)}).then(t,e)},t[N]=!0}}return n.patchThen=D,P&&(D(P),L(t,"fetch",function(t){return e=t,function(t,n){var r=e.apply(t,n);if(r instanceof O)return r;var i=r.constructor;return i[N]||D(i),r};var e})),Promise[e.__symbol__("uncaughtPromiseErrors")]=c,O}),Zone.__load_patch("toString",function(t){var e=Function.prototype.toString,n=w("OriginalDelegate"),r=w("Promise"),i=w("Error"),o=function(){if("function"==typeof this){var o=this[n];if(o)return"function"==typeof o?e.call(o):Object.prototype.toString.call(o);if(this===Promise){var a=t[r];if(a)return e.call(a)}if(this===Error){var s=t[i];if(s)return e.call(s)}}return e.call(this)};o[n]=e,Function.prototype.toString=o;var a=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":a.call(this)}});var V=!1;if("undefined"!=typeof window)try{var Z=Object.defineProperty({},"passive",{get:function(){V=!0}});window.addEventListener("test",Z,Z),window.removeEventListener("test",Z,Z)}catch(yt){V=!1}var H={useG:!0},z={},G={},W=new RegExp("^"+y+"(\\w+)(true|false)$"),K=w("propagationStopped");function J(t,e){var n=(e?e(t):t)+g,r=(e?e(t):t)+v,i=y+n,o=y+r;z[t]={},z[t].false=i,z[t].true=o}function Y(t,e,n){var r=n&&n.add||h,i=n&&n.rm||f,o=n&&n.listeners||"eventListeners",a=n&&n.rmAll||"removeAllListeners",s=w(r),c="."+r+":",l=function(t,e,n){if(!t.isRemoved){var r=t.callback;"object"==typeof r&&r.handleEvent&&(t.callback=function(t){return r.handleEvent(t)},t.originalDelegate=r),t.invoke(t,e,[n]);var o=t.options;o&&"object"==typeof o&&o.once&&e[i].call(e,n.type,t.originalDelegate?t.originalDelegate:t.callback,o)}},d=function(e){if(e=e||t.event){var n=this||e.target||t,r=n[z[e.type].false];if(r)if(1===r.length)l(r[0],n,e);else for(var i=r.slice(),o=0;o<i.length&&(!e||!0!==e[K]);o++)l(i[o],n,e)}},p=function(e){if(e=e||t.event){var n=this||e.target||t,r=n[z[e.type].true];if(r)if(1===r.length)l(r[0],n,e);else for(var i=r.slice(),o=0;o<i.length&&(!e||!0!==e[K]);o++)l(i[o],n,e)}};function m(e,n){if(!e)return!1;var l=!0;n&&void 0!==n.useG&&(l=n.useG);var h=n&&n.vh,f=!0;n&&void 0!==n.chkDup&&(f=n.chkDup);var m=!1;n&&void 0!==n.rt&&(m=n.rt);for(var b=e;b&&!b.hasOwnProperty(r);)b=u(b);if(!b&&e[r]&&(b=e),!b)return!1;if(b[s])return!1;var _,S=n&&n.eventNameToString,k={},E=b[s]=b[r],x=b[w(i)]=b[i],T=b[w(o)]=b[o],I=b[w(a)]=b[a];function A(t,e){return!V&&"object"==typeof t&&t?!!t.capture:V&&e?"boolean"==typeof t?{capture:t,passive:!0}:t?"object"==typeof t&&!1!==t.passive?Object.assign(Object.assign({},t),{passive:!0}):t:{passive:!0}:t}n&&n.prepend&&(_=b[w(n.prepend)]=b[n.prepend]);var M=l?function(t){if(!k.isExisting)return E.call(k.target,k.eventName,k.capture?p:d,k.options)}:function(t){return E.call(k.target,k.eventName,t.invoke,k.options)},R=l?function(t){if(!t.isRemoved){var e,n=z[t.eventName];n&&(e=n[t.capture?v:g]);var r=e&&t.target[e];if(r)for(var i=0;i<r.length;i++)if(r[i]===t){r.splice(i,1),t.isRemoved=!0,0===r.length&&(t.allRemoved=!0,t.target[e]=null);break}}if(t.allRemoved)return x.call(t.target,t.eventName,t.capture?p:d,t.options)}:function(t){return x.call(t.target,t.eventName,t.invoke,t.options)},O=n&&n.diff?n.diff:function(t,e){var n=typeof e;return"function"===n&&t.callback===e||"object"===n&&t.originalDelegate===e},P=Zone[w("UNPATCHED_EVENTS")],N=t[w("PASSIVE_EVENTS")],D=function(e,r,i,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return function(){var u=this||t,c=arguments[0];n&&n.transferEventName&&(c=n.transferEventName(c));var d=arguments[1];if(!d)return e.apply(this,arguments);if(C&&"uncaughtException"===c)return e.apply(this,arguments);var p=!1;if("function"!=typeof d){if(!d.handleEvent)return e.apply(this,arguments);p=!0}if(!h||h(e,d,u,arguments)){var y=V&&!!N&&-1!==N.indexOf(c),m=A(arguments[2],y);if(P)for(var b=0;b<P.length;b++)if(c===P[b])return y?e.call(u,c,d,m):e.apply(this,arguments);var w=!!m&&("boolean"==typeof m||m.capture),_=!(!m||"object"!=typeof m)&&m.once,E=Zone.current,x=z[c];x||(J(c,S),x=z[c]);var T,I=x[w?v:g],M=u[I],R=!1;if(M){if(R=!0,f)for(var D=0;D<M.length;D++)if(O(M[D],d))return}else M=u[I]=[];var $=u.constructor.name,L=G[$];L&&(T=L[c]),T||(T=$+r+(S?S(c):c)),k.options=m,_&&(k.options.once=!1),k.target=u,k.capture=w,k.eventName=c,k.isExisting=R;var j=l?H:void 0;j&&(j.taskData=k);var U=E.scheduleEventTask(T,d,j,i,o);return k.target=null,j&&(j.taskData=null),_&&(m.once=!0),(V||"boolean"!=typeof U.options)&&(U.options=m),U.target=u,U.capture=w,U.eventName=c,p&&(U.originalDelegate=d),s?M.unshift(U):M.push(U),a?u:void 0}}};return b[r]=D(E,c,M,R,m),_&&(b.prependListener=D(_,".prependListener:",function(t){return _.call(k.target,k.eventName,t.invoke,k.options)},R,m,!0)),b[i]=function(){var e=this||t,r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));var i=arguments[2],o=!!i&&("boolean"==typeof i||i.capture),a=arguments[1];if(!a)return x.apply(this,arguments);if(!h||h(x,a,e,arguments)){var s,u=z[r];u&&(s=u[o?v:g]);var c=s&&e[s];if(c)for(var l=0;l<c.length;l++){var f=c[l];if(O(f,a)){if(c.splice(l,1),f.isRemoved=!0,0===c.length&&(f.allRemoved=!0,e[s]=null,"string"==typeof r)){var d=y+"ON_PROPERTY"+r;e[d]=null}return f.zone.cancelTask(f),m?e:void 0}}return x.apply(this,arguments)}},b[o]=function(){var e=this||t,r=arguments[0];n&&n.transferEventName&&(r=n.transferEventName(r));for(var i=[],o=X(e,S?S(r):r),a=0;a<o.length;a++){var s=o[a],u=s.originalDelegate?s.originalDelegate:s.callback;i.push(u)}return i},b[a]=function(){var e=this||t,r=arguments[0];if(r){n&&n.transferEventName&&(r=n.transferEventName(r));var o=z[r];if(o){var s=o.false,u=o.true,c=e[s],l=e[u];if(c)for(var h=c.slice(),f=0;f<h.length;f++){var d=h[f],p=d.originalDelegate?d.originalDelegate:d.callback;this[i].call(this,r,p,d.options)}if(l)for(var v=l.slice(),g=0;g<v.length;g++){var y=v[g],b=y.originalDelegate?y.originalDelegate:y.callback;this[i].call(this,r,b,y.options)}}}else{for(var w=Object.keys(e),_=0;_<w.length;_++){var S=w[_],k=W.exec(S),E=k&&k[1];E&&"removeListener"!==E&&this[a].call(this,E)}this[a].call(this,"removeListener")}if(m)return this},U(b[r],E),U(b[i],x),I&&U(b[a],I),T&&U(b[o],T),!0}for(var b=[],_=0;_<e.length;_++)b[_]=m(e[_],n);return b}function X(t,e){if(!e){var n=[];for(var r in t){var i=W.exec(r),o=i&&i[1];if(o&&(!e||o===e)){var a=t[r];if(a)for(var s=0;s<a.length;s++)n.push(a[s])}}return n}var u=z[e];u||(J(e),u=z[e]);var c=t[u.false],l=t[u.true];return c?l?c.concat(l):c.slice():l?l.slice():[]}function Q(t,e){var n=t.Event;n&&n.prototype&&e.patchMethod(n.prototype,"stopImmediatePropagation",function(t){return function(e,n){e[K]=!0,t&&t.apply(e,n)}})}function tt(t,e,n,r,i){var o=Zone.__symbol__(r);if(!e[o]){var a=e[o]=e[r];e[r]=function(o,s,u){return s&&s.prototype&&i.forEach(function(e){var i="".concat(n,".").concat(r,"::")+e,o=s.prototype;if(o.hasOwnProperty(e)){var a=t.ObjectGetOwnPropertyDescriptor(o,e);a&&a.value?(a.value=t.wrapWithCurrentZone(a.value,i),t._redefineProperty(s.prototype,e,a)):o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],i))}else o[e]&&(o[e]=t.wrapWithCurrentZone(o[e],i))}),a.call(e,o,s,u)},t.attachOriginToPatched(e[r],a)}}var et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],nt=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],rt=["load"],it=["blur","error","focus","load","resize","scroll","messageerror"],ot=["bounce","finish","start"],at=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],st=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],ut=["close","error","open","message"],ct=["error","message"],lt=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function ht(t,e,n){if(!n||0===n.length)return e;var r=n.filter(function(e){return e.target===t});if(!r||0===r.length)return e;var i=r[0].ignoreProperties;return e.filter(function(t){return-1===i.indexOf(t)})}function ft(t,e,n,r){t&&N(t,ht(t,e,n),r)}function dt(t,e){if((!C||M)&&!Zone[t.symbol("patchEvents")]){var n="undefined"!=typeof WebSocket,r=e.__Zone_ignore_on_properties;if(A){var i=window,o=function(){try{var t=S.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(e){}return!1}()?[{target:i,ignoreProperties:["error"]}]:[];ft(i,lt.concat(["messageerror"]),r?r.concat(o):r,u(i)),ft(Document.prototype,lt,r),void 0!==i.SVGElement&&ft(i.SVGElement.prototype,lt,r),ft(Element.prototype,lt,r),ft(HTMLElement.prototype,lt,r),ft(HTMLMediaElement.prototype,nt,r),ft(HTMLFrameSetElement.prototype,et.concat(it),r),ft(HTMLBodyElement.prototype,et.concat(it),r),ft(HTMLFrameElement.prototype,rt,r),ft(HTMLIFrameElement.prototype,rt,r);var a=i.HTMLMarqueeElement;a&&ft(a.prototype,ot,r);var s=i.Worker;s&&ft(s.prototype,ct,r)}var c=e.XMLHttpRequest;c&&ft(c.prototype,at,r);var l=e.XMLHttpRequestEventTarget;l&&ft(l&&l.prototype,at,r),"undefined"!=typeof IDBIndex&&(ft(IDBIndex.prototype,st,r),ft(IDBRequest.prototype,st,r),ft(IDBOpenDBRequest.prototype,st,r),ft(IDBDatabase.prototype,st,r),ft(IDBTransaction.prototype,st,r),ft(IDBCursor.prototype,st,r)),n&&ft(WebSocket.prototype,ut,r)}}Zone.__load_patch("util",function(t,e,n){n.patchOnProperties=N,n.patchMethod=L,n.bindArguments=x,n.patchMacroTask=j;var r=e.__symbol__("BLACK_LISTED_EVENTS"),i=e.__symbol__("UNPATCHED_EVENTS");t[i]&&(t[r]=t[i]),t[r]&&(e[r]=e[i]=t[r]),n.patchEventPrototype=Q,n.patchEventTarget=Y,n.isIEOrEdge=q,n.ObjectDefineProperty=s,n.ObjectGetOwnPropertyDescriptor=a,n.ObjectCreate=c,n.ArraySlice=l,n.patchClass=$,n.wrapWithCurrentZone=m,n.filterProperties=ht,n.attachOriginToPatched=U,n._redefineProperty=Object.defineProperty,n.patchCallbacks=tt,n.getGlobalObjects=function(){return{globalSources:G,zoneSymbolEventNames:z,eventNames:lt,isBrowser:A,isMix:M,isNode:C,TRUE_STR:v,FALSE_STR:g,ZONE_SYMBOL_PREFIX:y,ADD_EVENT_LISTENER_STR:h,REMOVE_EVENT_LISTENER_STR:f}}});var pt=w("zoneTask");function vt(t,e,n,r){var i=null,o=null;n+=r;var a={};function s(e){var n=e.data;return n.args[0]=function(){return e.invoke.apply(this,arguments)},n.handleId=i.apply(t,n.args),e}function u(e){return o.call(t,e.data.handleId)}i=L(t,e+=r,function(n){return function(i,o){if("function"==typeof o[0]){var c={isPeriodic:"Interval"===r,delay:"Timeout"===r||"Interval"===r?o[1]||0:void 0,args:o},l=o[0];o[0]=function(){try{return l.apply(this,arguments)}finally{c.isPeriodic||("number"==typeof c.handleId?delete a[c.handleId]:c.handleId&&(c.handleId[pt]=null))}};var h=b(e,o[0],c,s,u);if(!h)return h;var f=h.data.handleId;return"number"==typeof f?a[f]=h:f&&(f[pt]=h),f&&f.ref&&f.unref&&"function"==typeof f.ref&&"function"==typeof f.unref&&(h.ref=f.ref.bind(f),h.unref=f.unref.bind(f)),"number"==typeof f||f?f:h}return n.apply(t,o)}}),o=L(t,n,function(e){return function(n,r){var i,o=r[0];"number"==typeof o?i=a[o]:(i=o&&o[pt])||(i=o),i&&"string"==typeof i.type?"notScheduled"!==i.state&&(i.cancelFn&&i.data.isPeriodic||0===i.runCount)&&("number"==typeof o?delete a[o]:o&&(o[pt]=null),i.zone.cancelTask(i)):e.apply(t,r)}})}function gt(t,e){if(!Zone[e.symbol("patchEventTarget")]){for(var n=e.getGlobalObjects(),r=n.eventNames,i=n.zoneSymbolEventNames,o=n.TRUE_STR,a=n.FALSE_STR,s=n.ZONE_SYMBOL_PREFIX,u=0;u<r.length;u++){var c=r[u],l=s+(c+a),h=s+(c+o);i[c]={},i[c][a]=l,i[c][o]=h}var f=t.EventTarget;if(f&&f.prototype)return e.patchEventTarget(t,[f&&f.prototype]),!0}}Zone.__load_patch("legacy",function(t){var e=t[Zone.__symbol__("legacyPatch")];e&&e()}),Zone.__load_patch("queueMicrotask",function(t,e,n){n.patchMethod(t,"queueMicrotask",function(t){return function(t,n){e.current.scheduleMicroTask("queueMicrotask",n[0])}})}),Zone.__load_patch("timers",function(t){var e="set",n="clear";vt(t,e,n,"Timeout"),vt(t,e,n,"Interval"),vt(t,e,n,"Immediate")}),Zone.__load_patch("requestAnimationFrame",function(t){vt(t,"request","cancel","AnimationFrame"),vt(t,"mozRequest","mozCancel","AnimationFrame"),vt(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",function(t,e){for(var n=["alert","prompt","confirm"],r=0;r<n.length;r++)L(t,n[r],function(n,r,i){return function(r,o){return e.current.run(n,t,o,i)}})}),Zone.__load_patch("EventTarget",function(t,e,n){!function(t,e){e.patchEventPrototype(t,e)}(t,n),gt(t,n);var r=t.XMLHttpRequestEventTarget;r&&r.prototype&&n.patchEventTarget(t,[r.prototype])}),Zone.__load_patch("MutationObserver",function(t,e,n){$("MutationObserver"),$("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",function(t,e,n){$("IntersectionObserver")}),Zone.__load_patch("FileReader",function(t,e,n){$("FileReader")}),Zone.__load_patch("on_property",function(t,e,n){dt(n,t)}),Zone.__load_patch("customElements",function(t,e,n){!function(t,e){var n=e.getGlobalObjects();(n.isBrowser||n.isMix)&&t.customElements&&"customElements"in t&&e.patchCallbacks(e,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,n)}),Zone.__load_patch("XHR",function(t,e){!function(t){var u=t.XMLHttpRequest;if(u){var c=u.prototype,l=c[d],h=c[p];if(!l){var f=t.XMLHttpRequestEventTarget;if(f){var v=f.prototype;l=v[d],h=v[p]}}var g="readystatechange",y="scheduled",m=L(c,"open",function(){return function(t,e){return t[r]=0==e[2],t[a]=e[1],m.apply(t,e)}}),_=w("fetchTaskAborting"),S=w("fetchTaskScheduling"),k=L(c,"send",function(){return function(t,n){if(!0===e.current[S])return k.apply(t,n);if(t[r])return k.apply(t,n);var i={target:t,url:t[a],isPeriodic:!1,args:n,aborted:!1},o=b("XMLHttpRequest.send",T,i,x,I);t&&!0===t[s]&&!i.aborted&&o.state===y&&o.invoke()}}),E=L(c,"abort",function(){return function(t,r){var i=t[n];if(i&&"string"==typeof i.type){if(null==i.cancelFn||i.data&&i.data.aborted)return;i.zone.cancelTask(i)}else if(!0===e.current[_])return E.apply(t,r)}})}function x(t){var r=t.data,a=r.target;a[o]=!1,a[s]=!1;var u=a[i];l||(l=a[d],h=a[p]),u&&h.call(a,g,u);var c=a[i]=function(){if(a.readyState===a.DONE)if(!r.aborted&&a[o]&&t.state===y){var n=a[e.__symbol__("loadfalse")];if(0!==a.status&&n&&n.length>0){var i=t.invoke;t.invoke=function(){for(var n=a[e.__symbol__("loadfalse")],o=0;o<n.length;o++)n[o]===t&&n.splice(o,1);r.aborted||t.state!==y||i.call(t)},n.push(t)}else t.invoke()}else r.aborted||!1!==a[o]||(a[s]=!0)};return l.call(a,g,c),a[n]||(a[n]=t),k.apply(a,r.args),a[o]=!0,t}function T(){}function I(t){var e=t.data;return e.aborted=!0,E.apply(e.target,e.args)}}(t);var n=w("xhrTask"),r=w("xhrSync"),i=w("xhrListener"),o=w("xhrScheduled"),a=w("xhrURL"),s=w("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",function(t){t.navigator&&t.navigator.geolocation&&function(t,e){for(var n=t.constructor.name,r=function(r){var i=e[r],o=t[i];if(o){if(!T(a(t,i)))return"continue";t[i]=function(t){var e=function(){return t.apply(this,x(arguments,n+"."+i))};return U(e,t),e}(o)}},i=0;i<e.length;i++)r(i)}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",function(t,e){function n(e){return function(n){X(t,e).forEach(function(r){var i=t.PromiseRejectionEvent;if(i){var o=new i(e,{promise:n.promise,reason:n.rejection});r.invoke(o)}})}}t.PromiseRejectionEvent&&(e[w("unhandledPromiseRejectionHandler")]=n("unhandledrejection"),e[w("rejectionHandledHandler")]=n("rejectionhandled"))})},57431:function(){angular.module("castifyExt.audioContextPool",[]).factory("audioContextPool",["$window",function(t){var e=[];return{acquire:function(){return e.length?e.pop():new t.AudioContext({latencyHint:"playback"})},release:function(t){e.push(t)}}}])},66316:function(){angular.module("castifyExt.fileNameGenerator",["w69b.filesHelper","w69b.uuid"]).factory("fileNameGenerator",["uuid","filesHelper",function(t,e){return function(n,r){return n||(n=""),r||(r=""),function i(){var o=n+t()+r;return e.getFileEntryByPath(o).then(function(){return i()},function(){return o})}()}}])},30863:function(){angular.module("castifyExt.hdpiTool",[]).factory("hdpiTool",["$window",function(t){var e={};return e.devicePixelRatio=t.devicePixelRatio,e.toPhysicalResolution=function(t){return{width:Math.floor(t.width*e.devicePixelRatio),height:Math.floor(t.height*e.devicePixelRatio)}},e.toCssResolution=function(t){return{width:Math.round(t.width/e.devicePixelRatio),height:Math.round(t.height/e.devicePixelRatio)}},e.getScreenCssResolution=function(){return{width:t.screen.width,height:t.screen.height}},e.scaleResolution=function(t,e){var n=Math.min(e.height/t.height,e.width/t.width,1);return{width:Math.floor(t.width*n),height:Math.floor(t.height*n)}},e}])},33268:function(){angular.module("castifyExt.optionalPermissions",["w69b.chromePermissions"]).factory("optionalPermissions",["chromePermissions",function(t){var e={},n={permissions:["tabCapture","webNavigation"],origins:["<all_urls>"]},r={permissions:["tabCapture","webNavigation"],origins:[]};function i(t){return t&&(!t.draw||t.draw&&!t.draw.showToolbox)?r:n}return n.permissions.push("activeTab"),r.permissions.push("activeTab"),e.hasLiteTabPermissions=function(){return t.contains(r)},e.hasTabPermissions=function(e){var n=i(e);return t.contains({permissions:n.permissions})},e.requestTabPermissions=function(e){return t.request(i(e))},e}])},31107:function(){angular.module("castifyExt.resizeTab",["w69b.chromeTabs","w69b.chromeWindows"]).factory("resizeTab",["chromeTabs","chromeWindows","$q",function(t,e,n){return function(r,i,o,a){function s(){return t.get(r).then(function(t){return u=t})}var u,c=0,l=0;function h(){return e.get(u.windowId).then(function(t){return"normal"!==t.state&&!1===a?n.reject():e.update(u.windowId,{width:i+(t.width-u.width)+c,height:o+(t.height-u.height)+l,state:"normal"})})}function f(t){return t.width!=i||t.height!=o?(c+=i-t.width,l+=o-t.height,h().then(s)):t}return s().then(h).then(s).then(f).then(f).catch(function(){return u})}}])},16013:function(){angular.module("castifyExt.userNotifications",["castifyExt.simpleBgServiceConsumer","castifyExt.chromeEventPublisher"]).factory("userNotifications",["simpleBgServiceConsumer",function(t){return t("userNotifications",["loadOrFetch","seen","clicked"])}])},40328:function(){angular.module("castifyExt.youtubeUtils",["castifyExt.castifyAuth"]).factory("youtubeUtils",["$http","$q",function(t,e){var n="https://www.googleapis.com/youtube/v3/videos",r={};function i(t){var n=t.data.items;return n.length?n[0]:e.reject("not found on youtube")}return r.getPrivacy=function(r,o){return function(e,r){return t.get(n,angular.extend({params:{id:e,part:"status,snippet"}},{youtubeAuth:r})).then(i)}(r,o).then(function(t){return o!==t.snippet.channelId?e.reject():t.status.privacyStatus})},r.getLink=function(t){return"https://youtu.be/"+t},r.setPrivacy=function(e,r,i){return function(e,r,i){return i=angular.extend({id:e},i),t.put(n,i,angular.extend({params:{part:"status"}},{youtubeAuth:r})).then(function(t){return t.data})}(e,i,{status:{privacyStatus:r}})},r}])},60299:function(){angular.module("w69b.asyncResponse",[]).factory("asyncResponse",["$q",function(t){return{createSender:function(e){var n={},r=0,i={};return n.sendWithResponse=function(n,o){var a=++r,s=t.defer();return i[a]=s,e({type:n,data:o,msgId:a}),s.promise},n.send=function(t,n){e({type:t,data:n})},n.handleResult=function(t){if(t&&"result"===t.type){var e=i[t.msgId];return delete i[t.msgId],t.hasOwnProperty("error")||t.isError?e.reject(t.error):e.resolve(t.data),!0}return!1},n},createRespond:function(e){return function(n,r){t.when(n).then(function(t){e({type:"result",msgId:r.msgId,data:t})},function(t){e({type:"result",msgId:r.msgId,error:t,isError:!0})})}}}}])},2811:function(){angular.module("w69b.chromePermissions",["w69b.promiseTool"]).factory("chromePermissions",["promiseTool",function(t){var e=window.chrome&&window.chrome.permissions,n={};return e?(n.contains=t.wrapChromeError(e.contains,e),n.request=t.wrapChromeError(e.request,e),n.remove=t.wrapChromeError(e.remove,e),n.getAll=t.wrapChromeError(e.getAll,e),n):n}])},83982:function(){angular.module("w69b.chromeSystem",["w69b.promiseTool"]).factory("chromeSystem",["promiseTool",function(t){var e=window.chrome&&window.chrome.system,n={};return e?(e.cpu&&(n.cpu={getInfo:t.wrapChromeError(e.cpu.getInfo,e.cpu)}),e.memory&&(n.memory={getInfo:t.wrapChromeError(e.memory.getInfo,e.memory)}),n):n}])},61371:function(){angular.module("w69b.chromeCommands",["w69b.promiseTool"]).factory("chromeCommands",["promiseTool",function(t){var e={};return e.getAll=t.wrapChromeError(chrome.commands.getAll,chrome.commands),e.onCommand=chrome.commands.onCommand,e}])},49308:function(){angular.module("w69b.chromeWindows",[]).factory("chromeWindows",["promiseTool",function(t){var e={};return e.get=t.wrapChromeError(chrome.windows.get,chrome.windows),e.create=t.wrapChromeError(chrome.windows.create,chrome.windows),e.update=t.wrapChromeError(chrome.windows.update,chrome.windows),e.getCurrent=t.wrapChromeError(chrome.windows.getCurrent,chrome.windows),e.remove=t.wrapChromeError(chrome.windows.remove,chrome.windows),e.onRemoved=chrome.windows.onRemoved,e}])},41182:function(){angular.module("w69b.googleHttpAuthInterceptor",[]).provider("googleHttpAuthInterceptor",function(){var t=0,e="googleauth";this.enableAuthAutoRetry=function(e){t=e?1:0},this.setAuthProvider=function(t){e=t},this.$get=["$q","$log","$injector",function(n,r,i){var o,a;function s(t){return(a||(a=i.get(e)),a).getAuthToken(t)}return{request:function(t){return t.googleAuth?s({scopes:t.googleAuthScopes}).then(function(e){return t.headers=angular.extend(t.headers||{},function(t){return{Authorization:"Bearer "+t}}(e)),t},function(t){return r.warn("googleAuthHttpInterceptor: no token, aborting request",t),n.reject(t&&"status"in t?t:"googleAuthFailed")}):t},responseError:function(e){if(401==e.status&&e.config.googleAuth&&!1!==e.config.authAutoRetry){r.debug("googleHttpAuthInterceptor: auth error detected",e);var a=angular.copy(e.config);if(a.authRetryCount?a.authRetryCount++:a.authRetryCount=1,a.authRetryCount<=t)return s({scopes:a.googleAuthScopes,validate:!0}).then(function(){return r.debug("googleAuthHttpInterceptor: auto-retrying with validated token"),(o||(o=i.get("$http")),o)(a)})}return n.reject(e)}}}]})},8822:function(){angular.module("w69b.throttle",[]).factory("throttle",["$timeout",function(t){return function(e,n,r){var i,o,a;r=!1!==r;var s=function(){return a=angular.copy(arguments,[]),o=function(){return i=null,o=null,e.apply(null,a)},r?(i&&t.cancel(i),i=t(o,n)):i||(i=t(o,n)),i};return s.flush=function(){i&&(t.cancel(i),o())},s}}])},55415:function(t){"use strict";t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},42063:function(t){"use strict";t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},42236:function(t){"use strict";t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},61930:function(t){"use strict";t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},17519:function(t){"use strict";t.exports={i8:"6.5.4"}},873:function(t){"use strict";t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},46601:function(){},2363:function(){},96419:function(){},56353:function(){},24654:function(){}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.hmd=function(t){return(t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){"use strict";var t=n(85391),e=n(75563),r=n(3280),i=n(65951),o=n(74408),a=n(13118),s=n(50354);function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,s.Z)(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||(0,s.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=n(3010);function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(45378);var f=n(46534),d=n(59151),p=n(47351);function v(t,e,n){return(v=(0,p.Z)()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&(0,d.Z)(i,n.prototype),i}).apply(null,arguments)}function g(t){var n="function"==typeof Map?new Map:void 0;return(g=function(t){if(null===t||!function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return v(t,arguments,(0,e.Z)(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,d.Z)(r,t)})(t)}var y=n(29737),m=n(96729),b=n(63438),w=n(57814),_=n(20655),S=n(91061);function k(){return new m.xQ}function E(){return function(t){return(0,S.x)()((e=k,function(t){var n;n="function"==typeof e?e:function(){return e};var r=Object.create(t,_.N);return r.source=t,r.subjectFactory=n,r})(t));var e}}function x(t){for(var e in t)if(t[e]===x)return e;throw Error("Could not find renamed property on target object.")}function T(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(T).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return"".concat(t.overriddenName);if(t.name)return"".concat(t.name);var e=t.toString();if(null==e)return""+e;var n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function I(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}var C=x({__forward_ref__:x});function A(t){return t.__forward_ref__=A,t.toString=function(){return T(this())},t}function M(t){return R(t)?t():t}function R(t){return"function"==typeof t&&t.hasOwnProperty(C)&&t.__forward_ref__===A}var O=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,function(t,e){var n=t?"NG0".concat(t,": "):"";return"".concat(n).concat(e)}(t,r))).code=t,o}return n}(g(Error));function P(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():function(t){return"string"==typeof t?t:null==t?"":String(t)}(t)}function N(t,e){var n=e?" in ".concat(e):"";throw new O("201","No provider for ".concat(P(t)," found").concat(n))}function D(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $(t){return{providers:t.providers||[],imports:t.imports||[]}}function L(t){return j(t,B)||j(t,V)}function j(t,e){return t.hasOwnProperty(e)?t[e]:null}function U(t){return t&&(t.hasOwnProperty(q)||t.hasOwnProperty(Z))?t[q]:null}var F,B=x({"\u0275prov":x}),q=x({"\u0275inj":x}),V=x({ngInjectableDef:x}),Z=x({ngInjectorDef:x}),H=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function z(){return F}function G(t){var e=F;return F=t,e}function W(t,e,n){var r=L(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&H.Optional?null:void 0!==e?e:void N(T(t),"Injector")}function K(t){return{toString:t}.toString()}var J=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Y=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({}),X="undefined"!=typeof globalThis&&globalThis,Q="undefined"!=typeof window&&window,tt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,et="undefined"!=typeof global&&global,nt=X||et||Q||tt,rt={},it=[],ot=x({"\u0275cmp":x}),at=x({"\u0275dir":x}),st=x({"\u0275pipe":x}),ut=x({"\u0275mod":x}),ct=x({"\u0275loc":x}),lt=x({"\u0275fac":x}),ht=x({__NG_ELEMENT_ID__:x}),ft=0;function dt(t){return K(function(){var e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===J.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||it,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Y.Emulated,id:"c",styles:t.styles||it,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=ft++,n.inputs=mt(t.inputs,e),n.outputs=mt(t.outputs),i&&i.forEach(function(t){return t(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(pt)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(vt)}:null,n})}function pt(t){return wt(t)||function(t){return t[at]||null}(t)}function vt(t){return function(t){return t[st]||null}(t)}var gt={};function yt(t){return K(function(){var e={type:t.type,bootstrap:t.bootstrap||it,declarations:t.declarations||it,imports:t.imports||it,exports:t.exports||it,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(gt[t.id]=t.type),e})}function mt(t,e){if(null==t)return rt;var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}var bt=dt;function wt(t){return t[ot]||null}function _t(t,e){var n=t[ut]||null;if(!n&&!0===e)throw new Error("Type ".concat(T(t)," does not have '\u0275mod' property."));return n}var St=10;function kt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Et(t){return Array.isArray(t)&&!0===t[1]}function xt(t){return 0!=(8&t.flags)}function Tt(t){return 2==(2&t.flags)}function It(t){return null!==t.template}function Ct(t,e){return t.hasOwnProperty(lt)?t[lt]:null}var At=function(){function t(e,n,r){(0,i.Z)(this,t),this.previousValue=e,this.currentValue=n,this.firstChange=r}return(0,r.Z)(t,[{key:"isFirstChange",value:function(){return this.firstChange}}]),t}();function Mt(){var t=Ot(this),e=null==t?void 0:t.current;if(e){var n=t.previous;if(n===rt)t.previous=e;else for(var r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Rt(t,e,n,r){var i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:rt,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new At(u&&u.currentValue,e,a===rt),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}var Pt=void 0;function Nt(t){return!!t.listen}var Dt={createRenderer:function(t,e){return void 0!==Pt?Pt:"undefined"!=typeof document?document:void 0}};function $t(t){for(;Array.isArray(t);)t=t[0];return t}function Lt(t,e){return $t(e[t.index])}function jt(t,e){var n=e[t];return kt(n)?n:n[0]}function Ut(t){return 128==(128&t[2])}function Ft(t,e){return null==e?null:t[e]}function Bt(t){t[18]=0}function qt(t,e){t[5]+=e;for(var n=t,r=t[3];null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}var Vt={lFrame:oe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Zt(){return Vt.bindingsEnabled}function Ht(){return Vt.lFrame.lView}function zt(){return Vt.lFrame.tView}function Gt(){for(var t=Wt();null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return Vt.lFrame.currentTNode}function Kt(t,e){var n=Vt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return Vt.lFrame.isParent}function Yt(){return Vt.isInCheckNoChangesMode}function Xt(t){Vt.isInCheckNoChangesMode=t}function Qt(t){Vt.lFrame.currentDirectiveIndex=t}function te(t){Vt.lFrame.currentQueryIndex=t}function ee(t){var e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ne(t,e,n){if(n&H.SkipSelf){for(var r=e,i=t;!(null!==(r=r.parent)||n&H.Host||null===(r=ee(i))||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}var o=Vt.lFrame=ie();return o.currentTNode=e,o.lView=t,!0}function re(t){var e=ie(),n=t[1];Vt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ie(){var t=Vt.lFrame,e=null===t?null:t.child;return null===e?oe(t):e}function oe(t){var e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){var t=Vt.lFrame;return Vt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var se=ae;function ue(){var t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ce(t){Vt.lFrame.selectedIndex=t}function le(t,e){for(var n=e.directiveStart,r=e.directiveEnd;n<r;n++){var i=t.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function he(t,e,n){pe(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&pe(t,e,n,r)}function de(t,e){var n=t[2];(3&n)===e&&(n&=2047,t[2]=n+=1)}function pe(t,e,n,r){for(var i=null!=r?r:-1,o=e.length-1,a=0,s=void 0!==r?65535&t[18]:0;s<o;s++)if("number"==typeof e[s+1]){if(a=e[s],null!=r&&a>=r)break}else e[s]<0&&(t[18]+=65536),(a<i||-1==i)&&(ve(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function ve(t,e,n,r){var i=n[r]<0,o=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}var ge=-1,ye=function t(e,n,r){(0,i.Z)(this,t),this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function me(t,e,n){for(var r=Nt(t),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?t.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else{var c=o,l=n[++i];64===c.charCodeAt(0)?r&&t.setProperty(e,c,l):r?t.setAttribute(e,c,l):e.setAttribute(c,l),i++}}return i}function be(t){return 3===t||4===t||6===t}function we(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else for(var n=-1,r=0;r<e.length;r++){var i=e[r];"number"==typeof i?n=i:0===n||_e(t,n,i,null,-1===n||2===n?e[++r]:null)}return t}function _e(t,e,n,r,i){var o=0,a=t.length;if(-1===e)a=-1;else for(;o<t.length;){var s=t[o++];if("number"==typeof s){if(s===e){a=-1;break}if(s>e){a=o-1;break}}}for(;o<t.length;){var u=t[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Se(t){return t!==ge}function ke(t){return 32767&t}function Ee(t,e){for(var n=t>>16,r=e;n>0;)r=r[15],n--;return r}var xe=!0;function Te(t){var e=xe;return xe=t,e}var Ie=0;function Ce(t,e){var n=Me(t,e);if(-1!==n)return n;var r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ae(r.data,t),Ae(e,null),Ae(r.blueprint,null));var i=Re(t,e),o=t.injectorIndex;if(Se(i))for(var a=ke(i),s=Ee(i,e),u=s[1].data,c=0;c<8;c++)e[o+c]=s[a+c]|u[a+c];return e[o+8]=i,o}function Ae(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Me(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;for(var n=0,r=null,i=e;null!==i;){var o=i[1],a=o.type;if(null===(r=2===a?o.declTNode:1===a?i[6]:null))return ge;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ge}function Oe(t,e,n){!function(t,e,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ht)&&(r=n[ht]),null==r&&(r=n[ht]=Ie++);var i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Pe(t,e,n){if(n&H.Optional)return t;N(e,"NodeInjector")}function Ne(t,e,n,r){if(n&H.Optional&&void 0===r&&(r=null),0==(n&(H.Self|H.Host))){var i=t[9],o=G(void 0);try{return i?i.get(e,r,n&H.Optional):W(e,r,n&H.Optional)}finally{G(o)}}return Pe(r,e,n)}function De(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==t){var o=Fe(n);if("function"==typeof o){if(!ne(e,t,r))return r&H.Host?Pe(i,n,r):Ne(e,n,r,i);try{var a=o(r);if(null!=a||r&H.Optional)return a;N(n)}finally{se()}}else if("number"==typeof o){var s=null,u=Me(t,e),c=ge,l=r&H.Host?e[16][6]:null;for((-1===u||r&H.SkipSelf)&&((c=-1===u?Re(t,e):e[u+8])!==ge&&qe(r,!1)?(s=e[1],u=ke(c),e=Ee(c,e)):u=-1);-1!==u;){var h=e[1];if(Be(o,u,h.data)){var f=je(u,e,n,s,r,l);if(f!==$e)return f}(c=e[u+8])!==ge&&qe(r,e[1].data[u+8]===l)&&Be(o,u,e)?(s=h,u=ke(c),e=Ee(c,e)):u=-1}}}return Ne(e,n,r,i)}var $e={};function Le(){return new Ve(Gt(),Ht())}function je(t,e,n,r,i,o){var a=e[1],s=a.data[t+8],u=function(t,e,n,r,i){for(var o=t.providerIndexes,a=e.data,s=1048575&o,u=t.directiveStart,c=o>>20,l=i?s+c:t.directiveEnd,h=r?s:s+c;h<l;h++){var f=a[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=a[u];if(d&&It(d)&&d.type===n)return u}return null}(s,a,n,null==r?Tt(s)&&xe:r!=a&&0!=(3&s.type),i&H.Host&&o===s);return null!==u?Ue(e,a,u,s):$e}function Ue(t,e,n,r){var i=t[n],o=e.data;if(i instanceof ye){var a=i;a.resolving&&function(t,e){throw new O("200","Circular dependency in DI detected for ".concat(t).concat(""))}(P(o[n]));var s=Te(a.canSeeViewProviders);a.resolving=!0;var u=a.injectImpl?G(a.injectImpl):null;ne(t,r,H.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){var r,i=e.type.prototype,o=i.ngOnInit,a=i.ngDoCheck;if(i.ngOnChanges){var s=((r=e).type.prototype.ngOnChanges&&(r.setInput=Rt),Mt);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,a))}(n,o[n],e)}finally{null!==u&&G(u),Te(s),a.resolving=!1,se()}}return i}function Fe(t){if("string"==typeof t)return t.charCodeAt(0)||0;var e=t.hasOwnProperty(ht)?t[ht]:void 0;return"number"==typeof e?e>=0?255&e:Le:e}function Be(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function qe(t,e){return!(t&H.Self||t&H.Host&&e)}var Ve=function(){function t(e,n){(0,i.Z)(this,t),this._tNode=e,this._lView=n}return(0,r.Z)(t,[{key:"get",value:function(t,e){return De(this._tNode,this._lView,t,void 0,e)}}]),t}();function Ze(t){return K(function(){for(var e=t.prototype.constructor,n=e[lt]||He(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;i&&i!==r;){var o=i[lt]||He(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(t){return new t}})}function He(t){return R(t)?function(){var e=He(M(t));return e&&e()}:Ct(t)}var ze="__parameters__";function Ge(t,e,n){return K(function(){var r=function(t){return function(){if(t){var e=t.apply(void 0,arguments);for(var n in e)this[n]=e[n]}}}(e);function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this instanceof i)return r.apply(this,e),this;var o=v(i,e);return a.annotation=o,a;function a(t,e,n){for(var r=t.hasOwnProperty(ze)?t[ze]:Object.defineProperty(t,ze,{value:[]})[ze];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var We=function(){function t(e,n){(0,i.Z)(this,t),this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=D({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return(0,r.Z)(t,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),t}(),Ke=Function;function Je(t,e){t.forEach(function(t){return Array.isArray(t)?Je(t,e):e(t)})}function Ye(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Xe(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Qe={},tn=/\n/gm,en="__source",nn=x({provide:String,useValue:x}),rn=void 0;function on(t){var e=rn;return rn=t,e}function an(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;if(void 0===rn)throw new Error("inject() must be called from an injection context");return null===rn?W(t,void 0,e):rn.get(t,e&H.Optional?null:void 0,e)}function sn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default;return(z()||an)(M(t),e)}var un=sn;function cn(t){for(var e=[],n=0;n<t.length;n++){var r=M(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=H.Default,a=0;a<r.length;a++){var s=r[a],u=s.__NG_DI_FLAG__;"number"==typeof u?-1===u?i=s.token:o|=u:i=s}e.push(sn(i,o))}else e.push(sn(r))}return e}function ln(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}function hn(t,e,n,r){var i=t.ngTempTokenPath;throw e[en]&&i.unshift(e[en]),t.message=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;var i=T(e);if(Array.isArray(e))i=e.map(T).join(" -> ");else if("object"==typeof e){var o=[];for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):T(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(t.replace(tn,"\n  "))}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}var fn=ln(Ge("Inject",function(t){return{token:t}}),-1),dn=ln(Ge("Optional"),8),pn=ln(Ge("SkipSelf"),4);function vn(t,e){t.__ngContext__=e}function gn(t){var e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function yn(t){return t.ngOriginalError}function mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];t.error.apply(t,n)}var bn=function(){function t(){(0,i.Z)(this,t),this._console=console}return(0,r.Z)(t,[{key:"handleError",value:function(t){var e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t&&t.ngErrorLogger||mn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(yn(t)):null}},{key:"_findOriginalError",value:function(t){for(var e=t&&yn(t);e&&yn(e);)e=yn(e);return e||null}}]),t}(),wn=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(nt)}();function _n(t){return t instanceof Function?t():t}var Sn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function kn(t,e){return(void 0)(t,e)}function En(t){var e=t[3];return Et(e)?e[3]:e}function xn(t){return In(t[13])}function Tn(t){return In(t[4])}function In(t){for(;null!==t&&!Et(t);)t=t[4];return t}function Cn(t,e,n,r,i){if(null!=r){var o,a=!1;Et(r)?o=r:kt(r)&&(a=!0,r=r[0]);var s=$t(r);0===t&&null!==n?null==i?Dn(e,n,s):Nn(e,n,s,i||null,!0):1===t&&null!==n?Nn(e,n,s,i||null,!0):2===t?function(t,e,n){var r=Ln(t,e);r&&function(t,e,n,r){Nt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,s,a):3===t&&e.destroyNode(s),null!=o&&function(t,e,n,r,i){var o=n[7];o!==$t(n)&&Cn(e,t,r,o,i);for(var a=St;a<n.length;a++){var s=n[a];Vn(s[1],s,t,e,r,o)}}(e,t,o,n,i)}}function An(t,e,n){return Nt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Mn(t,e){var n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,qt(i,-1)),n.splice(r,1)}function Rn(t,e){if(!(t.length<=St)){var n,r=St+e,i=t[r];if(i){var o=i[17];null!==o&&o!==t&&Mn(o,i),e>0&&(t[r-1][4]=i[4]);var a=Xe(t,St+e);Vn(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var s=a[19];null!==s&&s.detachView(a[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function On(t,e){if(!(256&e[2])){var n=e[11];Nt(n)&&n.destroyNode&&Vn(t,e,n,3,null,null),function(t){var e=t[13];if(!e)return Pn(t[1],t);for(;e;){var n=null;if(kt(e))n=e[13];else{var r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)kt(e)&&Pn(e[1],e),e=e[3];null===e&&(e=t),kt(e)&&Pn(e[1],e),n=e&&e[4]}e=n}}(e)}}function Pn(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){var n;if(null!=t&&null!=(n=t.destroyHooks))for(var r=0;r<n.length;r+=2){var i=e[n[r]];if(!(i instanceof ye)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2){var s=i[o[a]],u=o[a+1];try{u.call(s)}finally{}}else try{o.call(i)}finally{}}}}(t,e),function(t,e){var n=t.cleanup,r=e[7],i=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var a=n[o+1],s="function"==typeof a?a(e):$t(e[a]),u=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?s.removeEventListener(n[o],u,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{var l=r[i=n[o+1]];n[o].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();e[7]=null}}(t,e),1===e[1].type&&Nt(e[11])&&e[11].destroy();var n=e[17];if(null!==n&&Et(e[3])){n!==e[3]&&Mn(n,e);var r=e[19];null!==r&&r.detachView(t)}}}function Nn(t,e,n,r,i){Nt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Dn(t,e,n){Nt(t)?t.appendChild(e,n):e.appendChild(n)}function $n(t,e,n,r,i){null!==r?Nn(t,e,n,r,i):Dn(t,e,n)}function Ln(t,e){return Nt(t)?t.parentNode(e):e.parentNode}function jn(t,e,n,r){var i=function(t,e,n){return function(t,e,n){for(var r=e;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){var i=t.data[r.directiveStart].encapsulation;if(i===Y.None||i===Y.Emulated)return null}return Lt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],a=function(t,e,n){return function(t,e,n){return 40&t.type?Lt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)$n(o,i,n[s],a,!1);else $n(o,i,n,a,!1)}function Un(t,e){if(null!==e){var n=e.type;if(3&n)return Lt(e,t);if(4&n)return Bn(-1,t[e.index]);if(8&n){var r=e.child;if(null!==r)return Un(t,r);var i=t[e.index];return Et(i)?Bn(-1,i):$t(i)}if(32&n)return kn(e,t)()||$t(t[e.index]);var o=Fn(t,e);return null!==o?Array.isArray(o)?o[0]:Un(En(t[16]),o):Un(t,e.next)}return null}function Fn(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Bn(t,e){var n=St+t+1;if(n<e.length){var r=e[n],i=r[1].firstChild;if(null!==i)return Un(r,i)}return e[7]}function qn(t,e,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;if(a&&0===e&&(s&&vn($t(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)qn(t,e,n.child,r,i,o,!1),Cn(e,t,i,s,o);else if(32&u){for(var c=kn(n,r),l=void 0;l=c();)Cn(e,t,i,l,o);Cn(e,t,i,s,o)}else 16&u?Zn(t,e,r,n,i,o):Cn(e,t,i,s,o);n=a?n.projectionNext:n.next}}function Vn(t,e,n,r,i,o){qn(n,r,t.firstChild,e,i,o,!1)}function Zn(t,e,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Cn(e,t,i,s[u],o);else qn(t,e,s,a[3],i,o,!0)}function Hn(t,e,n){Nt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function zn(t,e,n){Nt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Gn(t,e,n){for(var r=t.length;;){var i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){var o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Wn="ng-template";function Kn(t,e,n){for(var r=0;r<t.length;){var i=t[r++];if(n&&"class"===i){if(-1!==Gn((i=t[r]).toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Jn(t){return 4===t.type&&t.value!==Wn}function Yn(t,e,n){return e===(4!==t.type||n?t.value:Wn)}function Xn(t,e,n){for(var r=4,i=t.attrs||[],o=function(t){for(var e=0;e<t.length;e++)if(be(t[e]))return e;return t.length}(i),a=!1,s=0;s<e.length;s++){var u=e[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!Yn(t,u,n)||""===u&&1===e.length){if(Qn(r))return!1;a=!0}}else{var c=8&r?u:e[++s];if(8&r&&null!==t.attrs){if(!Kn(t.attrs,c,n)){if(Qn(r))return!1;a=!0}continue}var l=tr(8&r?"class":u,i,Jn(t),n);if(-1===l){if(Qn(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Gn(f,c,0)||2&r&&c!==h){if(Qn(r))return!1;a=!0}}}}else{if(!a&&!Qn(r)&&!Qn(u))return!1;if(a&&Qn(u))continue;a=!1,r=u|1&r}}return Qn(r)||a}function Qn(t){return 0==(1&t)}function tr(t,e,n,r){if(null===e)return-1;var i=0;if(r||!n){for(var o=!1;i<e.length;){var a=e[i];if(a===t)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=e[++i];"string"==typeof s;)s=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(t,e){var n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){var r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function er(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<e.length;r++)if(Xn(t,e[r],n))return!0;return!1}function nr(t,e){return t?":not("+e.trim()+")":e}function rr(t){for(var e=t[0],n=1,r=2,i="",o=!1;n<t.length;){var a=t[n];if("string"==typeof a)if(2&r){var s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||Qn(a)||(e+=nr(o,i),i=""),r=a,o=o||!Qn(r);n++}return""!==i&&(e+=nr(o,i)),e}var ir={};function or(t,e){var n=t.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r+1];if(-1!==i){var o=t.data[i];te(n[r]),o.contentQueries(2,e[i],i)}}}function ar(t,e,n,r,i,o,a,s,u,c){var l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Bt(l),l[3]=l[15]=t,l[8]=n,l[10]=a||t&&t[10],l[11]=s||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function sr(t,e,n,r,i){var o,a,s=t.data[e];if(null===s)s=function(t,e,n,r,i){var o=Wt(),a=Jt(),s=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=s),null!==o&&(a?null==o.child&&null!==s.parent&&(o.child=s):null===o.next&&(o.next=s)),s}(t,e,n,r,i),Vt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;var u=(a=(o=Vt.lFrame).currentTNode,o.isParent?a:a.parent);s.injectorIndex=null===u?-1:u.injectorIndex}return Kt(s,!0),s}function ur(t,e,n,r){if(0===n)return-1;for(var i=e.length,o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function cr(t,e,n){re(e);try{var r=t.viewQuery;null!==r&&Rr(1,r,n);var i=t.template;null!==i&&fr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&or(t,e),t.staticViewQueries&&Rr(2,t.viewQuery,n);var o=t.components;null!==o&&function(t,e){for(var n=0;n<e.length;n++)Ir(t,e[n])}(e,o)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),a}finally{e[2]&=-5,ue()}}function lr(t,e,n,r){var i=e[2];if(256!=(256&i)){re(e);var o=Yt();try{Bt(e),Vt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&fr(t,e,n,2,r);var a=3==(3&i);if(!o)if(a){var s=t.preOrderCheckHooks;null!==s&&he(e,s,null)}else{var u=t.preOrderHooks;null!==u&&fe(e,u,0,null),de(e,0)}if(function(t){for(var e=xn(t);null!==e;e=Tn(e))if(e[2])for(var n=e[9],r=0;r<n.length;r++){var i=n[r];0==(1024&i[2])&&qt(i[3],1),i[2]|=1024}}(e),function(t){for(var e=xn(t);null!==e;e=Tn(e))for(var n=St;n<e.length;n++){var r=e[n],i=r[1];Ut(r)&&lr(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&or(t,e),!o)if(a){var c=t.contentCheckHooks;null!==c&&he(e,c)}else{var l=t.contentHooks;null!==l&&fe(e,l,1),de(e,1)}!function(t,e){var n,r,i=t.hostBindingOpCodes;if(null!==i)try{for(var o=0;o<i.length;o++){var a=i[o];if(a<0)ce(~a);else{var s=a,u=i[++o],c=i[++o];n=s,r=void 0,(r=Vt.lFrame).bindingIndex=r.bindingRootIndex=u,Qt(n),c(2,e[s])}}}finally{ce(-1)}}(t,e);var h=t.components;null!==h&&function(t,e){for(var n=0;n<e.length;n++)xr(t,e[n])}(e,h);var f=t.viewQuery;if(null!==f&&Rr(2,f,r),!o)if(a){var d=t.viewCheckHooks;null!==d&&he(e,d)}else{var p=t.viewHooks;null!==p&&fe(e,p,2),de(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,qt(e[3],-1))}finally{ue()}}}function hr(t,e,n,r){var i=e[10],o=!Yt(),a=4==(4&e[2]);try{o&&!a&&i.begin&&i.begin(),a&&cr(t,e,r),lr(t,e,n,r)}finally{o&&!a&&i.end&&i.end()}}function fr(t,e,n,r,i){var o=Vt.lFrame.selectedIndex,a=2&r;try{ce(-1),a&&e.length>20&&function(t,e,n,r){if(!r)if(3==(3&e[2])){var i=t.preOrderCheckHooks;null!==i&&he(e,i,20)}else{var o=t.preOrderHooks;null!==o&&fe(e,o,0,20)}ce(20)}(t,e,0,Yt()),n(r,i)}finally{ce(o)}}function dr(t){var e=t.tView;return null===e||e.incompleteFirstPass?t.tView=pr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function pr(t,e,n,r,i,o,a,s,u,c){var l=20+r,h=l+i,f=function(t,e){for(var n=[],r=0;r<e;r++)n.push(r<t?null:ir);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function vr(t,e,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function gr(t,e,n,r,i,o){var a=o.hostBindings;if(a){var s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);var u=~e.index;(function(t){for(var e=t.length;e>0;){var n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,a)}}function yr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function mr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function br(t,e,n){if(n){if(e.exportAs)for(var r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;It(e)&&(n[""]=t)}}function wr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function _r(t,e,n,r,i){t.data[r]=i;var o=i.factory||(i.factory=Ct(i.type)),a=new ye(o,It(i),null);t.blueprint[r]=a,n[r]=a,gr(t,e,0,r,ur(t,n,i.hostVars,ir),i)}function Sr(t,e,n){var r=Lt(e,t),i=dr(n),o=t[10],a=Cr(t,ar(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=a}function kr(t,e,n,r,i,o){var a=o[e];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function Er(t,e){for(var n=null,r=0;r<e.length;){var i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function xr(t,e){var n=jt(e,t);if(Ut(n)){var r=n[1];80&n[2]?lr(r,n,r.template,n[8]):n[5]>0&&Tr(n)}}function Tr(t){for(var e=xn(t);null!==e;e=Tn(e))for(var n=St;n<e.length;n++){var r=e[n];if(1024&r[2]){var i=r[1];lr(i,r,i.template,r[8])}else r[5]>0&&Tr(r)}var o=t[1].components;if(null!==o)for(var a=0;a<o.length;a++){var s=jt(o[a],t);Ut(s)&&s[5]>0&&Tr(s)}}function Ir(t,e){var n=jt(e,t),r=n[1];!function(t,e){for(var n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),cr(r,n,n[8])}function Cr(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ar(t,e,n){var r=e[10];r.begin&&r.begin();try{lr(t,e,t.template,n)}catch(i){throw function(t,e){var n=t[9],r=n?n.get(bn,null):null;r&&r.handleError(e)}(e,i),i}finally{r.end&&r.end()}}function Mr(t){!function(t){for(var e=0;e<t.components.length;e++){var n=t.components[e],r=gn(n),i=r[1];hr(i,r,i.template,n)}}(t[8])}function Rr(t,e,n){te(0),e(t,n)}var Or=function(){return Promise.resolve(null)}();function Pr(t,e,n){var r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(var a=0;a<e.length;a++){var s=e[a];"number"==typeof s?o=s:1==o?i=I(i,s):2==o&&(r=I(r,s+": "+e[++a]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Nr=new We("INJECTOR",-1),Dr=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe;if(e===Qe){var n=new Error("NullInjectorError: No provider for ".concat(T(t),"!"));throw n.name="NullInjectorError",n}return e}}]),t}(),$r=new We("Set Injector scope."),Lr={},jr={},Ur=void 0;function Fr(){return void 0===Ur&&(Ur=new Dr),Ur}function Br(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new qr(t,n,e||Fr(),r)}var qr=function(){function t(e,n,r){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,i.Z)(this,t),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var s=[];n&&Je(n,function(t){return o.processProvider(t,e,n)}),Je([e],function(t){return o.processInjectorType(t,[],s)}),this.records.set(Nr,Zr(void 0,this));var u=this.records.get($r);this.scope=null!=u?u.value:null,this.source=a||("object"==typeof e?null:T(e))}return(0,r.Z)(t,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(t){return t.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;this.assertNotDestroyed();var r=on(this),i=G(void 0);try{if(!(n&H.SkipSelf)){var o=this.records.get(t);if(void 0===o){var a=Gr(t)&&L(t);o=a&&this.injectableDefInScope(a)?Zr(Vr(t),Lr):null,this.records.set(t,o)}if(null!=o)return this.hydrate(t,o)}var s=n&H.Self?Fr():this.parent;return s.get(t,e=n&H.Optional&&e===Qe?null:e)}catch(jO){if("NullInjectorError"===jO.name){var u=jO.ngTempTokenPath=jO.ngTempTokenPath||[];if(u.unshift(T(t)),r)throw jO;return hn(jO,t,"R3InjectorError",this.source)}throw jO}finally{G(i),on(r)}}},{key:"_resolveInjectorDefTypes",value:function(){var t=this;this.injectorDefTypes.forEach(function(e){return t.get(e)})}},{key:"toString",value:function(){var t=[];return this.records.forEach(function(e,n){return t.push(T(n))}),"R3Injector[".concat(t.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(t,e,n){var r=this;if(!(t=M(t)))return!1;var i=U(t),o=null==i&&t.ngModule||void 0,a=void 0===o?t:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=U(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{Je(i.imports,function(t){r.processInjectorType(t,e,n)&&(void 0===u&&(u=[]),u.push(t))})}finally{}if(void 0!==u)for(var c=function(t){var e=u[t],n=e.ngModule,i=e.providers;Je(i,function(t){return r.processProvider(t,n,i||it)})},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a);var h=Ct(a)||function(){return new a};this.records.set(a,Zr(h,Lr));var f=i.providers;if(null!=f&&!s){var d=t;Je(f,function(t){return r.processProvider(t,d,f)})}return void 0!==o&&void 0!==t.providers}},{key:"processProvider",value:function(t,e,n){var r=zr(t=M(t))?t:M(t&&t.provide),i=function(t,e,n){return Hr(t)?Zr(void 0,t.useValue):Zr(function(t,e,n){var r,i=void 0;if(zr(t)){var o=M(t);return Ct(o)||Vr(o)}if(Hr(t))i=function(){return M(t.useValue)};else if((r=t)&&r.useFactory)i=function(){return t.useFactory.apply(t,(0,f.Z)(cn(t.deps||[])))};else if(function(t){return!(!t||!t.useExisting)}(t))i=function(){return sn(M(t.useExisting))};else{var a=M(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ct(a)||Vr(a);i=function(){return v(a,(0,f.Z)(cn(t.deps)))}}return i}(t),Lr)}(t);if(zr(t)||!0!==t.multi)this.records.get(r);else{var o=this.records.get(r);o||((o=Zr(void 0,Lr,!0)).factory=function(){return cn(o.multi)},this.records.set(r,o)),r=t,o.multi.push(t)}this.records.set(r,i)}},{key:"hydrate",value:function(t,e){var n;return e.value===Lr&&(e.value=jr,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}},{key:"injectableDefInScope",value:function(t){if(!t.providedIn)return!1;var e=M(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}]),t}();function Vr(t){var e=L(t),n=null!==e?e.factory:Ct(t);if(null!==n)return n;if(t instanceof We)throw new Error("Token ".concat(T(t)," is missing a \u0275prov definition."));if(t instanceof Function)return function(t){var e=t.length;if(e>0){var n=function(t,e){for(var n=[],r=0;r<t;r++)n.push("?");return n}(e);throw new Error("Can't resolve all parameters for ".concat(T(t),": (").concat(n.join(", "),")."))}var r=function(t){var e=t&&(t[B]||t[V]);if(e){var n=function(t){if(t.hasOwnProperty("name"))return t.name;var e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(n,'" class.')),e}return null}(t);return null!==r?function(){return r.factory(t)}:function(){return new t}}(t);throw new Error("unreachable")}function Zr(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:t,value:e,multi:n?[]:void 0}}function Hr(t){return null!==t&&"object"==typeof t&&nn in t}function zr(t){return"function"==typeof t}function Gr(t){return"function"==typeof t||"object"==typeof t&&t instanceof We}var Wr=function(t,e,n){return function(t){var e=Br(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0);return e._resolveInjectorDefTypes(),e}({name:n},e,t,n)},Kr=function(){var t=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,null,[{key:"create",value:function(t,e){return Array.isArray(t)?Wr(t,e,""):Wr(t.providers,t.parent,t.name||"")}}]),t}();return t.THROW_IF_NOT_FOUND=Qe,t.NULL=new Dr,t.\u0275prov=D({token:t,providedIn:"any",factory:function(){return sn(Nr)}}),t.__NG_ELEMENT_ID__=-1,t}();function Jr(t,e){le(gn(t)[1],Gt())}var Yr=null;function Xr(){if(!Yr){var t=nt.Symbol;if(t&&t.iterator)Yr=t.iterator;else for(var e=Object.getOwnPropertyNames(Map.prototype),n=0;n<e.length;++n){var r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Yr=r)}}return Yr}function Qr(t){return!!ti(t)&&(Array.isArray(t)||!(t instanceof Map)&&Xr()in t)}function ti(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ei(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H.Default,n=Ht();if(null===n)return sn(t,e);var r=Gt();return De(r,n,M(t),e)}function ni(t,e,n,r,i){var o=i?"class":"style";!function(t,e,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=e[a],c=t.data[a];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}(t,n,e.inputs[o],o,r)}function ri(t,e,n,r){var i=Ht(),o=zt(),a=20+t,s=i[11],u=i[a]=An(s,e,Vt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,a){var s=e.consts,u=sr(e,t,2,i,Ft(s,o));return function(t,e,n,r){if(Zt()){var i=function(t,e,n){var r=t.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];er(n,a.selectors,!1)&&(i||(i=[]),Oe(Ce(n,e),t,a.type),It(a)?(mr(t,n),i.unshift(a)):i.push(a))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==i){wr(n,t.data.length,i.length);for(var a=0;a<i.length;a++){var s=i[a];s.providersResolver&&s.providersResolver(s)}for(var u=!1,c=!1,l=ur(t,e,i.length,null),h=0;h<i.length;h++){var f=i[h];n.mergedAttrs=we(n.mergedAttrs,f.hostAttrs),_r(t,n,e,l,f),br(l,f,o),null!==f.contentQueries&&(n.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=128);var d=f.type.prototype;!u&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),u=!0),c||!d.ngOnChanges&&!d.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),c=!0),l++}!function(t,e){for(var n=e.directiveEnd,r=t.data,i=e.attrs,o=[],a=null,s=null,u=e.directiveStart;u<n;u++){var c=r[u],l=c.inputs,h=null===i||Jn(e)?null:Er(l,i);o.push(h),a=vr(l,u,a),s=vr(c.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=s}(t,n)}o&&function(t,e,n){if(e)for(var r=t.localNames=[],i=0;i<e.length;i+=2){var o=n[e[i+1]];if(null==o)throw new O("301","Export of name '".concat(e[i+1],"' not found!"));r.push(e[i],o)}}(n,r,o)}n.mergedAttrs=we(n.mergedAttrs,n.attrs)}(e,n,u,Ft(s,a)),null!==u.attrs&&Pr(u,u.attrs,!1),null!==u.mergedAttrs&&Pr(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(a,o,i,0,e,n,r):o.data[a];Kt(c,!0);var l=c.mergedAttrs;null!==l&&me(s,u,l);var h=c.classes;null!==h&&zn(s,u,h);var f=c.styles;null!==f&&Hn(s,u,f),64!=(64&c.flags)&&jn(o,i,u,c),0===Vt.lFrame.elementDepthCount&&vn(u,i),Vt.lFrame.elementDepthCount++,function(t){return 1==(1&t.flags)}(c)&&(function(t,e,n){Zt()&&(function(t,e,n,r){var i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ce(n,e),vn(r,e);for(var a=n.initialInputs,s=i;s<o;s++){var u=t.data[s],c=It(u);c&&Sr(e,n,u);var l=Ue(e,t,s,n);vn(l,e),null!==a&&kr(0,s-i,l,u,0,a),c&&(jt(n.index,e)[8]=l)}}(t,e,n,Lt(n,e)),128==(128&n.flags)&&function(t,e,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,a=Vt.lFrame.currentDirectiveIndex;try{ce(o);for(var s=r;s<i;s++){var u=t.data[s],c=e[s];Qt(s),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||yr(u,c)}}finally{ce(-1),Qt(a)}}(t,e,n))}(o,i,c),function(t,e,n){if(xt(e))for(var r=e.directiveEnd,i=e.directiveStart;i<r;i++){var o=t.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}(o,c,i)),null!==r&&function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt,r=e.localNames;if(null!==r)for(var i=e.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(e,t):t[a];t[i++]=s}}(i,c)}function ii(t){return!!t&&"function"==typeof t.then}var oi=function(t){return!!t&&"function"==typeof t.subscribe},ai=void 0,si=["en",[["a","p"],["AM","PM"],ai],[["AM","PM"],ai,ai],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ai,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ai,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ai,"{1} 'at' {0}",ai],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){var e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}],ui={};function ci(t){return t in ui||(ui[t]=nt.ng&&nt.ng.common&&nt.ng.common.locales&&nt.ng.common.locales[t]),ui[t]}var li=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({}),hi="en-US";function fi(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: ".concat(t)+" [Expected=> ".concat(null," ").concat("!="," ").concat(e," <=Actual]"))}(n,e),"string"==typeof t&&t.toLowerCase().replace(/_/g,"-")}var di=function t(){(0,i.Z)(this,t)},pi=function t(){(0,i.Z)(this,t)},vi=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"resolveComponentFactory",value:function(t){throw function(t){var e=Error("No component factory found for ".concat(T(t),". Did you add it to @NgModule.entryComponents?"));return e.ngComponent=t,e}(t)}}]),t}(),gi=function(){var t=function t(){(0,i.Z)(this,t)};return t.NULL=new vi,t}();function yi(){}function mi(t,e){return new wi(Lt(t,e))}var bi=function(){return mi(Gt(),Ht())},wi=function(){var t=function t(e){(0,i.Z)(this,t),this.nativeElement=e};return t.__NG_ELEMENT_ID__=bi,t}(),_i=function t(){(0,i.Z)(this,t)},Si=function(){var t=function t(){(0,i.Z)(this,t)};return t.\u0275prov=D({token:t,providedIn:"root",factory:function(){return null}}),t}(),ki=new function t(e){(0,i.Z)(this,t),this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}("12.1.4"),Ei=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"supports",value:function(t){return Qr(t)}},{key:"create",value:function(t){return new Ti(t)}}]),t}(),xi=function(t,e){return e},Ti=function(){function t(e){(0,i.Z)(this,t),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||xi}return(0,r.Z)(t,[{key:"forEachItem",value:function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)}},{key:"forEachOperation",value:function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Mi(n,r,i)?e:n,a=Mi(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&t(o,a,s)}}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachMovedItem",value:function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"forEachIdentityChange",value:function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}},{key:"diff",value:function(t){if(null==t&&(t=[]),!Qr(t))throw new Error("Error trying to diff '".concat(T(t),"'. Only arrays and iterables are allowed"));return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(t)){this.length=t.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=t[s]),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[Xr()]();!(r=i.next()).done;)e(r.value)}(t,function(t){i=e._trackByFn(n,t),null!==o&&Object.is(o.trackById,i)?(a&&(o=e._verifyReinsertion(o,t,i,n)),Object.is(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=t,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ii(e,n),i,r),t}},{key:"_verifyReinsertion",value:function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}},{key:"_truncate",value:function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_moveAfter",value:function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}},{key:"_addAfter",value:function(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}},{key:"_insertAfter",value:function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ai),this._linkedRecords.put(t),t.currentIndex=n,t}},{key:"_remove",value:function(t){return this._addToRemovals(this._unlink(t))}},{key:"_unlink",value:function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}},{key:"_addToMoves",value:function(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}},{key:"_addToRemovals",value:function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ai),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}},{key:"_addIdentityChange",value:function(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}]),t}(),Ii=function t(e,n){(0,i.Z)(this,t),this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Ci=function(){function t(){(0,i.Z)(this,t),this._head=null,this._tail=null}return(0,r.Z)(t,[{key:"add",value:function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}},{key:"get",value:function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}},{key:"remove",value:function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}]),t}(),Ai=function(){function t(){(0,i.Z)(this,t),this.map=new Map}return(0,r.Z)(t,[{key:"put",value:function(t){var e=t.trackById,n=this.map.get(e);n||(n=new Ci,this.map.set(e,n)),n.add(t)}},{key:"get",value:function(t,e){var n=this.map.get(t);return n?n.get(t,e):null}},{key:"remove",value:function(t){var e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),t}();function Mi(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}var Ri=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"supports",value:function(t){return t instanceof Map||ti(t)}},{key:"create",value:function(){return new Oi}}]),t}(),Oi=function(){function t(){(0,i.Z)(this,t),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return(0,r.Z)(t,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)}},{key:"forEachPreviousItem",value:function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}},{key:"forEachChangedItem",value:function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}},{key:"forEachAddedItem",value:function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}},{key:"forEachRemovedItem",value:function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}},{key:"diff",value:function(t){if(t){if(!(t instanceof Map||ti(t)))throw new Error("Error trying to diff '".concat(T(t),"'. Only maps and objects are allowed"))}else t=new Map;return this.check(t)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(t){var e=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(t,function(t,r){if(n&&n.key===r)e._maybeAddToChanges(n,t),e._appendAfter=n,n=n._next;else{var i=e._getOrCreateRecordForKey(r,t);n=e._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(t,e){if(t){var n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}},{key:"_getOrCreateRecordForKey",value:function(t,e){if(this._records.has(t)){var n=this._records.get(t);this._maybeAddToChanges(n,e);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Pi(t);return this._records.set(t,o),o.currentValue=e,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}},{key:"_addToAdditions",value:function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}},{key:"_addToChanges",value:function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}},{key:"_forEach",value:function(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(function(n){return e(t[n],n)})}}]),t}(),Pi=function t(e){(0,i.Z)(this,t),this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function Ni(){return new Di([new Ei])}var Di=function(){var t=function(){function t(e){(0,i.Z)(this,t),this.factories=e}return(0,r.Z)(t,[{key:"find",value:function(t){var e,n=this.factories.find(function(e){return e.supports(t)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(t,"' of type '").concat((e=t).name||typeof e,"'"))}}],[{key:"create",value:function(e,n){if(null!=n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||Ni())},deps:[[t,new pn,new dn]]}}}]),t}();return t.\u0275prov=D({token:t,providedIn:"root",factory:Ni}),t}();function $i(){return new Li([new Ri])}var Li=function(){var t=function(){function t(e){(0,i.Z)(this,t),this.factories=e}return(0,r.Z)(t,[{key:"find",value:function(t){var e=this.factories.find(function(e){return e.supports(t)});if(e)return e;throw new Error("Cannot find a differ supporting object '".concat(t,"'"))}}],[{key:"create",value:function(e,n){if(n){var r=n.factories.slice();e=e.concat(r)}return new t(e)}},{key:"extend",value:function(e){return{provide:t,useFactory:function(n){return t.create(e,n||$i())},deps:[[t,new pn,new dn]]}}}]),t}();return t.\u0275prov=D({token:t,providedIn:"root",factory:$i}),t}();function ji(t,e,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var o=e[n.index];if(null!==o&&r.push($t(o)),Et(o))for(var a=St;a<o.length;a++){var s=o[a],u=s[1].firstChild;null!==u&&ji(s[1],s,u,r)}var c=n.type;if(8&c)ji(t,e,n.child,r);else if(32&c)for(var l=kn(n,e),h=void 0;h=l();)r.push(h);else if(16&c){var d=Fn(e,n);if(Array.isArray(d))r.push.apply(r,(0,f.Z)(d));else{var p=En(e[16]);ji(p[1],p,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var Ui=function(){function t(e,n){(0,i.Z)(this,t),this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return(0,r.Z)(t,[{key:"rootNodes",get:function(){var t=this._lView,e=t[1];return ji(e,t,e.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(t){this._lView[8]=t}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var t=this._lView[3];if(Et(t)){var e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Rn(t,n),Xe(e,n))}this._attachedToViewContainer=!1}On(this._lView[1],this._lView)}},{key:"onDestroy",value:function(t){var e,n;e=t,((n=this._lView)[7]||(n[7]=[])).push(e)}},{key:"markForCheck",value:function(){!function(t){for(;t;){t[2]|=64;var e=En(t);if(0!=(512&t[2])&&!e)return t;t=e}}(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Ar(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(t,e,n){Xt(!0);try{Ar(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var t;this._appRef=null,Vn(this._lView[1],t=this._lView,t[11],2,null,null)}},{key:"attachToAppRef",value:function(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}]),t}(),Fi=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t))._view=t,r}return(0,r.Z)(n,[{key:"detectChanges",value:function(){Mr(this._view)}},{key:"checkNoChanges",value:function(){!function(t){Xt(!0);try{Mr(t)}finally{Xt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Ui),Bi=function(t){return function(t,e,n){if(Tt(t)&&!n){var r=jt(t.index,e);return new Ui(r,r)}return 47&t.type?new Ui(e[16],e):null}(Gt(),Ht(),16==(16&t))},qi=function(){var t=function t(){(0,i.Z)(this,t)};return t.__NG_ELEMENT_ID__=Bi,t}(),Vi=[new Ri],Zi=new Di([new Ei]),Hi=new Li(Vi),zi=function t(){(0,i.Z)(this,t)},Gi=function t(){(0,i.Z)(this,t)},Wi=function(){return function(t,e){var n,r=e[t.index];if(Et(r))n=r;else{var i;if(8&t.type)i=$t(r);else{var o=e[11];i=o.createComment("");var a=Lt(t,e);Nn(o,Ln(o,a),i,function(t,e){return Nt(t)?t.nextSibling(e):e.nextSibling}(o,a),!1)}e[t.index]=n=function(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}(r,e,i,t),Cr(e,n)}return new Ji(n,t,e)}(Gt(),Ht())},Ki=function(){var t=function t(){(0,i.Z)(this,t)};return t.__NG_ELEMENT_ID__=Wi,t}(),Ji=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;return(0,i.Z)(this,n),(a=e.call(this))._lContainer=t,a._hostTNode=r,a._hostLView=o,a}return(0,r.Z)(n,[{key:"element",get:function(){return mi(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new Ve(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var t=Re(this._hostTNode,this._hostLView);if(Se(t)){var e=Ee(t,this._hostLView),n=ke(t);return new Ve(e[1].data[n+8],e)}return new Ve(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(t){var e=Yi(this._lContainer);return null!==e&&e[t]||null}},{key:"length",get:function(){return this._lContainer.length-St}},{key:"createEmbeddedView",value:function(t,e,n){var r=t.createEmbeddedView(e||{});return this.insert(r,n),r}},{key:"createComponent",value:function(t,e,n,r,i){var o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){var a=o.get(zi,null);a&&(i=a)}var s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}},{key:"insert",value:function(t,e){var n=t._lView,r=n[1];if(Et(n[3])){var i=this.indexOf(t);if(-1!==i)this.detach(i);else{var o=n[3],a=new Ji(o,o[6],o[3]);a.detach(a.indexOf(t))}}var s=this._adjustIndex(e),u=this._lContainer;!function(t,e,n,r){var i=St+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-St?(e[4]=n[i],Ye(n,St+r,e)):(n.push(e),e[4]=null),e[3]=n;var a=e[17];null!==a&&n!==a&&function(t,e){var n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(a,e);var s=e[19];null!==s&&s.insertView(t),e[2]|=128}(r,n,u,s);var c=Bn(s,u),l=n[11],h=Ln(l,u[7]);return null!==h&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Vn(t,r,n,1,i,o)}(r,u[6],l,n,h,c),t.attachToViewContainerRef(),Ye(Xi(u),s,t),t}},{key:"move",value:function(t,e){return this.insert(t,e)}},{key:"indexOf",value:function(t){var e=Yi(this._lContainer);return null!==e?e.indexOf(t):-1}},{key:"remove",value:function(t){var e=this._adjustIndex(t,-1),n=Rn(this._lContainer,e);n&&(Xe(Xi(this._lContainer),e),On(n[1],n))}},{key:"detach",value:function(t){var e=this._adjustIndex(t,-1),n=Rn(this._lContainer,e);return n&&null!=Xe(Xi(this._lContainer),e)?new Ui(n):null}},{key:"_adjustIndex",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==t?this.length+e:t}}]),n}(Ki);function Yi(t){return t[8]}function Xi(t){return t[8]||(t[8]=[])}var Qi={},to=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this)).ngModule=t,r}return(0,r.Z)(n,[{key:"resolveComponentFactory",value:function(t){var e=wt(t);return new ro(e,this.ngModule)}}]),n}(gi);function eo(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}var no=new We("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return wn}}),ro=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this)).componentDef=t,o.ngModule=r,o.componentType=t.type,o.selector=t.selectors.map(rr).join(","),o.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],o.isBoundToModule=!!r,o}return(0,r.Z)(n,[{key:"inputs",get:function(){return eo(this.componentDef.inputs)}},{key:"outputs",get:function(){return eo(this.componentDef.outputs)}},{key:"create",value:function(t,e,n,r){var i,o,a=(r=r||this.ngModule)?function(t,e){return{get:function(n,r,i){var o=t.get(n,Qi,i);return o!==Qi||r===Qi?o:e.get(n,r,i)}}}(t,r.injector):t,s=a.get(_i,Dt),u=a.get(Si,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(t,e,n){if(Nt(t))return t.selectRootElement(e,n===Y.ShadowDom);var r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,n,this.componentDef.encapsulation):An(s.createRenderer(null,this.componentDef),l,function(t){var e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:wn,clean:Or,playerHandler:null,flags:0},p=pr(0,null,null,1,0,null,null,null,null,null),v=ar(null,p,d,f,null,null,s,c,u,a);re(v);try{var g=function(t,e,n,r,i,o){var a=n[1];n[20]=t;var s=sr(a,20,2,"#host",null),u=s.mergedAttrs=e.hostAttrs;null!==u&&(Pr(s,u,!0),null!==t&&(me(i,t,u),null!==s.classes&&zn(i,t,s.classes),null!==s.styles&&Hn(i,t,s.styles)));var c=r.createRenderer(t,e),l=ar(n,dr(e),null,e.onPush?64:16,n[20],s,r,c,null,null);return a.firstCreatePass&&(Oe(Ce(s,n),a,e.type),mr(a,s),wr(s,n.length,1)),Cr(n,l),n[20]=l}(h,this.componentDef,v,s,c);if(h)if(n)me(c,h,["ng-version",ki.full]);else{var y=function(t){for(var e=[],n=[],r=1,i=2;r<t.length;){var o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Qn(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]),m=y.attrs,b=y.classes;m&&me(c,h,m),b&&b.length>0&&zn(c,h,b.join(" "))}if(o=p.data[20],void 0!==e)for(var w=o.projection=[],_=0;_<this.ngContentSelectors.length;_++){var S=e[_];w.push(null!=S?Array.from(S):null)}i=function(t,e,n,r,i){var o=n[1],a=function(t,e,n){var r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),_r(t,r,e,ur(t,e,1,null),n));var i=Ue(e,t,r.directiveStart,r);vn(i,e);var o=Lt(r,e);return o&&vn(o,e),i}(o,n,e);if(r.components.push(a),t[8]=a,i&&i.forEach(function(t){return t(a,e)}),e.contentQueries){var s=Gt();e.contentQueries(1,a,s.directiveStart)}var u=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ce(u.index),gr(n[1],u,0,u.directiveStart,u.directiveEnd,e),yr(e,a)),a}(g,this.componentDef,v,d,[Jr]),cr(p,v,null)}finally{ue()}return new io(this.componentType,i,mi(o,v),v,o)}}]),n}(pi),io=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a,s){var u;return(0,i.Z)(this,n),(u=e.call(this)).location=o,u._rootLView=a,u._tNode=s,u.instance=r,u.hostView=u.changeDetectorRef=new Fi(a),u.componentType=t,u}return(0,r.Z)(n,[{key:"injector",get:function(){return new Ve(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(t){this.hostView.onDestroy(t)}}]),n}(di),oo=new Map,ao=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;(0,i.Z)(this,n),(o=e.call(this))._parent=r,o._bootstrapComponents=[],o.injector=(0,l.Z)(o),o.destroyCbs=[],o.componentFactoryResolver=new to((0,l.Z)(o));var a=_t(t),s=t[ct]||null;return s&&fi(s),o._bootstrapComponents=_n(a.bootstrap),o._r3Injector=Br(t,r,[{provide:zi,useValue:(0,l.Z)(o)},{provide:gi,useValue:o.componentFactoryResolver}],T(t)),o._r3Injector._resolveInjectorDefTypes(),o.instance=o.get(t),o}return(0,r.Z)(n,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kr.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.Default;return t===Kr||t===zi||t===Nr?this:this._r3Injector.get(t,e,n)}},{key:"destroy",value:function(){var t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(function(t){return t()}),this.destroyCbs=null}},{key:"onDestroy",value:function(t){this.destroyCbs.push(t)}}]),n}(zi),so=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r,o,a;return(0,i.Z)(this,n),(r=e.call(this)).moduleType=t,null!==_t(t)&&(o=t,a=new Set,function t(e){var n=_t(e,!0),r=n.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error("Duplicate module registered for ".concat(t," - ").concat(T(e)," vs ").concat(T(e.name)))}(r,oo.get(r),e),oo.set(r,e));var i,o=u(_n(n.imports));try{for(o.s();!(i=o.n()).done;){var s=i.value;a.has(s)||(a.add(s),t(s))}}catch(c){o.e(c)}finally{o.f()}}(o)),r}return(0,r.Z)(n,[{key:"create",value:function(t){return new ao(this.moduleType,t)}}]),n}(Gi);function uo(t){return function(e){setTimeout(t,void 0,e)}}var co=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,i.Z)(this,u),(t=s.call(this)).__isAsync=e,t}return(0,r.Z)(u,[{key:"emit",value:function(n){(0,t.Z)((0,e.Z)(u.prototype),"next",this).call(this,n)}},{key:"subscribe",value:function(n,r,i){var o,a,s,c=n,l=r||function(){return null},h=i;if(n&&"object"==typeof n){var f=n;c=null===(o=f.next)||void 0===o?void 0:o.bind(f),l=null===(a=f.error)||void 0===a?void 0:a.bind(f),h=null===(s=f.complete)||void 0===s?void 0:s.bind(f)}this.__isAsync&&(l=uo(l),c&&(c=uo(c)),h&&(h=uo(h)));var d=(0,t.Z)((0,e.Z)(u.prototype),"subscribe",this).call(this,{next:c,error:l,complete:h});return n instanceof y.w&&n.add(d),d}}]),u}(m.xQ);Symbol;var lo=new We("Application Initializer"),ho=function(){var t=function(){function t(e){var n=this;(0,i.Z)(this,t),this.appInits=e,this.resolve=yi,this.reject=yi,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(t,e){n.resolve=t,n.reject=e})}return(0,r.Z)(t,[{key:"runInitializers",value:function(){var t=this;if(!this.initialized){var e=[],n=function(){t.done=!0,t.resolve()};if(this.appInits)for(var r=function(n){var r=t.appInits[n]();if(ii(r))e.push(r);else if(oi(r)){var i=new Promise(function(t,e){r.subscribe({complete:t,error:e})});e.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(e).then(function(){n()}).catch(function(e){t.reject(e)}),0===e.length&&n(),this.initialized=!0}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(lo,8))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),fo=new We("AppId"),po={provide:fo,useFactory:function(){return"".concat(vo()).concat(vo()).concat(vo())},deps:[]};function vo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var go=new We("Platform Initializer"),yo=new We("Platform ID"),mo=new We("appBootstrapListener"),bo=function(){var t=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"log",value:function(t){console.log(t)}},{key:"warn",value:function(t){console.warn(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),wo=new We("LocaleId"),_o=new We("DefaultCurrencyCode"),So=function t(e,n){(0,i.Z)(this,t),this.ngModuleFactory=e,this.componentFactories=n},ko=function(t){return new so(t)},Eo=ko,xo=function(t){return Promise.resolve(ko(t))},To=function(t){var e=ko(t),n=_n(_t(t).declarations).reduce(function(t,e){var n=wt(e);return n&&t.push(new ro(n)),t},[]);return new So(e,n)},Io=To,Co=function(t){return Promise.resolve(To(t))},Ao=function(){var t=function(){function t(){(0,i.Z)(this,t),this.compileModuleSync=Eo,this.compileModuleAsync=xo,this.compileModuleAndAllComponentsSync=Io,this.compileModuleAndAllComponentsAsync=Co}return(0,r.Z)(t,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(t){}},{key:"getModuleId",value:function(t){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Mo=function(){return Promise.resolve(0)}();function Ro(t){"undefined"==typeof Zone?Mo.then(function(){t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}var Oo=function(){function t(e){var n=e.enableLongStackTrace,r=void 0!==n&&n,o=e.shouldCoalesceEventChangeDetection,a=void 0!==o&&o,s=e.shouldCoalesceRunChangeDetection,u=void 0!==s&&s;if((0,i.Z)(this,t),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new co(!1),this.onMicrotaskEmpty=new co(!1),this.onStable=new co(!1),this.onError=new co(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var c,l,h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&a,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){var t=nt.requestAnimationFrame,e=nt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){var n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);var r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,l=function(){!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(nt,function(){t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){t.lastRequestAnimationFrameId=-1,Do(t),t.isCheckStableRunning=!0,No(t),t.isCheckStableRunning=!1},void 0,function(){},function(){})),t.fakeTopEventTask.invoke()}),Do(t))}(c)},(c=h)._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,e,n,r,i,o){try{return $o(c),t.invokeTask(n,r,i,o)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||c.shouldCoalesceRunChangeDetection)&&l(),Lo(c)}},onInvoke:function(t,e,n,r,i,o,a){try{return $o(c),t.invoke(n,r,i,o,a)}finally{c.shouldCoalesceRunChangeDetection&&l(),Lo(c)}},onHasTask:function(t,e,n,r){t.hasTask(n,r),e===n&&("microTask"==r.change?(c._hasPendingMicrotasks=r.microTask,Do(c),No(c)):"macroTask"==r.change&&(c.hasPendingMacrotasks=r.macroTask))},onHandleError:function(t,e,n,r){return t.handleError(n,r),c.runOutsideAngular(function(){return c.onError.emit(r)}),!1}})}return(0,r.Z)(t,[{key:"run",value:function(t,e,n){return this._inner.run(t,e,n)}},{key:"runTask",value:function(t,e,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Po,yi,yi);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(t,e,n){return this._inner.runGuarded(t,e,n)}},{key:"runOutsideAngular",value:function(t){return this._outer.run(t)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!t.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(t.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),t}(),Po={};function No(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(function(){return t.onStable.emit(null)})}finally{t.isStable=!0}}}function Do(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function $o(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Lo(t){t._nesting--,No(t)}var jo,Uo=function(){function t(){(0,i.Z)(this,t),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new co,this.onMicrotaskEmpty=new co,this.onStable=new co,this.onError=new co}return(0,r.Z)(t,[{key:"run",value:function(t,e,n){return t.apply(e,n)}},{key:"runGuarded",value:function(t,e,n){return t.apply(e,n)}},{key:"runOutsideAngular",value:function(t){return t()}},{key:"runTask",value:function(t,e,n,r){return t.apply(e,n)}}]),t}(),Fo=function(){var t=function(){function t(e){var n=this;(0,i.Z)(this,t),this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return(0,r.Z)(t,[{key:"_watchAngularEvents",value:function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Oo.assertNotInAngularZone(),Ro(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var t=this;if(this.isStable())Ro(function(){for(;0!==t._callbacks.length;){var e=t._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(t._didWork)}t._didWork=!1});else{var e=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(t){return!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(t){return{source:t.source,creationLocation:t.creationLocation,data:t.data}}):[]}},{key:"addCallback",value:function(t,e,n){var r=this,i=-1;e&&e>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(t){return t.timeoutId!==i}),t(r._didWork,r.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(t,e,n){return[]}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Oo))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Bo=function(){var t=function(){function t(){(0,i.Z)(this,t),this._applications=new Map,qo.addToWindow(this)}return(0,r.Z)(t,[{key:"registerApplication",value:function(t,e){this._applications.set(t,e)}},{key:"unregisterApplication",value:function(t){this._applications.delete(t)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(t){return this._applications.get(t)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return qo.findTestabilityInTree(this,t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),qo=new(function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"addToWindow",value:function(t){}},{key:"findTestabilityInTree",value:function(t,e,n){return null}}]),t}()),Vo=!0,Zo=!1;function Ho(){return Zo=!0,Vo}var zo=function(t,e,n){var r=new so(n);return Promise.resolve(r)},Go=new We("AllowMultipleToken");function Wo(t){if(jo&&!jo.destroyed&&!jo.injector.get(Go,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");jo=t.get(Xo);var e=t.get(go,null);return e&&e.forEach(function(t){return t()}),jo}function Ko(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(e),i=new We(r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Yo();if(!o||o.injector.get(Go,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{var a=n.concat(e).concat({provide:i,useValue:!0},{provide:$r,useValue:"platform"});Wo(Kr.create({providers:a,name:r}))}return Jo(i)}}function Jo(t){var e=Yo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}function Yo(){return jo&&!jo.destroyed?jo:null}var Xo=function(){var t=function(){function t(e){(0,i.Z)(this,t),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return(0,r.Z)(t,[{key:"bootstrapModuleFactory",value:function(t,e){var n,r,i=this,o=(r={ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1},"noop"===(n=e?e.ngZone:void 0)?new Uo:("zone.js"===n?void 0:n)||new Oo({enableLongStackTrace:Ho(),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),a=[{provide:Oo,useValue:o}];return o.run(function(){var e=Kr.create({providers:a,parent:i.injector,name:t.moduleType.name}),n=t.create(e),r=n.injector.get(bn,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return o.runOutsideAngular(function(){var t=o.onError.subscribe({next:function(t){r.handleError(t)}});n.onDestroy(function(){ea(i._modules,n),t.unsubscribe()})}),function(t,e,r){try{var o=((a=n.injector.get(ho)).runInitializers(),a.donePromise.then(function(){return fi(n.injector.get(wo,hi)||hi),i._moduleDoBootstrap(n),n}));return ii(o)?o.catch(function(n){throw e.runOutsideAngular(function(){return t.handleError(n)}),n}):o}catch(jO){throw e.runOutsideAngular(function(){return t.handleError(jO)}),jO}var a}(r,o)})}},{key:"bootstrapModule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Qo({},n);return zo(0,0,t).then(function(t){return e.bootstrapModuleFactory(t,r)})}},{key:"_moduleDoBootstrap",value:function(t){var e=t.injector.get(ta);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module ".concat(T(t.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}},{key:"onDestroy",value:function(t){this._destroyListeners.push(t)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Kr))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}();function Qo(t,e){return Array.isArray(e)?e.reduce(Qo,t):Object.assign(Object.assign({},t),e)}var ta=function(){var t=function(){function t(e,n,r,o,a){var s=this;(0,i.Z)(this,t),this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run(function(){s.tick()})}});var u=new b.y(function(t){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular(function(){t.next(s._stable),t.complete()})}),c=new b.y(function(t){var e;s._zone.runOutsideAngular(function(){e=s._zone.onStable.subscribe(function(){Oo.assertNotInAngularZone(),Ro(function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,t.next(!0))})})});var n=s._zone.onUnstable.subscribe(function(){Oo.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular(function(){t.next(!1)}))});return function(){e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,w.T)(u,c.pipe(E()))}return(0,r.Z)(t,[{key:"bootstrap",value:function(t,e){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=t instanceof pi?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(zi),o=n.create(Kr.NULL,[],e||n.selector,i),a=o.location.nativeElement,s=o.injector.get(Fo,null),u=s&&o.injector.get(Bo);return s&&u&&u.registerApplication(a,s),o.onDestroy(function(){r.detachView(o.hostView),ea(r.components,o),u&&u.unregisterApplication(a)}),this._loadComponent(o),o}},{key:"tick",value:function(){var t=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var e,n=u(this._views);try{for(n.s();!(e=n.n()).done;)e.value.detectChanges()}catch(r){n.e(r)}finally{n.f()}}catch(jO){this._zone.runOutsideAngular(function(){return t._exceptionHandler.handleError(jO)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(t){var e=t;this._views.push(e),e.attachToAppRef(this)}},{key:"detachView",value:function(t){var e=t;ea(this._views,e),e.detachFromAppRef()}},{key:"_loadComponent",value:function(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(mo,[]).concat(this._bootstrapListeners).forEach(function(e){return e(t)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(t){return t.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Oo),sn(Kr),sn(bn),sn(gi),sn(ho))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}();function ea(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var na=function t(){(0,i.Z)(this,t)},ra=Ko(null,"core",[{provide:yo,useValue:"unknown"},{provide:Xo,deps:[Kr]},{provide:Bo,deps:[]},{provide:bo,deps:[]}]),ia=[{provide:ta,useClass:ta,deps:[Oo,Kr,bn,gi,ho]},{provide:no,deps:[Oo],useFactory:function(t){var e=[];return t.onStable.subscribe(function(){for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ho,useClass:ho,deps:[[new dn,lo]]},{provide:Ao,useClass:Ao,deps:[]},po,{provide:Di,useFactory:function(){return Zi},deps:[]},{provide:Li,useFactory:function(){return Hi},deps:[]},{provide:wo,useFactory:function(t){return fi(t=t||"undefined"!=typeof $localize&&$localize.locale||hi),t},deps:[[new fn(wo),new dn,new pn]]},{provide:_o,useValue:"USD"}],oa=function(){var t=function t(e){(0,i.Z)(this,t)};return t.\u0275fac=function(e){return new(e||t)(sn(ta))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:ia}),t}(),aa=null;function sa(){return aa}var ua=function t(){(0,i.Z)(this,t)},ca=new We("DocumentToken"),la=function(){var t=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"historyGo",value:function(t){throw new Error("Not implemented")}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({factory:ha,token:t,providedIn:"platform"}),t}();function ha(){return sn(fa)}var fa=function(){var t=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this))._doc=t,r._init(),r}return(0,r.Z)(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return sa().getBaseHref(this._doc)}},{key:"onPopState",value:function(t){var e=sa().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),function(){return e.removeEventListener("popstate",t)}}},{key:"onHashChange",value:function(t){var e=sa().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),function(){return e.removeEventListener("hashchange",t)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(t){this.location.pathname=t}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(t,e,n){da()?this._history.pushState(t,e,n):this.location.hash=n}},{key:"replaceState",value:function(t,e,n){da()?this._history.replaceState(t,e,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(t)}},{key:"getState",value:function(){return this._history.state}}]),n}(la);return t.\u0275fac=function(e){return new(e||t)(sn(ca))},t.\u0275prov=D({factory:pa,token:t,providedIn:"platform"}),t}();function da(){return!!window.history.pushState}function pa(){return new fa(sn(ca))}function va(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function ga(t){var e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ya(t){return t&&"?"!==t[0]?"?"+t:t}var ma=function(){var t=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"historyGo",value:function(t){throw new Error("Not implemented")}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({factory:ba,token:t,providedIn:"root"}),t}();function ba(t){var e=sn(ca).location;return new _a(sn(la),e&&e.origin||"")}var wa=new We("appBaseHref"),_a=function(){var t=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;if((0,i.Z)(this,n),(o=e.call(this))._platformLocation=t,o._removeListenerFns=[],null==r&&(r=o._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return o._baseHref=r,o}return(0,r.Z)(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(t){return va(this._baseHref,t)}},{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._platformLocation.pathname+ya(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?"".concat(e).concat(n):e}},{key:"pushState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+ya(r));this._platformLocation.pushState(t,e,i)}},{key:"replaceState",value:function(t,e,n,r){var i=this.prepareExternalUrl(n+ya(r));this._platformLocation.replaceState(t,e,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(e=(t=this._platformLocation).historyGo)||void 0===e||e.call(t,n)}}]),n}(ma);return t.\u0275fac=function(e){return new(e||t)(sn(la),sn(wa,8))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Sa=function(){var t=function(){function t(e,n){var r=this;(0,i.Z)(this,t),this._subject=new co,this._urlChangeListeners=[],this._platformStrategy=e;var o=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=ga(Ea(o)),this._platformStrategy.onPopState(function(t){r._subject.emit({url:r.path(!0),pop:!0,state:t.state,type:t.type})})}return(0,r.Z)(t,[{key:"path",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(t))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(t+ya(e))}},{key:"normalize",value:function(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Ea(e)))}},{key:"prepareExternalUrl",value:function(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}},{key:"go",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ya(e)),n)}},{key:"replaceState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ya(e)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(e=(t=this._platformStrategy).historyGo)||void 0===e||e.call(t,n)}},{key:"onUrlChange",value:function(t){var e=this;this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(t){e._notifyUrlChangeListeners(t.url,t.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(t,e)})}},{key:"subscribe",value:function(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(ma),sn(la))},t.normalizeQueryParams=ya,t.joinWithSlash=va,t.stripTrailingSlash=ga,t.\u0275prov=D({factory:ka,token:t,providedIn:"root"}),t}();function ka(){return new Sa(sn(ma),sn(la))}function Ea(t){return t.replace(/\/index.html$/,"")}var xa=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),Ta=function t(){(0,i.Z)(this,t)},Ia=function(){var t=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this)).locale=t,r}return(0,r.Z)(n,[{key:"getPluralCategory",value:function(t,e){switch(function(t){return function(t){var e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t),n=ci(e);if(n)return n;var r=e.split("-")[0];if(n=ci(r))return n;if("en"===r)return si;throw new Error('Missing locale data for the locale "'.concat(t,'".'))}(t)[li.PluralCase]}(e||this.locale)(t)){case xa.Zero:return"zero";case xa.One:return"one";case xa.Two:return"two";case xa.Few:return"few";case xa.Many:return"many";default:return"other"}}}]),n}(Ta);return t.\u0275fac=function(e){return new(e||t)(sn(wo))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}();function Ca(t,e){e=encodeURIComponent(e);var n,r=u(t.split(";"));try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.indexOf("="),a=c(-1==o?[i,""]:[i.slice(0,o),i.slice(o+1)],2),s=a[1];if(a[0].trim()===e)return decodeURIComponent(s)}}catch(l){r.e(l)}finally{r.f()}return null}var Aa,Ma=function(){var t=function t(){(0,i.Z)(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[{provide:Ta,useClass:Ia}]}),t}(),Ra=function t(){(0,i.Z)(this,t)},Oa=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"onAndCancel",value:function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}}},{key:"dispatchEvent",value:function(t,e){t.dispatchEvent(e)}},{key:"remove",value:function(t){t.parentNode&&t.parentNode.removeChild(t)}},{key:"createElement",value:function(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(t){return t instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}},{key:"getBaseHref",value:function(t){var e=(Pa=Pa||document.querySelector("base"))?Pa.getAttribute("href"):null;return null==e?null:function(t){(Aa=Aa||document.createElement("a")).setAttribute("href",t);var e=Aa.pathname;return"/"===e.charAt(0)?e:"/".concat(e)}(e)}},{key:"resetBaseElement",value:function(){Pa=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(t){return Ca(document.cookie,t)}}],[{key:"makeCurrent",value:function(){var t;t=new n,aa||(aa=t)}}]),n}(function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){var t;return(0,i.Z)(this,n),(t=e.apply(this,arguments)).supportsDOMEvents=!0,t}return n}(ua)),Pa=null,Na=new We("TRANSITION_ID"),Da=[{provide:lo,useFactory:function(t,e,n){return function(){n.get(ho).donePromise.then(function(){var n=sa();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(function(e){return e.getAttribute("ng-transition")===t}).forEach(function(t){return n.remove(t)})})}},deps:[Na,ca,Kr],multi:!0}],$a=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"addToWindow",value:function(t){nt.getAngularTestability=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},nt.getAllAngularTestabilities=function(){return t.getAllTestabilities()},nt.getAllAngularRootElements=function(){return t.getAllRootElements()},nt.frameworkStabilizers||(nt.frameworkStabilizers=[]),nt.frameworkStabilizers.push(function(t){var e=nt.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,0==--n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return null!=r?r:n?sa().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}],[{key:"init",value:function(){var e;e=new t,qo=e}}]),t}(),La=function(){var t=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"build",value:function(){return new XMLHttpRequest}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),ja=new We("EventManagerPlugins"),Ua=function(){var t=function(){function t(e,n){var r=this;(0,i.Z)(this,t),this._zone=n,this._eventNameToPlugin=new Map,e.forEach(function(t){return t.manager=r}),this._plugins=e.slice().reverse()}return(0,r.Z)(t,[{key:"addEventListener",value:function(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}},{key:"addGlobalEventListener",value:function(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(t){var e=this._eventNameToPlugin.get(t);if(e)return e;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(t))return this._eventNameToPlugin.set(t,i),i}throw new Error("No event manager plugin found for event ".concat(t))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(ja),sn(Oo))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Fa=function(){function t(e){(0,i.Z)(this,t),this._doc=e}return(0,r.Z)(t,[{key:"addGlobalEventListener",value:function(t,e,n){var r=sa().getGlobalEventTarget(this._doc,t);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(e));return this.addEventListener(r,e,n)}}]),t}(),Ba=function(){var t=function(){function t(){(0,i.Z)(this,t),this._stylesSet=new Set}return(0,r.Z)(t,[{key:"addStyles",value:function(t){var e=this,n=new Set;t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),n.add(t))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(t){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),qa=function(){var t=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this))._doc=t,r._hostNodes=new Map,r._hostNodes.set(t.head,[]),r}return(0,r.Z)(n,[{key:"_addStylesToHost",value:function(t,e,n){var r=this;t.forEach(function(t){var i=r._doc.createElement("style");i.textContent=t,n.push(e.appendChild(i))})}},{key:"addHost",value:function(t){var e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}},{key:"removeHost",value:function(t){var e=this._hostNodes.get(t);e&&e.forEach(Va),this._hostNodes.delete(t)}},{key:"onStylesAdded",value:function(t){var e=this;this._hostNodes.forEach(function(n,r){e._addStylesToHost(t,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(t){return t.forEach(Va)})}}]),n}(Ba);return t.\u0275fac=function(e){return new(e||t)(sn(ca))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}();function Va(t){sa().remove(t)}var Za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ha=/%COMP%/g,za="%COMP%",Ga="_nghost-".concat(za),Wa="_ngcontent-".concat(za);function Ka(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?Ka(t,i,n):(i=i.replace(Ha,t),n.push(i))}return n}function Ja(t){return function(e){if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}var Ya=function(){var t=function(){function t(e,n,r){(0,i.Z)(this,t),this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Xa(e)}return(0,r.Z)(t,[{key:"createRenderer",value:function(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Y.Emulated:var n=this.rendererByCompId.get(e.id);return n||(n=new Qa(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n;case 1:case Y.ShadowDom:return new ts(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){var r=Ka(e.id,e.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Ua),sn(qa),sn(fo))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Xa=function(){function t(e){(0,i.Z)(this,t),this.eventManager=e,this.data=Object.create(null)}return(0,r.Z)(t,[{key:"destroy",value:function(){}},{key:"createElement",value:function(t,e){return e?document.createElementNS(Za[e]||e,t):document.createElement(t)}},{key:"createComment",value:function(t){return document.createComment(t)}},{key:"createText",value:function(t){return document.createTextNode(t)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"insertBefore",value:function(t,e,n){t&&t.insertBefore(e,n)}},{key:"removeChild",value:function(t,e){t&&t.removeChild(e)}},{key:"selectRootElement",value:function(t,e){var n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error('The selector "'.concat(t,'" did not match any elements'));return e||(n.textContent=""),n}},{key:"parentNode",value:function(t){return t.parentNode}},{key:"nextSibling",value:function(t){return t.nextSibling}},{key:"setAttribute",value:function(t,e,n,r){if(r){e=r+":"+e;var i=Za[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}},{key:"removeAttribute",value:function(t,e,n){if(n){var r=Za[n];r?t.removeAttributeNS(r,e):t.removeAttribute("".concat(n,":").concat(e))}else t.removeAttribute(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setStyle",value:function(t,e,n,r){r&(Sn.DashCase|Sn.Important)?t.style.setProperty(e,n,r&Sn.Important?"important":""):t.style[e]=n}},{key:"removeStyle",value:function(t,e,n){n&Sn.DashCase?t.style.removeProperty(e):t.style[e]=""}},{key:"setProperty",value:function(t,e,n){t[e]=n}},{key:"setValue",value:function(t,e){t.nodeValue=e}},{key:"listen",value:function(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ja(n)):this.eventManager.addEventListener(t,e,Ja(n))}}]),t}(),Qa=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(t,e,n,r){var o;(0,i.Z)(this,u),(o=s.call(this,t)).component=n;var a=Ka(r+"-"+n.id,n.styles,[]);return e.addStyles(a),o.contentAttr=Wa.replace(Ha,r+"-"+n.id),o.hostAttr=Ga.replace(Ha,r+"-"+n.id),o}return(0,r.Z)(u,[{key:"applyToHost",value:function(n){(0,t.Z)((0,e.Z)(u.prototype),"setAttribute",this).call(this,n,this.hostAttr,"")}},{key:"createElement",value:function(n,r){var i=(0,t.Z)((0,e.Z)(u.prototype),"createElement",this).call(this,n,r);return(0,t.Z)((0,e.Z)(u.prototype),"setAttribute",this).call(this,i,this.contentAttr,""),i}}]),u}(Xa),ts=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(t,e,n,r){var o;(0,i.Z)(this,u),(o=s.call(this,t)).sharedStylesHost=e,o.hostEl=n,o.shadowRoot=n.attachShadow({mode:"open"}),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=Ka(r.id,r.styles,[]),c=0;c<a.length;c++){var l=document.createElement("style");l.textContent=a[c],o.shadowRoot.appendChild(l)}return o}return(0,r.Z)(u,[{key:"nodeOrShadowRoot",value:function(t){return t===this.hostEl?this.shadowRoot:t}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(n,r){return(0,t.Z)((0,e.Z)(u.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(n),r)}},{key:"insertBefore",value:function(n,r,i){return(0,t.Z)((0,e.Z)(u.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(n),r,i)}},{key:"removeChild",value:function(n,r){return(0,t.Z)((0,e.Z)(u.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(n),r)}},{key:"parentNode",value:function(n){return this.nodeOrShadowRoot((0,t.Z)((0,e.Z)(u.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(n)))}}]),u}(Xa),es=function(){var t=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){return(0,i.Z)(this,n),e.call(this,t)}return(0,r.Z)(n,[{key:"supports",value:function(t){return!0}},{key:"addEventListener",value:function(t,e,n){var r=this;return t.addEventListener(e,n,!1),function(){return r.removeEventListener(t,e,n)}}},{key:"removeEventListener",value:function(t,e,n){return t.removeEventListener(e,n)}}]),n}(Fa);return t.\u0275fac=function(e){return new(e||t)(sn(ca))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),ns=["alt","control","meta","shift"],rs={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},is={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},os={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},as=function(){var t=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){return(0,i.Z)(this,n),e.call(this,t)}return(0,r.Z)(n,[{key:"supports",value:function(t){return null!=n.parseEventName(t)}},{key:"addEventListener",value:function(t,e,r){var i=n.parseEventName(e),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return sa().onAndCancel(t,i.domEventName,o)})}}],[{key:"parseEventName",value:function(t){var e=t.toLowerCase().split("."),r=e.shift();if(0===e.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(e.pop()),o="";if(ns.forEach(function(t){var n=e.indexOf(t);n>-1&&(e.splice(n,1),o+=t+".")}),o+=i,0!=e.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(t){var e="",n=function(t){var e=t.key;if(null==e){if(null==(e=t.keyIdentifier))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&is.hasOwnProperty(e)&&(e=is[e]))}return rs[e]||e}(t);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),ns.forEach(function(r){r!=n&&(0,os[r])(t)&&(e+=r+".")}),e+=n}},{key:"eventCallback",value:function(t,e,r){return function(i){n.getEventFullKey(i)===t&&r.runGuarded(function(){return e(i)})}}},{key:"_normalizeKey",value:function(t){switch(t){case"esc":return"escape";default:return t}}}]),n}(Fa);return t.\u0275fac=function(e){return new(e||t)(sn(ca))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),ss=Ko(ra,"browser",[{provide:yo,useValue:"browser"},{provide:go,useValue:function(){Oa.makeCurrent(),$a.init()},multi:!0},{provide:ca,useFactory:function(){return function(t){Pt=t}(document),document},deps:[]}]),us=[[],{provide:$r,useValue:"root"},{provide:bn,useFactory:function(){return new bn},deps:[]},{provide:ja,useClass:es,multi:!0,deps:[ca,Oo,yo]},{provide:ja,useClass:as,multi:!0,deps:[ca]},[],{provide:Ya,useClass:Ya,deps:[Ua,qa,fo]},{provide:_i,useExisting:Ya},{provide:Ba,useExisting:qa},{provide:qa,useClass:qa,deps:[ca]},{provide:Fo,useClass:Fo,deps:[Oo]},{provide:Ua,useClass:Ua,deps:[ja,Oo]},{provide:Ra,useClass:La,deps:[]},[]],cs=function(){var t=function(){function t(e){if((0,i.Z)(this,t),e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return(0,r.Z)(t,null,[{key:"withServerTransition",value:function(e){return{ngModule:t,providers:[{provide:fo,useValue:e.appId},{provide:Na,useExisting:fo},Da]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(t,12))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:us,imports:[Ma,oa]}),t}();"undefined"!=typeof window&&window,n(98981);var ls=n(15592),hs=n.n(ls);function fs(){throw new Error("AngularJS v1.x is not loaded!")}var ds=function(){return fs()};ds.cleanData=fs;var ps={bootstrap:fs,module:fs,element:ds,injector:fs,version:void 0,resumeBootstrap:fs,getTestability:fs};try{window.hasOwnProperty("angular")&&(ps=window.angular)}catch(qh){}var vs=function(t,e,n){return ps.bootstrap(t,e,n)},gs=function(t,e){return ps.module(t,e)},ys=function(t){return ps.element(t)};ys.cleanData=function(t){return ps.element.cleanData(t)};var ms="$delegate",bs="$injector",ws="$interval",_s="$provide",Ss="$$testability",ks="$$angularDowngradedModuleCount",Es="$$angularInjector",xs="$$angularLazyModuleRef",Ts="$$angularUpgradeAppType",Is="$$UpgradeModule";function Cs(t){return"$"+t+"Controller"}function As(t){var e,n=t.get("$rootElement");t.get("$rootScope").$destroy(),ys.cleanData([e=n[0]]),function(t){return Rs(t.querySelectorAll)}(e)&&ys.cleanData(e.querySelectorAll("*"))}function Ms(t){return t.overriddenName||t.name||t.toString().split("\n")[0]}function Rs(t){return"function"==typeof t}function Os(t,e,n,r){var i=function(t){return t.has(Ts)?t.get(Ts):0}(t),o=function(t){return t.has(ks)?t.get(ks):0}(t);switch(i){case 1:case 2:if(e)throw new Error("Error while ".concat(r,": 'downgradedModule' unexpectedly specified.\n")+"You should not specify a value for 'downgradedModule', unless you are downgrading more than one Angular module (via 'downgradeModule()').");break;case 3:if(!e&&o>=2)throw new Error("Error while ".concat(r,": 'downgradedModule' not specified.\n")+"This application contains more than one downgraded Angular module, thus you need to always specify 'downgradedModule' when downgrading components and injectables.");if(!t.has(n))throw new Error("Error while ".concat(r,": Unable to find the specified downgraded module.\n")+"Did you forget to downgrade an Angular module or include it in the AngularJS application?");break;default:throw new Error("Error while ".concat(r,": Not a valid '@angular/upgrade' application.\n")+"Did you forget to downgrade an Angular module or include it in the AngularJS application?")}}function Ps(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=function(n){var r="".concat(Es).concat(e),i=Rs(t)?Ms(t):String(t),o="instantiating injectable '".concat(i,"'");Os(n,e,r,o);try{return n.get(r).get(t)}catch(a){throw new Error("Error while ".concat(o,": ").concat(a.message||a))}};return n.$inject=[bs],n}var Ns=null;function Ds(t){Ns=t}var $s=[{provide:"$injector",useFactory:function(){if(!Ns)throw new Error("Trying to get the AngularJS injector before it being set.");var t=Ns;return Ns=null,t},deps:[]},{provide:"$rootScope",useFactory:function(t){return t.get("$rootScope")},deps:["$injector"]},{provide:"$compile",useFactory:function(t){return t.get("$compile")},deps:["$injector"]},{provide:"$parse",useFactory:function(t){return t.get("$parse")},deps:["$injector"]}],Ls=function(){function t(e){(0,i.Z)(this,t),this.modInjector=e}return(0,r.Z)(t,[{key:"get",value:function(t,e){return e===Qi?e:this.modInjector.get(t,e)}}]),t}(),js=function(){var t=function(){function t(e,n,r){(0,i.Z)(this,t),this.ngZone=n,this.platformRef=r,this.injector=new Ls(e)}return(0,r.Z)(t,[{key:"bootstrap",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i="$$UpgradeModule.init";gs(i,[]).constant(Ts,2).value(Es,this.injector).factory(xs,[Es,function(t){return{injector:t}}]).config([_s,bs,function(t,n){n.has(Ss)&&t.decorator(Ss,[ms,function(t){var n=t.whenStable,r=e.injector;return t.whenStable=function e(i){n.call(t,function(){var n=r.get(Fo);n.isStable()?i():n.whenStable(e.bind(t,i))})},t}]),n.has(ws)&&t.decorator(ws,[ms,function(t){var n=function(n,r,i,o){for(var a=arguments.length,s=new Array(a>4?a-4:0),u=4;u<a;u++)s[u-4]=arguments[u];return e.ngZone.runOutsideAngular(function(){return t.apply(void 0,[function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];setTimeout(function(){e.ngZone.run(function(){return n.apply(void 0,r)})})},r,i,o].concat(s))})};return Object.keys(t).forEach(function(e){return n[e]=t[e]}),t.hasOwnProperty("flush")&&(n.flush=function(){return t.flush(),n}),n}])}]).run([bs,function(n){e.$injector=n;var r=n.get("$rootScope");Ds(n),e.injector.get(bs),ys(t).data(Cs(Es),e.injector),e.platformRef.onDestroy(function(){return As(n)}),setTimeout(function(){var t=e.ngZone.onMicrotaskEmpty.subscribe(function(){return r.$$phase?(Ho()&&console.warn("A digest was triggered while one was already in progress. This may mean that something is triggering digests outside the Angular zone."),r.$evalAsync()):r.$digest()});r.$on("$destroy",function(){t.unsubscribe()})},0)}]);var o=gs(Is,[i].concat(n)),a=window.angular;if(a.resumeBootstrap=void 0,this.ngZone.run(function(){vs(t,[o.name],r)}),a.resumeBootstrap){var s=a.resumeBootstrap,u=this.ngZone;a.resumeBootstrap=function(){var t=this,e=arguments;return a.resumeBootstrap=s,u.run(function(){return a.resumeBootstrap.apply(t,e)})}}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Kr),sn(Oo),sn(Xo))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[$s]}),t}(),Us=n(61855),Fs=n(17512);function Bs(t){return(0,Fs.R)(function(e){t.addListener(e)},function(e){return t.removeListener(e)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t})}var qs=n(4567),Vs=n(59845),Zs=n(84608),Hs=n(63847);function zs(t){return function(e){var n=new Gs(t),r=e.lift(n);return n.caught=r}}var Gs=function(){function t(e){(0,i.Z)(this,t),this.selector=e}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ws(t,this.selector,this.caught))}}]),t}(),Ws=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(t,e,n){var r;return(0,i.Z)(this,u),(r=s.call(this,t)).selector=e,r.caught=n,r}return(0,r.Z)(u,[{key:"error",value:function(n){if(!this.isStopped){var r;try{r=this.selector(n,this.caught)}catch(a){return void(0,t.Z)((0,e.Z)(u.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var i=new Hs.IY(this);this.add(i);var o=(0,Hs.ft)(r,i);o!==i&&this.add(o)}}}]),u}(Hs.Ds),Ks=n(59272),Js=n(56560);function Ys(t,e){return"function"==typeof e?function(n){return n.pipe(Ys(function(n,r){return(0,Js.D)(t(n,r)).pipe((0,Ks.U)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new Xs(t))}}var Xs=function(){function t(e){(0,i.Z)(this,t),this.project=e}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Qs(t,this.project))}}]),t}(),Qs=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(t,e){var n;return(0,i.Z)(this,u),(n=s.call(this,t)).project=e,n.index=0,n}return(0,r.Z)(u,[{key:"_next",value:function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}},{key:"_innerSub",value:function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new Hs.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Hs.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var n=this.innerSubscription;n&&!n.closed||(0,t.Z)((0,e.Z)(u.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&(0,t.Z)((0,e.Z)(u.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t){this.destination.next(t)}}]),u}(Hs.Ds),tu="__arUnsubscribe",eu=function(){function t(t){this._sendFn=t,this._msgCnt=0,this._msgResolvers=new Map}return t.prototype.sendWithResponse=function(t,e){return this.sendWithResponseStream(t,e).toPromise()},t.prototype.sendWithResponseStream=function(t,e){var n=this;if(t===tu)throw new Error;return new b.y(function(r){var i=++n._msgCnt,o=!0;return function(r){var i,o=new m.xQ;return n._msgResolvers.set(r,o),(0,qs.P)(function(){return(0,Us.mG)(n,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this._sendFn({type:t,data:e,msgId:r})];case 1:return[2,n.sent()]}})})}).pipe(zs(function(t){return delete n._msgResolvers[r],(0,Vs._)(t)}),(i=o.asObservable(),Ys(function(){return i})))}(i).subscribe(function(t){return r.next(t)},function(t){o=!1,r.error(t)},function(){o=!1,r.complete()}),function(){o&&n._sendFn({type:tu,msgId:i})}})},t.prototype.send=function(t,e){if(t===tu)throw new Error;this._sendFn("object"==typeof t?t:{type:t,data:e})},t.prototype.handleResult=function(t){if(t&&"result"===t.type){var e=this._msgResolvers.get(t.msgId);if(!e)throw new Error("asyncResponse: no resolver");return"error"in t||t.isError?(e.error(t.data),this._msgResolvers.delete(t.msgId)):(t.isNext&&e.next(t.data),t.isComplete&&(e.complete(),this._msgResolvers.delete(t.msgId))),!0}return!1},t}(),nu=function(){function t(t){this._sendFn=t,this._subscriptions=new Map}return t.prototype._sendComplete=function(t,e,n){void 0===n&&(n=!0),this._sendFn({type:"result",msgId:e.msgId,data:t,isComplete:!0,isNext:n})},t.prototype._sendError=function(t,e){t instanceof Error&&!("toJSON"in t)&&(t={name:t.name,message:t.message}),this._sendFn({type:"result",msgId:e.msgId,data:t,isError:!0})},t.prototype._sendNext=function(t,e){this._sendFn({type:"result",msgId:e.msgId,data:t,isNext:!0})},t.prototype.respond=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o=this;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t];case 1:return n=a.sent(),(0,Zs.b)(n)?(r=n.subscribe(function(t){return o._sendNext(t,e)},function(t){o._subscriptions.delete(e.msgId),o._sendError(t,e)},function(){o._subscriptions.delete(e.msgId),o._sendComplete(void 0,e,!1)}),this._subscriptions.set(e.msgId,r)):this._sendComplete(n,e),[3,3];case 2:return i=a.sent(),this._sendError(i,e),[3,3];case 3:return[2,null]}})})},t.prototype.handleMessage=function(t){if(t&&t.type===tu){var e=this._subscriptions.get(t.msgId);return e&&(e.unsubscribe(),this._subscriptions.delete(t.msgId)),!0}return!1},t}(),ru=function(){function t(){}return t.create=function(t){var e=chrome.runtime.connect({name:"servify_"+t}),n=new eu(function(t){e.postMessage(t)});Bs(e.onMessage).subscribe(function(t){var e=(0,Us.CR)(t,1);n.handleResult(e[0])});var r=new Proxy({},{get:function(t,e){var r=e.toString();return r.startsWith("on")?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.sendWithResponseStream(r,t)}:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.sendWithResponse(r,t)}}}),i=function(){};return i.prototype=r,i},t}();function iu(t){return ru.create(t)}var ou,au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.\u0275prov=D({token:e,factory:e.\u0275fac=function(){var t;return function(n){return(t||(t=Ze(e)))(n||e)}}(),providedIn:"root"}),e}(iu("userAccount")),su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.\u0275prov=D({token:e,factory:e.\u0275fac=function(){var t;return function(n){return(t||(t=Ze(e)))(n||e)}}(),providedIn:"root"}),e}(iu("extensionAuth"));iu("onboarding"),iu("reset"),function(t){t[t.DATA=0]="DATA",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.__NOTHING=4]="__NOTHING"}(ou||(ou={}));var uu=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,null,[{key:"isBrowser",get:function(){return t.simulateBrowser||!("undefined"==typeof window||!window.document)}},{key:"isNode",get:function(){return t.simulateBrowser||!t.isBrowser}}]),t}();uu.simulateBrowser=!1;var cu=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,null,[{key:"msg",value:function(t,e,n,r,i,o){var a="gray";if(i===ou.INFO&&(a="deepskyblue"),i===ou.ERROR&&(a="red"),i===ou.WARN&&(a="orange"),o){var s=o-n.length;if(s>0)for(var u=0;u<s;u++)n+=" "}if(hu.isProductionMode)return this;if(uu.isBrowser)if(document.documentMode||/Edge/.test(navigator.userAgent)){if("string"==typeof t)e.unshift("[[ "+n+" ]] "+t+" ");else{var c="[[ "+n+"]] ";e.push(t),e.unshift(c)}i===ou.INFO?console.info.apply(console,e):i===ou.ERROR?console.error.apply(console,e):i===ou.WARN?console.warn.apply(console,e):console.log.apply(console,e)}else{if("string"==typeof t){var l="%c "+n+"  %c "+t+" ",h="background: "+r+";color:white; border: 1px solid "+r+"; ";e.unshift("border: 1px solid "+a+"; "),e.unshift(h),e.unshift(l)}else{var f="%c "+n+" ",d="background: "+r+";color:white; border: 1px solid "+a+"; ";e.push(t),e.unshift(d),e.unshift(f)}console.log.apply(console,e)}}}]),t}();function lu(t,e){return t.filter(function(t){return t instanceof RegExp?t.test(e):t===e||!(!e.match||"function"!=typeof e.match||!e.match(t))}).length>0}var hu=function(){function t(e,n,r,o,a,s){var u=this;(0,i.Z)(this,t),this.name=e,this.color=n,this.developmentMode=r,this.allowed=o,this.isMuted=a,this.fixedWidth=s,this.d=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._data(t,n)},this.er=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._error(t,n)},this.i=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._info(t,n)},this.w=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._warn(t,n)},this.data=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._data(t,n)},this.error=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._error(t,n)},this.info=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._info(t,n)},this.warn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u._warn(t,n)},Array.isArray(fu.levels)&&fu.levels.length>0&&(this.allowed=fu.levels)}return(0,r.Z)(t,[{key:"onlyWhen",value:function(t){"function"==typeof t?this.isMuted=!t():"boolean"==typeof t&&(this.isMuted=!t)}},{key:"_data",value:function(t){if(this.isMuted)return this;if(this.allowed.length>=1&&lu(this.allowed,ou.__NOTHING)&&!lu(this.allowed,ou.DATA))return this;if(0===this.allowed.length||lu(this.allowed,ou.DATA)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];cu.msg.apply(void 0,[t].concat(n,[this.name,this.color,ou.DATA,this.fixedWidth]))}return this}},{key:"_error",value:function(t){if(this.isMuted)return this;if(this.allowed.length>=1&&lu(this.allowed,ou.__NOTHING)&&!lu(this.allowed,ou.ERROR))return this;if(0===this.allowed.length||lu(this.allowed,ou.ERROR)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];cu.msg.apply(void 0,[t].concat(n,[this.name,this.color,ou.ERROR,this.fixedWidth]))}return this}},{key:"_info",value:function(t){if(this.isMuted)return this;if(this.allowed.length>=1&&lu(this.allowed,ou.__NOTHING)&&!lu(this.allowed,ou.INFO))return this;if(0===this.allowed.length||lu(this.allowed,ou.INFO)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];cu.msg.apply(void 0,[t].concat(n,[this.name,this.color,ou.INFO,this.fixedWidth]))}return this}},{key:"_warn",value:function(t){if(this.isMuted)return this;if(this.allowed.length>=1&&lu(this.allowed,ou.__NOTHING)&&!lu(this.allowed,ou.WARN))return this;if(0===this.allowed.length||lu(this.allowed,ou.WARN)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];cu.msg.apply(void 0,[t].concat(n,[this.name,this.color,ou.WARN,this.fixedWidth]))}return this}},{key:"level",value:function(t){return this._level=t,this}},{key:"mute",value:function(){this.isMuted=!0}}]),t}();hu.isProductionMode=!1;var fu=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,null,[{key:"create",value:function(e){var n;if(void 0===t.instances[e]){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n=new hu(e,t.getRandomColor(),t.isDevelopmentMode,i,t.isMutedModule(e),t.levels.length>0?t.fixedWidth:void 0),t.instances[e]=n}else n=t.instances[e];return n}},{key:"getRandomColor",value:function(){var t="012345".split(""),e="#";e+=t[Math.round(5*Math.random())],t="0123456789ABCDEF".split("");for(var n=0;n<5;n++)e+=t[Math.round(15*Math.random())];return void 0===e?this.getRandomColor():e}},{key:"display",value:function(e,n,r,i){lu(t.levels,r)&&(r===ou.DATA&&cu.msg(e,n,i,t.instances[i].color,ou.DATA,t.instances[i].fixedWidth),r===ou.ERROR&&cu.msg(e,n,i,t.instances[i].color,ou.ERROR,t.instances[i].fixedWidth),r===ou.INFO&&cu.msg(e,n,i,t.instances[i].color,ou.INFO,t.instances[i].fixedWidth),r===ou.WARN&&cu.msg(e,n,i,t.instances[i].color,ou.WARN,t.instances[i].fixedWidth))}},{key:"onlyLevel",value:function(){if(t._logOnly)throw"[ng2-logger] You should use funcion onlyLevel only once";t._logOnly||(t._logOnly=!0);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i in t.levels=Array.isArray(n)?n:[n],t.instances)if(t.instances.hasOwnProperty(i)){var o=t.instances[i];o.allowed=t.levels}}},{key:"onlyModules",value:function(){if(t._logModules)throw"[ng2-logger] You should use funcion onlyModules only once";t._logModules||(t._logModules=!0);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];0!==n.length&&(t.modules=n,t.muteAllOtherModules())}},{key:"isMutedModule",value:function(e){return 0!=t.modules.length&&!lu(t.modules,e)}},{key:"muteAllOtherModules",value:function(){for(var e in t.instances)lu(t.modules,e)||t.instances[e].mute()}},{key:"setProductionMode",value:function(){if(t.modeIsSet)throw t.modeIsSet=!1,"[ng2-logger] Production mode is already set";t.modeIsSet=!0,setTimeout(function(){t.modeIsSet&&void 0!==console&&void 0!==console.clear&&(console.clear(),console.log=function(){},console.error=function(){},console.warn=function(){},console.info=function(){})}),hu.isProductionMode=!0,t.isDevelopmentMode=!1}}]),t}();fu.instances={},fu.fixedWidth=0,fu._logOnly=!1,fu.levels=[],fu._logModules=!1,fu.modules=[],fu.isDevelopmentMode=!0,fu.modeIsSet=!1;var du=n(88130),pu=n(45380),vu=function(){return(vu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function gu(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function yu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(gu(arguments[e]));return t}var mu,bu=n(48906),wu=n(28667),_u=n(50031),Su=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ku=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){(0,bu.c)(function(e){var n=(0,du.Gd)();if(!n)return e;var r=n.getIntegration(t);if(r){var i=n.getClient(),o=i?i.getOptions():{},a=r._mergeOptions(o);if(r._shouldDropEvent(e,a))return null}return e})},t.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(pu.k.warn("Event dropped due to being internal Sentry Error.\nEvent: "+(0,wu.jH)(t)),!0):this._isIgnoredError(t,e)?(pu.k.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+(0,wu.jH)(t)),!0):this._isBlacklistedUrl(t,e)?(pu.k.warn("Event dropped due to being matched by `blacklistUrls` option.\nEvent: "+(0,wu.jH)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isWhitelistedUrl(t,e)&&(pu.k.warn("Event dropped due to not being matched by `whitelistUrls` option.\nEvent: "+(0,wu.jH)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},t.prototype._isSentryError=function(t,e){if(void 0===e&&(e={}),!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(n){return!1}},t.prototype._isIgnoredError=function(t,e){return void 0===e&&(e={}),!(!e.ignoreErrors||!e.ignoreErrors.length)&&this._getPossibleEventMessages(t).some(function(t){return e.ignoreErrors.some(function(e){return(0,_u.zC)(t,e)})})},t.prototype._isBlacklistedUrl=function(t,e){if(void 0===e&&(e={}),!e.blacklistUrls||!e.blacklistUrls.length)return!1;var n=this._getEventFilterUrl(t);return!!n&&e.blacklistUrls.some(function(t){return(0,_u.zC)(n,t)})},t.prototype._isWhitelistedUrl=function(t,e){if(void 0===e&&(e={}),!e.whitelistUrls||!e.whitelistUrls.length)return!0;var n=this._getEventFilterUrl(t);return!n||e.whitelistUrls.some(function(t){return(0,_u.zC)(n,t)})},t.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{blacklistUrls:yu(this._options.blacklistUrls||[],t.blacklistUrls||[]),ignoreErrors:yu(this._options.ignoreErrors||[],t.ignoreErrors||[],Su),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal,whitelistUrls:yu(this._options.whitelistUrls||[],t.whitelistUrls||[])}},t.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=e.value,i=void 0===r?"":r;return[""+i,(void 0===n?"":n)+": "+i]}catch(o){return pu.k.error("Cannot extract message for event "+(0,wu.jH)(t)),[]}return[]},t.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(r){return pu.k.error("Cannot extract url for event "+(0,wu.jH)(t)),null}},t.id="InboundFilters",t}(),Eu=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){mu=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return mu.apply(n,t)}},t.id="FunctionToString",t}(),xu=function(t,e){return(xu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Tu(t,e){function n(){this.constructor=t}xu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Iu=function(){return(Iu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Cu(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Au(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Cu(arguments[e]));return t}var Mu,Ru=function(t,e){return(Ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Ou=function(){return(Ou=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Pu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}),Nu=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,Pu(r,n.prototype),r}return function(t,e){function n(){this.constructor=t}Ru(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),Du=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w\.-]+)(?::(\d+))?\/(.+)/,$u="Invalid Dsn",Lu=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,n=e.path,r=e.pass,i=e.port;return e.protocol+"://"+e.user+(t&&r?":"+r:"")+"@"+e.host+(i?":"+i:"")+"/"+(n?n+"/":n)+e.projectId},t.prototype._fromString=function(t){var e=Du.exec(t);if(!e)throw new Nu($u);var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(e.slice(1),6),r=n[0],i=n[1],o=n[2],a=void 0===o?"":o,s=n[3],u=n[4],c=void 0===u?"":u,l="",h=n[5],f=h.split("/");f.length>1&&(l=f.slice(0,-1).join("/"),h=f.pop()),this._fromComponents({host:s,pass:a,path:l,projectId:h,port:c,protocol:r,user:i})},t.prototype._fromComponents=function(t){this.protocol=t.protocol,this.user=t.user,this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype._validate=function(){var t=this;if(["protocol","user","host","projectId"].forEach(function(e){if(!t[e])throw new Nu($u)}),"http"!==this.protocol&&"https"!==this.protocol)throw new Nu($u);if(this.port&&isNaN(parseInt(this.port,10)))throw new Nu($u)},t}(),ju=n(43919),Uu=function(){function t(t){this.dsn=t,this._dsnObject=new Lu(t)}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.getStoreEndpoint=function(){return""+this._getBaseUrl()+this.getStoreEndpointPath()},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){var t={sentry_key:this._dsnObject.user,sentry_version:"7"};return this.getStoreEndpoint()+"?"+(0,ju._j)(t)},t.prototype._getBaseUrl=function(){var t=this._dsnObject;return(t.protocol?t.protocol+":":"")+"//"+t.host+(t.port?":"+t.port:"")},t.prototype.getStoreEndpointPath=function(){var t=this._dsnObject;return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this._dsnObject,r=["Sentry sentry_version=7"];return r.push("sentry_timestamp="+(0,wu._I)()),r.push("sentry_client="+t+"/"+e),r.push("sentry_key="+n.user),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this._dsnObject,n=this._getBaseUrl()+(e.path?"/"+e.path:"")+"/api/embed/error-page/",r=[];for(var i in r.push("dsn="+e.toString()),t)if("user"===i){if(!t.user)continue;t.user.name&&r.push("name="+encodeURIComponent(t.user.name)),t.user.email&&r.push("email="+encodeURIComponent(t.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return r.length?n+"?"+r.join("&"):n},t}(),Fu=n(66668),Bu=n(44495),qu=[],Vu=function(){function t(t,e){this._integrations={},this._processing=!1,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=new Lu(e.dsn)),this._isEnabled()&&(this._integrations=function(t){var e={};return function(t){var e=t.defaultIntegrations&&yu(t.defaultIntegrations)||[],n=t.integrations,r=[];if(Array.isArray(n)){var i=n.map(function(t){return t.name}),o=[];e.forEach(function(t){-1===i.indexOf(t.name)&&-1===o.indexOf(t.name)&&(r.push(t),o.push(t.name))}),n.forEach(function(t){-1===o.indexOf(t.name)&&(r.push(t),o.push(t.name))})}else"function"==typeof n?(r=n(e),r=Array.isArray(r)?r:[r]):r=yu(e);var a=r.map(function(t){return t.name}),s="Debug";return-1!==a.indexOf(s)&&r.push.apply(r,yu(r.splice(a.indexOf(s),1))),r}(t).forEach(function(t){e[t.name]=t,function(t){-1===qu.indexOf(t.name)&&(t.setupOnce(bu.c,du.Gd),qu.push(t.name),pu.k.log("Integration installed: "+t.name))}(t)}),e}(this._options))}return t.prototype.captureException=function(t,e,n){var r=this,i=e&&e.event_id;return this._processing=!0,this._getBackend().eventFromException(t,e).then(function(t){return r._processEvent(t,e,n)}).then(function(t){i=t&&t.event_id,r._processing=!1}).then(null,function(t){pu.k.error(t),r._processing=!1}),i},t.prototype.captureMessage=function(t,e,n,r){var i=this,o=n&&n.event_id;return this._processing=!0,((0,Fu.pt)(t)?this._getBackend().eventFromMessage(""+t,e,n):this._getBackend().eventFromException(t,n)).then(function(t){return i._processEvent(t,n,r)}).then(function(t){o=t&&t.event_id,i._processing=!1}).then(null,function(t){pu.k.error(t),i._processing=!1}),o},t.prototype.captureEvent=function(t,e,n){var r=this,i=e&&e.event_id;return this._processing=!0,this._processEvent(t,e,n).then(function(t){i=t&&t.event_id,r._processing=!1}).then(null,function(t){pu.k.error(t),r._processing=!1}),i},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.flush=function(t){var e=this;return this._isClientProcessing(t).then(function(n){return clearInterval(n.interval),e._getBackend().getTransport().close(t).then(function(t){return n.ready&&t})})},t.prototype.close=function(t){var e=this;return this.flush(t).then(function(t){return e.getOptions().enabled=!1,t})},t.prototype.getIntegrations=function(){return this._integrations||{}},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return pu.k.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._isClientProcessing=function(t){var e=this;return new Bu.c(function(n){var r=0,i=0;clearInterval(i),i=setInterval(function(){e._processing?(r+=1,t&&r>=t&&n({interval:i,ready:!1})):n({interval:i,ready:!0})},1)})},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,n){var r=this.getOptions(),i=r.environment,o=r.release,a=r.dist,s=r.maxValueLength,u=void 0===s?250:s,c=vu({},t);void 0===c.environment&&void 0!==i&&(c.environment=i),void 0===c.release&&void 0!==o&&(c.release=o),void 0===c.dist&&void 0!==a&&(c.dist=a),c.message&&(c.message=(0,_u.$G)(c.message,u));var l=c.exception&&c.exception.values&&c.exception.values[0];l&&l.value&&(l.value=(0,_u.$G)(l.value,u));var h=c.request;h&&h.url&&(h.url=(0,_u.$G)(h.url,u)),void 0===c.event_id&&(c.event_id=n&&n.event_id?n.event_id:(0,wu.DM)()),this._addIntegrations(c.sdk);var f=Bu.c.resolve(c);return e&&(f=e.applyToEvent(c,n)),f},t.prototype._addIntegrations=function(t){var e=Object.keys(this._integrations);t&&e.length>0&&(t.integrations=e)},t.prototype._processEvent=function(t,e,n){var r=this,i=this.getOptions(),o=i.beforeSend,a=i.sampleRate;return this._isEnabled()?"number"==typeof a&&Math.random()>a?Bu.c.reject("This event has been sampled, will not send event."):new Bu.c(function(i,a){r._prepareEvent(t,n,e).then(function(t){if(null!==t){var n=t;try{if(e&&e.data&&!0===e.data.__sentry__||!o)return r._getBackend().sendEvent(n),void i(n);var s=o(t,e);if(void 0===s)pu.k.error("`beforeSend` method has to return `null` or a valid event.");else if((0,Fu.J8)(s))r._handleAsyncBeforeSend(s,i,a);else{if(null===(n=s))return pu.k.log("`beforeSend` returned `null`, will not send event."),void i(null);r._getBackend().sendEvent(n),i(n)}}catch(u){r.captureException(u,{data:{__sentry__:!0},originalException:u}),a("`beforeSend` threw an error, will not send event.")}}else a("An event processor returned null, will not send event.")}).then(null,function(){a("`beforeSend` threw an error, will not send event.")})}):Bu.c.reject("SDK not enabled, will not send event.")},t.prototype._handleAsyncBeforeSend=function(t,e,n){var r=this;t.then(function(t){null!==t?(r._getBackend().sendEvent(t),e(t)):n("`beforeSend` returned `null`, will not send event.")}).then(null,function(t){n("beforeSend rejected with "+t)})},t}();!function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"}(Mu||(Mu={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(Mu||(Mu={}));var Zu,Hu=function(){function t(){}return t.prototype.sendEvent=function(t){return Bu.c.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Mu.Skipped})},t.prototype.close=function(t){return Bu.c.resolve(!0)},t}(),zu=function(){function t(t){this._options=t,this._options.dsn||pu.k.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype._setupTransport=function(){return new Hu},t.prototype.eventFromException=function(t,e){throw new Nu("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new Nu("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,function(t){pu.k.error("Error while sending event: "+t)})},t.prototype.getTransport=function(){return this._transport},t}();function Gu(){if(!("fetch"in(0,wu.Rf)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(jO){return!1}}function Wu(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Ku(){if(!Gu())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(jO){return!1}}!function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}(Zu||(Zu={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(Zu||(Zu={}));var Ju="?",Yu=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Xu=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,Qu=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,tc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ec=/\((\S*)(?::(\d+))(?::(\d+))\)/;function nc(t){var e=null,n=t&&t.framesToPop;try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,i=t.stacktrace.split("\n"),o=[],a=0;a<i.length;a+=2){var s=null;(e=n.exec(i[a]))?s={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=r.exec(i[a]))&&(s={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),s&&(!s.func&&s.line&&(s.func=Ju),o.push(s))}return o.length?{message:ic(t),name:t.name,stack:o}:null}(t))return rc(e,n)}catch(jO){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,r,i=[],o=t.stack.split("\n"),a=0;a<o.length;++a){if(n=Yu.exec(o[a])){var s=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=ec.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:n[2],func:n[1]||Ju,args:s?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=Qu.exec(o[a]))r={url:n[2],func:n[1]||Ju,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=Xu.exec(o[a])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=tc.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==a||n[5]||void 0===t.columnNumber||(i[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||Ju,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=Ju),i.push(r)}return i.length?{message:ic(t),name:t.name,stack:i}:null}(t))return rc(e,n)}catch(jO){}return{message:ic(t),name:t&&t.name,stack:[],failed:!0}}function rc(t,e){try{return Iu({},t,{stack:t.stack.slice(e)})}catch(jO){return t}}function ic(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function oc(t){var e=sc(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function ac(t){return{exception:{values:[oc(t)]}}}function sc(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.map(function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}}).slice(0,50).reverse()}function uc(t,e,n){var r;if(void 0===n&&(n={}),(0,Fu.VW)(t)&&t.error)return ac(nc(t=t.error));if((0,Fu.TX)(t)||(0,Fu.fm)(t)){var i=t,o=i.name||((0,Fu.TX)(i)?"DOMError":"DOMException"),a=i.message?o+": "+i.message:o;return r=cc(a,e,n),(0,wu.Db)(r,a),r}return(0,Fu.VZ)(t)?r=ac(nc(t)):(0,Fu.PO)(t)||(0,Fu.cO)(t)?(r=function(t,e,n){var r={exception:{values:[{type:(0,Fu.cO)(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+(0,ju.zf)(t)}]},extra:{__serialized__:(0,ju.Qy)(t)}};if(e){var i=sc(nc(e).stack);r.stacktrace={frames:i}}return r}(t,e,n.rejection),(0,wu.EG)(r,{synthetic:!0}),r):(r=cc(t,e,n),(0,wu.Db)(r,""+t,void 0),(0,wu.EG)(r,{synthetic:!0}),r)}function cc(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var i=sc(nc(e).stack);r.stacktrace={frames:i}}return r}var lc=function(){function t(t){this._limit=t,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var e=this;return this.isReady()?(-1===this._buffer.indexOf(t)&&this._buffer.push(t),t.then(function(){return e.remove(t)}).then(null,function(){return e.remove(t).then(null,function(){})}),t):Bu.c.reject(new Nu("Not adding Promise due to buffer limit reached."))},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var e=this;return new Bu.c(function(n){var r=setTimeout(function(){t&&t>0&&n(!1)},t);Bu.c.all(e._buffer).then(function(){clearTimeout(r),n(!0)}).then(null,function(){n(!0)})})},t}(),hc=function(){function t(t){this.options=t,this._buffer=new lc(30),this.url=new Uu(this.options.dsn).getStoreEndpointWithUrlEncodedAuth()}return t.prototype.sendEvent=function(t){throw new Nu("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t}(),fc=(0,wu.Rf)(),dc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._disabledUntil=new Date(Date.now()),e}return Tu(e,t),e.prototype.sendEvent=function(t){var e=this;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:t,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429});var n={body:JSON.stringify(t),method:"POST",referrerPolicy:Ku()?"origin":""};return void 0!==this.options.headers&&(n.headers=this.options.headers),this._buffer.add(new Bu.c(function(t,r){fc.fetch(e.url,n).then(function(n){var i=Mu.fromHttpCode(n.status);if(i!==Mu.Success){if(i===Mu.RateLimit){var o=Date.now();e._disabledUntil=new Date(o+(0,wu.JY)(o,n.headers.get("Retry-After"))),pu.k.warn("Too many requests, backing off till: "+e._disabledUntil)}r(n)}else t({status:i})}).catch(r)}))},e}(hc),pc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._disabledUntil=new Date(Date.now()),e}return Tu(e,t),e.prototype.sendEvent=function(t){var e=this;return new Date(Date.now())<this._disabledUntil?Promise.reject({event:t,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429}):this._buffer.add(new Bu.c(function(n,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var t=Mu.fromHttpCode(i.status);if(t!==Mu.Success){if(t===Mu.RateLimit){var o=Date.now();e._disabledUntil=new Date(o+(0,wu.JY)(o,i.getResponseHeader("Retry-After"))),pu.k.warn("Too many requests, backing off till: "+e._disabledUntil)}r(i)}else n({status:t})}},i.open("POST",e.url),e.options.headers)e.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,e.options.headers[o]);i.send(JSON.stringify(t))}))},e}(hc),vc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tu(e,t),e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=Iu({},this._options.transportOptions,{dsn:this._options.dsn});return this._options.transport?new this._options.transport(e):Gu()?new dc(e):new pc(e)},e.prototype.eventFromException=function(t,e){var n=uc(t,e&&e.syntheticException||void 0,{attachStacktrace:this._options.attachStacktrace});return(0,wu.EG)(n,{handled:!0,type:"generic"}),n.level=Zu.Error,e&&e.event_id&&(n.event_id=e.event_id),Bu.c.resolve(n)},e.prototype.eventFromMessage=function(t,e,n){void 0===e&&(e=Zu.Info);var r=cc(t,n&&n.syntheticException||void 0,{attachStacktrace:this._options.attachStacktrace});return r.level=e,n&&n.event_id&&(r.event_id=n.event_id),Bu.c.resolve(r)},e}(zu),gc="5.11.2",yc=function(t){function e(e){return void 0===e&&(e={}),t.call(this,vc,e)||this}return Tu(e,t),e.prototype._prepareEvent=function(e,n,r){return e.platform=e.platform||"javascript",e.sdk=Iu({},e.sdk,{name:"sentry.javascript.browser",packages:Au(e.sdk&&e.sdk.packages||[],[{name:"npm:@sentry/browser",version:gc}]),version:gc}),t.prototype._prepareEvent.call(this,e,n,r)},e.prototype.showReportDialog=function(t){void 0===t&&(t={});var e=(0,wu.Rf)().document;if(e)if(this._isEnabled()){var n=t.dsn||this.getDsn();if(t.eventId)if(n){var r=e.createElement("script");r.async=!0,r.src=new Uu(n).getReportDialogEndpoint(t),t.onLoad&&(r.onload=t.onLoad),(e.head||e.body).appendChild(r)}else pu.k.error("Missing `Dsn` option in showReportDialog call");else pu.k.error("Missing `eventId` option in showReportDialog call")}else pu.k.error("Trying to call showReportDialog with Sentry Client is disabled")},e}(Vu);function mc(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function bc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(mc(arguments[e]));return t}function wc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=(0,du.Gd)();if(r&&r[t])return r[t].apply(r,bc(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function _c(t){var e;try{throw new Error("Sentry syntheticException")}catch(t){e=t}return wc("captureException",t,{originalException:t,syntheticException:e})}function Sc(t){wc("withScope",t)}var kc=0;function Ec(){return kc>0}function xc(){kc+=1,setTimeout(function(){kc-=1})}function Tc(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(jO){return t}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map(function(t){return Tc(t,e)});return t.handleEvent?t.handleEvent.apply(this,i):t.apply(this,i)}catch(o){throw xc(),Sc(function(t){t.addEventProcessor(function(t){var n=Iu({},t);return e.mechanism&&((0,wu.Db)(n,void 0,void 0),(0,wu.EG)(n,e.mechanism)),n.extra=Iu({},n.extra,{arguments:(0,ju.Fv)(r,3)}),n}),_c(o)}),o}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch(o){}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch(o){}return r}var Ic,Cc=function(){function t(){this._ignoreOnError=0,this.name=t.id}return t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Tc(r,{mechanism:{data:{function:(0,wu.$P)(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t(Tc(e,{mechanism:{data:{function:"requestAnimationFrame",handler:(0,wu.$P)(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=(0,wu.Rf)(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&((0,ju.hl)(n,"addEventListener",function(e){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=Tc(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:(0,wu.$P)(r),target:t},handled:!0,type:"instrument"}}))}catch(o){}return e.call(this,n,Tc(r,{mechanism:{data:{function:"addEventListener",handler:(0,wu.$P)(r),target:t},handled:!0,type:"instrument"}}),i)}}),(0,ju.hl)(n,"removeEventListener",function(t){return function(e,n,r){var i=n;try{i=i&&(i.__sentry_wrapped__||i)}catch(jO){}return t.call(this,e,i,r)}}))},t.prototype._wrapXHR=function(t){return function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this,o=["onload","onerror","onprogress"];return o.forEach(function(t){t in e&&"function"==typeof e[t]&&(0,ju.hl)(e,t,function(e){return Tc(e,{mechanism:{data:{function:t,handler:(0,wu.$P)(e)},handled:!0,type:"instrument"}})})}),"onreadystatechange"in i&&"function"==typeof i.onreadystatechange&&(0,ju.hl)(i,"onreadystatechange",function(t){var e={mechanism:{data:{function:"onreadystatechange",handler:(0,wu.$P)(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(e.mechanism.data.handler=(0,wu.$P)(t.__sentry_original__)),Tc(t,e)}),t.apply(this,n)}},t.prototype.setupOnce=function(){this._ignoreOnError=this._ignoreOnError;var t=(0,wu.Rf)();(0,ju.hl)(t,"setTimeout",this._wrapTimeFunction.bind(this)),(0,ju.hl)(t,"setInterval",this._wrapTimeFunction.bind(this)),(0,ju.hl)(t,"requestAnimationFrame",this._wrapRAF.bind(this)),"XMLHttpRequest"in t&&(0,ju.hl)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach(this._wrapEventTarget.bind(this))},t.id="TryCatch",t}(),Ac=(0,wu.Rf)(),Mc={},Rc={};function Oc(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(Mc[t.type]=Mc[t.type]||[],Mc[t.type].push(t.callback),function(t){if(!Rc[t])switch(Rc[t]=!0,t){case"console":"console"in Ac&&["debug","info","warn","error","log","assert"].forEach(function(t){t in Ac.console&&(0,ju.hl)(Ac.console,t,function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Pc("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,Ac.console,n)}})});break;case"dom":"document"in Ac&&(Ac.document.addEventListener("click",Uc("click",Pc.bind(null,"dom")),!1),Ac.document.addEventListener("keypress",Fc(Pc.bind(null,"dom")),!1),["EventTarget","Node"].forEach(function(t){var e=Ac[t]&&Ac[t].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&((0,ju.hl)(e,"addEventListener",function(t){return function(e,n,r){return n&&n.handleEvent?("click"===e&&(0,ju.hl)(n,"handleEvent",function(t){return function(e){return Uc("click",Pc.bind(null,"dom"))(e),t.call(this,e)}}),"keypress"===e&&(0,ju.hl)(n,"handleEvent",function(t){return function(e){return Fc(Pc.bind(null,"dom"))(e),t.call(this,e)}})):("click"===e&&Uc("click",Pc.bind(null,"dom"),!0)(this),"keypress"===e&&Fc(Pc.bind(null,"dom"))(this)),t.call(this,e,n,r)}}),(0,ju.hl)(e,"removeEventListener",function(t){return function(e,n,r){var i=n;try{i=i&&(i.__sentry_wrapped__||i)}catch(jO){}return t.call(this,e,i,r)}}))}));break;case"xhr":!function(){if("XMLHttpRequest"in Ac){var t=XMLHttpRequest.prototype;(0,ju.hl)(t,"open",function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[1];return this.__sentry_xhr__={method:(0,Fu.HD)(e[0])?e[0].toUpperCase():e[0],url:e[1]},(0,Fu.HD)(r)&&"POST"===this.__sentry_xhr__.method&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0),t.apply(this,e)}}),(0,ju.hl)(t,"send",function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,i={args:e,startTimestamp:Date.now(),xhr:r};function o(){if(4===r.readyState){try{r.__sentry_xhr__&&(r.__sentry_xhr__.status_code=r.status)}catch(jO){}Pc("xhr",Ou({},i,{endTimestamp:Date.now()}))}}return Pc("xhr",Ou({},i)),"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?(0,ju.hl)(r,"onreadystatechange",function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o(),t.apply(r,e)}}):r.onreadystatechange=o,t.apply(this,e)}})}}();break;case"fetch":(function(){if(!Gu())return!1;var t=(0,wu.Rf)();if(Wu(t.fetch))return!0;var e=!1,n=t.document;if(n){var r=n.createElement("iframe");r.hidden=!0;try{n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=Wu(r.contentWindow.fetch)),n.head.removeChild(r)}catch(i){pu.k.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",i)}}return e})()&&(0,ju.hl)(Ac,"fetch",function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:Nc(e),url:Dc(e)},startTimestamp:Date.now()};return Pc("fetch",Ou({},r)),t.apply(Ac,e).then(function(t){return Pc("fetch",Ou({},r,{endTimestamp:Date.now(),response:t})),t},function(t){throw Pc("fetch",Ou({},r,{endTimestamp:Date.now(),error:t})),t})}});break;case"history":!function(){if(function(){var t=(0,wu.Rf)(),e=t.chrome;return!(e&&e.app&&e.app.runtime||!("history"in t)||!t.history.pushState||!t.history.replaceState)}()){var t=Ac.onpopstate;Ac.onpopstate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Ac.location.href,i=Ic;if(Ic=r,Pc("history",{from:i,to:r}),t)return t.apply(this,e)},(0,ju.hl)(Ac.history,"pushState",e),(0,ju.hl)(Ac.history,"replaceState",e)}function e(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var i=Ic,o=String(r);Ic=o,Pc("history",{from:i,to:o})}return t.apply(this,e)}}}();break;default:pu.k.warn("unknown instrumentation type:",t)}}(t.type))}function Pc(t,e){var n,r;if(t&&Mc[t])try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(Mc[t]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(e)}catch(jO){pu.k.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+(0,wu.$P)(a)+"\nError: "+jO)}}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Nc(t){return void 0===t&&(t=[]),"Request"in Ac&&(0,Fu.V9)(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function Dc(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in Ac&&(0,Fu.V9)(t[0],Request)?t[0].url:String(t[0])}var $c,Lc,jc=0;function Uc(t,e,n){return void 0===n&&(n=!1),function(r){$c=void 0,r&&Lc!==r&&(Lc=r,jc&&clearTimeout(jc),n?jc=setTimeout(function(){e({event:r,name:t})}):e({event:r,name:t}))}}function Fc(t){return function(e){var n;try{n=e.target}catch(jO){return}var r=n&&n.tagName;r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)&&($c||Uc("input",t)(e),clearTimeout($c),$c=setTimeout(function(){$c=void 0},1e3))}}var Bc=function(){function t(e){this.name=t.id,this._options=Iu({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{extra:{arguments:(0,ju.Fv)(t.args,3)},logger:"console"},level:Zu.fromString(t.level),message:(0,_u.nK)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+((0,_u.nK)(t.args.slice(1)," ")||"console.assert"),e.data.extra.arguments=(0,ju.Fv)(t.args.slice(1),3)}(0,du.Gd)().addBreadcrumb(e,{input:t.args,level:t.level})},t.prototype._domBreadcrumb=function(t){var e;try{e=(0,wu.Rt)(t.event.target?t.event.target:t.event)}catch(jO){e="<unknown>"}0!==e.length&&(0,du.Gd)().addBreadcrumb({category:"ui."+t.name,message:e},{event:event,name:t.name})},t.prototype._xhrBreadcrumb=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;(0,du.Gd)().addBreadcrumb({category:"xhr",data:t.xhr.__sentry_xhr__,type:"http"},{xhr:t.xhr})}else t.xhr.__sentry_own_request__&&qc(t.args[0])},t.prototype._fetchBreadcrumb=function(t){if(t.endTimestamp){var e=(0,du.Gd)().getClient(),n=e&&e.getDsn();if(n){var r=new Uu(n).getStoreEndpoint();if(r&&-1!==t.fetchData.url.indexOf(r)&&"POST"===t.fetchData.method&&t.args[1]&&t.args[1].body)return void qc(t.args[1].body)}t.error?(0,du.Gd)().addBreadcrumb({category:"fetch",data:Iu({},t.fetchData,{status_code:t.response.status}),level:Zu.Error,type:"http"},{data:t.error,input:t.args}):(0,du.Gd)().addBreadcrumb({category:"fetch",data:Iu({},t.fetchData,{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})}},t.prototype._historyBreadcrumb=function(t){var e=(0,wu.Rf)(),n=t.from,r=t.to,i=(0,wu.en)(e.location.href),o=(0,wu.en)(n),a=(0,wu.en)(r);o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),(0,du.Gd)().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},t.prototype.setupOnce=function(){var t=this;this._options.console&&Oc({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._consoleBreadcrumb.apply(t,Au(e))},type:"console"}),this._options.dom&&Oc({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._domBreadcrumb.apply(t,Au(e))},type:"dom"}),this._options.xhr&&Oc({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._xhrBreadcrumb.apply(t,Au(e))},type:"xhr"}),this._options.fetch&&Oc({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._fetchBreadcrumb.apply(t,Au(e))},type:"fetch"}),this._options.history&&Oc({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._historyBreadcrumb.apply(t,Au(e))},type:"history"})},t.id="Breadcrumbs",t}();function qc(t){try{var e=JSON.parse(t);(0,du.Gd)().addBreadcrumb({category:"sentry",event_id:e.event_id,level:e.level||Zu.fromString("error"),message:(0,wu.jH)(e)},{event:e})}catch(n){pu.k.error("Error while adding sentry type breadcrumb")}}var Vc=function(){function t(e){this.name=t.id,this._global=(0,wu.Rf)(),this._oldOnErrorHandler=null,this._oldOnUnhandledRejectionHandler=null,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Iu({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(pu.k.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(pu.k.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){if(!this._onErrorHandlerInstalled){var e=this;this._oldOnErrorHandler=this._global.onerror,this._global.onerror=function(n,r,i,o,a){var s=(0,du.Gd)(),u=s.getIntegration(t),c=a&&!0===a.__sentry_own_request__;if(!u||Ec()||c)return!!e._oldOnErrorHandler&&e._oldOnErrorHandler.apply(this,arguments);var l=s.getClient(),h=(0,Fu.pt)(a)?e._eventFromIncompleteOnError(n,r,i,o):e._enhanceEventWithInitialFrame(uc(a,void 0,{attachStacktrace:l&&l.getOptions().attachStacktrace,rejection:!1}),r,i,o);return(0,wu.EG)(h,{handled:!1,type:"onerror"}),s.captureEvent(h,{originalException:a}),!!e._oldOnErrorHandler&&e._oldOnErrorHandler.apply(this,arguments)},this._onErrorHandlerInstalled=!0}},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){if(!this._onUnhandledRejectionHandlerInstalled){var e=this;this._oldOnUnhandledRejectionHandler=this._global.onunhandledrejection,this._global.onunhandledrejection=function(n){var r=n;try{r=n&&"reason"in n?n.reason:n}catch(c){}var i=(0,du.Gd)(),o=i.getIntegration(t),a=r&&!0===r.__sentry_own_request__;if(!o||Ec()||a)return!e._oldOnUnhandledRejectionHandler||e._oldOnUnhandledRejectionHandler.apply(this,arguments);var s=i.getClient(),u=(0,Fu.pt)(r)?e._eventFromIncompleteRejection(r):uc(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});return u.level=Zu.Error,(0,wu.EG)(u,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(u,{originalException:r}),!e._oldOnUnhandledRejectionHandler||e._oldOnUnhandledRejectionHandler.apply(this,arguments)},this._onUnhandledRejectionHandlerInstalled=!0}},t.prototype._eventFromIncompleteOnError=function(t,e,n,r){var i,o=(0,Fu.VW)(t)?t.message:t;if((0,Fu.HD)(o)){var a=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(i=a[1],o=a[2])}return this._enhanceEventWithInitialFrame({exception:{values:[{type:i||"Error",value:o}]}},e,n,r)},t.prototype._eventFromIncompleteRejection=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+t}]}}},t.prototype._enhanceEventWithInitialFrame=function(t,e,n,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,a=(0,Fu.HD)(e)&&e.length>0?e:(0,wu.l4)();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:i,filename:a,function:"?",in_app:!0,lineno:o}),t},t.id="GlobalHandlers",t}(),Zc=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){(0,bu.c)(function(e,n){var r=(0,du.Gd)().getIntegration(t);return r?r._handler(e,n):e})},t.prototype._handler=function(t,e){if(!(t.exception&&t.exception.values&&e&&(0,Fu.V9)(e.originalException,Error)))return t;var n=this._walkErrorTree(e.originalException,this._key);return t.exception.values=Au(n,t.exception.values),t},t.prototype._walkErrorTree=function(t,e,n){if(void 0===n&&(n=[]),!(0,Fu.V9)(t[e],Error)||n.length+1>=this._limit)return n;var r=oc(nc(t[e]));return this._walkErrorTree(t[e],e,Au([r],n))},t.id="LinkedErrors",t}(),Hc=(0,wu.Rf)(),zc=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){(0,bu.c)(function(e){if((0,du.Gd)().getIntegration(t)){if(!Hc.navigator||!Hc.location)return e;var n=e.request||{};return n.url=n.url||Hc.location.href,n.headers=n.headers||{},n.headers["User-Agent"]=Hc.navigator.userAgent,Iu({},e,{request:n})}return e})},t.id="UserAgent",t}(),Gc=[new ku,new Eu,new Cc,new Bc,new Vc,new Zc,new zc],Wc={hodjlilmbhaajegmnpfcpoehlbnlfcne:Jc,mmeijimgabbpbgpdklnllpncmdofkcpn:function(){var t=Kc(0,"production");return(0,Us.pi)((0,Us.pi)({},t),{firebaseConfig:{apiKey:"AIzaSyDraAcnfh7TewzYJS9yt8Togm6_VzB_RJE",authDomain:"castify-storage.firebaseapp.com",databaseURL:"https://castify-storage.firebaseio.com",projectId:"castify-storage",storageBucket:"castify-storage.appspot.com",messagingSenderId:"37637381719",appId:"1:37637381719:web:379c0d7b8ecdfae2bd8d12"},editorOpenUri:"https://edit.screencastify.com/open/drive",apiUrl:"https://api.screencastify.com/api",proxyApiUrl:"https://studio-backend.castify.com/api/studioService/legacy-proxy",analyticsId:"UA-23874345-14",youtubeClientId:"242262968495-o42n5tqeo08dsa75p3j4dk1k61t05ln3.apps.googleusercontent.com",notificationUri:"https://us-central1-castify-notifications-prod.cloudfunctions.net/api/userNotification/"})}};function Kc(t,e){void 0===e&&(e="production");var n="production"===e,r=n?"screencastify.com":e+".screencastify.com",i="svc."+r;return{test:!1,production:!1,environmentName:e,signInUrl:"https://app."+r+"/extension-auth/handover",extensionServiceUrl:"https://extension."+i+"/api/extensionService",logServiceUrl:"https://log."+i+"/api/logService",dashboardServiceUrl:"https://dashboard."+i+"/api/dashboardService",umbrellaServiceUrl:"https://umbrella."+i+"/api/umbrellaService",watchShareUrl:"https://watch."+r+"/v/",captionsUrl:"https://captions."+r+"/v/",questionsUrl:"https://questions."+r+"/v/",onboardingUri:"https://app."+r+"/record-onboarding",supportUri:"https://app."+r+"/support",myVideosUri:"https://app."+r+"/videos",editorOpenUri:"https://edit-staging.screencastify.com/open/drive",redirectUri:"https://www.screencastify.com/oauth2postback",apiUrl:"https://screencastify-staging.appspot.com/api",proxyApiUrl:"https://studio-backend."+(n?"castify.com":"cfy-stage.com")+"/api/studioService/legacy-proxy",youtubeClientId:"242262968495-5q3vl1gh9li79hrj8q6leroo8kc1l58s.apps.googleusercontent.com",analyticsId:"UA-101007461-6",notificationUri:"https://us-central1-castify-notifications.cloudfunctions.net/api/userNotification/",isExtension:!0}}function Jc(){var t=Kc(0,"staging");return(0,Us.pi)((0,Us.pi)({},t),{firebaseConfig:{apiKey:"AIzaSyDuHz-96qS5J-_TkIO4Ge81IwmtsXnVToI",authDomain:"castify-storage-staging.firebaseapp.com",databaseURL:"https://castify-storage-staging.firebaseio.com",projectId:"castify-storage-staging",storageBucket:"castify-storage-staging.appspot.com",messagingSenderId:"220257450312",appId:"1:220257450312:web:72cf306162ddc5f30a9b7d"}})}var Yc=(0,Us.pi)((0,Us.pi)({},function(){var t,e,n=null===(e=null===(t=window.chrome)||void 0===t?void 0:t.runtime)||void 0===e?void 0:e.id;if(!n)return Jc();if(!Object.keys(Wc).includes(n))throw document.body.innerText='Oops, Extension was loaded with a unkown\n  extension id. If you are trying to load it in developer mode, make sure\n  the "key" property is set in manifest.json. When installed from Chrome\n  Webstore, the the id is set automatically',document.body.classList.remove("ng-cloak"),new Error('unkown extension id, make sure the "key" property is set in manifest.json:'+n);return Wc[n]()}()),{production:!0}),Xc=n(53922),Qc=n(90631),tl=n(92011);function el(t){return t instanceof Date&&!isNaN(+t)}var nl=n(22658),rl=n(79157),il=function(){function t(e,n){(0,i.Z)(this,t),this.delay=e,this.scheduler=n}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new ol(t,this.delay,this.scheduler))}}]),t}(),ol=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;return(0,i.Z)(this,n),(a=e.call(this,t)).delay=r,a.scheduler=o,a.queue=[],a.active=!1,a.errored=!1,a}return(0,r.Z)(n,[{key:"_schedule",value:function(t){this.active=!0,this.destination.add(t.schedule(n.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}},{key:"scheduleNotification",value:function(t){if(!0!==this.errored){var e=this.scheduler,n=new al(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}}},{key:"_next",value:function(t){this.scheduleNotification(rl.P.createNext(t))}},{key:"_error",value:function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleNotification(rl.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1}}]),n}(nl.L),al=function t(e,n){(0,i.Z)(this,t),this.time=e,this.notification=n},sl=n(31159),ul=function(){function t(e,n){(0,i.Z)(this,t),this.count=e,this.source=n}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new cl(t,this.count,this.source))}}]),t}(),cl=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(t,e,n){var r;return(0,i.Z)(this,u),(r=s.call(this,t)).count=e,r.source=n,r}return(0,r.Z)(u,[{key:"complete",value:function(){if(!this.isStopped){var n=this.source,r=this.count;if(0===r)return(0,t.Z)((0,e.Z)(u.prototype),"complete",this).call(this);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}}}]),u}(nl.L),ll=(n(98512),n(39747),n(66311));ll.Z.registerVersion("firebase","8.6.1","app");var hl=n(54653),fl=n(84178);function dl(t,e){return(0,fl.zg)(t,e,1)}function pl(t,e){return function(n){return n.lift(new bl(t,e))}}var vl,gl,yl,ml,bl=function(){function t(e,n){(0,i.Z)(this,t),this.compare=e,this.keySelector=n}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new wl(t,this.compare,this.keySelector))}}]),t}(),wl=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;return(0,i.Z)(this,n),(a=e.call(this,t)).keySelector=o,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return(0,r.Z)(n,[{key:"compare",value:function(t,e){return t===e}},{key:"_next",value:function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}]),n}(nl.L),_l=function(){if(!gl){if(!vl)throw new Error("fbWrapper.configure() not called before using wrapper. Make sure you only import the main edit-models module (no direct file imports)");var t=(0,Us.CR)(vl(),2);gl=function(t,e){return{api:function(){return t},app:function(){return e},database:function(){return e.database()},auth:function(){return t.auth()},messaging:function(){return e.messaging()},storage:function(t){return e.storage(t)}}}(t[0],t[1])}return gl},Sl=ll.Z.firestore;function kl(){return yl||(yl=_l().app().firestore()),yl}!function(t){function e(t){return b.y.create(function(e){return t.onSnapshot(function(t){return e.next(t)},function(t){return e.error(t)},function(){return e.complete()})})}function n(t,e){if(t){var n=t[e];if(n)return n.toDate().valueOf()}}t._runQuery=function(t){return(0,Js.D)(t.get()).pipe(Ys(function(t){return(0,Js.D)(t.docs)}))},t._observeQuery=e,t._observeQueryAdd=function(t){return e(t).pipe(dl(function(t){return t.docChanges()}),(0,Qc.h)(function(t){return"added"===t.type}),(0,Ks.U)(function(t){return t.doc}))},t._observeRef=function(t){return function(t){return void 0===t&&(t=kl()),!("disableNetwork"in("firestore"in t?t.firestore:t))}()?(0,hl.z)((0,Js.D)(t.get()),b.y.create(function(e){return t.onSnapshot(function(t){return e.next(t)},function(t){return e.error(t)})})).pipe(pl(function(t,e){return n(t,"updateTime")===n(e,"updateTime")})):b.y.create(function(e){return t.onSnapshot(e)})},t._safeGetTimestamp=n,t._ensureReadTime=function(t){if(!("readTime"in t)){var e=new Date(Date.now());t.readTime={toDate:function(){return e}}}return t},t._ensureWriteTime=function(t){if(t||(t={}),!("writeTime"in t)){var e=new Date(Date.now());t.writeTime={toDate:function(){return e}}}return t},t._isDocumentSnapshot=function(t){return t.constructor.name===Sl.DocumentSnapshot.prototype.constructor.name||t.constructor.name===Sl.QueryDocumentSnapshot.prototype.constructor.name||"TestOnlyNullDocumentSnapshot"===t.constructor.name},t._isDocumentReference=function(t){return t.constructor.name===Sl.DocumentReference.prototype.constructor.name},t._serverTimestamp=function(){var t=_l().api().firestore.FieldValue.serverTimestamp();if(!t)throw new Error("could not obtain valid Timestamp implementation from firestore api");return t},t._timestamp=function(){return _l().api().firestore.Timestamp},t._increment=function(t){return _l().api().firestore.FieldValue.increment(t)}}(ml||(ml={}));var El=function(){function t(t){t&&Object.assign(this,t)}return t._ensureDatastructures=function(t){t.hasOwnProperty("__fisSerializations")||(t.__fisSerializations=(0,Us.pi)({},t.__fisSerializations||{})),t.hasOwnProperty("__fisDeserializations")||(t.__fisDeserializations=(0,Us.pi)({},t.__fisDeserializations||{})),t.hasOwnProperty("_subcollections")||(t._subcollections=(0,Us.ev)([],(0,Us.CR)(t._subcollections||[])))},Object.defineProperty(t,"Timestamp",{get:function(){return ml._timestamp()},enumerable:!1,configurable:!0}),t.prototype._fisSerialize=function(t){var e,n;void 0===t&&(t=!1);var r={};try{for(var i=(0,Us.XA)(Object.entries(this.__fisSerializations||{})),o=i.next();!o.done;o=i.next()){var a=(0,Us.CR)(o.value,2),s=a[0],u=(0,a[1])(this,t);void 0!==u&&(r[s]=u)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype._fisDeserialize=function(t){var e,n;try{for(var r=(0,Us.XA)(Object.entries(this.__fisDeserializations||{})),i=r.next();!i.done;i=r.next()){var o=(0,Us.CR)(i.value,2),a=o[0];void 0!==t[a]&&(this[a]=(0,o[1])(t))}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this},t.prototype.toJSON=function(){return this._fisSerialize(!0)},t}();function xl(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){return n.lift(new Tl(t,e))}}var Tl=function(){function t(e,n){(0,i.Z)(this,t),this.predicate=e,this.inclusive=n}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Il(t,this.predicate,this.inclusive))}}]),t}(),Il=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;return(0,i.Z)(this,n),(a=e.call(this,t)).predicate=r,a.inclusive=o,a.index=0,a}return(0,r.Z)(n,[{key:"_next",value:function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(t,e)}},{key:"nextOrComplete",value:function(t,e){var n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}]),n}(nl.L),Cl=function(t){function e(e){var n=t.call(this)||this;return n.ref=e,n._pendingChanges={},n}return(0,Us.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.ref.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readAt",{get:function(){return ml._safeGetTimestamp(this._latestSnapshot,"readTime")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writtenAt",{get:function(){return ml._safeGetTimestamp(this._lastWrite,"writeTime")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return!!this.readAt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_klass",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),Object.defineProperty(e,"db",{get:function(){return kl()},enumerable:!1,configurable:!0}),e.fromSnapshot=function(t){var e=new this(t.ref);return e._updateFromSnapshot(t),e},e.prototype._updateFromSnapshot=function(t){if(t.ref.path!==this.ref.path)throw new Error("snapshot ref does not match model ref");t.data()&&(this._fisDeserialize(t.data()),t=ml._ensureReadTime(t)),this._latestSnapshot=t},e.prototype._getSnapshot=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this.ensureLoaded()];case 1:return t.sent(),[2,this._latestSnapshot]}})})},e.prototype._pushToDatabase=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r,i,o,a=this;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return e=this._fisSerialize(),n={},t&&(n.mergeFields=t.filter(function(t){return t in a})),r=this,o=(i=ml)._ensureWriteTime,[4,this.ref.set(e,n)];case 1:return r._lastWrite=o.apply(i,[s.sent()]),[2]}})})},e.prototype.clone=function(){return this._latestSnapshot?this._klass.fromSnapshot(this._latestSnapshot):new this._klass(this.ref)},e.prototype.load=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return t=this._updateFromSnapshot,[4,this.ref.get()];case 1:return t.apply(this,[e.sent()]),[2,this._latestSnapshot.exists?this:null]}})})},e.prototype.ensureLoaded=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return[2,this.loaded?this:this.load()]})})},e.prototype.get=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return[2,this.clone().load()]})})},e.prototype.on=function(){var t=this;return(0,hl.z)(ml._observeRef(this.ref).pipe(xl(function(t){return t.exists||t.metadata.fromCache&&!0}),(0,Ks.U)(function(e){return t._klass.fromSnapshot(e)})),(0,Xc.of)(null)).pipe(E())},e.prototype.set=function(t){return Object.assign(this,t),this},e.prototype.save=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this._pushToDatabase()];case 1:return t.sent(),[2,this]}})})},e.prototype.updateEventually=function(t){return Object.assign(this,t),Object.assign(this._pendingChanges,t),this},e.prototype.update=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return this.updateEventually(t),e=this._pendingChanges,this._pendingChanges={},[4,this._pushToDatabase(Object.keys(e))];case 1:return n.sent(),[2,this]}})})},e.prototype.remove=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t=this;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this._subcollections?[4,Promise.all(this._subcollections.map(function(e){return t[e].removeAll()}))]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2,this.ref.delete()]}})})},e}(El);function Al(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),function(r,i){El._ensureDatastructures(r),n&&(r.__fisSerializations[i]=function(e){var n;if(i in e&&void 0!==e[i]){if(t){if(e[i]&&"_fisSerialize"in e[i]&&e[i]._fisSerialize instanceof Function)return e[i]._fisSerialize();if(e[i]instanceof Object)return JSON.parse(JSON.stringify((n={},n[i]=e[i],n)))[i]}return e[i]}}),e&&(r.__fisDeserializations[i]=function(e){if(t&&e[i]instanceof Object){var n=t(e[i]);return"_fisDeserialize"in n&&n._fisDeserialize instanceof Function?n._fisDeserialize(e[i]):n}return e[i]})}}function Ml(t){return void 0===t&&(t=!1),function(e,n){El._ensureDatastructures(e),e.__fisSerializations[n]=function(e,r){var i=e[n];return r?-1===i?void 0:i:t||-1===i?ml._serverTimestamp():null!==i&&i>=0?ml._timestamp().fromMillis(i):null},e.__fisDeserializations[n]=function(t){return null===t[n]?null:t[n]?t[n].toDate().valueOf():void 0}}}var Rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e._getRoot=function(t){if(!t||t.length<1)throw new Error("rootPath not set in model "+this.name);return new this.Collection(this,Cl.db.collection(t))},e.byId=function(t){return this.root.byId(t)},e.getById=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this.root.getById(t)]})})},e.create=function(t){return this.root.create(t)},e.fromObject=function(t){var e=t.id,n=(0,Us._T)(t,["id"]);return this.root.byId(e).set(n)},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return this.id&&(e.id=this.id),e},e}(Cl),Ol=n(22344),Pl=n(45461);function Nl(t){return function(e){return 0===t?(0,sl.c)():e.lift(new Dl(t))}}var Dl=function(){function t(e){if((0,i.Z)(this,t),this.total=e,this.total<0)throw new Pl.W}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new $l(t,this.total))}}]),t}(),$l=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).total=r,o.count=0,o}return(0,r.Z)(n,[{key:"_next",value:function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}]),n}(nl.L);function Ll(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(e){return e.lift(new jl(t))}}var jl=function(){function t(e){(0,i.Z)(this,t),this.defaultValue=e}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ul(t,this.defaultValue))}}]),t}(),Ul=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).defaultValue=r,o.isEmpty=!0,o}return(0,r.Z)(n,[{key:"_next",value:function(t){this.isEmpty=!1,this.destination.next(t)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(nl.L);function Fl(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vl;return function(e){return e.lift(new Bl(t))}}var Bl=function(){function t(e){(0,i.Z)(this,t),this.errorFactory=e}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new ql(t,this.errorFactory))}}]),t}(),ql=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).errorFactory=r,o.hasValue=!1,o}return(0,r.Z)(n,[{key:"_next",value:function(t){this.hasValue=!0,this.destination.next(t)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var t;try{t=this.errorFactory()}catch(jO){t=jO}this.destination.error(t)}}]),n}(nl.L);function Vl(){return new Ol.K}var Zl=n(72311);function Hl(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?(0,Qc.h)(function(e,n){return t(e,n,r)}):Zl.y,Nl(1),n?Ll(e):Fl(function(){return new Ol.K}))}}var zl=n(99135),Gl=n(8336);function Wl(t,e,n){return function(r){return r.lift(new Kl(t,e,n))}}var Kl=function(){function t(e,n,r){(0,i.Z)(this,t),this.nextOrObserver=e,this.error=n,this.complete=r}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Jl(t,this.nextOrObserver,this.error,this.complete))}}]),t}(),Jl=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a){var s;return(0,i.Z)(this,n),(s=e.call(this,t))._tapNext=zl.Z,s._tapError=zl.Z,s._tapComplete=zl.Z,s._tapError=o||zl.Z,s._tapComplete=a||zl.Z,(0,Gl.m)(r)?(s._context=(0,l.Z)(s),s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||zl.Z,s._tapError=r.error||zl.Z,s._tapComplete=r.complete||zl.Z),s}return(0,r.Z)(n,[{key:"_next",value:function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}},{key:"_error",value:function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}]),n}(nl.L),Yl=function(){function t(t,e){this.modelCls=t,this.ref=e,this.allByChild=this._buildGetAll(this._byChild)}return Object.defineProperty(t.prototype,"_klass",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),t.prototype._byChild=function(t,e){var n,r;void 0===e&&(e=100);var i=this.ref;try{for(var o=(0,Us.XA)(t),a=o.next();!a.done;a=o.next()){var s=a.value,u=s[0].toString();i=i.where(u,s[1],s[2]instanceof Cl?s[2].ref:s[2])}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i.limit(e)},t.prototype.getAll=function(t){return void 0===t&&(t={}),(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this.getAllByChild(void 0,t)]})})},t.prototype.iterateAll=function(t){return void 0===t&&(t={}),(0,Us.FC)(this,arguments,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[5,(0,Us.XA)((0,Us.V2)((0,Us.KL)(this._iterateAll(this.ref,t))))];case 1:return[4,Us.qq.apply(void 0,[e.sent()])];case 2:return e.sent(),[2]}})})},t.prototype.getAllByChild=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){return[2,this.onAllByChild(t,e).pipe(Hl()).toPromise()]})})},t.prototype.onAllByChild=function(t,e){var n,r;void 0===t&&(t={});var i=void 0===e?{}:e,o=i.orderBy,a=i.orderByDirection,s=void 0===a?"asc":a,u=i.limit,c=this.ref;if(t)try{for(var l=(0,Us.XA)(Object.entries(t)),h=l.next();!h.done;h=l.next()){var f=(0,Us.CR)(h.value,2),d=f[1];c=c.where(f[0],"==",d instanceof Cl?d.ref:d)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return o&&(c=c.orderBy(o,s)),u&&(c=c.limit(u)),this._onAll(c)},t.prototype.onFirstByChild=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),this.onAllByChild(t,(0,Us.pi)((0,Us.pi)({},e),{limit:1})).pipe((0,Qc.h)(function(t){return!!t.length}),Hl(),(0,Ks.U)(function(t){return t[0]}))},t.prototype.getFirstByChild=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),(0,Us.mG)(this,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,this.getAllByChild(t,(0,Us.pi)((0,Us.pi)({},e),{limit:1}))];case 1:return(n=r.sent()).length?[2,n[0]]:[2,null]}})})},t.prototype.byId=function(t){return new this.modelCls(this.ref.doc(t))},t.prototype.getById=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){if(!t)throw new Error("id cannot be empty");return[2,this.byId(t).load()]})})},t.prototype.create=function(t){if(t&&t.id){var e=t.id,n=(0,Us._T)(t,["id"]),r=this.byId(e);return n&&r.set(n),r}return this.add(t)},t.prototype.add=function(t){var e=new this.modelCls(this.ref.doc());return t&&e.set(t),e},t.prototype.removeAll=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e=(t=Promise).all,[4,this.getAll()];case 1:return[4,e.apply(t,[n.sent().map(function(t){return t.remove()})])];case 2:return n.sent(),[2]}})})},t.prototype._onAll=function(t){var e=this;return(0,qs.P)(function(){var n=new Map;return ml._observeQuery(t).pipe((0,Ks.U)(function(t){var r,i,o=new Set;try{for(var a=(0,Us.XA)(t.docChanges()),s=a.next();!s.done;s=a.next())o.add(s.value.doc.id)}catch(u){r={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return t.docs.map(function(t){return o.has(t.id)?e.modelCls.fromSnapshot(t):n.get(t.id)})}),Wl(function(t){var e,r;n.clear();try{for(var i=(0,Us.XA)(t),o=i.next();!o.done;o=i.next()){var a=o.value;n.set(a.id,a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}))})},t.prototype._buildOnAll=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._onAll(t.bind(this).apply(void 0,(0,Us.ev)([],(0,Us.CR)(e))))}},t.prototype._getAll=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this._onAll(t).pipe(Hl()).toPromise()]})})},t.prototype._buildGetAll=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getAll(t.bind(this).apply(void 0,(0,Us.ev)([],(0,Us.CR)(e))))}},t.prototype._iterateAll=function(t,e){return void 0===e&&(e={}),(0,Us.FC)(this,arguments,function(){var n,r,i,o,a,s,u,c,l,h;return(0,Us.Jh)(this,function(f){switch(f.label){case 0:n=Math.max(1,e.batchSize||100),r=[],f.label=1;case 1:return i=t.limit(n),r.length>0?(a=(o=i).startAfter,[4,(0,Us.qq)(r[r.length-1]._getSnapshot())]):[3,3];case 2:i=a.apply(o,[f.sent()]),f.label=3;case 3:return[4,(0,Us.qq)(this._getAll(i))];case 4:r=f.sent(),f.label=5;case 5:f.trys.push([5,11,12,13]),l=void 0,s=(0,Us.XA)(r),u=s.next(),f.label=6;case 6:return u.done?[3,10]:[4,(0,Us.qq)(u.value)];case 7:return[4,f.sent()];case 8:f.sent(),f.label=9;case 9:return u=s.next(),[3,6];case 10:return[3,13];case 11:return c=f.sent(),l={error:c},[3,13];case 12:try{u&&!u.done&&(h=s.return)&&h.call(s)}finally{if(l)throw l.error}return[7];case 13:if(r.length>0)return[3,1];f.label=14;case 14:return[2]}})})},t.prototype._buildIterateAll=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._iterateAll(t.bind(this).apply(void 0,(0,Us.ev)([],(0,Us.CR)(e))))}},t.prototype._onAdd=function(t){var e=this;return ml._observeQueryAdd(t).pipe((0,Ks.U)(function(t){return e.modelCls.fromSnapshot(t)}))},t.prototype._buildOnAdd=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._onAdd(t.bind(this).apply(void 0,(0,Us.ev)([],(0,Us.CR)(e))))}},t.prototype._getFirst=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this._getAll(t.limit(1))];case 1:return[2,e.sent()[0]]}})})},t.prototype._buildGetFirst=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getFirst(t.bind(this).apply(void 0,(0,Us.ev)([],(0,Us.CR)(e))))}},t.prototype._modelKey=function(t){return t.toString()},t}(),Xl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Number)],e.prototype,"zipcode",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"city",void 0),e}(El),Ql=function(){return function(t){Object.assign(this,t)}}(),th={firstName:"John",surname:"Doe",birthDate:999e3,address:{zipcode:1234,city:"Chicago"},school:{name:"someSchool"},hobbies:["sports","reading"],voice:{pitch:"high"},addressbook:{fred:{zipcode:123,city:"someCity"},max:{zipcode:321,city:"Musterstadt"}}};function eh(t,e,n){var r,i=n.value,o=(r=null,function(t){var e=new Promise(function(e,n){var i=function(){var r;try{r=t.call(null)}catch(i){return void n(i)}e(r)};(r||Promise.resolve()).then(i,i)}),n=function(){return r=null};return(r=e).then(n,n),e});return n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(i.bind.apply(i,(0,Us.ev)([this],(0,Us.CR)(t))))},n}function nh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nh(Object(n),!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nh(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}(0,Us.pi)((0,Us.pi)({},th),{address:new Xl(th.address),school:new Ql(th.school),addressbook:{fred:new Xl(th.addressbook.fred),max:new Xl(th.addressbook.max)}});var ih=function(t){return t[t.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",t[t.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",t[t.CLASS_TO_CLASS=2]="CLASS_TO_CLASS",t}({}),oh=new(function(){function t(){(0,i.Z)(this,t),this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return(0,r.Z)(t,[{key:"addTypeMetadata",value:function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)}},{key:"addTransformMetadata",value:function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)}},{key:"addExposeMetadata",value:function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)}},{key:"addExcludeMetadata",value:function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)}},{key:"findTransformMetadatas",value:function(t,e,n){return this.findMetadatas(this._transformMetadatas,t,e).filter(function(t){return!t.options||!0===t.options.toClassOnly&&!0===t.options.toPlainOnly||(!0===t.options.toClassOnly?n===ih.CLASS_TO_CLASS||n===ih.PLAIN_TO_CLASS:!0!==t.options.toPlainOnly||n===ih.CLASS_TO_PLAIN)})}},{key:"findExcludeMetadata",value:function(t,e){return this.findMetadata(this._excludeMetadatas,t,e)}},{key:"findExposeMetadata",value:function(t,e){return this.findMetadata(this._exposeMetadatas,t,e)}},{key:"findExposeMetadataByCustomName",value:function(t,e){return this.getExposedMetadatas(t).find(function(t){return t.options&&t.options.name===e})}},{key:"findTypeMetadata",value:function(t,e){return this.findMetadata(this._typeMetadatas,t,e)}},{key:"getStrategy",value:function(t){var e=this._excludeMetadatas.get(t),n=e&&e.get(void 0),r=this._exposeMetadatas.get(t),i=r&&r.get(void 0);return n&&i||!n&&!i?"none":n?"excludeAll":"exposeAll"}},{key:"getExposedMetadatas",value:function(t){return this.getMetadata(this._exposeMetadatas,t)}},{key:"getExcludedMetadatas",value:function(t){return this.getMetadata(this._excludeMetadatas,t)}},{key:"getExposedProperties",value:function(t,e){return this.getExposedMetadatas(t).filter(function(t){return!t.options||!0===t.options.toClassOnly&&!0===t.options.toPlainOnly||(!0===t.options.toClassOnly?e===ih.CLASS_TO_CLASS||e===ih.PLAIN_TO_CLASS:!0!==t.options.toPlainOnly||e===ih.CLASS_TO_PLAIN)}).map(function(t){return t.propertyName})}},{key:"getExcludedProperties",value:function(t,e){return this.getExcludedMetadatas(t).filter(function(t){return!t.options||!0===t.options.toClassOnly&&!0===t.options.toPlainOnly||(!0===t.options.toClassOnly?e===ih.CLASS_TO_CLASS||e===ih.PLAIN_TO_CLASS:!0!==t.options.toPlainOnly||e===ih.CLASS_TO_PLAIN)}).map(function(t){return t.propertyName})}},{key:"clear",value:function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()}},{key:"getMetadata",value:function(t,e){var n,r=t.get(e);r&&(n=Array.from(r.values()).filter(function(t){return void 0!==t.propertyName}));var i,o=[],a=u(this.getAncestors(e));try{for(a.s();!(i=a.n()).done;){var s=t.get(i.value);if(s){var c=Array.from(s.values()).filter(function(t){return void 0!==t.propertyName});o.push.apply(o,(0,f.Z)(c))}}}catch(l){a.e(l)}finally{a.f()}return o.concat(n||[])}},{key:"findMetadata",value:function(t,e,n){var r=t.get(e);if(r){var i=r.get(n);if(i)return i}var o,a=u(this.getAncestors(e));try{for(a.s();!(o=a.n()).done;){var s=t.get(o.value);if(s){var c=s.get(n);if(c)return c}}}catch(l){a.e(l)}finally{a.f()}}},{key:"findMetadatas",value:function(t,e,n){var r,i=t.get(e);i&&(r=i.get(n));var o,a=[],s=u(this.getAncestors(e));try{for(s.s();!(o=s.n()).done;){var c=t.get(o.value);c&&c.has(n)&&a.push.apply(a,(0,f.Z)(c.get(n)))}}catch(l){s.e(l)}finally{s.f()}return a.slice().reverse().concat((r||[]).slice().reverse())}},{key:"getAncestors",value:function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var e=[],n=Object.getPrototypeOf(t.prototype.constructor);void 0!==n.prototype;n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(t,e)}return this._ancestorsMap.get(t)}}]),t}());function ah(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0}function sh(t){return null!==t&&"object"==typeof t&&"function"==typeof t.then}function uh(t){var e=new t;return e instanceof Set||"push"in e?e:[]}var ch=function(){function t(e,n){(0,i.Z)(this,t),this.transformationType=e,this.options=n,this.recursionStack=new Set}return(0,r.Z)(t,[{key:"transform",value:function(t,e,n,r,i){var o=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(Array.isArray(e)||e instanceof Set){var s=r&&this.transformationType===ih.PLAIN_TO_CLASS?uh(r):[];return e.forEach(function(e,r){var i=t?t[r]:void 0;if(o.options.enableCircularCheck&&o.isCircular(e))o.transformationType===ih.CLASS_TO_CLASS&&(s instanceof Set?s.add(e):s.push(e));else{var u;if("function"!=typeof n&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(o.transformationType===ih.PLAIN_TO_CLASS){u=n.options.discriminator.subTypes.find(function(t){return t.name===e[n.options.discriminator.property]});var c=n.typeFunction({newObject:s,object:e,property:void 0});u=void 0===u?c:u.value,n.options.keepDiscriminatorProperty||delete e[n.options.discriminator.property]}o.transformationType===ih.CLASS_TO_CLASS&&(u=e.constructor),o.transformationType===ih.CLASS_TO_PLAIN&&(e[n.options.discriminator.property]=n.options.discriminator.subTypes.find(function(t){return t.value===e.constructor}).name)}else u=n;var l=o.transform(i,e,u,void 0,e instanceof Map,a+1);s instanceof Set?s.add(l):s.push(l)}}),s}if(n!==String||i){if(n!==Number||i){if(n!==Boolean||i){if((n===Date||e instanceof Date)&&!i)return e instanceof Date?new Date(e.valueOf()):null==e?e:new Date(e);if(ah().Buffer&&(n===Buffer||e instanceof Buffer)&&!i)return null==e?e:Buffer.from(e);if(sh(e)&&!i)return new Promise(function(t,r){e.then(function(e){return t(o.transform(void 0,e,n,void 0,void 0,a+1))},r)});if(i||null===e||"object"!=typeof e||"function"!=typeof e.then){if("object"==typeof e&&null!==e){n||e.constructor===Object||(n=e.constructor),!n&&t&&(n=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);var c=this.getKeys(n,e,i),l=t||{};t||this.transformationType!==ih.PLAIN_TO_CLASS&&this.transformationType!==ih.CLASS_TO_CLASS||(l=i?new Map:n?new n:{});var h,f=u(c);try{var d=function(){var r=h.value;if("__proto__"===r||"constructor"===r)return"continue";var s=r,u=r,c=r;if(!o.options.ignoreDecorators&&n)if(o.transformationType===ih.PLAIN_TO_CLASS){var f=oh.findExposeMetadataByCustomName(n,r);f&&(c=f.propertyName,u=f.propertyName)}else if(o.transformationType===ih.CLASS_TO_PLAIN||o.transformationType===ih.CLASS_TO_CLASS){var d=oh.findExposeMetadata(n,r);d&&d.options&&d.options.name&&(u=d.options.name)}var p=void 0;p=e instanceof Map?e.get(s):e[s]instanceof Function?e[s]():e[s];var v=void 0,g=p instanceof Map;if(n&&i)v=n;else if(n){var y=oh.findTypeMetadata(n,c);if(y){var m=y.typeFunction?y.typeFunction({newObject:l,object:e,property:c}):y.reflectedType;y.options&&y.options.discriminator&&y.options.discriminator.property&&y.options.discriminator.subTypes?e[s]instanceof Array?v=y:(o.transformationType===ih.PLAIN_TO_CLASS&&(v=void 0===(v=y.options.discriminator.subTypes.find(function(t){if(p&&p instanceof Object&&y.options.discriminator.property in p)return t.name===p[y.options.discriminator.property]}))?m:v.value,y.options.keepDiscriminatorProperty||p&&p instanceof Object&&y.options.discriminator.property in p&&delete p[y.options.discriminator.property]),o.transformationType===ih.CLASS_TO_CLASS&&(v=p.constructor),o.transformationType===ih.CLASS_TO_PLAIN&&(p[y.options.discriminator.property]=y.options.discriminator.subTypes.find(function(t){return t.value===p.constructor}).name)):v=m,g=g||y.reflectedType===Map}else if(o.options.targetMaps)o.options.targetMaps.filter(function(t){return t.target===n&&!!t.properties[c]}).forEach(function(t){return v=t.properties[c]});else if(o.options.enableImplicitConversion&&o.transformationType===ih.PLAIN_TO_CLASS){var b=Reflect.getMetadata("design:type",n.prototype,c);b&&(v=b)}}var w=Array.isArray(e[s])?o.getReflectedType(n,c):void 0,_=t?t[s]:void 0;if(l.constructor.prototype){var S=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if((o.transformationType===ih.PLAIN_TO_CLASS||o.transformationType===ih.CLASS_TO_CLASS)&&(S&&!S.set||l[u]instanceof Function))return"continue"}if(o.options.enableCircularCheck&&o.isCircular(p)){if(o.transformationType===ih.CLASS_TO_CLASS){var k=p;(void 0!==(k=o.applyCustomTransformations(k,n,r,e,o.transformationType))||o.options.exposeUnsetFields)&&(l instanceof Map?l.set(u,k):l[u]=k)}}else{var E,x=o.transformationType===ih.PLAIN_TO_CLASS?u:r;o.transformationType===ih.CLASS_TO_PLAIN?(E=o.applyCustomTransformations(E=e[x],n,x,e,o.transformationType),E=o.transform(_,E=e[x]===E?p:E,v,w,g,a+1)):void 0===p&&o.options.exposeDefaultValues?E=l[u]:(E=o.transform(_,p,v,w,g,a+1),E=o.applyCustomTransformations(E,n,x,e,o.transformationType)),(void 0!==E||o.options.exposeUnsetFields)&&(l instanceof Map?l.set(u,E):l[u]=E)}};for(f.s();!(h=f.n()).done;)d()}catch(p){f.e(p)}finally{f.f()}return this.options.enableCircularCheck&&this.recursionStack.delete(e),l}return e}return e}return null==e?e:Boolean(e)}return null==e?e:Number(e)}return null==e?e:String(e)}},{key:"applyCustomTransformations",value:function(t,e,n,r,i){var o=this,a=oh.findTransformMetadatas(e,n,this.transformationType);return void 0!==this.options.version&&(a=a.filter(function(t){return!t.options||o.checkVersion(t.options.since,t.options.until)})),(a=a.filter(this.options.groups&&this.options.groups.length?function(t){return!t.options||o.checkGroups(t.options.groups)}:function(t){return!t.options||!t.options.groups||!t.options.groups.length})).forEach(function(e){t=e.transformFn({value:t,key:n,obj:r,type:i,options:o.options})}),t}},{key:"isCircular",value:function(t){return this.recursionStack.has(t)}},{key:"getReflectedType",value:function(t,e){if(t){var n=oh.findTypeMetadata(t,e);return n?n.reflectedType:void 0}}},{key:"getKeys",value:function(t,e,n){var r=this,i=oh.getStrategy(t);"none"===i&&(i=this.options.strategy||"exposeAll");var o=[];if(("exposeAll"===i||n)&&(o=e instanceof Map?Array.from(e.keys()):Object.keys(e)),n)return o;if(!this.options.ignoreDecorators&&t){var a=oh.getExposedProperties(t,this.transformationType);this.transformationType===ih.PLAIN_TO_CLASS&&(a=a.map(function(e){var n=oh.findExposeMetadata(t,e);return n&&n.options&&n.options.name?n.options.name:e})),o=this.options.excludeExtraneousValues?a:o.concat(a);var s=oh.getExcludedProperties(t,this.transformationType);s.length>0&&(o=o.filter(function(t){return!s.includes(t)})),void 0!==this.options.version&&(o=o.filter(function(e){var n=oh.findExposeMetadata(t,e);return!n||!n.options||r.checkVersion(n.options.since,n.options.until)})),o=o.filter(this.options.groups&&this.options.groups.length?function(e){var n=oh.findExposeMetadata(t,e);return!n||!n.options||r.checkGroups(n.options.groups)}:function(e){var n=oh.findExposeMetadata(t,e);return!(n&&n.options&&n.options.groups&&n.options.groups.length)})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(o=o.filter(function(t){return r.options.excludePrefixes.every(function(e){return t.substr(0,e.length)!==e})})),o.filter(function(t,e,n){return n.indexOf(t)===e})}},{key:"checkVersion",value:function(t,e){var n=!0;return n&&t&&(n=this.options.version>=t),n&&e&&(n=this.options.version<e),n}},{key:"checkGroups",value:function(t){return!t||this.options.groups.some(function(e){return t.includes(e)})}}]),t}(),lh={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0};new(function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"classToPlain",value:function(t,e){return new ch(ih.CLASS_TO_PLAIN,rh(rh({},lh),e)).transform(void 0,t,void 0,void 0,void 0,void 0)}},{key:"classToPlainFromExist",value:function(t,e,n){return new ch(ih.CLASS_TO_PLAIN,rh(rh({},lh),n)).transform(e,t,void 0,void 0,void 0,void 0)}},{key:"plainToClass",value:function(t,e,n){return new ch(ih.PLAIN_TO_CLASS,rh(rh({},lh),n)).transform(void 0,e,t,void 0,void 0,void 0)}},{key:"plainToClassFromExist",value:function(t,e,n){return new ch(ih.PLAIN_TO_CLASS,rh(rh({},lh),n)).transform(t,e,void 0,void 0,void 0,void 0)}},{key:"classToClass",value:function(t,e){return new ch(ih.CLASS_TO_CLASS,rh(rh({},lh),e)).transform(void 0,t,void 0,void 0,void 0,void 0)}},{key:"classToClassFromExist",value:function(t,e,n){return new ch(ih.CLASS_TO_CLASS,rh(rh({},lh),n)).transform(e,t,void 0,void 0,void 0,void 0)}},{key:"serialize",value:function(t,e){return JSON.stringify(this.classToPlain(t,e))}},{key:"deserialize",value:function(t,e,n){var r=JSON.parse(e);return this.plainToClass(t,r,n)}},{key:"deserializeArray",value:function(t,e,n){var r=JSON.parse(e);return this.plainToClass(t,r,n)}}]),t}());var hh=function(){return function(t){Object.assign(this,t)}}(),fh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createdAt=-1,e.progress=0,e.started=!1,e.triesLeft=3,e.isComplete=!1,e.dependents=[],e}return(0,Us.ZT)(e,t),Object.defineProperty(e.prototype,"ended",{get:function(){return this.isComplete||this.failedPermanently},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedPermanently",{get:function(){return!!this.error},enumerable:!1,configurable:!0}),Object.defineProperty(e,"taskQueueName",{get:function(){throw new Error("not implemented: taskQueueName")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"taskQueueName",{get:function(){return this._klass.taskQueueName},enumerable:!1,configurable:!0}),e.prototype.on=function(){return t.prototype.on.call(this).pipe(Ys(function(t){return t&&t.error?(0,Vs._)(t.error):(0,Xc.of)(t)}))},e.prototype.onComplete=function(){return this.on().pipe((0,Qc.h)(function(t){return!!t&&t.isComplete}),Hl())},e.prototype.onProgress=function(){return(0,hl.z)(this.on().pipe((0,Qc.h)(function(t){return!!t}),xl(function(t){return!t.isComplete},!0))).pipe(pl())},e.prototype.onProgressNum=function(){return this.onProgress().pipe((0,Ks.U)(function(t){return t.progress}),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return(0,hl.z)(t,Xc.of.apply(void 0,e))}}(1))},e.prototype.complete=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return[2,this.update({progress:1,isComplete:!0,doneAt:-1})]})})},e.prototype.startTrial=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),(0,Us.mG)(this,void 0,void 0,function(){var e=this;return(0,Us.Jh)(this,function(n){return[2,Cl.db.runTransaction(function(n){return(0,Us.mG)(e,void 0,void 0,function(){var e,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return i=(r=this._klass).fromSnapshot,[4,n.get(this.ref)];case 1:if((e=i.apply(r,[o.sent()])).started&&e.updatedAt&&Date.now()<e.updatedAt+t)throw new Error("task start locked");if(e.triesLeft<=0)throw new Error("no tries left");return n.update(e.ref,{started:!0,triesLeft:e.triesLeft-1,startedAt:ml._serverTimestamp(),updatedAt:ml._serverTimestamp()}),[2,e.triesLeft-1]}})})})]})})},e.prototype.abortTrial=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this.update({progress:0,started:!1})];case 1:return t.sent(),[2]}})})},e.prototype.failPermanently=function(t){return void 0===t&&(t=""),(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this.update({progress:1,started:!1,error:{msg:t},doneAt:-1})]})})},(0,Us.gn)([Ml(),(0,Us.w6)("design:type",Object)],e.prototype,"createdAt",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"progress",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"started",void 0),(0,Us.gn)([Al(function(t){return new hh(t)}),(0,Us.w6)("design:type",hh)],e.prototype,"error",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"triesLeft",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"isComplete",void 0),(0,Us.gn)([Ml(),(0,Us.w6)("design:type",Number)],e.prototype,"doneAt",void 0),(0,Us.gn)([Ml(),(0,Us.w6)("design:type",Number)],e.prototype,"startedAt",void 0),(0,Us.gn)([Ml(!0),(0,Us.w6)("design:type",Number)],e.prototype,"updatedAt",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"traceId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"requestEmail",void 0),(0,Us.gn)([(n=function(){return e},function(t,e){El._ensureDatastructures(t),t.__fisSerializations[e]=function(t,n){if(!n&&t[e]){if(t[e]instanceof Cl)return t[e].ref;throw new Error("@Reference decorator can only serialize properties of type FisModel")}},t.__fisDeserializations[e]=function(t){return t[e]?new(n())(t[e]):void 0}}),(0,Us.w6)("design:type",e)],e.prototype,"dependsOn",void 0),e;var n}(Rl),dh=n(38060),ph=n(9749);function vh(t){return function(e){return e.lift(new gh(t,e))}}var gh=function(){function t(e,n){(0,i.Z)(this,t),this.notifier=e,this.source=n}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new yh(t,this.notifier,this.source))}}]),t}(),yh=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(t,e,n){var r;return(0,i.Z)(this,u),(r=s.call(this,t)).notifier=e,r.source=n,r}return(0,r.Z)(u,[{key:"error",value:function(n){if(!this.isStopped){var r=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{r=new m.xQ;try{i=(0,this.notifier)(r)}catch(jO){return(0,t.Z)((0,e.Z)(u.prototype),"error",this).call(this,jO)}o=(0,Hs.ft)(i,new Hs.IY(this))}this._unsubscribeAndRecycle(),this.errors=r,this.retries=i,this.retriesSubscription=o,r.next(n)}}},{key:"_unsubscribe",value:function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"notifyNext",value:function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}]),u}(Hs.Ds);function mh(t,e){return Math.pow(2,t)*e}var bh=n(35518),wh=n.n(bh),_h=function(){return function(){this.authMethod="fb"}}(),Sh=function t(){(0,i.Z)(this,t)},kh=function t(){(0,i.Z)(this,t)},Eh=function(){function t(e){var n=this;(0,i.Z)(this,t),this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){n.headers=new Map,e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var r=t.slice(0,e),i=r.toLowerCase(),o=t.slice(e+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}})}:function(){n.headers=new Map,Object.keys(e).forEach(function(t){var r=e[t],i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(t,i))})}:this.headers=new Map}return(0,r.Z)(t,[{key:"has",value:function(t){return this.init(),this.headers.has(t.toLowerCase())}},{key:"get",value:function(t){this.init();var e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(t){return this.init(),this.headers.get(t.toLowerCase())||null}},{key:"append",value:function(t,e){return this.clone({name:t,value:e,op:"a"})}},{key:"set",value:function(t,e){return this.clone({name:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({name:t,value:e,op:"d"})}},{key:"maybeSetNormalizedName",value:function(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}},{key:"init",value:function(){var e=this;this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(t){return e.applyUpdate(t)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(t){var e=this;t.init(),Array.from(t.headers.keys()).forEach(function(n){e.headers.set(n,t.headers.get(n)),e.normalizedNames.set(n,t.normalizedNames.get(n))})}},{key:"clone",value:function(e){var n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}},{key:"applyUpdate",value:function(t){var e=t.name.toLowerCase();switch(t.op){case"a":case"s":var n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);var r=("a"===t.op?this.headers.get(e):void 0)||[];r.push.apply(r,(0,f.Z)(n)),this.headers.set(e,r);break;case"d":var i=t.value;if(i){var o=this.headers.get(e);if(!o)return;0===(o=o.filter(function(t){return-1===i.indexOf(t)})).length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}},{key:"forEach",value:function(t){var e=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return t(e.normalizedNames.get(n),e.headers.get(n))})}}]),t}(),xh=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"encodeKey",value:function(t){return Ih(t)}},{key:"encodeValue",value:function(t){return Ih(t)}},{key:"decodeKey",value:function(t){return decodeURIComponent(t)}},{key:"decodeValue",value:function(t){return decodeURIComponent(t)}}]),t}();function Th(t,e){var n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(function(t){var r=t.indexOf("="),i=c(-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],2),o=i[0],a=i[1],s=n.get(o)||[];s.push(a),n.set(o,s)}),n}function Ih(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Ch(t){return"".concat(t)}var Ah=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,i.Z)(this,t),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new xh,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Th(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(function(t){var r=n.fromObject[t];e.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}return(0,r.Z)(t,[{key:"has",value:function(t){return this.init(),this.map.has(t)}},{key:"get",value:function(t){this.init();var e=this.map.get(t);return e?e[0]:null}},{key:"getAll",value:function(t){return this.init(),this.map.get(t)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(t,e){return this.clone({param:t,value:e,op:"a"})}},{key:"appendAll",value:function(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n];Array.isArray(r)?r.forEach(function(t){e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}},{key:"set",value:function(t,e){return this.clone({param:t,value:e,op:"s"})}},{key:"delete",value:function(t,e){return this.clone({param:t,value:e,op:"d"})}},{key:"toString",value:function(){var t=this;return this.init(),this.keys().map(function(e){var n=t.encoder.encodeKey(e);return t.map.get(e).map(function(e){return n+"="+t.encoder.encodeValue(e)}).join("&")}).filter(function(t){return""!==t}).join("&")}},{key:"clone",value:function(e){var n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}},{key:"init",value:function(){var t=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(e){return t.map.set(e,t.cloneFrom.map.get(e))}),this.updates.forEach(function(e){switch(e.op){case"a":case"s":var n=("a"===e.op?t.map.get(e.param):void 0)||[];n.push(Ch(e.value)),t.map.set(e.param,n);break;case"d":if(void 0===e.value){t.map.delete(e.param);break}var r=t.map.get(e.param)||[],i=r.indexOf(Ch(e.value));-1!==i&&r.splice(i,1),r.length>0?t.map.set(e.param,r):t.map.delete(e.param)}}),this.cloneFrom=this.updates=null)}}]),t}(),Mh=function(){function t(){(0,i.Z)(this,t),this.map=new Map}return(0,r.Z)(t,[{key:"set",value:function(t,e){return this.map.set(t,e),this}},{key:"get",value:function(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}},{key:"delete",value:function(t){return this.map.delete(t),this}},{key:"keys",value:function(){return this.map.keys()}}]),t}();function Rh(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Oh(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Ph(t){return"undefined"!=typeof FormData&&t instanceof FormData}var Nh=function(){function t(e,n,r,o){var a;if((0,i.Z)(this,t),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,a=o):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Eh),this.context||(this.context=new Mh),this.params){var s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{var u=n.indexOf("?");this.urlWithParams=n+(-1===u?"?":u<n.length-1?"&":"")+s}}else this.params=new Ah,this.urlWithParams=n}return(0,r.Z)(t,[{key:"serializeBody",value:function(){return null===this.body?null:Rh(this.body)||Oh(this.body)||Ph(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Ah?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||Ph(this.body)?null:Oh(this.body)?this.body.type||null:Rh(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ah?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.method||this.method,i=n.url||this.url,o=n.responseType||this.responseType,a=void 0!==n.body?n.body:this.body,s=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,u=void 0!==n.reportProgress?n.reportProgress:this.reportProgress,c=n.headers||this.headers,l=n.params||this.params,h=null!==(e=n.context)&&void 0!==e?e:this.context;return void 0!==n.setHeaders&&(c=Object.keys(n.setHeaders).reduce(function(t,e){return t.set(e,n.setHeaders[e])},c)),n.setParams&&(l=Object.keys(n.setParams).reduce(function(t,e){return t.set(e,n.setParams[e])},l)),new t(r,i,a,{params:l,headers:c,context:h,reportProgress:u,responseType:o,withCredentials:s})}}]),t}(),Dh=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({}),$h=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";(0,i.Z)(this,t),this.headers=e.headers||new Eh,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300},Lh=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,n),(t=e.call(this,r)).type=Dh.ResponseHeader,t}return(0,r.Z)(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}($h),jh=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.Z)(this,n),(t=e.call(this,r)).type=Dh.Response,t.body=void 0!==r.body?r.body:null,t}return(0,r.Z)(n,[{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}]),n}($h),Uh=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(t.url||"(unknown url)"):"Http failure response for ".concat(t.url||"(unknown url)",": ").concat(t.status," ").concat(t.statusText),r.error=t.error||null,r}return n}($h);function Fh(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}var Bh,qh,Vh,Zh=function(){var t=function(){function t(e){(0,i.Z)(this,t),this.handler=e}return(0,r.Z)(t,[{key:"request",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof Nh)n=t;else{var o=void 0;o=i.headers instanceof Eh?i.headers:new Eh(i.headers);var a=void 0;i.params&&(a=i.params instanceof Ah?i.params:new Ah({fromObject:i.params})),n=new Nh(t,e,void 0!==i.body?i.body:null,{headers:o,context:i.context,params:a,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=(0,Xc.of)(n).pipe(dl(function(t){return r.handler.handle(t)}));if(t instanceof Nh||"events"===i.observe)return s;var u=s.pipe((0,Qc.h)(function(t){return t instanceof jh}));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe((0,Ks.U)(function(t){if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return u.pipe((0,Ks.U)(function(t){if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return u.pipe((0,Ks.U)(function(t){if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return u.pipe((0,Ks.U)(function(t){return t.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",t,e)}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",t,e)}},{key:"head",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",t,e)}},{key:"jsonp",value:function(t,e){return this.request("JSONP",t,{params:(new Ah).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",t,e)}},{key:"patch",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",t,Fh(n,e))}},{key:"post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",t,Fh(n,e))}},{key:"put",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",t,Fh(n,e))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Sh))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Hh=function(){function t(e,n){(0,i.Z)(this,t),this.next=e,this.interceptor=n}return(0,r.Z)(t,[{key:"handle",value:function(t){return this.interceptor.intercept(t,this.next)}}]),t}(),zh=new We("HTTP_INTERCEPTORS"),Gh=function(){var t=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"intercept",value:function(t,e){return e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Wh=/^\)\]\}',?\n/,Kh=function(){var t=function(){function t(e){(0,i.Z)(this,t),this.xhrFactory=e}return(0,r.Z)(t,[{key:"handle",value:function(t){var e=this;if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new b.y(function(n){var r=e.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach(function(t,e){return r.setRequestHeader(t,e.join(","))}),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){var i=t.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(t.responseType){var o=t.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=t.serializeBody(),s=null,u=function(){if(null!==s)return s;var e=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Eh(r.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new Lh({headers:i,status:e,statusText:n,url:o})},c=function(){var e=u(),i=e.headers,o=e.status,a=e.statusText,s=e.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===t.responseType&&"string"==typeof c){var h=c;c=c.replace(Wh,"");try{c=""!==c?JSON.parse(c):null}catch(f){c=h,l&&(l=!1,c={error:f,text:c})}}l?(n.next(new jh({body:c,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new Uh({error:c,headers:i,status:o,statusText:a,url:s||void 0}))},l=function(t){var e=u(),i=new Uh({error:t,status:r.status||0,statusText:r.statusText||"Unknown Error",url:e.url||void 0});n.error(i)},h=!1,f=function(e){h||(n.next(u()),h=!0);var i={type:Dh.DownloadProgress,loaded:e.loaded};e.lengthComputable&&(i.total=e.total),"text"===t.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(t){var e={type:Dh.UploadProgress,loaded:t.loaded};t.lengthComputable&&(e.total=t.total),n.next(e)};return r.addEventListener("load",c),r.addEventListener("error",l),r.addEventListener("timeout",l),r.addEventListener("abort",l),t.reportProgress&&(r.addEventListener("progress",f),null!==a&&r.upload&&r.upload.addEventListener("progress",d)),r.send(a),n.next({type:Dh.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("abort",l),r.removeEventListener("load",c),r.removeEventListener("timeout",l),t.reportProgress&&(r.removeEventListener("progress",f),null!==a&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Ra))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),Jh=new We("XSRF_COOKIE_NAME"),Yh=new We("XSRF_HEADER_NAME"),Xh=function t(){(0,i.Z)(this,t)},Qh=function(){var t=function(){function t(e,n,r){(0,i.Z)(this,t),this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return(0,r.Z)(t,[{key:"getToken",value:function(){if("server"===this.platform)return null;var t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ca(t,this.cookieName),this.lastCookieString=t),this.lastToken}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(ca),sn(yo),sn(Jh))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),tf=function(){var t=function(){function t(e,n){(0,i.Z)(this,t),this.tokenService=e,this.headerName=n}return(0,r.Z)(t,[{key:"intercept",value:function(t,e){var n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);var r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Xh),sn(Yh))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),ef=function(){var t=function(){function t(e,n){(0,i.Z)(this,t),this.backend=e,this.injector=n,this.chain=null}return(0,r.Z)(t,[{key:"handle",value:function(t){if(null===this.chain){var e=this.injector.get(zh,[]);this.chain=e.reduceRight(function(t,e){return new Hh(t,e)},this.backend)}return this.chain.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(kh),sn(Kr))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}(),nf=function(){var t=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,null,[{key:"disable",value:function(){return{ngModule:t,providers:[{provide:tf,useClass:Gh}]}}},{key:"withOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:t,providers:[e.cookieName?{provide:Jh,useValue:e.cookieName}:[],e.headerName?{provide:Yh,useValue:e.headerName}:[]]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[tf,{provide:zh,useExisting:tf,multi:!0},{provide:Xh,useClass:Qh},{provide:Jh,useValue:"XSRF-TOKEN"},{provide:Yh,useValue:"X-XSRF-TOKEN"}]}),t}(),rf=function(){var t=function t(){(0,i.Z)(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[Zh,{provide:Sh,useClass:ef},Kh,{provide:kh,useExisting:Kh}],imports:[[nf.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t}(),of=function(){function t(t,e){this._http=t,this._loggerAdapter=e}return t.prototype.postAuthLogs=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this._http.post(this._loggerAdapter.authedEndPoint,t,{headers:{auth:this._loggerAdapter.authMethod}}).toPromise()];case 1:return e.sent(),[2]}})})},t.prototype.postUnauthLogs=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this._http.post(this._loggerAdapter.unauthedEndPoint,t,{headers:{auth:"false"}}).toPromise()];case 1:return e.sent(),[2]}})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh),sn(_h))},providedIn:"root"}),t}(),af={},sf=function(t){var e=console[t];af[t]=e,console[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e.apply(void 0,(0,Us.ev)([],(0,Us.CR)(n))),Vh&&Vh(t,n)}};try{for(var uf=(0,Us.XA)(["debug","error","info","log","warn"]),cf=uf.next();!cf.done;cf=uf.next())sf(cf.value)}catch(MD){Bh={error:MD}}finally{try{cf&&!cf.done&&(qh=uf.return)&&qh.call(uf)}finally{if(Bh)throw Bh.error}}var lf=function(){function t(t,e){if(this._adapter=t,this._remoteLoggerClient=e,this._maxLogsInMemory=1e5,this._logs=[],this._maxLinesPerRequest=1e4,!t.authedEndPoint||!t.unauthedEndPoint)throw new Error("invalid logger adapter")}return t.filterCssFromLog=function(t){var e=0,n=t.shift();if("string"==typeof n){var r=n.replace(/%c /g,function(){return e++,""}),i=t.slice(e);return(0,Us.ev)([r],(0,Us.CR)(i))}return(0,Us.ev)([n],(0,Us.CR)(t))},t.prototype._flush=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return this._logs.length?(t=(0,Us.ev)([],(0,Us.CR)(this._logs.slice(0,this._maxLinesPerRequest))),e=this._buildPayload(t),this._adapter.loggedIn?[4,this._remoteLoggerClient.postAuthLogs(e)]:[3,2]):[2];case 1:return n.sent(),[3,4];case 2:return[4,this._remoteLoggerClient.postUnauthLogs(e)];case 3:n.sent(),n.label=4;case 4:return this._shiftLogs(t.length),[2]}})})},t.prototype.install=function(t){this._clientdata=t,window.onerror=function(t,e,n){console.error("global error",t,e,n)},Vh=this._addLog.bind(this),this._installBatcher()},t.prototype._addLog=function(e,n){n=t.filterCssFromLog(n),n=(n=this._stringifyErrors(n)).map(function(t){return"object"==typeof t?wh()(t,{indent:2}).slice(1,-1):String(t)}),this._logs.push({level:e,params:n,timestamp:Date.now()}),this._logs.length>this._maxLogsInMemory&&(this._logs.length=0)},t.prototype._buildPayload=function(t){return{logs:t,clientdata:(0,Us.pi)({},this._clientdata)}},t.prototype._installBatcher=function(){var t,e,n,r,i,o,a,s,u,c,l,h,f,d=this;(0,Xc.of)(null).pipe((0,Qc.h)(function(){return d._logs.length>0&&navigator.onLine}),Ys(function(){return d._flush()}),(t={initialInterval:5e3,maxInterval:12e4},e="number"==typeof t?{initialInterval:t}:t,n=e.initialInterval,r=e.maxRetries,i=void 0===r?1/0:r,o=e.maxInterval,a=void 0===o?1/0:o,s=e.shouldRetry,u=void 0===s?function(){return!0}:s,c=e.resetOnSuccess,l=void 0!==c&&c,h=e.backoffDelay,f=void 0===h?mh:h,function(t){return(0,qs.P)(function(){var e=0;return t.pipe(vh(function(t){return t.pipe(dl(function(t){var r=e++;return(0,dh.s)(function(){return r<i&&u(t)},(0,ph.H)(function(t,e){return Math.min(t,e)}(f(r,n),a)),(0,Vs._)(t))}))}),Wl(function(){l&&(e=0)}))})}),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tl.P,n=el(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new il(n,e))}}(5e3),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(e){return 0===t?(0,sl.c)():e.lift(new ul(t<0?-1:t-1,e))}}()).subscribe(function(){return null})},t.prototype._shiftLogs=function(t){this._logs.splice(0,t)},t.prototype._stringifyErrors=function(t){return t.map(function(t){return t instanceof DOMException?"DOMException("+t.name+"): "+t.message:t instanceof Error?JSON.stringify(t,Object.getOwnPropertyNames(t)):t})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(_h),sn(of))},providedIn:"root"}),(0,Us.gn)([eh,(0,Us.w6)("design:type",Function),(0,Us.w6)("design:paramtypes",[]),(0,Us.w6)("design:returntype",Promise)],t.prototype,"_flush",null),t}(),hf="production"===Yc.environmentName?.002:1,ff=function(){function t(){!function(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=Gc),void 0===t.release){var e=(0,wu.Rf)();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}!function(t,e){!0===e.debug&&pu.k.enable(),(0,du.Gd)().bindClient(new t(e))}(yc,t)}({beforeSend:function(t){try{if(window.localStorage.e2e)return null}catch(NS){}return Math.random()<hf?t:null},beforeBreadcrumb:function(t){switch(t.category){case"console":var e=t.data.extra.arguments;switch(t.level){case"log":e=lf.filterCssFromLog(e)}for(var n={indent:4},r=0;r<e.length;r++)"object"==typeof e[r]&&(e[r]&&"stack"in e[r]&&delete e[r].stack,e[r]=wh()(e[r],n));t.message=e.join(""),t.data=null;break;case"ui.click":t=null;break;default:return t}return t},dsn:"https://83be6b50b8d748f6915a9c3345443403@o293308.ingest.sentry.io/1538219",environment:Yc.environmentName,release:chrome.runtime?chrome.runtime.getManifest().version_name:"test",dist:"record"})}return t.prototype.configureScope=function(t){!function(t){wc("configureScope",t)}(t)},t.prototype.captureException=function(t){_c(t)},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),df=function(){function t(t,e){this._injector=t,this._sentry=e,this._hasUserContext=!1,this._patchNgLog()}return t.prototype._setupUserContext=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this._hasUserContext?[2]:(this._hasUserContext=!0,[4,this._injector.get(au).getAccount()]);case 1:return(t=e.sent())&&t.user&&this._sentry.configureScope(function(e){e.setUser({email:t.user.email})}),[2]}})})},t.prototype._isNonErrorObject=function(t){return"object"==typeof t&&null!==t&&!(t instanceof Error)},t.prototype._getMessage=function(t){return t.message?t.message:t.details?JSON.stringify(t.details):t.reason?t.reason:t},t.prototype.handleError=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this._setupUserContext()];case 1:return n.sent(),e=this._isNonErrorObject(t)?this._getMessage(t):void 0,this._sentry.captureException(e||t.originalError||t),console.warn(t),[2]}})})},t.prototype._reportLogArgs=function(t){var e,n;try{for(var r=(0,Us.XA)(t),i=r.next();!i.done;i=r.next()){var o=i.value;if(o instanceof Error)return this.handleError(o),!0}}catch(MD){e={error:MD}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return!1},t.prototype._patchNgLog=function(){var t=this,e=cu.msg.bind(cu);cu.msg=function(n,r,i,o,a,s){var u=e(n,r,i,o,a,s);return a===ou.ERROR&&(t._reportLogArgs(r)||t.handleError(n)),u}},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Kr),sn(ff))},providedIn:"root"}),t}();ls.module("cf2.sentryErrorHandler",[]).factory("sentryErrorHandler",Ps(df));var pf=function(){function t(t){if(t)throw new Error("ErrorReportingModule is already loaded. Import it in the AppModule only")}return t.\u0275fac=function(e){return new(e||t)(sn(t,12))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[{provide:bn,useExisting:df}],imports:[[Ma]]}),t}(),vf=function(){function t(){var t=this;this.local={},this.sync={},this.managed={},this.onChanged=chrome.storage.onChanged,["local","sync","managed"].forEach(function(e){["set","get","remove","clear"].forEach(function(n){t[e][n]=function(t,e){return function(){var n,r=new Promise(function(t,e){n=function(n){chrome.runtime.lastError?e(chrome.runtime.lastError):t(n)}});return t.apply(e,(0,Us.ev)((0,Us.ev)([],(0,Us.CR)(arguments)),[n])),r}}(chrome.storage[e][n],chrome.storage[e])}),t[e].setSingle=function(n,r){var i={};return i[n]=r,t[e].set(i)},t[e].getSingle=function(n,r){return t[e].get(n).then(function(t){return t.hasOwnProperty(n)?t[n]:r})}})}return t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}();function gf(){return un("$injector")}ls.module("cf2.chromeStorageService",[]).factory("cf2ChromeStorageService",Ps(vf));var yf=new We("ajs.analytics",{providedIn:"root",factory:function(){return gf().get("analytics")}}),mf=(new We("ajs.backgroundTool",{providedIn:"root",factory:function(){return gf().get("backgroundTool")}}),new We("ajs.castifyConfig",{providedIn:"root",factory:function(){return gf().get("castifyConfig")}})),bf=(new We("ajs.chromeEventPublisher",{providedIn:"root",factory:function(){return gf().get("chromeEventPublisher")}}),new We("ajs.chromeSystem",{providedIn:"root",factory:function(){return gf().get("chromeSystem")}}),new We("ajs.appOptions",{providedIn:"root",factory:function(){return gf().get("appOptions")}})),wf=new We("ajs.chromeRuntime",{providedIn:"root",factory:function(){return gf().get("chromeRuntime")}}),_f=new We("ajs.chromeWindows",{providedIn:"root",factory:function(){return gf().get("chromeWindows")}}),Sf=new We("ajs.chromeTabs",{providedIn:"root",factory:function(){return gf().get("chromeTabs")}}),kf=(new We("ajs.driveUtils",{providedIn:"root",factory:function(){return gf().get("driveUtils")}}),new We("ajs.filesHelper",{providedIn:"root",factory:function(){return gf().get("filesHelper")}})),Ef=(new We("ajs.fileDbClient",{providedIn:"root",factory:function(){return gf().get("fileDbClient")}}),new We("ajs.webEditUtils",{providedIn:"root",factory:function(){return gf().get("webEditUtils")}}),new We("ajs.$log",{providedIn:"root",factory:function(){return gf().get("$log")}}),new We("ajs.shareUtils",{providedIn:"root",factory:function(){return gf().get("shareUtils")}}),new We("ajs.simpleBgServiceConsumer",{providedIn:"root",factory:function(){return gf().get("simpleBgServiceConsumer")}}),new We("ajs.youtubeAuth",{providedIn:"root",factory:function(){return gf().get("youtubeAuth")}}),new We("ajs.syncStatusClient",{providedIn:"root",factory:function(){return gf().get("syncStatusClient")}}),new We("ajs.onlineState",{providedIn:"root",factory:function(){return gf().get("onlineState")}}),new We("ajs.enterprisePolicy",{providedIn:"root",factory:function(){return gf().get("enterprisePolicy")}}),new We("ajs.optionalPermissions",{providedIn:"root",factory:function(){return gf().get("optionalPermissions")}}),new We("ajs.recordTool",{providedIn:"root",factory:function(){return gf().get("recordTool")}})),xf=new We("ajs.bgUserAccount",{providedIn:"root",factory:function(){return gf().get("bgUserAccount")}}),Tf=new We("ajs.bgFiles",{providedIn:"root",factory:function(){return gf().get("bgFiles")}}),If=(new We("ajs.bgRecordService",{providedIn:"root",factory:function(){return gf().get("bgRecordService")}}),new We("ajs.UploadBase",{providedIn:"root",factory:function(){return gf().get("UploadBase")}})),Cf=(new We("ajs.$http",{providedIn:"root",factory:function(){return gf().get("$http")}}),new We("ajs.$state",{providedIn:"root",factory:function(){return gf().get("$state")}}),new We("ajs.rootScope",{providedIn:"root",factory:function(){return gf().get("$rootScope")}})),Af=(new We("ajs.$stateParams",{providedIn:"root",factory:function(){return gf().get("$stateParams")}}),new We("ajs.$location",{providedIn:"root",factory:function(){return gf().get("$location")}}),function(){function t(t,e){this._http=t,this._castifyConfig=e,this._baseUrl=this._castifyConfig.API_URL+"/stats"}return t.prototype.trackNewRecording=function(t){this._http.post(this._baseUrl+"/recording_created",{duration:t},{headers:{auth:"google"}}).toPromise()},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh),sn(mf))},providedIn:"root"}),t}()),Mf="numRecordingsStored",Rf="paidNumRecordingsStored",Of=function(){function t(t,e){this._chromeStorage=t,this._bgUsageStatsClientService=e}return t.prototype._incrementFreeCount=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getFreeCount()];case 1:return t=e.sent(),[4,this._chromeStorage.local.setSingle(Mf,t+1)];case 2:return e.sent(),[2]}})})},t.prototype._incrementPaidCount=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getPaidCount()];case 1:return t=e.sent(),[4,this._chromeStorage.local.setSingle(Rf,t+1)];case 2:return e.sent(),[2]}})})},t.prototype.getPaidCount=function(){return this._chromeStorage.local.getSingle(Rf,0)},t.prototype.getFreeCount=function(){return this._chromeStorage.local.getSingle(Mf,0)},t.prototype.trackNewRecording=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e?[4,this._incrementPaidCount()]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this._incrementFreeCount()];case 3:n.sent(),n.label=4;case 4:return this._bgUsageStatsClientService.trackNewRecording(t),[2]}})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(vf),sn(Af))},providedIn:"root"}),t}();ls.module("cf2.bgUsageStatsService",[]);var Pf=function(){function t(t){if(t)throw new Error("ChromeStorageModule is already loaded.")}return t.\u0275fac=function(e){return new(e||t)(sn(t,12))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[vf],imports:[[Ma]]}),t}();function Nf(t){return function(e){return e.lift(new Df(t))}}var Df=function(){function t(e){(0,i.Z)(this,t),this.value=e}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new $f(t,this.value))}}]),t}(),$f=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).value=r,o}return(0,r.Z)(n,[{key:"_next",value:function(t){this.destination.next(this.value)}}]),n}(nl.L),Lf=n(23810),jf=n(37469);function Uf(t){return new b.y(function(e){return{unsubscribe:t.onAuthStateChanged(e)}})}function Ff(t){return function(t){return new b.y(function(e){return{unsubscribe:t.onIdTokenChanged(e)}})}(t).pipe(Ys(function(t){return t?(0,Js.D)(t.getIdToken()):(0,Xc.of)(null)}))}var Bf=function(t){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this),this.message=t,this.name=this.constructor.name};Bf.prototype=Object.create(Error.prototype);var qf=function(t){function e(e){return t.call(this,e)||this}return(0,Us.ZT)(e,t),e.isInstance=function(t){return t&&t instanceof this},e}(Bf),Vf=n(66723),Zf=function(t,e,n){return window.open((0,Vf.N)(t),e,n)},Hf=function(){function t(t){this._http=t}return t.prototype.getToken=function(){return this._http.get(Yc.extensionServiceUrl+"/extensionAuth/getToken").toPromise()},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh))},providedIn:"root"}),(0,Us.gn)([eh,(0,Us.w6)("design:type",Function),(0,Us.w6)("design:paramtypes",[]),(0,Us.w6)("design:returntype",Promise)],t.prototype,"getToken",null),t}(),zf=function(t){function e(){return t.call(this,"not_signed_in")||this}return(0,Us.ZT)(e,t),e}(qf),Gf=function(){function t(t){this._authClient=t,this._log=fu.create("BgExtensionAuthService"),this._fbAuth=_l().auth(),this._signInDigestSuccess=new m.xQ}return t.prototype.onUser=function(){return Uf(this._fbAuth)},t.prototype.onFbAuthToken=function(){return Ff(this._fbAuth)},t.prototype.refreshFbToken=function(){var t;return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,null===(t=this._fbAuth.currentUser)||void 0===t?void 0:t.getIdToken(!0)];case 1:return e.sent(),[2]}})})},t.prototype.onGoogleAuthToken=function(){var t=this;return this.onFbAuthToken().pipe(Ys(function(e){return e?(0,Js.D)(t._authClient.getToken()).pipe((0,Ks.U)(function(t){return t.token})):(0,Xc.of)(null)}))},t.prototype.getAuthToken=function(t){var e=(void 0===t?{}:t).interactive,n=void 0!==e&&e;return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return"select_account"!==n?[3,4]:[4,this._openWindowFlow(!0)];case 1:return r.sent()?[4,this.onGoogleAuthToken().pipe(Hl()).toPromise()]:[3,3];case 2:t=r.sent(),r.label=3;case 3:return[3,9];case 4:return[4,this.onGoogleAuthToken().pipe(Hl()).toPromise()];case 5:return(t=r.sent())?[3,9]:(e=n)?[4,this._openWindowFlow()]:[3,7];case 6:e=r.sent(),r.label=7;case 7:return e?[4,this.onGoogleAuthToken().pipe(Hl()).toPromise()]:[3,9];case 8:t=r.sent(),r.label=9;case 9:if(!t)throw n&&this._log.error("Interactive sign-in failed or cancelled"),new zf;return[2,t]}})})},t.prototype.signOut=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this._fbAuth.signOut()];case 1:return t.sent(),[2]}})})},t.prototype.signIn=function(t){return void 0===t&&(t=!1),(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this._log.data("signIn",t),[4,this._openWindowFlow(t)];case 1:if(!e.sent())throw new zf;return[2]}})})},t.prototype.onIsSignedIn=function(){return this.onFbAuthToken().pipe((0,Ks.U)(function(t){return!!t}))},t.prototype.isSignedIn=function(){return this.onIsSignedIn().pipe(Hl()).toPromise()},t.prototype._openWindowFlow=function(t){return void 0===t&&(t=!1),(0,Us.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return e=Zf(Yc.signInUrl+(t?"?selectAccount=1":"")),n=(0,Lf.F)(200).pipe(Hl(function(){return e.closed}),Nf(!1)),[4,(0,jf.S3)(n,this._signInDigestSuccess.pipe(Hl(),Nf(!0))).toPromise()];case 1:return r=i.sent(),this._log.info("windowFlow %s",r?"completed":"cancelled"),[2,r]}})})},t.prototype._onSignInMessage=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return t?(this._log.data("signing in"),e=ll.Z.auth.GoogleAuthProvider.credential(null,t),[4,this._fbAuth.signInWithCredential(e)]):[3,2];case 1:return n=r.sent(),"production"!==Yc.environmentName?this._log.data("signed in %s",n.user.email,n):this._log.info("signed in %s",n.user.email),[3,4];case 2:return this._log.data("signing out"),[4,this._fbAuth.signOut()];case 3:r.sent(),this._log.data("signed out"),r.label=4;case 4:return this._signInDigestSuccess.next(),[2]}})})},t.prototype.install=function(){var t=this;chrome.runtime.onMessageExternal.addListener(function(e,n,r){if(e&&"extensionAuth:signInWithToken"===e.type)return t._onSignInMessage(e.data).then(function(){return r(!0)},function(){return r(!1)}),!0})},t.prototype.e2eSignIn=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:this._log.data("signing in e2e user",t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._fbAuth.signInWithEmailAndPassword(t,e)];case 2:return r.sent(),[3,4];case 3:throw n=r.sent(),this._log.error("failed to sign in e2e user"),n;case 4:return this._log.data("signed in e2e user"),[2]}})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Hf))},providedIn:"root"}),t}(),Wf=n(26544);function Kf(t,e,n){var r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},function(t){return t.lift(function(t){var e,n,r=t.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=t.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,u=t.scheduler,c=0,l=!1,h=!1;return function(t){var r;c++,!e||l?(l=!1,e=new Wf.t(i,a,u),r=e.subscribe(this),n=t.subscribe({next:function(t){e.next(t)},error:function(t){l=!0,e.error(t)},complete:function(){h=!0,n=void 0,e.complete()}}),h&&(n=void 0)):r=e.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&s&&0===c&&(n.unsubscribe(),n=void 0,e=void 0)})}}(r))}}var Jf=n(9225),Yf=n(54077),Xf=n(76598),Qf=n(84766),td=function(){function t(){this.syncSelectMode=!1,this._state$=new Jf.X(this.getInitialState())}return t.prototype.afterAction=function(t){var e=this._actionStreams&&this._actionStreams.get(t);if(!e)throw new Error("onAction can only be used on methods having a @Action() decorator");return e.pipe((0,Qf.QV)(Yf.E))},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.onStateProperty=function(t){return this.select(function(e){return e[t]})},t.prototype.select=function(t){return this._state$.pipe((0,Ks.U)(function(e){return t(e)}),pl(),this.syncSelectMode?Wl(function(){return null}):(0,Qf.QV)(Xf.N))},t.prototype.destroy=function(){this._state$.complete()},t.prototype.getInitialState=function(){return this.create()},t.prototype.getState=function(){return this._state$.getValue()},t.prototype.setState=function(t){this._state$.next(Object.assign(this.create(),this.getState(),t))},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)}}),t}(),ed=n(18839),nd=n.n(ed),rd=function(){function t(){}return t.isLess=function(t,e){function n(t){return t.split(".").map(function(t){return Number(t)})}for(var r=n(t),i=n(e),o=0;o<Math.max(r.length,i.length);++o){if((r[o]||0)<(i[o]||0))return!0;if((r[o]||0)>(i[o]||0))return!1}return!1},t.isEqual=function(t,e){return!this.isLess(t,e)&&!this.isLess(e,t)},t.isLessOrEqual=function(t,e){return this.isLess(t,e)||this.isEqual(t,e)},t}();(0,Us.ev)((0,Us.ev)((0,Us.ev)([],(0,Us.CR)(["quickFeedbackToolPOC","quickAdd","submitInClassroomPOC"])),(0,Us.CR)(["betaEndingBanner","enableProjectPaperclip","componentLibPOC","enablePendoZendeskIntegration","redirectULMUsersToStudioULM","useHostedVmp"])),["useApiProxy"]);var id,od=function(){function t(){this.isActivated$=new Jf.X(!1),this._log=fu.create("RemoteConfigService")}return t.prototype.isFeatureEnabled=function(t){var e=this.getValue(t).asString();if(!e)return!1;var n=JSON.parse(e);if("boolean"==typeof n)return n;if(Object.prototype.hasOwnProperty.call(n,"minVersion")&&Object.prototype.hasOwnProperty.call(n,"enabled")){var r=chrome.runtime.getManifest().version,i=rd.isLessOrEqual(n.minVersion,r);return n.enabled&&i}return!1},t.prototype.isEmailDomainInArray=function(t,e){var n=/([^@]+)$/.exec(t);if(!n)return!1;var r=n[0],i=nd().MD5(r).toString().slice(0,8);return this.getArray(e).some(function(t){return t===r||t===i})},t.prototype.isEmailInArray=function(t,e){var n=nd().MD5(t).toString().slice(0,8);return this.getArray(e).some(function(e){return e===t||e===n})},t.prototype.getArray=function(t){var e;try{var n=ll.Z.remoteConfig().getValue(t).asString();if(e=JSON.parse(n),!Array.isArray(e)||!e)throw new Error("Parsed value must be an array")}catch(NS){e=[]}return e},t.prototype.getValue=function(t){return ll.Z.remoteConfig().getValue(t)},t.prototype.init=function(t){return void 0===t&&(t=!1),(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this._setSettings(),this._setDefaultConfig(),t?[4,ll.Z.remoteConfig().activate()]:[3,2];case 1:return n.sent(),ll.Z.remoteConfig().fetchAndActivate(),[3,4];case 2:return[4,ll.Z.remoteConfig().fetchAndActivate()];case 3:n.sent(),n.label=4;case 4:return this._log.data("remote config loaded:",ll.Z.remoteConfig().getAll()),this.isActivated$.next(!0),[3,6];case 5:return e=n.sent(),this._log.error("error with remoteConfig init",e),[3,6];case 6:return[2]}})})},t.prototype._setDefaultConfig=function(){ll.Z.remoteConfig().defaultConfig={featureEnabled:!1,newFeatureOnboarding:"December 14, 2020",enableProjectPaperclip:!1}},t.prototype._setSettings=function(){ll.Z.remoteConfig().settings={minimumFetchIntervalMillis:36e5,fetchTimeoutMillis:6e5}},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),ad=n(90912),sd=n(27533),ud=n(53474),cd="w:0.4.26",ld=((id={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',id["not-registered"]="Firebase Installation is not registered.",id["installation-not-found"]="Firebase Installation not found.",id["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',id["app-offline"]="Could not process request. Application offline.",id["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",id),hd=new sd.LL("installations","Installations",ld);function fd(t){return t instanceof sd.ZR&&t.code.includes("request-failed")}function dd(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function pd(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function vd(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,hd.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function gd(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function yd(t,e){var n=e.refreshToken,r=gd(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function md(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function bd(t,e){var n=e.fid;return(0,Us.mG)(this,void 0,void 0,function(){var e,r,i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return e=dd(t),r=gd(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:cd})},[4,md(function(){return fetch(e,i)})];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:pd(a.authToken)}];case 3:return[4,vd("Create Installation",o)];case 4:throw s.sent()}})})}function wd(t){return new Promise(function(e){setTimeout(e,t)})}var _d=/^[cdef][\w-]{21}$/;function Sd(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,(0,Us.ev)([],(0,Us.CR)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return _d.test(e)?e:""}catch(qh){return""}}function kd(t){return t.appName+"!"+t.appId}var Ed=new Map;function xd(t,e){var n=kd(t);Td(n,e),function(t,e){var n=Cd();n&&n.postMessage({key:t,fid:e}),Ad()}(n,e)}function Td(t,e){var n,r,i=Ed.get(t);if(i)try{for(var o=(0,Us.XA)(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(MD){n={error:MD}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Id=null;function Cd(){return!Id&&"BroadcastChannel"in self&&((Id=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Td(t.data.key,t.data.fid)}),Id}function Ad(){0===Ed.size&&Id&&(Id.close(),Id=null)}var Md,Rd="firebase-installations-store",Od=null;function Pd(){return Od||(Od=(0,ud.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Rd)}})),Od}function Nd(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return n=kd(t),[4,Pd()];case 1:return r=s.sent(),i=r.transaction(Rd,"readwrite"),[4,(o=i.objectStore(Rd)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||xd(t,e.fid),[2,e]}})})}function Dd(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return e=kd(t),[4,Pd()];case 1:return n=i.sent(),[4,(r=n.transaction(Rd,"readwrite")).objectStore(Rd).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function $d(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a,s;return(0,Us.Jh)(this,function(u){switch(u.label){case 0:return n=kd(t),[4,Pd()];case 1:return r=u.sent(),i=r.transaction(Rd,"readwrite"),[4,(o=i.objectStore(Rd)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||xd(t,s.fid),[2,s]}})})}function Ld(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,$d(t,function(n){var r=function(t){return Fd(t||{fid:Sd(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(hd.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,bd(t,e)];case 1:return n=i.sent(),[2,Nd(t,n)];case 2:return fd(r=i.sent())&&409===r.customData.serverCode?[4,Dd(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Nd(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:jd(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function jd(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return[4,Ud(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,wd(100)];case 3:return o.sent(),[4,Ud(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Ld(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function Ud(t){return $d(t,function(t){if(!t)throw hd.create("installation-not-found");return Fd(t)})}function Fd(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Bd(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return(0,Us.mG)(this,void 0,void 0,function(){var t,i,o,a,s;return(0,Us.Jh)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return dd(t)+"/"+n+"/authTokens:generate"}(n,e),i=yd(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:cd}})},[4,md(function(){return fetch(t,a)})];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return[2,pd(u.sent())];case 3:return[4,vd("Generate Auth Token",s)];case 4:throw u.sent()}})})}function qd(t,e){return void 0===e&&(e=!1),(0,Us.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return[4,$d(t.appConfig,function(r){if(!Zd(r))throw hd.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,Vd(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,wd(100)];case 3:return i.sent(),[4,Vd(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,qd(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw hd.create("app-offline");var a=function(t){var e={requestStatus:1,requestTime:Date.now()};return(0,Us.pi)((0,Us.pi)({},t),{authToken:e})}(r);return n=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Bd(t,e)];case 1:return n=o.sent(),i=(0,Us.pi)((0,Us.pi)({},e),{authToken:n}),[4,Nd(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!fd(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Dd(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=(0,Us.pi)((0,Us.pi)({},e),{authToken:{requestStatus:0}}),[4,Nd(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,a),a})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function Vd(t){return $d(t,function(t){if(!Zd(t))throw hd.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?(0,Us.pi)((0,Us.pi)({},t),{authToken:{requestStatus:0}}):t})}function Zd(t){return void 0!==t&&2===t.registrationStatus}function Hd(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,Ld(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function zd(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return dd(t)+"/"+n}(t,e),r=yd(t,e),i={method:"DELETE",headers:r},[4,md(function(){return fetch(n,i)})];case 1:return(o=a.sent()).ok?[3,3]:[4,vd("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}})})}function Gd(t){return hd.create("missing-app-config-values",{valueName:t})}(Md=ll.Z).INTERNAL.registerComponent(new ad.wA("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Gd("App Configuration");if(!t.name)throw Gd("App Name");try{for(var r=(0,Us.XA)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Gd(o)}}catch(MD){e={error:MD}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,Ld(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):qd(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,Hd(t.appConfig)];case 1:return n.sent(),[4,qd(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,$d(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw hd.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw hd.create("app-offline");case 3:return[4,zd(e,n)];case 4:return r.sent(),[4,Dd(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Cd();var n=kd(t),r=Ed.get(n);r||(r=new Set,Ed.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=kd(t),r=Ed.get(n);r&&(r.delete(e),0===r.size&&Ed.delete(n),Ad())}(n,e)}}(n,t)}}},"PUBLIC")),Md.registerVersion("@firebase/installations","0.4.26");var Wd,Kd=n(29040),Jd=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}})})},t}(),Yd=((Wd={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Wd["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Wd["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Wd["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Wd["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Wd["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Wd["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Wd["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Wd["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Wd["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Wd["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Wd["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Wd["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Wd),Xd=new sd.LL("remoteconfig","Remote Config",Yd),Qd=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g;return(0,Us.Jh)(this,function(y){switch(y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=y.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===m&&(m=navigator),m.languages&&m.languages[0]||m.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},a=fetch(r,o),s=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),y.label=2;case 2:return y.trys.push([2,5,,6]),[4,Promise.race([a,s])];case 3:return y.sent(),[4,a];case 4:return u=y.sent(),[3,6];case 5:throw c=y.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),Xd.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];v=void 0,y.label=7;case 7:return y.trys.push([7,9,,10]),[4,u.json()];case 8:return v=y.sent(),[3,10];case 9:throw g=y.sent(),Xd.create("fetch-client-parse",{originalErrorMessage:g.message});case 10:d=v.entries,p=v.state,y.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw Xd.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var m})})},t}(),tp=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),ep=["1","true","t","yes","y","on"],np=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&ep.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),rp=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Kd.in.DEBUG;break;case"silent":this._logger.logLevel=Kd.in.SILENT;break;default:this._logger.logLevel=Kd.in.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:t=new tp,setTimeout(function(){return(0,Us.mG)(r,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof sd.ZR&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o})})},t.prototype.fetchAndActivate=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys((0,Us.pi)((0,Us.pi)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new np("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new np("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new np("static"))},t}();function ip(t,e){var n=t.target.error||void 0;return Xd.create(e,{originalErrorMessage:n&&n.message})}var op="app_namespace_store",ap=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(ip(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(op,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([op],"readonly").objectStore(op),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(ip(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(jO){i(Xd.create("storage-get",{originalErrorMessage:jO&&jO.message}))}})]}})})},t.prototype.set=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var a=n.transaction([op],"readwrite").objectStore(op),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(ip(t,"storage-set"))},u.onsuccess=function(){i()}}catch(jO){o(Xd.create("storage-set",{originalErrorMessage:jO&&jO.message}))}})]}})})},t.prototype.delete=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([op],"readwrite").objectStore(op),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(ip(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(jO){i(Xd.create("storage-delete",{originalErrorMessage:jO&&jO.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),sp=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function up(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(Xd.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var cp,lp=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return(0,Us.mG)(this,void 0,void 0,function(){var e,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return[4,up(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof sd.ZR&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+(0,sd.$s)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),hp="@firebase/remote-config";(cp=ll.Z).INTERNAL.registerComponent(new ad.wA("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Xd.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Xd.create("registration-project-id");if(!s)throw Xd.create("registration-api-key");if(!u)throw Xd.create("registration-app-id");var c=new ap(u,r.name,n=n||"firebase"),l=new sp(c),h=new Kd.Yd(hp);h.logLevel=Kd.in.ERROR;var f=new Qd(i,cp.SDK_VERSION,n,a,s,u),d=new lp(f,c),p=new Jd(d,c,l,h),v=new rp(r,p,l,c,h);return v.ensureInitialized(),v},"PUBLIC").setMultipleInstances(!0)),cp.registerVersion(hp,"0.1.37"),new We("ENVIRONMENT_ID");var fp=function(){function t(t,e,n){var r=this;this._appOptions=t,this._remoteConfig=e,this._userAccount=n,this._account$=this._remoteConfig.isActivated$.pipe(Hl(function(t){return!!t}),Ys(function(){return r._userAccount.onAccount()}),Kf(1)),this.isNewLimitUser$=this._account$.pipe((0,Qc.h)(function(t){return!!(null==t?void 0:t.user)&&!!(null==t?void 0:t.license)&&!t.license.isPaid}),(0,Ks.U)(function(t){var e=new Date(r._remoteConfig.getValue("newFreeUserStartDate").asString()).getTime(),n=new Date(r._remoteConfig.getValue("newFreeUserEndDate").asString()).getTime(),i=new Date(r._remoteConfig.getValue("newPricingDate").asString()).getTime(),o=r._remoteConfig.isEmailInArray(t.user.email,"videoLimitEmailList");return r.includedInVideoLimitExperiment=t.user.createdAt>=e&&t.user.createdAt<n,r._appOptions.values.freeUserLimitRollout||r.includedInVideoLimitExperiment||o||t.user.createdAt>=i}),Kf(1)),this.isNewLimitUserAlwaysEmits$=this._account$.pipe(Ys(function(t){return(null==t?void 0:t.user)&&(null==t?void 0:t.license)&&!t.license.isPaid?r.isNewLimitUser$:(0,Xc.of)(!1)}),Kf(1))}return t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(bf),sn(od),sn(au))},providedIn:"root"}),t}();ls.module("cf2.newVideoLimitService",[]);var dp=n(99750),pp=window.navigator,vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e}(Error),gp=function(){function t(){this._hasDisplayMedia=pp.mediaDevices&&"getDisplayMedia"in pp.mediaDevices}return Object.defineProperty(t.prototype,"hasDisplayMedia",{get:function(){return this._hasDisplayMedia},enumerable:!1,configurable:!0}),t.prototype._throwWrappedPermissionError=function(t){if(this.isPermissionError(t))throw new vp;throw t},t.prototype.getUserMedia=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,navigator.mediaDevices.getUserMedia(t)];case 1:return[2,n.sent()];case 2:return e=n.sent(),this._throwWrappedPermissionError(e),[3,3];case 3:return[2]}})})},t.prototype.getDisplayMedia=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:if(!this._hasDisplayMedia)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,navigator.mediaDevices.getDisplayMedia(t)];case 2:return[2,n.sent()];case 3:return e=n.sent(),this._throwWrappedPermissionError(e),[3,4];case 4:return[3,6];case 5:throw new Error("getDisplayMedia() not supported, make sure chrome://flags/#enable-experimental-web-platform-features is enabled");case 6:return[2]}})})},t.prototype.getSources=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return pp.mediaDevices?[4,pp.mediaDevices.enumerateDevices()]:[2,[]];case 1:return[2,t.sent().filter(function(t){return t.kind.endsWith("input")}).map(function(t){return{id:t.deviceId,label:t.label,kind:t.kind.substring(0,t.kind.length-5)}})]}})})},t.prototype.getSourcesByKind=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this.getSources()];case 1:return[2,e.sent().filter(function(e){return e.kind===t})]}})})},t.prototype.getVideoSources=function(){return this.getSourcesByKind("video")},t.prototype.getAudioSources=function(){return this.getSourcesByKind("audio")},t.prototype.hasCamera=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getVideoSources()];case 1:return[2,t.sent().length>0]}})})},t.prototype.hasMicrophone=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getAudioSources()];case 1:return[2,t.sent().length>0]}})})},t.prototype.hasLabel=function(t){return t.some(function(t){return!!t.label})},t.prototype.hasVideoAccess=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return t=this.hasLabel,[4,this.getVideoSources()];case 1:return[2,t.apply(this,[e.sent()])]}})})},t.prototype.hasAudioAccess=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return t=this.hasLabel,[4,this.getAudioSources()];case 1:return[2,t.apply(this,[e.sent()])]}})})},t.prototype.getCameraAndMicPermission=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,this.hasCamera()];case 1:t=i.sent(),e=!1,n=!1,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:t})];case 3:return r=i.sent(),n=!!r.getVideoTracks().length,e=!!r.getAudioTracks().length,r.getTracks().forEach(function(t){t.stop()}),[3,5];case 4:return i.sent(),[3,5];case 5:return[2,{video:n,audio:e}]}})})},t.prototype.checkPermission=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,navigator.permissions.query({name:t})];case 1:return[2,e.sent().state]}})})},t.prototype.onPermission=function(t){return(0,Js.D)(navigator.permissions.query({name:t})).pipe(Ys(function(t){return(0,dp.R)(t,"change")}),(0,Ks.U)(function(t){return t.currentTarget}))},t.prototype.isPermissionError=function(t){return t&&("PermissionDeniedError"===t.name||"MediaDeviceFailedDueToShutdown"===t.name||"NotAllowedError"===t.name||"InvalidStateError"===t.name)},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),yp=fu.create("cf2BgMessagesService"),mp=function(){function t(t,e,n,r,i,o,a,s){this._castifyAuth=t,this._newVideoLimit=e,this._webrtcHelper=n,this._appOptions=r,this._bgFiles=i,this._bgUserAccount=o,this._chromeRuntime=a,this._chromeTabs=s,this._initializationComplete=!1}return t.prototype._sendBgLoaded=function(){this._chromeRuntime.sendMessage("bg:loaded").catch(function(){return null})},t.prototype._onMessage=function(t){return"bg:load"===t&&this._initializationComplete&&this._sendBgLoaded(),!1},t.prototype._getAppUrl=function(t){return"chrome-extension://"+this._chromeRuntime.id+"/app.html#"+t},t.prototype._hasTabId=function(t){return!(!t.tab||!t.tab.id)},t.prototype._launchApp=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:if(yp.data("handling bg:launchApp",t),!t.newTab&&!this._hasTabId(e))throw new Error("no id");return t.fileId?(n=this._getAppUrl("/files/"+t.fileId),[4,this._bgFiles.refresh(t.fileId)]):[3,3];case 1:return r.sent(),[4,(0,ph.H)(500).pipe(Hl()).toPromise()];case 2:return r.sent(),[3,4];case 3:n=this._getAppUrl("/"),r.label=4;case 4:return t.newTab?[4,this._chromeTabs.create({url:n})]:[3,6];case 5:return r.sent(),[3,8];case 6:return[4,this._chromeTabs.update(e.tab.id,{url:n})];case 7:r.sent(),r.label=8;case 8:return[2,!0]}})})},t.prototype._focusWebsiteAfterInlineInstall=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return yp.d("cf2BgMessagesService: focusing website"),this._hasTabId(t)?[4,this._chromeTabs.getActiveTab()]:[2];case 1:return(e=n.sent()).id===t.tab.id?[3,3]:[4,this._chromeTabs.remove(e.id)];case 2:n.sent(),n.label=3;case 3:return[4,this._chromeTabs.update(t.tab.id,{active:!0})];case 4:return n.sent(),[2]}})})},t.prototype._requestToType=function(t){return t&&t.type?t.type:t},t.prototype._onMessageExternal=function(t,e,n){var r;switch(this._requestToType(t)){case"bg:launchApp":r=this._launchApp(t.data||{},e);break;case"bg:launchSupport":r=this._chromeTabs.create({url:Yc.supportUri});break;case"bg:focusWebsite":r=this._focusWebsiteAfterInlineInstall(e);break;case"bg:updateLicense":r=this._bgUserAccount.update();break;case"bg:isInstalled":n(this._chromeRuntime.getManifest().version);break;case"bg:isDriveSyncEnabled":n(this._appOptions.values.driveSync);break;case"bg:getLicenseInfo":r=this._getLicenseInfo();break;case"bg:hasPermissions":r=this._checkPermissions();break;case"bg:openPermissions":this._openPermissionsPage(e);break;case"bg:isNewLimitUser":r=this._checkIsNewLimitUser()}return!!r&&(r.catch(function(){return!1}).then(n),!0)},t.prototype._getLicenseInfo=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this._bgUserAccount.getAccount()];case 1:return t=n.sent(),e={isPaid:t.license.isPaid,isTester:t.license.isTester,license:t.license,user:t.user},t.user&&(e.email=t.user.email,e.analyticsUid=t.user.analyticsUid),[2,e]}})})},t.prototype.install=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t=this;return(0,Us.Jh)(this,function(e){return this._chromeRuntime.onMessage.addListener(function(e){return t._onMessage(e)}),this._chromeRuntime.onMessageExternal.addListener(function(e,n,r){return t._onMessageExternal(e,n,r)}),[2]})})},t.prototype.initializationCompleted=function(){this._initializationComplete=!0,this._sendBgLoaded()},t.prototype._checkPermissions=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._webrtcHelper.checkPermission("microphone"),this._webrtcHelper.checkPermission("camera")])];case 1:return t=Us.CR.apply(void 0,[n.sent(),2]),e=t[1],[2,"prompt"!==t[0]&&"prompt"!==e]}})})},t.prototype._openPermissionsPage=function(t){var e=this._getAppUrl("/permissions");this._chromeTabs.update(t.tab.id,{url:e})},t.prototype._checkIsNewLimitUser=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this._newVideoLimit.isNewLimitUser$.pipe(Hl()).toPromise()];case 1:return[2,t.sent()]}})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Gf),sn(fp),sn(gp),sn(bf),sn(Tf),sn(xf),sn(wf),sn(Sf))},providedIn:"root"}),t}();ls.module("cf2.cf2BgMessagesServiceService",[]);var bp=n(44827),wp=n(14109),_p=function(){function t(e,n){(0,i.Z)(this,t),this.observables=e,this.project=n}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Sp(t,this.observables,this.project))}}]),t}(),Sp=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;(0,i.Z)(this,n),(a=e.call(this,t)).observables=r,a.project=o,a.toRespond=[];var s=r.length;a.values=new Array(s);for(var u=0;u<s;u++)a.toRespond.push(u);for(var c=0;c<s;c++){var h=r[c];a.add((0,wp.D)((0,l.Z)(a),h,void 0,c))}return a}return(0,r.Z)(n,[{key:"notifyNext",value:function(t,e,n){this.values[n]=e;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(t){if(0===this.toRespond.length){var e=[t].concat((0,f.Z)(this.values));this.project?this._tryProject(e):this.destination.next(e)}}},{key:"_tryProject",value:function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}]),n}(bp.L),kp=function(){function t(t,e){this._userAccount=t,this._newLimitUser=e,this._recordingTimeLimit$=new Jf.X(null),this.license={},this._init()}return t.prototype.getRecordingTimeLimit=function(){return this._recordingTimeLimit$.getValue()},t.prototype.getRecordingTimeLimitAsync=function(){return this._recordingTimeLimit$.pipe(Hl(function(t){return null!==t})).toPromise()},t.prototype._init=function(){var t=this;this._account$=this._userAccount.onAccount().pipe(Kf(1)),this._account$.pipe((0,Qc.h)(function(t){return t.license&&t.license.limitLength}),function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new _p(e,n))}}(this._newLimitUser.isNewLimitUser$),(0,Ks.U)(function(t){var e=(0,Us.CR)(t,2);return e[1]?1800:e[0].license.maxLength}),Kf(1)).subscribe(this._recordingTimeLimit$),this._account$.subscribe(function(e){t.license=e.license}),this.onIsPaid().subscribe(function(e){return t.isPaid=e}),this.onIsSignedIn().subscribe(function(e){return t.isSignedIn=e}),this.isPaid$=this._account$.pipe((0,Ks.U)(function(t){return t.license.isPaid})),this.isStudent$=this._onUser().pipe((0,Ks.U)(function(t){return t.survey&&"student"===t.survey.user_type}))},t.prototype.onIsPaid=function(){return this._account$.pipe((0,Ks.U)(function(t){return t.license.isPaid}))},t.prototype.onIsSignedIn=function(){return this._account$.pipe((0,Ks.U)(function(t){return!!t.user}))},t.prototype._onUser=function(){return this._account$.pipe((0,Qc.h)(function(t){return!!t.user}),(0,Ks.U)(function(t){return t.user}))},t.prototype.onIsStudent=function(){return this._onUser().pipe((0,Ks.U)(function(t){return t.survey&&"student"===t.survey.user_type}))},t.prototype.onIsEducator=function(){return this._onUser().pipe((0,Ks.U)(function(t){return t.survey&&["educator","teacher","k12Admin"].includes(t.survey.user_type)}))},t.prototype.signIn=function(){return this._userAccount.signIn()},t.prototype.openBuy=function(t,e){Zf("https://www.screencastify.com/pricing?utm_source="+t+"&utm_medium=app&utm_campaign="+e,"_blank")},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(au),sn(fp))}}),t}();ls.module("cf2.upgradeHelperService",[]).factory("cf2UpgradeHelperService",Ps(kp));var Ep=function(){function t(t){if(t)throw new Error("UpgradeHelperModule is already loaded.")}return t.\u0275fac=function(e){return new(e||t)(sn(t,12))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[kp],imports:[[Ma]]}),t}(),xp=function(){function t(t,e,n){this._chromeRuntime=t,this._chromeTabs=e,this._chromeWindows=n}return t.prototype._pathToUrl=function(t){return t.startsWith("#")?"chrome-extension://"+this._chromeRuntime.id+"/app.html"+t:t},t.prototype.create=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return e=this._pathToUrl(t),[4,this._chromeTabs.create({active:!0,url:e})];case 1:return n=r.sent(),[4,this._chromeWindows.update(n.windowId,{focused:!0})];case 2:return r.sent(),[2]}})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(wf),sn(Sf),sn(_f))},providedIn:"root"}),t}();function Tp(t,e,n){var r,i,o;void 0===n&&(n=!0),n=!1!==n;var a=function(){o=Object.assign([],arguments),i=function(){return r=null,i=null,t.apply(null,o)},n?(r&&window.clearTimeout(r),r=window.setTimeout(i,e)):r||(r=window.setTimeout(i,e))};return a.flush=function(){r&&(window.clearTimeout(r),i())},a.cancel=function(){r&&window.clearTimeout(r)},a}function Ip(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tl.P;return function(r){var i=el(t),o=i?+t-n.now():Math.abs(t);return r.lift(new Cp(o,i,e,n))}}ls.module("cf2.inAppTabService",[]);var Cp=function(){function t(e,n,r,o){(0,i.Z)(this,t),this.waitFor=e,this.absoluteTimeout=n,this.withObservable=r,this.scheduler=o}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ap(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}]),t}(),Ap=function(n){(0,o.Z)(u,n);var s=(0,a.Z)(u);function u(t,e,n,r,o){var a;return(0,i.Z)(this,u),(a=s.call(this,t)).absoluteTimeout=e,a.waitFor=n,a.withObservable=r,a.scheduler=o,a.scheduleTimeout(),a}return(0,r.Z)(u,[{key:"scheduleTimeout",value:function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(u.dispatchTimeout,this.waitFor,this))}},{key:"_next",value:function(n){this.absoluteTimeout||this.scheduleTimeout(),(0,t.Z)((0,e.Z)(u.prototype),"_next",this).call(this,n)}},{key:"_unsubscribe",value:function(){this.action=void 0,this.scheduler=null,this.withObservable=null}}],[{key:"dispatchTimeout",value:function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add((0,Hs.ft)(e,new Hs.IY(t)))}}]),u}(Hs.Ds),Mp="castifyDrawStore",Rp="cfDraw_store",Op=function(){function t(){this._started=!1,this._loadedPromise=null,this.STORE_MSG_TYPE=Mp}return t.prototype._load=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this._loadedPromise=(n=Rp,r={},new Promise(function(t,e){chrome.storage.local.get(n,function(i){if(chrome.runtime.lastError)return e(chrome.runtime.lastError);t(i.hasOwnProperty(n)?i[n]:r)})})),t=this,[4,this._loadedPromise];case 1:return t._data=e.sent(),[2]}var n,r})})},t.prototype._save=function(){var t;t=this._data,new Promise(function(e,n){var r;chrome.storage.local.set(((r={}).cfDraw_store=t,r),function(){if(chrome.runtime.lastError)return n(chrome.runtime.lastError);e(void 0)})})},t.prototype._onMessage=function(t){t&&t.type===Mp&&(this._data=t.data,this._save())},t.prototype.getData=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this._loadedPromise];case 1:return t.sent(),[2,this._data]}})})},t.prototype.start=function(){if(this._started)throw new Error("bg-storage-service already started");this._started=!0,this._load()},t.prototype.stop=function(){this._started&&(this._started=!1)},t.prototype.handleMessage=function(t){this._started&&this._onMessage(t)},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),Pp=window.crypto;function Np(t){return Pp.subtle.exportKey("jwk",t)}var Dp=function(){function t(){this._keyPromise=Pp.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]).then(Np),this._started=!1,this._onMessageBound=this._onMessage.bind(this)}return t.prototype._onMessage=function(t,e,n){if(!t)return!1;if("castifyDrawGetMsgKey"===t.type){if(function(t){return t.tab.url.startsWith("https://")}(e))return this._keyPromise.then(function(t){return n(t)},function(){return n(null)}),!0;n("plain")}else if("castifyDrawFrameBroadcast"===t.type&&e.tab)chrome.tabs.sendMessage(e.tab.id,t.data);else if("castifyDrawFrameBroadcastWithResult"===t.type&&e.tab)return chrome.tabs.sendMessage(e.tab.id,t.data,function(t){n(t)}),!0;return!1},t.prototype.start=function(){this._started||(chrome.runtime.onMessage.addListener(this._onMessageBound),this._started=!0)},t.prototype.stop=function(){this._started&&(this._started=!1,chrome.runtime.onMessage.removeListener(this._onMessageBound))},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}();function $p(t){return t instanceof Error?Promise.reject(t.toString()):Promise.reject(t)}var Lp=function(){function t(t){var e=this;this.webrtc=t,this._started=!1,this._onMessageBound=this._onMessage.bind(this),this._throttledStop=Tp(function(){return e._disposeStream()},1e3),this.msgHandlers={start:function(t){return(0,Us.mG)(e,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:if(this._throttledStop.cancel(),this._stream){if(JSON.stringify(this._streamConstraints)===JSON.stringify(t))return[2];this._disposeStream()}return e=this,[4,this.getStream(t)];case 1:return e._stream=n.sent(),this._streamConstraints=t,[2]}})})},stop:function(){e._throttledStop()}}}return t.prototype._disposeStream=function(){this._throttledStop.cancel(),this._stream&&(this._stream.getTracks().forEach(function(t){t.stop()}),this._stream=null,this._streamConstraints=null)},t.prototype.getStream=function(t){return this.webrtc.getUserMedia({video:t})},t.prototype._onMessage=function(t,e,n){return!!(t&&"castifyDrawCamSustainMsg"===t.type&&(t=t.data)&&this.msgHandlers.hasOwnProperty(t.type))&&(function(t,e){Promise.resolve(e).catch($p).then(function(e){t({type:"result",data:e})},function(e){t({type:"error",data:e})})}(n,this.msgHandlers[t.type](t.data)),!0)},t.prototype.start=function(){this._started||(chrome.runtime.onMessage.addListener(this._onMessageBound),this._started=!0)},t.prototype.stop=function(){this._started&&(this._started=!1,this._disposeStream(),chrome.runtime.onMessage.removeListener(this._onMessageBound))},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(gp))},providedIn:"root"}),t}();function jp(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise(function(r,i){n.push(function(t){chrome.runtime.lastError?i(chrome.runtime.lastError):r(t)}),t.apply(e,n)})}}var Up={executeScript:jp(chrome.tabs.executeScript,chrome.tabs),insertCSS:jp(chrome.tabs.insertCSS,chrome.tabs),connect:chrome.tabs.connect.bind(chrome.tabs)},Fp=function(){function t(t,e,n,r){this._storageService=t,this._messageService=e,this._camSustainService=n,this._analytics=r,this._servicesStarted=!1,this._tabBgServices=new Map,this._bundlesPath="./",this._cssPath="assets/fonts/draw/fonts.css",this._log=fu.create("BgCastifyDrawService")}return t.prototype.isActiveTabInjected=function(){return Array.from(this._tabBgServices.values()).some(function(t){return t.tabActive&&t.successfulInjection})},t.prototype._startServicesIfNotStarted=function(){this._servicesStarted||(this._servicesStarted=!0,this._messageService.start(),this._storageService.start(),this._camSustainService.start())},t.prototype._onMessageListener=function(t,e){var n,r,i=function(){return null};if(e&&e.type===this._storageService.STORE_MSG_TYPE){this._storageService.handleMessage(e);try{for(var o=(0,Us.XA)(this._tabBgServices.entries()),a=o.next();!a.done;a=o.next()){var s=(0,Us.CR)(a.value,2);s[0]!==t&&s[1].sendMessage(e).catch(i)}}catch(MD){n={error:MD}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}},t.prototype.loadInTab=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return this._log.data("loadInTab",t,e),this._startServicesIfNotStarted(),this._tabBgServices.get(t)?[2]:((n=new Bp(this._storageService,t,this._bundlesPath,this._cssPath,this._analytics)).setOnMessageListener(function(e){return r._onMessageListener(t,e)}),this._tabBgServices.set(t,n),[4,(0,Js.D)(n.initialize(e)).pipe(Ip(1e4,(0,Vs._)(new Error("failed to init castify-draw within timeout")))).toPromise()]);case 1:return i.sent(),[2]}})})},t.prototype.disposeInTab=function(t){var e=this._tabBgServices.get(t);e&&(e.dispose(),this._tabBgServices.delete(t),this._tabBgServices.size||this._stopServices())},t.prototype.disposeAll=function(){var t,e;try{for(var n=(0,Us.XA)(this._tabBgServices.values()),r=n.next();!r.done;r=n.next())r.value.dispose()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this._tabBgServices.clear(),this._stopServices()},t.prototype._stopServices=function(){this._servicesStarted=!1,this._camSustainService.stop(),this._messageService.stop(),this._storageService.stop()},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Op),sn(Dp),sn(Lp),sn(yf))},providedIn:"root"}),t}(),Bp=function(){function t(t,e,n,r,i){var o=this;this._storage=t,this.tabId=e,this._cssPath=r,this._analytics=i,this.msgHandlers={},this.onMessageListener=null,this.tabActive=!0,this.successfulInjection=!1,this._subscription=new y.w,this._log=fu.create("BgCastifyDrawTabService "),this.throttledLoadFrame=Tp(function(){o._loadContentScript(!1).catch(function(){return null})},1e3),this._jsPath=n+"content-script.js",this._jsPathFrame=n+"content-script-frame.js",this.init()}return t.prototype._loadContentScript=function(t){var e=this,n=[Up.executeScript(this.tabId,{file:t?this._jsPath:this._jsPathFrame,allFrames:!0,matchAboutBlank:!0,runAt:"document_start"})];return t&&n.push(Up.insertCSS(this.tabId,{file:this._cssPath,allFrames:!0,matchAboutBlank:!0,runAt:"document_start"})),Promise.all(n).catch(function(t){return"Cannot access a chrome:// URL"!==t.message&&"The extensions gallery cannot be scripted."!==t.message&&e._log.error(t),Promise.reject(new Error("injecting castify-draw content script failed"))})},t.prototype._loadAndConnect=function(){var t=this;if(!this.portPromise){var e=this._loadContentScript(!0).then(function(){var n=Up.connect(t.tabId,{name:"castifyDraw"});return n.onDisconnect.addListener(function(){t.portPromise===e&&(t.portPromise=null)}),n.onMessage.addListener(function(e){t.msgHandlers.hasOwnProperty(e.type)?t.msgHandlers[e.type](n,e.data):t.onMessageListener&&t.onMessageListener(e)}),t.port=n,t.successfulInjection=!0,n});e.catch(function(e){t._log.info("BgCastifyDrawServiceError",e)}),this.portPromise=e}return this.portPromise},t.prototype.initTopFrame=function(){var t=this;this._disconnect(),this.postInitialize(this.initConfig).catch(function(){return t._logLoadError()})},t.prototype.postInitialize=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r=this;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return e=new Promise(function(t){r.msgHandlers.initializeDone=function(){r.msgHandlers.initializeDone=null,t()}}),this._setAnalyticsHandler(),[4,this._loadAndConnect()];case 1:return i.sent(),[4,this._storage.getData()];case 2:return n=i.sent(),this.postMessage("initialize",{config:t,storage:n,chromeCommands:this._chromeCommands}),[4,e];case 3:return i.sent(),this.msgHandlers.initializeDone=null,this.initConfig=void 0,[2]}})})},t.prototype._setAnalyticsHandler=function(){var t=this;this.msgHandlers.analytics=function(e,n){t._analytics.trackEvent(n.toolVersion,n.action,"click")}},t.prototype.onCommitted=function(t){t.tabId===this.tabId&&(0===t.frameId?(this.throttledLoadFrame.cancel(),this.initTopFrame()):this.throttledLoadFrame())},t.prototype._logLoadError=function(){this._log.warn("could not load castify-draw in tab",this.tabId)},t.prototype.onTabReplaced=function(t){t.replacedTabId===this.tabId&&(this.tabId=t.tabId,this.initTopFrame())},t.prototype.onTabSwitch=function(t){this.updateTabFocused(t.tabId)},t.prototype.onWindowSwitch=function(){var t=this;chrome.tabs.query({active:!0,windowId:chrome.windows.WINDOW_ID_CURRENT},function(e){t.updateTabFocused(e.length?e[0].id:-1)})},t.prototype.updateTabFocused=function(t){var e=this,n=function(){e.postMessage("updateTabFocused",{tabActive:e.tabActive}).catch(function(){return e._logLoadError()})};t===this.tabId?(this.tabActive=!0,n()):this.tabActive&&(this.tabActive=!1,n())},t.prototype.init=function(){var t,e,n=this;this._loadAndConnect().catch(function(){return null});var r=[Bs(chrome.webNavigation.onCommitted).subscribe(function(t){var e=(0,Us.CR)(t,1);return n.onCommitted(e[0])}),Bs(chrome.webNavigation.onTabReplaced).subscribe(function(t){var e=(0,Us.CR)(t,1);return n.onTabReplaced(e[0])}),Bs(chrome.tabs.onActivated).subscribe(function(t){var e=(0,Us.CR)(t,1);return n.onTabSwitch(e[0])}),Bs(chrome.windows.onFocusChanged).subscribe(function(){return n.onWindowSwitch()})];try{for(var i=(0,Us.XA)(r),o=i.next();!o.done;o=i.next())this._subscription.add(o.value)}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.postMessage=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this._loadAndConnect()];case 1:return n.sent().postMessage({type:t,data:e}),[2]}})})},t.prototype.initialize=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this.initConfig=t,this._chromeCommands=t.chromeCommands,[4,this.postInitialize(t)];case 1:return e.sent(),[2]}})})},t.prototype.setOnMessageListener=function(t){this.onMessageListener=t},t.prototype.sendMessage=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this.postMessage(t.type,t.data)]})})},t.prototype._disconnect=function(){this.portPromise&&(this.portPromise.then(function(t){return t.disconnect()},function(){return null}),this.portPromise=null)},t.prototype.dispose=function(){this._disconnect(),this._subscription.unsubscribe()},t}(),qp=function(){function t(t){this._http=t,this._exportEndpointUrl=Yc.extensionServiceUrl+"/exports",this._editServiceUrl=Yc.extensionServiceUrl+"/trims"}return t.prototype.exportAudio=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this._http.post(this._exportEndpointUrl+"/audioExport",t).toPromise()]})})},t.prototype.trim=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this._http.post(this._editServiceUrl+"/trim",t).toPromise()]})})},t.prototype.exportVideo=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this._http.post(this._exportEndpointUrl+"/videoExport",t,{}).toPromise()]})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh))},providedIn:"root"}),t}(),Vp=["no_youtube_channel","youtubeCredentialsMissing","quotaExceeded","no_google_drive_access","load_nacl","disk_space","drive_apps","forbidden","start_recording","change_account","youtubeSignupRequired","no_audio","no_cam","no_audio_access","drawing_tools_unavailable","blocked_permissions","tab_permissions","blocked_permissions_macos","stuck_signing_in","popup_announcement","new_privacy_permissions","free_user_limit_learn_more"],Zp=function(){function t(t,e){this._analytics=t,this._inAppTab=e,this._log=fu.create("SupportArticlesService"),this._helpArticleTags=Vp,this._url="https://screencastify.zendesk.com/hc/en-us/",this._zendeskArticleDictionary={no_youtube_channel:this._url+"articles/360049230774-Set-Up-a-YouTube-Channel",youtubeCredentialsMissing:this._url+"articles/360049997513-I-received-a-youtubeAuth-failed-or-youtubeCredentialsMissing-error",quotaExceeded:this._url+"articles/360049230574-I-m-out-of-space-on-Google-Drive",no_google_drive_access:this._url+"articles/360049997313-I-m-forbidden-from-uploading-to-Google-Drive",load_nacl:this._url+"articles/360049995333-I-received-a-Failed-to-load-NaCL-module-error",disk_space:this._url+"articles/360049990913-I-received-a-Low-Disk-Space-notification",drive_apps:this._url+"articles/360049997313-I-m-forbidden-from-uploading-to-Google-Drive",forbidden:this._url+"articles/360049997313-I-m-forbidden-from-uploading-to-Google-Drive",start_recording:this._url+"articles/360049229374-Screencastify-failed-to-start-recording",change_account:this._url+"articles/360049986053-How-can-I-sign-in-with-a-different-account",youtubeSignupRequired:this._url+"articles/360049230774-Set-Up-a-YouTube-Channel",no_audio:this._url+"articles/360049996613-Screencastify-failed-to-capture-audio",no_cam:this._url+"articles/360049995153-My-webcam-is-not-detected",no_audio_access:this._url+"articles/360049996613-Screencastify-failed-to-capture-audio",drawing_tools_unavailable:this._url+"articles/360049225874-Drawing-tools-are-unavailable",blocked_permissions:this._url+"articles/360049991593-I-accidentally-blocked-Screencastify-from-accessing-my-webcam-and-microphone",tab_permissions:"https://learn.screencastify.com/hc/en-us/articles/360049156994-Why-do-you-ask-for-Chrome-permissions-",blocked_permissions_macos:"https://learn.screencastify.com/hc/en-us/articles/360049995693-Failed-to-Start-Recording-on-MacOS-Catalina",stuck_signing_in:"https://learn.screencastify.com/hc/en-us/articles/360049997853-I-get-stuck-when-signing-in-to-my-account",popup_announcement:"https://www.screencastify.com/access-expired?utm_source=notification&utm_medium=app&utm_campaign=augustschool",new_privacy_permissions:"https://learn.screencastify.com/hc/en-us/articles/4405799318551-What-are-the-new-viewing-and-sharing-permissions-I-m-seeing-for-my-videos-",free_user_limit_learn_more:"https://learn.screencastify.com/hc/en-us/articles/4661587180439"}}return t.prototype.openArticle=function(t){this._analytics.trackEvent("help articles",t),this._zendeskArticleDictionary[t]?this._inAppTab.create(this._zendeskArticleDictionary[t]):(this._log.error("tag '"+t+"' doesn't exist on the dictionary"),this._inAppTab.create(this._url+"search?query="+encodeURIComponent(t)))},t.prototype.setNotifyHelp=function(t,e){var n=this;t.onButtonClicked=t.onClicked=function(){n.openArticle(e),t.clear()}},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(yf),sn(xp))},providedIn:"root"}),t}();ls.module("cf2.supportArticlesService",[]);var Hp=function(t){function e(e){var n=t.call(this)||this;return n.authedEndPoint=Yc.logServiceUrl+"/log/firebase",n.loggedIn=!1,n.unauthedEndPoint=Yc.logServiceUrl+"/log/unauthenticated",e.onAccount().pipe((0,Ks.U)(function(t){return!!t}),pl()).subscribe(function(t){n.loggedIn=t}),n}return(0,Us.ZT)(e,t),e.\u0275prov=D({token:e,factory:e.\u0275fac=function(t){return new(t||e)(sn(au))},providedIn:"root"}),e}(_h);function zp(t,e){return new b.y(function(n){return t.$on(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(t)})})}var Gp=function(){function t(t,e){this._track=t,this._timeFn=e,this._audioCtx=new AudioContext({latencyHint:"playback"}),this._log=fu.create("AudioThresholdDetector"),this._frequencyData=new Uint8Array(16),this._volumeThreshold=.08,this._volumeSamplingRate=100,this._durationThreshold=.3,this._nonSilenceStartTime=-1,this._firstNonSilence=-1,this._lastNonSilence=-1}return t.prototype.start=function(){var t=new MediaStream;t.addTrack(this._track),this._input=this._audioCtx.createMediaStreamSource(t),this._analyser=this._audioCtx.createAnalyser(),this._analyser.smoothingTimeConstant=.5,this._analyser.fftSize=32,this._analyser.minDecibels=-70,this._analyser.maxDecibels=-10,this._input.connect(this._analyser),this._scheduleSampling()},t.prototype._scheduleSampling=function(){var t=this;setTimeout(function(){return t._onSamples()},this._volumeSamplingRate)},t.prototype._onSamples=function(){if(this._analyser){var t=this._timeFn();if(t<0)this._scheduleSampling();else{if(this._frequencyData.length!==this._analyser.frequencyBinCount)throw new Error("unexpected frequency bin count: "+this._analyser.frequencyBinCount);this._analyser.getByteFrequencyData(this._frequencyData);var e=this._frequencyData.reduce(function(t,e){return t+e})/this._frequencyData.length/255;this._nonSilenceStartTime<0?e>=this._volumeThreshold&&(this._nonSilenceStartTime=t):e<this._volumeThreshold&&(this._onNonSilentSegment(this._nonSilenceStartTime,t),this._nonSilenceStartTime=-1),this._scheduleSampling()}}},t.prototype._onNonSilentSegment=function(t,e){e-t<this._durationThreshold||(this._log.d("non-silent segment detected [%d, %d]",t,e),this._firstNonSilence<0&&(this._firstNonSilence=t),this._lastNonSilence=e)},t.prototype.getTrimInterval=function(){return this._firstNonSilence<=0?null:{startTime:Math.max(0,this._firstNonSilence-.1),endTime:this._lastNonSilence}},t.prototype.dispose=function(){this._audioCtx&&(this._input.disconnect(),this._analyser.disconnect(),this._audioCtx.close(),this._audioCtx=null,this._input=null,this._analyser=null)},t}(),Wp=function(){function t(t,e){var n=this;this._bgFiles=t,this._rootScope=e,this._log=fu.create("SpeechDetectionService"),zp(this._rootScope,"bgFiles:localFileCreated").subscribe(function(t){var e=(0,Us.CR)(t,2);return n._recordingDone(e[1])})}return t.prototype._recordingDone=function(t){if(t===this._fileId){var e=this._detector.getTrimInterval();e&&(this._log.d("updating localInfo with trimHint",e),this._bgFiles.updateLocalInfo(this._fileId,{trimHint:e})),this._fileId=null,this._detector=null}},t.prototype.startDetecting=function(t,e,n){var r=new Gp(t,e);return r.start(),this._detector=r,this._fileId=n,r},t.prototype.stopDetecting=function(){this._detector&&this._detector.dispose()},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Tf),sn(Cf))},providedIn:"root"}),t}(),Kp=n(1324),Jp=new We("VIDEO_REGISTRY_SERVICE_ENDPOINT"),Yp=function(){function t(t,e){this._http=t,this._endpoint=e,this._log=fu.create("VideoRegistryClientService")}return t.prototype.findOrCreateEntry=function(t,e,n,r,i,o){return this._log.info("POST call made to the registry with "+t.driveFileId+" drive file id and "+(null==i?void 0:i.extensionVmpId)+" vmp id"),this._http.post(this._endpoint+"/registry",{driveFileId:t.driveFileId,draft:!t.driveInfo,privacy:e,privacyDomainList:n,collectViewAnalytics:r,videoMetadata:i,videoTheme:o}).toPromise()},t.prototype.updateDraftEntry=function(t,e,n,r){return this._http.put(this._endpoint+"/registry/draft",{driveFileId:t,privacy:e,privacyDomainList:n,videoTheme:r}).toPromise()},t.prototype.getEntry=function(t){return this._http.get(this._endpoint+"/registry/?driveFileId="+t)},t.prototype.getEntryFromVmpId=function(t){return this._http.get(this._endpoint+"/registry/vmp-id/"+t)},t.prototype.getAllEntriesForUser=function(){return this._http.get(this._endpoint+"/registry/all").toPromise()},t.prototype.deleteEntry=function(t,e){return void 0===e&&(e=!1),this._http.delete(this._endpoint+"/registry/?driveFileId="+t,e?{headers:{auth:"fb"}}:{})},t.prototype.updateVideoCount=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return this._http.put(this._endpoint+"/user-video-count",{videoCount:t},{headers:{auth:"fb"}}).toPromise(),[2]})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh),sn(Jp))},providedIn:"root"}),t}(),Xp=function(){function t(t,e,n,r){this._auth=t,this._remoteConfig=e,this._upgradeHelper=n,this._videoRegistry=r,this.captionsUrl=Yc.captionsUrl,this.privacy="user",this.privacyDomainList=[],this.quizUrl=Yc.questionsUrl,this.watchShareUrl=Yc.watchShareUrl,this._log=fu.create("UmbrellaService"),this._init()}return t.prototype._init=function(){var t=this,e=this._auth.onUser().pipe((0,Qc.h)(function(t){return!!t}),Ys(function(e){return(0,Us.mG)(t,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return[2,this._remoteConfig.isEmailDomainInArray(e.email,"advancedVideoFeaturesOptOut")]})})})),n=this._upgradeHelper.onIsStudent();this.hasViewAnalytics$=(0,Kp.aj)([e,n]).pipe((0,Ks.U)(function(t){var e=(0,Us.CR)(t,2);return!e[0]&&!e[1]}),Nl(1))},t.prototype._parsePrivacySetting=function(t){return t.acl[0].type},t.prototype._parsePrivacyDomainList=function(t){var e=[];return t.acl.forEach(function(t){"domain"===t.type&&e.push(t.domain)}),e},t.prototype._resetPrivacyDomainList=function(){this.privacyDomainList=[]},t.prototype.getRegistryId=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,this.hasViewAnalytics$.toPromise()];case 1:return n=r.sent(),e||(e=this._getVideoMetadata(t)),[4,this._videoRegistry.findOrCreateEntry(t,this.privacy,this.privacyDomainList,n,e,this.videoTheme)];case 2:return[2,r.sent().id]}})})},t.prototype.getVideoFromExtensionId=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._videoRegistry.getEntryFromVmpId(t).toPromise()];case 1:return[2,n.sent()];case 2:return e=n.sent(),this._log.error("Error getting video from extension id "+t,e),[2,null];case 3:return[2]}})})},t.prototype.getDraftRegistryEntryByDriveId=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,this._videoRegistry.getEntry(t).toPromise()];case 1:return e=r.sent(),n=this._parsePrivacySetting(e),[4,this._videoRegistry.updateDraftEntry(t,n,this.privacyDomainList,this.videoTheme)];case 2:return r.sent(),[2]}})})},t.prototype.getShareLink=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.getRegistryId(t)];case 1:return e=n.sent(),[2,this.watchShareUrl+e]}})})},t.prototype.getCaptionsLink=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.getRegistryId(t)];case 1:return e=n.sent(),[2,this.captionsUrl+e]}})})},t.prototype.getQuizLink=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.getRegistryId(t)];case 1:return e=n.sent(),[2,this.quizUrl+e]}})})},t.prototype.syncRegistry=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.hasViewAnalytics$.toPromise()];case 1:return e=n.sent(),[4,this._videoRegistry.findOrCreateEntry(t,this.privacy,this.privacyDomainList,e,this._getVideoMetadata(t),this.videoTheme)];case 2:return n.sent(),[2]}})})},t.prototype.revertPrivacySettings=function(t,e){this.privacy=t,this.privacyDomainList=e},t.prototype.setVideoPrivacy=function(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return this.privacy=t,"domain"===this.privacy&&(this.privacyDomainList=e),[4,this.syncRegistry(n)];case 1:return r.sent(),[2]}})})},t.prototype.setVideoTheme=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return this.videoTheme=t,[4,this.syncRegistry(e)];case 1:return n.sent(),[2]}})})},t.prototype.revertVideoThemeSettings=function(t){this.videoTheme=t},t.prototype.loadRegistrySettingsForEntry=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return this._resetPrivacyDomainList(),[4,this._videoRegistry.getEntry(t).toPromise()];case 1:return(e=n.sent())?(this.privacy=this._parsePrivacySetting(e),this.quizId=e.quizId,this.tracks=e.tracks,this.videoTheme=e.videoTheme,"domain"===this.privacy&&(this.privacyDomainList=this._parsePrivacyDomainList(e))):this.quizId=null,[2]}})})},t.prototype.getAllEntriesForUser=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return[2,this._videoRegistry.getAllEntriesForUser()]})})},t.prototype.deleteRegistry=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return t.driveInfo?[4,this._videoRegistry.deleteEntry(t.driveInfo.id).toPromise()]:[2];case 1:return[2,e.sent()]}})})},t.prototype._getVideoMetadata=function(t){return{duration:t.duration,thumbnailUrl:t.thumbnailUrl,extensionVmpId:t.id,creationTime:t.createdAt.getTime()}},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(su),sn(od),sn(kp),sn(Yp))},providedIn:"root"}),t}();ls.module("cf2.umbrellaService",[]);var Qp=function(){return function(){}}(),tv=function(){return function(){}}(),ev=function(){function t(t,e){this._injector=t,this._authUrls=e,this._log=fu.create("AuthInteceptor")}return t.prototype._retryIfTokenExpired=function(){var t=this;return function(e){return(0,qs.P)(function(){var n=1;return e.pipe(vh(function(e){return e.pipe(Ys(function(e){var r;return e instanceof Uh&&401===e.status&&"id-token-expired"===(null===(r=e.error)||void 0===r?void 0:r.error)&&n-- >0?(t._log.data("Retrying request to %s with fresh token",e.url),(0,Js.D)(t._auth.refreshFbToken()).pipe()):(0,Vs._)(e)}))}))})}},t.prototype.intercept=function(t,e){var n,r=this;if(t.headers.has("auth")?("fb"!==(n=t.headers.get("auth"))&&"google"!==n&&(n=!1),t=t.clone({headers:t.headers.delete("auth")})):n=this._authUrls.shouldAuthenticate(t),!n)return e.handle(t);var i=this._ensureHaveAuth();return("fb"===n?i.onFbAuthToken():i.onGoogleAuthToken()).pipe(Wl(function(e){if(null===e)throw new Error("Tried to access url '"+t.urlWithParams+"' while not signed in")}),Hl(),Ys(function(n){return t=t.clone({setHeaders:{Authorization:"Bearer "+n}}),e.handle(t).pipe(r._retryIfTokenExpired())}))},t.prototype._ensureHaveAuth=function(){if(!this._auth&&(this._auth=this._injector.get(Qp),!this._auth))throw new Error("No BearerProvider configured");return this._auth},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Kr),sn(tv))}}),t}();(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(Hm){this.f(Hm)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(Hm){n.reject(Hm)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(J_){o(J_)}}:e}var i,o,a=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Qa(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Qa(i(a.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++y)}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:b).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now;function k(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function x(t,e,n){this.code=C+t,this.message=e||A[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new x(e.substring(C.length),t.message,t.serverResponse):null}k(x,Error),x.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},x.prototype.toJSON=function(){return this.w()};var I,C="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},M={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in M)if(M[e].id===t)return{firebaseEndpoint:(t=M[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function N(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function D(t,e){throw new N("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function $(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}I=R("__EID__")?"__EID__":void 0,k(P,Error),P.prototype.name="CustomError",k(N,P),N.prototype.name="AssertionError",$.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new $(function(){return new B},function(t){t.reset()});function F(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},Z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function G(t,e){return 0<=q(t,e)}function W(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function J(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,at=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=a.navigator;if(ct){var lt=ct.userAgent;if(lt){X=lt;break t}}X=""}function ht(t){return st(X,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===St&&e||"",this.b=_t}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===_t?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,_t={},St={};function kt(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function Et(t,e){this.a=e===At?t:""}function xt(t){return t instanceof Et&&t.constructor===Et?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Tt(t,e){var n=bt(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=kt();return new Et(t=e?e.createScriptURL(t):t,At)}(t=n.replace(It,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?bt(t):encodeURIComponent(String(t))}))}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,At={};function Mt(t,e){this.a=e===Lt?t:""}function Rt(t){return t instanceof Mt&&t.constructor===Mt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Mt.prototype.sa=!0,Mt.prototype.ra=function(){return this.a.toString()},Mt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){if(t instanceof Mt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Nt.test(t))t=new Mt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&Ot.test(e[1])?new Mt(t,Lt):null}return t}function $t(t){return t instanceof Mt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new Mt(t,Lt))}var Lt={},jt=new Mt("about:invalid#zClosurez",Lt);function Ut(t,e,n){this.a=n===Ft?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ft={};function Bt(t,e,n,r){return t=t instanceof Mt?t:$t(t),e=e||a,n=n instanceof mt?bt(n):n||"",e.open(Rt(t),n,r,void 0)}function qt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Zt(t){return Zt[" "](t),t}Zt[" "]=l;var Ht,zt,Gt=ht("Opera"),Wt=ht("Trident")||ht("MSIE"),Kt=ht("Edge"),Jt=Kt||Wt,Yt=ht("Gecko")&&!(st(X.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Xt=st(X.toLowerCase(),"webkit")&&!ht("Edge");function Qt(){var t=a.document;return t?t.documentMode:void 0}t:{var te="",ee=(zt=X,Yt?/rv:([^\);]+)(\)|;)/.exec(zt):Kt?/Edge\/([\d\.]+)/.exec(zt):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zt):Xt?/WebKit\/(\S+)/.exec(zt):Gt?/(?:Version)[ \/]?(\S+)/.exec(zt):void 0);if(ee&&(te=ee?ee[1]:""),Wt){var ne=Qt();if(null!=ne&&ne>parseFloat(te)){Ht=String(ne);break t}}Ht=te}var re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Q(String(Ht)).split("."),r=Q(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ut(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ut(0==a[2].length,0==s[2].length)||ut(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var oe=a.document&&Wt&&(Qt()||parseInt(Ht,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(zt){}var ae=!Wt||9<=Number(oe);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}V(a?Y(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){a.setTimeout(function(){throw t},0)}function ve(t,e){le||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);le=function(){t.then(me)}}else le=function(){var t=me;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ht("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(ce||(ce=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),ce(t)):a.setImmediate(t)}}(),ge||(le(),ge=!0),ye.add(t,e)}var ge=!1,ye=new j;function me(){for(var t;t=F();){try{t.a.call(t.b)}catch(e){pe(e)}L(U,t)}ge=!1}function be(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,function(t){Pe(n,_e,t)},function(t){if(!(t instanceof Fe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(jO){}Pe(n,Se,t)})}catch(r){Pe(this,Se,r)}}var we=0,_e=2,Se=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new $(function(){return new ke},function(t){t.reset()});function xe(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Te(t){if(t instanceof be)return t;var e=new be(l);return Pe(e,_e,t),e}function Ie(t){return new be(function(e,n){n(t)})}function Ce(t,e,n){Ne(t,e,n,null)||ve(_(e,t))}function Ae(t){return new be(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ce(t[o],_(i,o,!0),_(i,o,!1));else e(r)})}function Me(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==we&&1==r?Me(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):$e(n),Le(n,i,Se,e)))}t.c=null}else Pe(t,Se,e)}function Re(t,e){t.b||t.a!=_e&&t.a!=Se||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function Oe(t,e,n,r){var i=xe(null,null,null);return i.a=new be(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(Hm){o(Hm)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Fe?o(e):t(i)}catch(Hm){o(Hm)}}:o}),i.a.c=t,Re(t,i),i.a}function Pe(t,e,n){t.a==we&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ne(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=Se||n instanceof Fe||function(t,e){t.g=!0,ve(function(){t.g&&Ue.call(null,e)})}(t,n)))}function Ne(t,e,n,r){if(t instanceof be)return Re(t,xe(e||l,n||null,r)),!0;if(O(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,function(t){a||(a=!0,n.call(i,t))},o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function De(t){t.h||(t.h=!0,ve(t.gc,t))}function $e(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Le(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(jO){Ue.call(null,jO)}L(Ee,e)}function je(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Oe(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=xe(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return Oe(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Fe(t);ve(function(){Me(this,e)},this)}},t.$c=function(t){this.a=we,Pe(this,_e,t)},t.ad=function(t){this.a=we,Pe(this,Se,t)},t.gc=function(){for(var t;t=$e(this);)Le(this,t,this.a,this.i);this.h=!1};var Ue=pe;function Fe(t){P.call(this,t)}function Be(){0!=qe&&(Ve[v(this)]=this),this.xa=this.xa,this.pa=this.pa}k(Fe,P),Fe.prototype.name="cancel";var qe=0,Ve={};function Ze(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=qe)){var e=v(t);if(0!=qe&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ve[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var He=Object.freeze||function(t){return t},ze=!Wt||9<=Number(oe),Ge=Wt&&!ie("9"),We=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(n){}return t}();function Ke(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Je(t,e){if(Ke.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ye[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ke.prototype.preventDefault=function(){this.defaultPrevented=!0},k(Je,Ke);var Ye=He({2:"touch",3:"pen",4:"mouse"});Je.prototype.preventDefault=function(){Je.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Je.prototype.g=function(){return this.a};var Xe="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Qe,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?_n(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=yn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=gn,e=ze?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)We||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Xe]?Sn(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=bn(n),t&&t[Xe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Xe])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function dn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=vn(o,r),i=i&&!1!==o)}return i}function vn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function gn(t,e){if(t.va)return!0;if(!ze){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Je(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return vn(t,new Je(e,this))}function yn(t){return(t=t[an])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function wn(){Be.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function _n(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function xn(t){var e=null;return new be(function(n,r){-1==(e=En(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw a.clearTimeout(e),t})}function Tn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function In(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Mn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}k(wn,Be),wn.prototype[Xe]=!0,wn.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},wn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},wn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ke(t,n);else if(t instanceof Ke)t.target=t.target||n;else{var i=t;gt(t=new Ke(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=kn(a,r,!0,t)&&i}if(i=kn(a=t.b=n,r,!0,t)&&i,i=kn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(a=t.b=e[o],r,!1,t)&&i;return i},wn.prototype.Da=function(){if(wn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=Cn.prototype).W=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Mn(this.b,t)?this.b[t]:e},t.set=function(t,e){Mn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Rn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function On(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof On?(this.i=void 0!==e?e:t.i,Pn(this,t.c),this.l=t.l,this.a=t.a,Nn(this,t.g),this.f=t.f,Dn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Rn))?(this.i=!!e,Pn(this,n[1]||"",!0),this.l=Fn(n[2]||""),this.a=Fn(n[3]||"",!0),Nn(this,n[4]),this.f=Fn(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=Fn(n[7]||"")):(this.i=!!e,this.b=new Wn(null,this.i))}function Pn(t,e,n){t.c=n?Fn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Nn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&(Kn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Qn(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=Bn(e,zn)),t.b=new Wn(e,t.i))}function $n(t,e,n){t.b.set(e,n)}function Ln(t,e){return t.b.get(e)}function jn(t){return t instanceof On?new On(t):new On(t,void 0)}function Un(t,e,n,r){var i=new On(null,void 0);return t&&Pn(i,t),e&&(i.a=e),n&&Nn(i,n),r&&(i.f=r),i}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}On.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Bn(e,Vn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Bn(e,Vn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?Hn:Zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Bn(n,Gn)),t.join("")},On.prototype.resolve=function(t){var e=new On(this),n=!!t.c;n?Pn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Nn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Dn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Vn=/[#\/\?@]/g,Zn=/[#\?:]/g,Hn=/[#\?]/g,zn=/[#\?@]/g,Gn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Kn(t){t.a||(t.a=new Cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Jn(t){var e=In(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=Tn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Qn(n,i,o):n.add(i,o)}return n}function Yn(t,e){Kn(t),e=er(t,e),Mn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Mn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Xn(t,e){return Kn(t),e=er(t,e),Mn(t.a.b,e)}function Qn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Y(n)),t.b+=n.length)}function tr(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new Cn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Wn.prototype).add=function(t,e){Kn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Kn(this),this.a.forEach(function(n,r){V(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){Kn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Kn(this);var e=[];if("string"==typeof t)Xn(this,t)&&(e=J(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Kn(this),this.c=null,Xn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e}),'"')}function ur(){var t=Cr();return Wt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||a.window;var n="about:blank";t&&(n=Rt(Dt(t)||jt)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||a.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),xr(Cr())==kr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Mt?n:Dt(void 0!==n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(a=de(document,"A"),"HTMLAnchorElement"),e=e instanceof Mt?e:$t(e),a.href=Rt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Bt("",r,n,a),t=Rt(e),a&&(Jt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">',t=new Ut(t=(r=kt())?r.createHTML(t):t,null,Ft),r=a.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Bt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(Nm){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new be(function(e){"complete"==a.document.readyState?e():(t=function(){e()},ln(window,"load",t))}).o(function(e){throw hn(window,"load",t),e})}function mr(t){return t=t||Cr(),!("file:"!==Pr()&&"ionic:"!==Pr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function wr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function _r(){return ll.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":ll.Z.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Sr(){var t=_r();return"ReactNative"===t||"Node"===t}var kr="Firefox",Er="Chrome";function xr(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?kr:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Tr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ir(t,e){e=e||[];var n,r=[],i={};for(n in Tr)i[Tr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=xr(i=Cr()):"Worker"===r&&(r=xr(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Mr(){try{var t=a.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!a.indexedDB}catch(n){return wr()&&!!a.indexedDB}return!1}function Rr(){return(Or()||"chrome-extension:"===Pr()||mr())&&!Sr()&&Mr()&&!wr()}function Or(){return"http:"===Pr()||"https:"===Pr()}function Pr(){return a.location&&a.location.protocol||null}function Nr(t){return!fr(t=t||Cr())&&xr(t)!=kr}function Dr(t){return void 0===t?null:nr(t)}function $r(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Lr(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=xr(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Fr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=_r(),this.b=fr(t)||"ReactNative"===e}function qr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Vr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Zr(){return!(!Ar("fireauth.oauthhelper",a)&&!Ar("fireauth.iframe",a))}Br.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Or()&&"chrome-extension:"!==Pr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,zr={};function Gr(t){zr[t]||(zr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wr={};Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Wr.abcd}catch(zt){Hr=!1}function Kr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Kr(t,n,e[n])}function Yr(t){var e={};return Jr(e,t),e}function Xr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Kr(e,n,Xr(t[n]));return e}function Qr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new x("internal-error","Internal assert: invalid MultiFactorInfo object");Kr(this,"uid",t[ri]),Kr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Kr(this,"enrollmentTime",n),Kr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Qr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Qr.call(this,t),Kr(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[li],r=t[fi],i=t[di];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[yi]=n||null,e[pi]=r):(e[vi]=r||null,e[yi]=r||null,e[pi]=n||null),e[gi]=t||null,Kr(this,bi,i),Kr(this,mi,Xr(e))}k(oi,Qr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",di="requestType",pi="email",vi="fromEmail",gi="multiFactorInfo",yi="previousEmail",mi="data",bi="operation";function wi(t){var e=Ln(t=jn(t),_i)||null,n=Ln(t,Si)||null,r=Ln(t,xi)||null;if(r=r&&Ii[r]||null,!e||!n||!r)throw new x("argument-error",_i+", "+Si+"and "+xi+" are required in a valid action code URL.");Jr(this,{apiKey:e,operation:r,code:n,continueUrl:Ln(t,ki)||null,languageCode:Ln(t,Ei)||null,tenantId:Ln(t,Ti)||null})}var _i="apiKey",Si="oobCode",ki="continueUrl",Ei="languageCode",xi="mode",Ti="tenantId",Ii={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Ci(t){try{return new wi(t)}catch(e){return null}}function Ai(t){var e=t[Ni];if(void 0===e)throw new x("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new x("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Mi];if(n&&"object"==typeof n){e=n[Li];var r=n[Di];if(n=n[$i],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new x("argument-error",Di+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new x("argument-error",$i+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new x("argument-error",Li+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new x("missing-android-pkg-name")}}else if(void 0!==n)throw new x("argument-error",Mi+" property must be a non null object when specified.");if(this.f=null,(e=t[Pi])&&"object"==typeof e){if("string"==typeof(e=e[ji])&&e.length)this.f=e;else if(void 0!==e)throw new x("argument-error",ji+" property must be a non empty string when specified.")}else if(void 0!==e)throw new x("argument-error",Pi+" property must be a non null object when specified.");if(void 0!==(e=t[Oi])&&"boolean"!=typeof e)throw new x("argument-error",Oi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new x("argument-error",Ri+" property must be a non empty string when specified.");this.i=t||null}var Mi="android",Ri="dynamicLinkDomain",Oi="handleCodeInApp",Pi="iOS",Ni="url",Di="installApp",$i="minimumVersion",Li="packageName",ji="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Fi=null;function Bi(t){var e=Vi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function qi(t){try{return new Bi(t)}catch(e){return null}}function Vi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Fi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Fi){Fi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Fi[o]&&(Fi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(Hm){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],zi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Hi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Hi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Hi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Zi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Gi(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function Wi(t){var e={};e["facebook.com"]=Qi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Ji];try{if(n)return e[n]?new e[n](t):new Xi(t);if(void 0!==t[Ki])return new Yi(t)}catch(r){}return null}var Ki="idToken",Ji="providerId";function Yi(t){var e=t[Ji];if(!e&&t[Ki]){var n=qi(t[Ki]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Kr(this,"providerId",e),Kr(this,"isNewUser",n)}function Xi(t){Yi.call(this,t),Kr(this,"profile",Xr((t=Lr(t.rawUserInfo||"{}"))||{}))}function Qi(t){if(Xi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Xi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Xi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Xi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Kr(this,"username",t.screenName||null)}function ro(t){var e=jn(t),n=Ln(e,"link"),r=Ln(jn(n),"link");return e=Ln(e,"deep_link_id"),Ln(jn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new x("internal-error","Internal assert: no raw session string available");if(t&&e)throw new x("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:ao}k(Xi,Yi),k(Qi,Xi),k(to,Xi),k(eo,Xi),k(no,Xi);var oo="enroll",ao="signin";function so(){}function uo(t,e){return t.then(function(t){if(t[Ka]){var n=qi(t[Ka]);if(!n||e!=n.i)throw new x("user-mismatch");return t}throw new x("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new x("user-mismatch"):t})}function co(t,e){if(!e)throw new x("internal-error","failed to construct a credential");this.a=e,Kr(this,"providerId",t),Kr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Kr(this,"idToken",e.idToken),e.accessToken&&Kr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Kr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new x("internal-error","failed to construct a credential");Kr(this,"accessToken",e.oauthToken),Kr(this,"secret",e.oauthTokenSecret)}Kr(this,"providerId",t),Kr(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function go(t,e){this.Qc=e||[],Jr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Gi(t)||{}).Ja||null,this.ob=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new x("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function mo(t){go.call(this,t,Hi),this.a=[]}function bo(){mo.call(this,"facebook.com")}function wo(t){if(!t)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function _o(){mo.call(this,"github.com")}function So(t){if(!t)throw new x("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function ko(){mo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new ko).credential({idToken:n,accessToken:e})}function xo(){go.call(this,"twitter.com",Zi)}function To(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new x("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function Io(t,e,n){this.a=t,this.f=e,Kr(this,"providerId","password"),Kr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new Io(t.email,t.password,t.signInMethod):null}function Ao(){Jr(this,{providerId:"password",isOAuthProvider:!1})}function Mo(t,e){if(!(e=Ro(e)))throw new x("argument-error","Invalid email link!");return new Io(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=Ci(t=ro(t)))&&t.operation===ui?t:null}function Oo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new x("internal-error");this.a=t,Kr(this,"providerId","phone"),this.fa="phone",Kr(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Oo(e)}return null}function No(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Do(t){try{this.a=t||ll.Z.auth()}catch(e){throw new x("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Jr(this,{providerId:"phone",isOAuthProvider:!1})}function $o(t,e){if(!t)throw new x("missing-verification-id");if(!e)throw new x("missing-verification-code");return new Oo({eb:t,cb:e})}function Lo(t){if(t.temporaryProof&&t.phoneNumber)return new Oo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return wo(n);case"github.com":return So(n);case"twitter.com":return To(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new co(e,a):new fo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(Nm){return null}}function jo(t){if(!t.isOAuthProvider)throw new x("invalid-oauth-provider")}function Uo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new x("invalid-auth-event");if(this.g&&this.a)throw new x("invalid-auth-event");if(this.g&&!this.f)throw new x("invalid-auth-event")}function Fo(t){return(t=t||{}).type?new Uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return Te(this.a?this.a:this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ka=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.w=function(){},co.prototype.ka=function(t){return gs(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ys(t,n)},co.prototype.c=function(t,e){return uo(ms(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return gs(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ys(t,n)},fo.prototype.c=function(t,e){return uo(ms(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Ib=pt(t),this},k(yo,go),k(mo,go),mo.prototype.Ca=function(t){return G(this.a,t)||this.a.push(t),this},mo.prototype.Qb=function(){return Y(this.a)},mo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new x("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},k(bo,mo),Kr(bo,"PROVIDER_ID","facebook.com"),Kr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),k(_o,mo),Kr(_o,"PROVIDER_ID","github.com"),Kr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),k(ko,mo),Kr(ko,"PROVIDER_ID","google.com"),Kr(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),k(xo,go),Kr(xo,"PROVIDER_ID","twitter.com"),Kr(xo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Io.prototype.ka=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Qs(t,Ts,{email:this.a,oobCode:this.f}):Qs(t,Ws,{email:this.a,password:this.f})},Io.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Qs(t,Is,{idToken:e,email:this.a,oobCode:this.f}):Qs(t,Fs,{idToken:e,email:this.a,password:this.f})},Io.prototype.c=function(t,e){return uo(this.ka(t),e)},Io.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Jr(Ao,{PROVIDER_ID:"password"}),Jr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Jr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Oo.prototype.ka=function(t){return t.fb(No(this))},Oo.prototype.b=function(t,e){var n=No(this);return n.idToken=e,Qs(t,Js,n)},Oo.prototype.c=function(t,e){var n=No(this);return n.operation="REAUTH",uo(t=Qs(t,Ys,n),e)},Oo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Do.prototype.fb=function(t,e){var n=this.a.a;return Te(e.verify()).then(function(r){if("string"!=typeof r)throw new x("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then(function(t){return function(t,e){return Qs(t,qs,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==ao?i.Ha().then(function(e){return function(t,e){return Qs(t,Vs,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return Qs(t,js,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new x("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Jr(Do,{PROVIDER_ID:"phone"}),Jr(Do,{PHONE_SIGN_IN_METHOD:"phone"}),Uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Uo.prototype.T=function(){return this.h},Uo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var qo,Vo=null;function Zo(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.c)?n=qt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=qt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",x.call(this,e,n)}function Ho(t,e,n){x.call(this,t,n),(t=e||{}).Jb&&Kr(this,"email",t.Jb),t.ea&&Kr(this,"phoneNumber",t.ea),t.credential&&Kr(this,"credential",t.credential),t.Zb&&Kr(this,"tenantId",t.Zb)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Lo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new x(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Go(){}function Wo(){}function Ko(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(jO){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Yo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Sb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function Xo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Qo(t,e,n){this.reset(t,e,n,void 0,void 0)}function ta(t){this.f=t,this.b=this.c=this.a=null}function ea(t,e){this.name=t,this.value=e}k(Zo,x),k(Ho,x),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Go.prototype.c=null,k(Wo,Go),Wo.prototype.a=function(){var t=Ko(this);return t?new ActiveXObject(t):new XMLHttpRequest},Wo.prototype.b=function(){var t={};return Ko(this)&&(t[0]=!0,t[1]=!0),t},qo=new Wo,k(Jo,Go),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Yo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Yo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Xo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Xo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Qo.prototype.a=null,Qo.prototype.reset=function(t,e,n,r,i){r||S(),delete this.a},ea.prototype.toString=function(){return this.name};var na=new ea("SEVERE",1e3),ra=new ea("WARNING",900),ia=new ea("CONFIG",700),oa=new ea("FINE",500);function aa(t){return t.c?t.c:t.a?aa(t.a):(D("Root logger has no level set."),null)}ta.prototype.log=function(t,e,n){if(t.value>=aa(this).value)for(d(e)&&(e=e()),t=new Qo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var sa={},ua=null;function ca(t){var e;if(ua||(ua=new ta(""),sa[""]=ua,ua.c=ia),!(e=sa[t])){e=new ta(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ca(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,sa[t]=e}return e}function la(t,e){t&&t.log(oa,e,void 0)}function ha(t){this.f=t}function fa(t){wn.call(this),this.u=t,this.h=void 0,this.readyState=da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ca("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}k(ha,Go),ha.prototype.a=function(){return new fa(this.f)},ha.prototype.b=function(t){return function(){return t}}({}),k(fa,wn);var da=0;function pa(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function va(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ga(t)}function ga(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ya(t){wn.call(this),this.headers=new Cn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ma,this.u=this.S=!1}(t=fa.prototype).open=function(t,e){if(this.readyState!=da)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ga(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,va(this)),this.readyState=da},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ga(this)),this.a&&(this.readyState=3,ga(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,pa(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?va(this):ga(this),3==this.readyState&&pa(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,va(this))},t.sc=function(t){this.a&&(this.response=t,va(this))},t.Ua=function(t){var e=this.i;e&&e.log(ra,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&va(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ra,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ra,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),k(ya,wn);var ma="";ya.prototype.b=ca("goog.net.XhrIo");var ba=/^https?$/i,wa=["POST","PUT"];function _a(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ka(t),xa(t)}function ka(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ea(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ia(t)&&2==Ca(t))la(t.b,Aa(t,"Local request error detected and ignored"));else if(t.i&&4==Ia(t))En(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ia(t)){la(t.b,Aa(t,"Request complete")),t.c=!1;try{var e,n=Ca(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(Rn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!ba.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ia(t)?t.a.statusText:""}catch(l){la(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Ca(t)+"]",ka(t)}}finally{xa(t)}}}function xa(t,e){if(t.a){Ta(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(jO){(t=t.b)&&t.log(na,"Problem encountered resetting onreadystatechange: "+jO.message,void 0)}}}function Ta(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Ia(t){return t.a?t.a.readyState:0}function Ca(t){try{return 2<Ia(t)?t.a.status:-1}catch(e){return-1}}function Aa(t,e){return e+" ["+t.R+" "+t.l+" "+Ca(t)+"]"}function Ma(t){var e=Ba;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ra(t,e,n){t.a=!0,t.c=n,t.f=!e,Da(t)}function Oa(t){if(t.a){if(!t.v)throw new $a(t);t.v=!1}}function Pa(t,e,n,r){t.g.push([e,n,r]),t.a&&Da(t)}function Na(t){return z(t.g,function(t){return d(t[1])})}function Da(t){if(t.h&&t.a&&Na(t)){var e=t.h,n=Ua[e];n&&(a.clearTimeout(n.a),delete Ua[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(O(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Na(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ma?(Pa(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new ja(e),Ua[e.a]=e,t.h=e.a)}function $a(){P.call(this)}function La(){P.call(this)}function ja(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=ya.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",la(this.b,Aa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(la(this.b,Aa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xa(this,!0)),ya.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Ea(this):this.Jc())},t.Jc=function(){Ea(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ma:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(na,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return la(this.b,"Can not get response: "+e.message),null}},Ma.prototype.cancel=function(t){if(this.a)this.c instanceof Ma&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new La(this),Oa(this),Ra(this,!1,t))}},Ma.prototype.m=function(t,e){this.i=!1,Ra(this,t,e)},Ma.prototype.then=function(t,e,n){var r,i,o=new be(function(t,e){r=t,i=e});return Pa(this,r,function(t){t instanceof La?o.cancel():i(t)}),o.then(t,e,n)},Ma.prototype.$goog_Thenable=!0,k($a,P),$a.prototype.message="Deferred has already fired",$a.prototype.name="AlreadyCalledError",k(La,P),La.prototype.message="Deferred was canceled",La.prototype.name="CanceledError",ja.prototype.c=function(){throw delete Ua[this.a],this.b};var Ua={};function Fa(t){var e={},n=e.document||document,r=xt(t).toString(),i=de(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Ma(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){qa(i,!0);var t=new Ha(Za,"Timeout reached for loading script "+r);Oa(s),Ra(s,!1,t)},h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(qa(i,e.xd||!1,l),Oa(s),Ra(s,!0,null))},i.onerror=function(){qa(i,!0,l);var t=new Ha(Va,"Error while loading script "+r);Oa(s),Ra(s,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=xt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ba(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&qa(t,!0,this.Ma)}}function qa(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Va=0,Za=1;function Ha(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function za(t){this.f=t}function Ga(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ja,this.g=pt(t.secureTokenHeaders||Ya),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Xa,this.a=pt(t.firebaseHeaders||Qa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=a.XMLHttpRequest||n&&ll.Z.INTERNAL.node&&ll.Z.INTERNAL.node.XMLHttpRequest)&&!wr())throw new x("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=wr()?new ha(self):Sr()?new za(n):new Jo,this.b=null}k(Ha,P),k(za,Go),za.prototype.a=function(){return new this.f},za.prototype.b=function(){return{}};var Wa,Ka="idToken",Ja=new Br(3e4,6e4),Ya={"Content-Type":"application/x-www-form-urlencoded"},Xa=new Br(3e4,6e4),Qa={"Content-Type":"application/json"};function ts(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function es(t,e){e&&(t.l=ns("https://securetoken.googleapis.com/v1/token",e),t.h=ns("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ns("https://identitytoolkit.googleapis.com/v2/",e))}function ns(t,e){return t=jn(t),e=jn(e.url),t.f=t.a+t.f,Pn(t,e.c),t.a=e.a,Nn(t,e.g),t.toString()}function rs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function is(t,e,n,r,i,o,s){(function(){var t=Cr();return!((t=xr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Wt&&oe&&!(9<oe))})()||wr()?t=w(t.u,t):(Wa||(Wa=new be(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[as]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Pa(t,null,e,void 0)}(Fa(Tt(os,{onload:as})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=w(t.s,t)),t(e,n,r,i,o,s)}Ga.prototype.T=function(){return this.b},Ga.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new x("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ya(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout(function(){s.dispatchEvent("timeout")},o)}_n(s,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return la(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(Hm){t=null}e&&e(t)}),Sn(s,"ready",function(){u&&clearTimeout(u),Ze(this)}),Sn(s,"timeout",function(){u&&clearTimeout(u),Ze(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():qo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:qo),t.a.onreadystatechange=w(t.Vb,t);try{la(t.b,Aa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(s){return la(t.b,Aa(t,"Error opening Xhr: "+s.message)),void Sa(t,s)}e=r||"";var o=new Cn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=In(t),r=Tn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=_a,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!G(wa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ta(t),0<t.g&&(t.u=function(t){return Wt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),la(t.b,Aa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=En(t.Ma,t.g,t)),la(t.b,Aa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){la(t.b,Aa(t,"Send error: "+s.message)),Sa(t,s)}}(s,t,n,r,i)};var os=new mt(St,"https://apis.google.com/js/client.js?onload=%{onload}"),as="__fcb"+Math.floor(1e6*Math.random()).toString();function ss(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new x("invalid-email")}function us(t){"email"in t&&ss(t)}function cs(t){if(!t[Ka]){if(t.mfaPendingCredential)throw new x("multi-factor-auth-required",null,pt(t));throw new x("internal-error")}}function ls(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new x("internal-error")}else{if(!t.sessionInfo)throw new x("missing-verification-id");if(!t.code)throw new x("missing-verification-code")}}Ga.prototype.s=function(t,e,n,r,i){var o=this;Wa.then(function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ga.prototype.zb=function(){return Qs(this,Bs,{})},Ga.prototype.Bb=function(t,e){return Qs(this,Us,{idToken:t,email:e})},Ga.prototype.Cb=function(t,e){return Qs(this,Fs,{idToken:t,password:e})};var hs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fs(t){if(!t.phoneVerificationInfo)throw new x("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new x("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new x("missing-verification-code")}function ds(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new x("internal-error")}function ps(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Xn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function vs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=tu(t.errorMessage)),e)throw e;cs(t)}function gs(t,e){return e.returnIdpCredential=!0,Qs(t,Zs,e)}function ys(t,e){return e.returnIdpCredential=!0,Qs(t,zs,e)}function ms(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qs(t,Hs,e)}function bs(t){if(!t.oobCode)throw new x("invalid-action-code")}(t=Ga.prototype).Db=function(t,e){var n={idToken:t},r=[];return ft(hs,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Qs(this,Us,n)},t.vb=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),Qs(this,Ns,t)},t.wb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),Qs(this,Rs,t)},t.ub=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Qs(this,Os,t)},t.Eb=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Qs(this,Ps,t)},t.fb=function(t){return Qs(this,Ks,t)},t.nb=function(t,e){return Qs(this,Ls,{oobCode:t,newPassword:e})},t.Ra=function(t){return Qs(this,_s,{oobCode:t})},t.jb=function(t){return Qs(this,ws,{oobCode:t})};var ws={endpoint:"setAccountInfo",A:bs,Z:"email",B:!0},_s={endpoint:"resetPassword",A:bs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new x("internal-error")},B:!0},Ss={endpoint:"signupNewUser",A:function(t){if(ss(t),!t.password)throw new x("weak-password")},G:cs,V:!0,B:!0},ks={endpoint:"createAuthUri",B:!0},Es={endpoint:"deleteAccount",N:["idToken"]},xs={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new x("internal-error")}},Ts={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ss,G:cs,V:!0,B:!0},Is={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ss,G:cs,V:!0},Cs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:fs,G:cs,B:!0,Na:!0},As={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:fs,G:cs,B:!0,Na:!0},Ms={endpoint:"getAccountInfo"},Rs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new x("internal-error");ss(t)},Z:"email",B:!0},Os={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new x("internal-error")},Z:"email",B:!0},Ps={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new x("internal-error")},Z:"email",B:!0},Ns={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new x("internal-error");ss(t)},Z:"email",B:!0},Ds={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},$s={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new x("internal-error")}},Ls={endpoint:"resetPassword",A:bs,Z:"email",B:!0},js={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Us={endpoint:"setAccountInfo",N:["idToken"],A:us,V:!0},Fs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(us(t),!t.password)throw new x("weak-password")},G:cs,V:!0},Bs={endpoint:"signupNewUser",G:cs,V:!0,B:!0},qs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new x("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new x("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new x("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new x("internal-error")},B:!0,Na:!0},Vs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new x("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new x("internal-error")},B:!0,Na:!0},Zs={endpoint:"verifyAssertion",A:ds,Ya:ps,G:vs,V:!0,B:!0},Hs={endpoint:"verifyAssertion",A:ds,Ya:ps,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new x("user-not-found");if(t.errorMessage)throw tu(t.errorMessage);cs(t)},V:!0,B:!0},zs={endpoint:"verifyAssertion",A:function(t){if(ds(t),!t.idToken)throw new x("internal-error")},Ya:ps,G:vs,V:!0},Gs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new x("invalid-custom-token")},G:cs,V:!0,B:!0},Ws={endpoint:"verifyPassword",A:function(t){if(ss(t),!t.password)throw new x("wrong-password")},G:cs,V:!0,B:!0},Ks={endpoint:"verifyPhoneNumber",A:ls,G:cs,B:!0},Js={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new x("internal-error");ls(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);cs(t)}},Ys={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ls,G:cs,B:!0},Xs={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ka]^!!t.refreshToken)throw new x("internal-error")},B:!0,Na:!0};function Qs(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ie(new x("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Te(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=jn(e+n);$n(s,"key",t.c),a&&$n(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&$n(s,c,i[c]);return new be(function(e,n){is(t,s.toString(),function(t){t?t.error?n(eu(t,o||{})):e(t):n(new x("network-request-failed"))},r,u?void 0:nr($r(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new x("internal-error");return r[e.Z]})}function tu(t){return eu({error:{errors:[{message:t}],code:400,message:t}})}function eu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new x(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new x(r[i],e);return!e&&t&&(e=Dr(t)),new x("internal-error",e)}function nu(t){this.b=t,this.a=null,this.rb=function(t){return(au||(au=new be(function(t,e){function n(){Fr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Fr(),e(Error("Network Error"))},timeout:iu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Te(Fa(r=Tt(ru,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw au=null,t}))).then(function(){return new be(function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ou.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ru=new mt(St,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new Br(3e4,6e4),ou=new Br(5e3,15e3),au=null;function su(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Un((t=jn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Un("https",this.l,null,"/__/auth/iframe"),this.a=t,$n(this.a,"apiKey",this.h),$n(this.a,"appName",this.i),this.b=null,this.c=[]}function uu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cu(t){try{return ll.Z.app(t).auth().Ga()}catch(e){return[]}}function lu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hu(t){var e=cr();return function(t){return Qs(t,Ds,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=jn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=jn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Zo(cr())})}function fu(t){return t.m||(t.m=yr().then(function(){if(!t.u){var e=t.c,n=t.i,r=cu(t.b),i=new su(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.v=new nu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Fo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Te(n)}return n.status="ERROR",Te(n)})}(t)})),t.m}function du(t){return t.l||(t.C=t.c?Ir(t.c,cu(t.b)):null,t.l=new Ga(t.g,R(t.i),t.C),t.f&&es(t.l,t.f)),t.l}function pu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new uu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=pt(u||null),t.f=c,t.yb(l).toString()}function vu(t){if(this.a=t||ll.Z.INTERNAL.reactNative&&ll.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new x("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(t){this.b=t,this.a={},this.f=w(this.c,this)}su.prototype.toString=function(){return this.f?$n(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?$n(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?$n(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},uu.prototype.yb=function(t){return this.h=t,this},uu.prototype.toString=function(){if(this.v){var t=jn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if($n(t,"apiKey",this.s),$n(t,"appName",this.c),$n(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=ll.Z.app(this.c).auth().la()}catch(Nm){n=null}for(var r in e.ob=n,$n(t,"providerId",this.a.providerId),e=$r((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),dt(e)||$n(t,"customParameters",Dr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&$n(t,"scopes",n.join(",")),this.l?$n(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?$n(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?$n(t,"v",this.i):Yn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Ln(t,a)&&$n(t,a,this.b[a]);return this.h?$n(t,"tid",this.h):Yn(t.b,"tid"),this.f?$n(t,"eid",this.f):Yn(t.b,"eid"),(a=cu(this.c)).length&&$n(t,"fw",a.join(",")),t.toString()},(t=lu.prototype).Ob=function(t,e,n){var r=new x("popup-closed-by-user"),i=new x("web-storage-unsupported"),o=this,a=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.rb.then(function(){return new be(function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&dr(t),e(i),a=!0)})}).o(function(){}).then(function(){if(!a)return function(t){return new be(function(e){return function n(){xn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!a)return xn(n).then(function(){e(r)})})},t.Xb=function(){var t=Cr();return!Nr(t)&&!Ur(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Ie(new x("popup-blocked"));if(a&&!Nr())return this.ma().o(function(e){dr(t),i(e)}),r(),Te();this.a||(this.a=hu(du(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw dr(t),i(e),e});return r(),e}).then(function(){jo(n),a||lr(pu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=hu(du(this)));var i=this;return this.a.then(function(){jo(e),lr(pu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new x("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){K(this.h,function(e){return e==t})},(t=vu.prototype).get=function(t){return Te(this.a.getItem(t)).then(function(t){return t&&Lr(t)})},t.set=function(t,e){return Te(this.a.setItem(t,Dr(e)))},t.U=function(t){return Te(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var yu,mu=[];function bu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function _u(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ie(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return ku(t,c),e}).o(function(e){throw ku(t,c),e})}function ku(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),K(t.a,function(t){return t==e})}}function Eu(){if(!Cu())throw new x("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(V(mu,function(n){n.b==t&&(e=n)}),!e){var e=new gu(t);mu.push(e)}return e}(),bu(this.v,"keyChanged",function(e,n){return Pu(t).then(function(e){return 0<e.length&&V(t.a,function(t){t(e)}),{keyProcessed:G(e,n.key)}})}),bu(this.v,"ping",function(){return Te(["keyChanged"])})):function(){var t=a.navigator;return t&&t.serviceWorker?Te().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Te(null)}().then(function(e){(t.h=e)&&(t.g=new _u(new wu(e)),Su(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function xu(t){return new be(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return xu(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Tu(t){return t.i||(t.i=xu(t)),t.i}function Iu(t,e){var n=0;return new be(function r(i,o){Tu(t).then(e).then(i).o(function(e){if(!(3<++n))return Tu(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function Cu(){try{return!!a.indexedDB}catch(zt){return!1}}function Au(t){return t.objectStore("firebaseLocalStorage")}function Mu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ru(t){return new be(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Ou(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Te()}function Pu(t){return Tu(t).then(function(t){var e=Au(Mu(t,!1));return e.getAll?Ru(e.getAll()):new be(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r})}function Nu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Du(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Te().then(function(){if(Cu()){var t=jr(),r="__sak"+t;return yu||(yu=new Eu),(n=yu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){V(e.a,function(e){e(t)})}),t})}function $u(){this.a={},this.type="inMemory"}function Lu(){if(!function(){var t="Node"==_r();if(!(t=ju()||t&&ll.Z.INTERNAL.node&&ll.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new x("internal-error","The LocalStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=ju()||ll.Z.INTERNAL.node.localStorage,this.type="localStorage"}function ju(){try{var t=a.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Uu(){this.type="nullStorage"}function Fu(){if(!function(){var t="Node"==_r();if(!(t=Bu()||t&&ll.Z.INTERNAL.node&&ll.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==_r())throw new x("internal-error","The SessionStorage compatibility library was not found.");throw new x("web-storage-unsupported")}this.a=Bu()||ll.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bu(){try{var t=a.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function qu(){var t={};t.Browser=Hu,t.Node=zu,t.ReactNative=Gu,t.Worker=Wu,this.a=t[_r()]}gu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];V(r,function(e){i.push(Te().then(function(){return e(t.origin,t.data.data)}))}),Ae(i).then(function(r){var i=[];V(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},_u.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Eu.prototype).set=function(t,e){var n=this,r=!1;return Iu(this,function(e){return Ru((e=Au(Mu(e,!0))).get(t))}).then(function(i){return Iu(n,function(o){if(o=Au(Mu(o,!0)),i)return i.value=e,Ru(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Ru(o.add(a))})}).then(function(){return n.c[t]=e,Ou(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return Iu(this,function(e){return Ru(Au(Mu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Iu(this,function(r){return n=!0,e.b++,Ru(Au(Mu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Ou(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){Nu(t),function e(){t.f=setTimeout(function(){t.l=Pu(t).then(function(e){0<e.length&&V(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){K(this.a,function(e){return e==t}),0==this.a.length&&Nu(this)},(t=Du.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){K(this.a,function(e){return e==t})},(t=$u.prototype).get=function(t){return Te(this.a[t])},t.set=function(t,e){return this.a[t]=e,Te()},t.U=function(t){return delete this.a[t],Te()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return Te().then(function(){return Lr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Te().then(function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Te().then(function(){e.a.removeItem(t)})},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&hn(a.window,"storage",t)},(t=Uu.prototype).get=function(){return Te(null)},t.set=function(){return Te()},t.U=function(){return Te()},t.ca=function(){},t.ia=function(){},(t=Fu.prototype).get=function(t){var e=this;return Te().then(function(){return Lr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Te().then(function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Te().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Vu,Zu,Hu={F:Lu,bb:Fu},zu={F:Lu,bb:Fu},Gu={F:vu,bb:Uu},Wu={F:Lu,bb:Uu},Ku={rd:"local",NONE:"none",td:"session"};function Ju(){var t=!(Ur(Cr())||!br()),e=Nr(),n=Mr();this.m=t,this.h=e,this.l=n,this.a={},Vu||(Vu=new qu),t=Vu;try{this.g=!ur()&&Zr()||!a.indexedDB?new t.a.F:new Du(wr()?new $u:new t.a.F)}catch(r){this.g=new $u,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new $u}this.v=new $u,this.f=w(this.Yb,this),this.b={}}function Yu(){return Zu||(Zu=new Ju),Zu}function Xu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function tc(t,e,n){return n=Qu(e,n),"local"==e.F&&(t.b[n]=null),Xu(t,e.F).U(n)}function ec(t){t.c&&(clearInterval(t.c),t.c=null)}function nc(t){this.a=t,this.b=Yu()}(t=Ju.prototype).get=function(t,e){return Xu(this,t.F).get(Qu(t,e))},t.set=function(t,e,n){var r=Qu(t,n),i=this,o=Xu(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Qu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),dt(this.a)&&(Xu(this,"local").ca(this.f),this.h||(ur()||!Zr())&&a.indexedDB||!this.l||function(t){ec(t),t.c=setInterval(function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Je({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(K(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(Xu(this,"local").ia(this.f),ec(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Xu(this,"local").ia(this.f):ec(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Wt&&oe&&10==oe&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,w(this.mb,this))},t.mb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var rc,ic={name:"authEvent",F:"local"};function oc(){this.a=Yu()}function ac(t,e){this.b=sc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===rc&&(rc=a.Int32Array?new Int32Array(pc):pc),this.reset()}k(ac,function(){this.b=-1});for(var sc=64,uc=sc-1,cc=[],lc=0;lc<uc;lc++)cc[lc]=0;var hc=J(128,cc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|rc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function dc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}ac.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var pc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vc(){ac.call(this,8,gc)}k(vc,ac);var gc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new oc,this.g=new nc(this.h),this.f=null,this.b=[],this.a=this.c=null}function mc(t){return new x("invalid-cordova-configuration",t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function wc(t){return t.f||(t.f=t.ma().then(function(){return new be(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),_c(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Lr(Ln(o=jn(i),"firebaseError")||null))?T(o):null)?new Uo(r.c,r.b,null,null,o,null,r.T()):new Uo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}bc(t,i)})}var n=new Uo("unknown",null,null,null,new x("no-auth-event")),r=!1,i=xn(500).then(function(){return _c(t).then(function(){r||bc(t,n)})}),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(Nm){console.error(Nm)}},Vo||(Vo=new Bo),function(t){var e=Vo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)})})),t.f}function _c(t){var e=null;return function(t){return t.b.get(ic,t.a).then(function(t){return Fo(t)})}(t.g).then(function(n){return e=n,tc((n=t.g).b,ic,n.a)}).then(function(){return e})}function Sc(t){this.a=t,this.b=Yu()}(t=yc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?yr().then(function(){return new be(function(t,e){var n=a.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ie(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ar("universalLinks.subscribe",a))throw mc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",a))throw mc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",a))throw mc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",a))throw mc("cordova-plugin-inappbrowser is not installed")},function(){throw new x("cordova-not-ready")})},t.Ob=function(t,e){return e(new x("operation-not-supported-in-this-environment")),Te()},t.Mb=function(){return Ie(new x("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ie(new x("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Te().then(function(){return jo(e),wc(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Uo(e,r,null,o,new x("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",a);if("string"!=typeof u)throw new x("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",a),l={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return Ie(new x("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new vc;dc(e,t),t=[];var n=8*e.g;dc(e,hc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=pu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ic,s.w(),e)}).then(function(){var e=Ar("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new x("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",a)))throw new x("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",a)))throw new x("invalid-cordova-configuration");e=Cr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new be(function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){qr()&&c()},o.addEventListener("resume",c=function(){s||(s=xn(2e3).then(function(){e(new x("redirect-cancelled-by-user"))}))},!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return _c(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),wc(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Uo("unknown",null,null,null,new x("no-auth-event")),t(e))})},t.Sa=function(t){K(this.b,function(e){return e==t})};var kc={name:"pendingRedirect",F:"session"};function Ec(t){return tc(t.b,kc,t.a)}function xc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Fc,this.C=new Hc,this.g=new Sc(jc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Tc(this.D,this.v,this.m,I,this.J)}function Tc(t,e,n,r,i){var o=ll.Z.SDK_VERSION||null;return mr()?new yc(t,e,n,o,r,i):new lu(t,e,n,o,r,i)}function Ic(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function Cc(t){t.a.Xb()&&Ic(t).o(function(e){var n=new Uo("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));Nc(e)&&t.s(n)}),t.a.Tb()||Bc(t.b)}function Ac(t,e){G(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(kc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ec(t.g).then(function(){Ic(t).o(function(e){var n=new Uo("unknown",null,null,null,new x("operation-not-supported-in-this-environment"));Nc(e)&&t.s(n)})}):Cc(t)}).o(function(){Cc(t)})}function Mc(t,e){K(t.h,function(t){return t==e})}xc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Tc(this.D,this.v,this.m,null,this.J),this.i={}},xc.prototype.s=function(t){if(!t)throw new x("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Bc(this.b),e};var Rc=new Br(2e3,1e4),Oc=new Br(3e4,6e4);function Pc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,a)}function Nc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Dc(t,e,n,r,i){var o;return function(t){return t.b.set(kc,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(Nc(e))throw new x("operation-not-supported-in-this-environment");return o=e,Ec(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new be(function(){}):Ec(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function $c(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Rc.get())}xc.prototype.qa=function(){return this.b.qa()};var Lc={};function jc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Uc(t,e,n,r){var i=jc(e,n,r);return Lc[i]||(Lc[i]=new xc(t,e,n,r)),Lc[i]}function Fc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Bc(t){t.g||(t.g=!0,Zc(t,!1,null,null))}function qc(t){t.g&&!t.i&&Zc(t,!1,null,null)}function Vc(t,e){if(t.b=function(){return Te(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ie(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Vc(t,n):Vc(t,{user:null}),t.f=[],t.c=[]}function Hc(){}function zc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Gc(t,e){this.a=e,Kr(this,"verificationId",t)}function Wc(t,e,n,r){return new Do(t).fb(e,n).then(function(t){return new Gc(t,r)})}function Kc(t){var e=Vi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new x("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Jr(this,{token:t,expirationTime:Vr(1e3*e.exp),authTime:Vr(1e3*e.auth_time),issuedAtTime:Vr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Jc(t,e,n){var r=e&&e[Xc];if(!r)throw new x("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;V(e[Yc]||[],function(t){(t=ti(t))&&i.b.push(t)}),Kr(this,"auth",this.a),Kr(this,"session",this.c),Kr(this,"hints",this.b)}Fc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Fc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Zc(this,!0,null,t.a),Te()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then(function(e){Zc(t,s,e,null)}).o(function(e){Zc(t,s,null,e)})}(this,t,e):Ie(new x("invalid-auth-event")):(Zc(this,!1,null,null),Te())}else Ie(new x("invalid-auth-event"))},Fc.prototype.qa=function(){var t=this;return new be(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new x("timeout");t.a&&t.a.cancel(),t.a=xn(Oc.get()).then(function(){t.b||(t.g=!0,Zc(t,!0,null,e))})}(t))})},Hc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Te()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):Ie(new x("invalid-auth-event"))}else Ie(new x("invalid-auth-event"))},Gc.prototype.confirm=function(t){return t=$o(this.verificationId,t),this.a(t)};var Yc="mfaInfo",Xc="mfaPendingCredential";function Qc(t,e,n,r){x.call(this,"multi-factor-auth-required",r,e),this.b=new Jc(t,e,n),Kr(this,"resolver",this.b)}function tl(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qc(e,t.serverResponse,n,t.message)}catch(r){}return null}function el(){}function nl(t){Kr(this,"factorId",t.fa),this.a=t}function rl(t){if(nl.call(this,t),this.a.fa!=Do.PROVIDER_ID)throw new x("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function il(t,e){for(var n in Ke.call(this,t),e)this[n]=e[n]}function ol(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),al(this,n)}function al(t,e){t.b=e,Kr(t,"enrolledFactors",e)}function sl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ul(t,e){t.stop(),t.b=xn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=a.document,e=null;return qr()||!t?Te():new be(function(n){e=function(){qr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){ul(t,!0)}).o(function(e){t.i(e)&&ul(t,!1)})}function cl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function hl(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function fl(t,e){t.b=qi(e[Ka]||""),t.a=e.refreshToken,hl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function dl(t,e){this.a=t||null,this.b=e||null,Jr(this,{lastSignInTime:Vr(e||null),creationTime:Vr(t||null)})}function pl(t,e,n,r,i,o){Jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function vl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=ll.Z.SDK_VERSION?Ir(ll.Z.SDK_VERSION):null;this.a=new Ga(this.l,R(I),r),t.emulatorConfig&&es(this.a,t.emulatorConfig),this.b=new cl(this.a),kl(this,e[Ka]),fl(this.b,e),Kr(this,"refreshToken",this.b.a),Tl(this,n||{}),wn.call(this),this.R=!1,this.s&&Rr()&&(this.i=Uc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new sl(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=w(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){es(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ml(i,t.f)},this.ba=null,this.O=new ol(this,n),Kr(this,"multiFactor",this.O)}function gl(t,e){t.ja&&hn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function yl(t,e){t.X&&hn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function ml(t,e){t.$=e,rs(t.a,ll.Z.SDK_VERSION?Ir(ll.Z.SDK_VERSION,t.$):null)}function bl(t,e){t.ba&&hn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function wl(t){try{return ll.Z.app(t.m).auth()}catch(e){throw new x("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _l(t){t.D||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function Sl(t){hn(t,"tokenChanged",t.aa),t.u.stop()}function kl(t,e){t.za=e,Kr(t,"_lat",e)}function El(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ae(e).then(function(){return t})}function xl(t){t.i&&!t.R&&(t.R=!0,Ac(t.i,t))}function Tl(t,e){Jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new dl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Il(){}function Cl(t){return Te().then(function(){if(t.D)throw new x("app-deleted")})}function Al(t){return H(t.providerData,function(t){return t.providerId})}function Ml(t,e){e&&(Rl(t,e.providerId),t.providerData.push(e))}function Rl(t,e){K(t.providerData,function(t){return t.providerId==e})}function Ol(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Kr(t,e,n)}function Pl(t,e){t!=e&&(Jr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Kr(t,"metadata",e.metadata?function(t){return new dl(t.a,t.b)}(e.metadata):new dl),V(e.providerData,function(e){Ml(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Kr(t,"refreshToken",t.b.a),al(t.O,e.O.b))}function Nl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return Qs(t.a,Ms,{idToken:e}).then(w(t.Kc,t))}(t,e).then(function(){return n||Ol(t,"isAnonymous",!1),e})})}function Dl(t,e){e[Ka]&&t.za!=e[Ka]&&(fl(t.b,e),t.dispatchEvent(new il("tokenChanged")),kl(t,e[Ka]),Ol(t,"refreshToken",t.b.a))}function $l(t,e){return Nl(t).then(function(){if(G(Al(t),e))return El(t).then(function(){throw new x("provider-already-linked")})})}function Ll(t,e,n){return Yr({user:t,credential:Lo(e),additionalUserInfo:e=Wi(e),operationType:n})}function jl(t,e){return Dl(t,e),t.reload().then(function(){return t})}function Ul(t,e,n,r,i){if(!Rr())return Ie(new x("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ie(t.h);var o=Gi(n.providerId),a=jr(t.uid+":::"),s=null;(!Nr()||br())&&t.s&&n.isOAuthProvider&&(s=pu(t.s,t.l,t.m,e,n,null,a,ll.Z.SDK_VERSION||null,null,null,t.tenantId));var u=pr(s,o&&o.ua,o&&o.ta);return r=r().then(function(){if(Bl(t),!i)return t.I().then(function(){})}).then(function(){return Pc(t.i,u,e,n,a,!!s,t.tenantId)}).then(function(){return new be(function(n,r){t.na(e,null,new x("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=$c(t.i,t,e,u,a)})}).then(function(t){return u&&dr(u),t?Yr(t):null}).o(function(t){throw u&&dr(u),t}),ql(t,r,i)}function Fl(t,e,n,r,i){if(!Rr())return Ie(new x("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ie(t.h);var o=null,a=jr(t.uid+":::");return r=r().then(function(){if(Bl(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=a,El(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(Hl,t.w(),e.a)),e}).then(function(){return Dc(t.i,e,n,a,t.tenantId)}).o(function(e){if(o=e,t.ha)return zl(t.ha);throw o}).then(function(){if(o)throw o}),ql(t,r,i)}function Bl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new x("internal-error");throw new x("auth-domain-config-required")}}function ql(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ie(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new il("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){W(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),wl(t),w(t.jc,t))),n||e})}function Vl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ka]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new vl(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&Ml(i,Yr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Zl(t){this.a=t,this.b=Yu()}Jc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=pt(e.f);return delete n[Yc],delete n[Xc],gt(n,t),e.g(n)})},k(Qc,x),el.prototype.sb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:No(t.a)}),Qs(e,Cs,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:No(t.a)}),Qs(e,As,n)})}(this,t,e)},k(nl,el),k(rl,nl),k(il,Ke),(t=ol.prototype).yc=function(t){al(this,function(t){var e=[];return V(t.mfaInfo||[],function(t){(t=ti(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new io(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return Dl(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return Qs(r,Xs,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=Z(e.b,function(t){return t.uid!=n});return al(e,r),Dl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:H(this.b,function(t){return t.w()})}}},sl.prototype.start=function(){this.a=this.c,ul(this,!0)},sl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},cl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},cl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ie(new x("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new be(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?is(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(eu(t)):t.access_token&&t.refresh_token?n(t):r(new x("internal-error")):r(new x("network-request-failed"))},"POST",Jn(e).toString(),t.g,t.m.get()):r(new x("internal-error"))})}(t.f,e).then(function(e){return t.b=qi(e.access_token),t.a=e.refresh_token,hl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Te(null):Te({accessToken:this.b.toString(),refreshToken:this.a})},dl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},k(vl,wn),vl.prototype.wa=function(t){this.ya=t,ts(this.a,t)},vl.prototype.la=function(){return this.ya},vl.prototype.Ga=function(){return Y(this.$)},vl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Kr(vl.prototype,"providerId","firebase"),(t=vl.prototype).reload=function(){var t=this;return ql(this,Cl(this).then(function(){return Nl(t).then(function(){return El(t)}).then(Il)}))},t.oc=function(t){return this.I(t).then(function(t){return new Kc(t)})},t.I=function(t){var e=this;return ql(this,Cl(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new x("internal-error");return t.accessToken!=e.za&&(kl(e,t.accessToken),e.dispatchEvent(new il("tokenChanged"))),Ol(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new x("internal-error");Tl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Ml(this,e[n]);Ol(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new il("userReloaded",{hd:t}))},t.Lc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return ql(this,t.c(this.a,this.uid).then(function(t){return Dl(e,t),n=Ll(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return ql(this,$l(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ll(e,t,"link"),jl(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return ql(this,$l(this,"phone").then(function(){return Wc(wl(n),t,e,w(n.qb,n))}))},t.Mc=function(t,e){var n=this;return ql(this,Te().then(function(){return Wc(wl(n),t,e,w(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.ed=function(t){var e=this;return ql(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return Dl(e,t),e.reload()}))},t.Cb=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return Dl(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Cl(this);var e=this;return ql(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return Dl(e,t),Ol(e,"displayName",t.displayName||null),Ol(e,"photoURL",t.photoUrl||null),V(e.providerData,function(t){"password"===t.providerId&&(Kr(t,"displayName",e.displayName),Kr(t,"photoURL",e.photoURL))}),El(e)}).then(Il))},t.cd=function(t){var e=this;return ql(this,Nl(this).then(function(n){return G(Al(e),t)?function(t,e,n){return Qs(t,xs,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return V(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),V(Al(e),function(t){n[t]||Rl(e,t)}),n[Do.PROVIDER_ID]||Kr(e,"phoneNumber",null),El(e)}):El(e).then(function(){throw new x("no-such-provider")})}))},t.delete=function(){var t=this;return ql(this,this.I().then(function(e){return Qs(t.a,Es,{idToken:e})}).then(function(){t.dispatchEvent(new il("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");gl(t,null),yl(t,null),bl(t,null),t.J=[],t.D=!0,Sl(t),Kr(t,"refreshToken",null),t.i&&Mc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):null},t.Ec=function(t){var e=this;return Ul(this,"linkViaPopup",t,function(){return $l(e,t.providerId).then(function(){return El(e)})},!1)},t.Nc=function(t){return Ul(this,"reauthViaPopup",t,function(){return Te()},!0)},t.Fc=function(t){var e=this;return Fl(this,"linkViaRedirect",t,function(){return $l(e,t.providerId)},!1)},t.Oc=function(t){return Fl(this,"reauthViaRedirect",t,function(){return Te()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,this.I().then(function(n){return ys(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ll(i,t,"link"),jl(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,Te().then(function(){return uo(ms(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ll(i,t,"reauthenticate"),Dl(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return ql(this,this.I().then(function(e){return n=e,void 0===t||dt(t)?{}:Ui(new Ai(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return ql(this,this.I().then(function(t){return r=t,void 0===e||dt(e)?{}:Ui(new Ai(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return ql(this,t=uo(Te(t),n.uid).then(function(t){return e=Ll(n,t,"reauthenticate"),Dl(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),V(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),gt(t,this.O.w()),t};var Hl={name:"redirectUser",F:"session"};function zl(t){return tc(t.b,Hl,t.a)}function Gl(t){this.a=t,this.b=Yu(),this.c=null,this.f=function(t){var e=Jl("local"),n=Jl("session"),r=Jl("none");return function(t,e,n){var r=Qu(e,n),i=Xu(t,e.F);return t.get(e,n).then(function(o){var s=null;try{s=Lr(a.localStorage.getItem(r))}catch(Nm){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Kl,t.a).then(function(t){return t?Jl(t):e})})})}).then(function(e){return t.c=e,Wl(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener(Jl("local"),this.a,w(this.g,this))}function Wl(t,e){var n,r=[];for(n in Ku)Ku[n]!==e&&r.push(tc(t.b,Jl(Ku[n]),t.a));return r.push(tc(t.b,Kl,t.a)),function(t){return new be(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ce(t[s],_(o,s),a);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=Jl("local");th(this,function(){return Te().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Wl(t,"local").then(function(){t.c=e})})})};var Kl={name:"persistence",F:"session"};function Jl(t){return{name:"authUser",F:t}}function Yl(t,e){return th(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Xl(t){return th(t,function(){return tc(t.b,t.c,t.a)})}function Ql(t,e,n){return th(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Vl(t||{})})})}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.l=!1,Kr(this,"settings",new zc),Kr(this,"app",t),!ch(this).options||!ch(this).options.apiKey)throw new x("invalid-api-key");t=ll.Z.SDK_VERSION?Ir(ll.Z.SDK_VERSION):null,this.a=new Ga(ch(this).options&&ch(this).options.apiKey,R(I),t),this.R=[],this.s=[],this.O=[],this.hb=ll.Z.INTERNAL.createSubscribe(w(this.zc,this)),this.X=void 0,this.bc=ll.Z.INTERNAL.createSubscribe(w(this.Ac,this)),sh(this,null),this.i=new Gl(ch(this).options.apiKey+":"+ch(this).name),this.D=new Zl(ch(this).options.apiKey+":"+ch(this).name),this.$=dh(this,function(t){var e=ch(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Hl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Vl(t||{})})}(t.D,ch(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),zl(t.D)});return dh(t,e)}(t).then(function(){return Ql(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Yl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Xl(t.i)})):null}).then(function(e){sh(t,e||null)});return dh(t,n)}(this)),this.h=dh(this,function(t){return t.$.then(function(){return ah(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Jl("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.ya=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=ch(t).options.authDomain,n=ch(t).options.apiKey;e&&Rr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Uc(e,n,ch(t).name,t.P),Ac(t.b,t),lh(t)&&xl(lh(t)),t.m){xl(t.m);var r=t.m;r.wa(t.la()),gl(r,t),ml(r=t.m,t.J),bl(r,t),es((r=t.m).a,t.P),yl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,wn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=jn(this.P.url);t=Yr({protocol:t.c,host:t.a,port:t.g,options:Yr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function nh(t){Ke.call(this,"languageCodeChanged"),this.h=t}function rh(t){Ke.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Ke.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.Oa||Ie(new x("auth-domain-config-required"))}function ah(t){if(!Rr())return Ie(new x("operation-not-supported-in-this-environment"));var e=oh(t).then(function(){return t.b.qa()}).then(function(t){return t?Yr(t):null});return dh(t,e)}function sh(t,e){lh(t)&&(function(t,e){K(t.S,function(t){return t==e})}(lh(t),t.Ba),hn(lh(t),"tokenChanged",t.ya),hn(lh(t),"userDeleted",t.za),hn(lh(t),"userInvalidated",t.Aa),Sl(lh(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&_l(e)),Kr(t,"currentUser",e),e&&(e.wa(t.la()),gl(e,t),ml(e,t.J),bl(e,t),es(e.a,t.P),yl(e,t))}function uh(t,e){var n=null,r=null;return dh(t,e.then(function(e){return n=Lo(e),r=Wi(e),function(t,e){var n={};return n.apiKey=ch(t).options.apiKey,n.authDomain=ch(t).options.authDomain,n.appName=ch(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new vl(t,e);return n&&(i.ha=n),r&&ml(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return lh(t)&&e.uid==lh(t).uid?(Pl(lh(t),e),t.da(e)):(sh(t,e),xl(e),t.da(e))}).then(function(){fh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),t,w(t.kc,t))),n||e}).then(function(){return Yr({user:lh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function ch(t){return t.app}function lh(t){return t.currentUser}function hh(t){return lh(t)&&lh(t)._lat||null}function fh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](hh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](hh(t))}}function dh(t,e){return t.R.push(e),e.oa(function(){W(t.R,e)}),e}function ph(){}function vh(){this.a={},this.b=1e12}Gl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new x("invalid-persistence-type"),n=new x("unsupported-persistence-type");t:{for(r in Ku)if(Ku[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Cu()&&"none"!==t)throw n;break;default:if(!Mr()&&"none"!==t)throw n}}(t),th(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Wl(n,t)}).then(function(){if(n.c=Jl(t),e)return n.b.set(n.c,e,n.a)}):Te()})},k(eh,wn),k(nh,Ke),k(rh,Ke),k(ih,Ke),(t=eh.prototype).xb=function(t){return dh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ts(this.a,this.aa),this.dispatchEvent(new nh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new x("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&yr().then(function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,es(this.a,this.P),this.dispatchEvent(new rh(this.P))}},t.Gc=function(t){this.J.push(t),rs(this.a,ll.Z.SDK_VERSION?Ir(ll.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new ih(this.J))},t.Ga=function(){return Y(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ch(this).options.apiKey,authDomain:ch(this).options.authDomain,appName:ch(this).name,currentUser:lh(this)&&lh(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return uh(i,gs(i.a,o))})},t.Xc=function(t){if(!Rr())return Ie(new x("operation-not-supported-in-this-environment"));var e=this,n=Gi(t.providerId),r=jr(),i=null;(!Nr()||br())&&ch(this).options.authDomain&&t.isOAuthProvider&&(i=pu(ch(this).options.authDomain,ch(this).options.apiKey,ch(this).name,"signInViaPopup",t,null,r,ll.Z.SDK_VERSION||null,null,null,this.T(),this.P));var o=pr(i,n&&n.ua,n&&n.ta);return dh(this,n=oh(this).then(function(n){return Pc(n,o,"signInViaPopup",t,r,!!i,e.T())}).then(function(){return new be(function(t,n){e.na("signInViaPopup",null,new x("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=$c(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&dr(o),t?Yr(t):null}).o(function(t){throw o&&dr(o),t}))},t.Yc=function(t){if(!Rr())return Ie(new x("operation-not-supported-in-this-environment"));var e=this;return dh(this,oh(this).then(function(){return function(t){return th(t,function(){return t.b.set(Kl,t.c.F,t.a)})}(e.i)}).then(function(){return Dc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return ah(this).then(function(e){return t.b&&qc(t.b.b),e}).o(function(e){throw t.b&&qc(t.b.b),e})},t.dd=function(t){if(!t)return Ie(new x("null-user"));if(this.S!=t.tenantId)return Ie(new x("tenant-id-mismatch"));var e=this,n={};n.apiKey=ch(this).options.apiKey,n.authDomain=ch(this).options.authDomain,n.appName=ch(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ka]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new vl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&ml(e,r),Pl(e,t),e}(t,n,e.D,e.Ga());return dh(this,this.h.then(function(){if(ch(e).options.apiKey!=t.l)return r.reload()}).then(function(){return lh(e)&&t.uid==lh(e).uid?(Pl(lh(e),t),e.da(t)):(sh(e,r),xl(r),e.da(r))}).then(function(){fh(e)}))},t.Ab=function(){var t=this;return dh(this,this.h.then(function(){return t.b&&qc(t.b.b),lh(t)?(sh(t,null),Xl(t.i).then(function(){fh(t)})):Te()}))},t.Zc=function(){var t=this;return Ql(this.i,ch(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=lh(t)&&e){n=lh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Pl(lh(t),e),lh(t).I();(lh(t)||e)&&(sh(t,e),e&&(xl(e),e.ha=t.D),t.b&&Ac(t.b,t),fh(t))}})},t.da=function(t){return Yl(this.i,t)},t.mc=function(){fh(this),this.da(lh(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return uh(e,Te(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(lh(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),dh(t,t.h.then(function(){!t.l&&G(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(hh(t)))}))}(this,function(){t.next(lh(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(lh(r)):"function"==typeof t.next&&t.next(lh(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return dh(this,this.h.then(function(){return lh(e)?lh(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return uh(e,Qs(e.a,Gs,{token:t}))}).then(function(t){var n=t.user;return Ol(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return uh(n,Qs(n.a,Ws,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return uh(n,Qs(n.a,Ss,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return uh(e,t.ka(e.a))})},t.Sc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=lh(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.zb()).then(function(e){var n=e.user;return Ol(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return lh(this)&&lh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&lh(this)&&_l(lh(this))},t.Pc=function(t){var e=this;V(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&lh(this)&&Sl(lh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),dh(this,this.h.then(function(){e.l||G(e.s,t)&&t(hh(e))}))},t.removeAuthTokenListener=function(t){K(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Jl("local"),t.a,this.ja),this.b&&(Mc(this.b,this),qc(this.b.b)),Promise.resolve()},t.hc=function(t){return dh(this,function(t,e){return Qs(t,ks,{identifier:e,continueUri:Or()?cr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!Ro(t)},t.wb=function(t,e){var n=this;return dh(this,Te().then(function(){var t=new Ai(e);if(!t.c)throw new x("argument-error",Oi+" must be true when sending sign in link to email");return Ui(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return dh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return dh(this,this.a.Ra(t).then(function(t){return new ai(t)}))},t.jb=function(t){return dh(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return dh(this,Te().then(function(){return void 0===e||dt(e)?{}:Ui(new Ai(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return dh(this,Wc(this,t,e,w(this.$a,this)))},t.Vc=function(t,e){var n=this;return dh(this,Te().then(function(){var r=e||cr(),i=Mo(t,r);if(!(r=Ro(r)))throw new x("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new x("tenant-id-mismatch");return n.$a(i)}))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var gh=null;function yh(t,e){return(e=mh(e))&&t.a[e]||null}function mh(t){return(t=void 0===t?1e12:t)?t.toString():null}function bh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function wh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function _h(){}function Sh(){}vh.prototype.render=function(t,e){return this.a[this.b.toString()]=new bh(t,e),this.b++},vh.prototype.reset=function(t){var e=yh(this,t);t=mh(t),e&&t&&(e.delete(),delete this.a[t])},vh.prototype.getResponse=function(t){return(t=yh(this,t))?t.getResponse():null},vh.prototype.execute=function(t){(t=yh(this,t))&&t.execute()},bh.prototype.getResponse=function(){return wh(this),this.b},bh.prototype.execute=function(){wh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},bh.prototype.delete=function(){wh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Kr(_h,"FACTOR_ID","phone"),Sh.prototype.g=function(){return gh||(gh=new vh),Te(gh)},Sh.prototype.c=function(){};var kh=null;function Eh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xh=new mt(St,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Th=new Br(3e4,6e4);Eh.prototype.g=function(t){var e=this;return new be(function(n,r){var i=setTimeout(function(){r(new x("network-request-failed"))},Th.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new x("internal-error"));delete a[e.a]},Te(Fa(Tt(xh,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new x("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(a.grecaptcha))})},Eh.prototype.c=function(){this.b--};var Ih=null;function Ch(t,e,n,r,i,o,s){if(Kr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(kh||(kh=new Sh),s=kh):(Ih||(Ih=new Eh),s=Ih),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Rh])throw new x("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Oh],!a.document)throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new x("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ga(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ah];this.a[Ah]=function(t){if(Ph(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,a);"function"==typeof e&&e(t)}};var l=this.a[Mh];this.a[Mh]=function(){if(Ph(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,a);"function"==typeof t&&t()}}}var Ah="callback",Mh="expired-callback",Rh="sitekey",Oh="size";function Ph(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Nh(t,e){return t.h.push(e),e.oa(function(){W(t.h,e)}),e}function Dh(t){if(t.D)throw new x("internal-error","RecaptchaVerifier instance has been destroyed.")}function $h(t,e,n){var r=!1;try{this.b=n||ll.Z.app()}catch(a){throw new x("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new x("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=ll.Z.SDK_VERSION?Ir(ll.Z.SDK_VERSION,o):null,Ch.call(this,n,t,e,function(){try{var t=i.b.auth().la()}catch(Nm){t=null}return t},o,R(I),r)}function Lh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new x("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=jh.length)throw new x("internal-error","Argument validator received an unsupported number of arguments.");n=jh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new x("argument-error",t+" failed: "+r)}(t=Ch.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Nh(this,Te().then(function(){if(Or()&&!wr())return yr();throw new x("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,Qs(t.s,$s,{})}).then(function(e){t.a[Rh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){Dh(this);var t=this;return Nh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ae&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Vt(a.name),'"'),a.type){o.push(' type="',Vt(a.type),'"');var s={};gt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=de(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ue(o,a)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){Dh(this);var t=this;return Nh(this,this.render().then(function(e){return new be(function(n){var r=t.g.getResponse(e);r?n(r):(t.l.push(function e(r){r&&(function(t,e){K(t.l,function(t){return t==e})}(t,e),n(r))}),t.i&&t.g.execute(t.c))})}))},t.reset=function(){Dh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Dh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},k($h,Ch);var jh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Fh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Bh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function qh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Vh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Zh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function Hh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function zh(t){return p(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Wh(t,e){for(var n in e){var r=e[n].name;t[r]=Yh(r,t[n],e[n].j)}}function Kh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){Lh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Jh(t,e,n,r){t[e]=Yh(e,n,r)}function Yh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Wh(eh.prototype,{jb:{name:"applyActionCode",j:[Uh("code")]},Ra:{name:"checkActionCode",j:[Uh("code")]},nb:{name:"confirmPasswordReset",j:[Uh("code"),Uh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Uh("email"),Uh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Uh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Uh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(Bh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(Bh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Uh("email"),Gh(Bh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Uh("email"),Bh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Uh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Zh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Zh()]},Tc:{name:"signInWithCustomToken",j:[Uh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Uh("email"),Uh("password")]},Vc:{name:"signInWithEmailLink",j:[Uh("email"),Uh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof vl)}},Vh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Uh("url"),Bh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Uh("code")]}}),Kh(eh.prototype,{lc:{name:"languageCode",kb:Gh(Uh(),Vh(),"languageCode")},ti:{name:"tenantId",kb:Gh(Uh(),Vh(),"tenantId")}}),(eh.Persistence=Ku).LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",Wh(vl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Fh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Zh()]},qb:{name:"linkWithCredential",j:[Zh()]},Dc:{name:"linkWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Zh()]},tb:{name:"reauthenticateWithCredential",j:[Zh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gh(Bh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},cd:{name:"unlink",j:[Uh("provider")]},Bb:{name:"updateEmail",j:[Uh("email")]},Cb:{name:"updatePassword",j:[Uh("password")]},ed:{name:"updatePhoneNumber",j:[Zh("phone")]},Db:{name:"updateProfile",j:[Bh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Uh("email"),Gh(Bh("opt_actionCodeSettings",!0),Vh(null,!0),"opt_actionCodeSettings",!0)]}}),Wh(vh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wh(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wh(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Kh(zc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Fh("appVerificationDisabledForTesting")}}),Wh(Gc.prototype,{confirm:{name:"confirm",j:[Uh("verificationCode")]}}),Jh(so,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Co,Po,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(Uh(),Bh(),"json")]),Jh(Ao,"credential",function(t,e){return new Io(t,e)},[Uh("email"),Uh("password")]),Wh(Io.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Wh(bo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Jh(bo,"credential",wo,[Gh(Uh(),Bh(),"token")]),Jh(Ao,"credentialWithLink",Mo,[Uh("email"),Uh("emailLink")]),Wh(_o.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Jh(_o,"credential",So,[Gh(Uh(),Bh(),"token")]),Wh(ko.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Jh(ko,"credential",Eo,[Gh(Uh(),Gh(Bh(),Vh()),"idToken"),Gh(Uh(),Vh(),"accessToken",!0)]),Wh(xo.prototype,{Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Jh(xo,"credential",To,[Gh(Uh(),Bh(),"token"),Uh("secret",!0)]),Wh(mo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},credential:{name:"credential",j:[Gh(Uh(),Gh(Bh(),Vh()),"optionsOrIdToken"),Gh(Uh(),Vh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Wh(fo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Wh(co.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Jh(Do,"credential",$o,[Uh("verificationId"),Uh("verificationCode")]),Wh(Do.prototype,{fb:{name:"verifyPhoneNumber",j:[Gh(Uh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Hh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Hh(t.session,ao)&&zh(t.multiFactorHint):t.session&&t.multiFactorUid?Hh(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Wh(Oo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Wh(x.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Wh(Ho.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Wh(Zo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Wh(Qc.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Wh(Jc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Wh(ol.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Uh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:zh},Uh(),"multiFactorInfoIdentifier")]}}),Wh($h.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Jh(wi,"parseLink",Ci,[Uh("link")]),Jh(_h,"assertion",function(t){return new rl(t)},[Zh("phone")]),function(){if(void 0===ll.Z||!ll.Z.INTERNAL||!ll.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:so,Error:x};Jh(t,"EmailAuthProvider",Ao,[]),Jh(t,"FacebookAuthProvider",bo,[]),Jh(t,"GithubAuthProvider",_o,[]),Jh(t,"GoogleAuthProvider",ko,[]),Jh(t,"TwitterAuthProvider",xo,[]),Jh(t,"OAuthProvider",mo,[Uh("providerId")]),Jh(t,"SAMLAuthProvider",yo,[Uh("providerId")]),Jh(t,"PhoneAuthProvider",Do,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof eh)}}]),Jh(t,"RecaptchaVerifier",$h,[Gh(Uh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Bh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof ll.Z.app.App)}}]),Jh(t,"ActionCodeURL",wi,[]),Jh(t,"PhoneMultiFactorGenerator",_h,[]),ll.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),ll.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),ll.Z.registerVersion("@firebase/auth","0.16.5"),ll.Z.INTERNAL.extendNamespace({User:vl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var nv=n(35582);function rv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[e.length-1];return(0,nv.K)(r)?(e.pop(),function(t){return(0,hl.z)(e,t,r)}):function(t){return(0,hl.z)(e,t)}}function iv(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ov(t,e,n))}}var ov=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,i.Z)(this,t),this.accumulator=e,this.seed=n,this.hasSeed=r}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new av(t,this.accumulator,this.seed,this.hasSeed))}}]),t}(),av=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a){var s;return(0,i.Z)(this,n),(s=e.call(this,t)).accumulator=r,s._seed=o,s.hasSeed=a,s.index=0,s}return(0,r.Z)(n,[{key:"seed",get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t}},{key:"_next",value:function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}},{key:"_tryNext",value:function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)}}]),n}(nl.L);function sv(t){return function(e){return 0===t?(0,sl.c)():e.lift(new uv(t))}}var uv=function(){function t(e){if((0,i.Z)(this,t),this.total=e,this.total<0)throw new Pl.W}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new cv(t,this.total))}}]),t}(),cv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).total=r,o.ring=new Array,o.count=0,o}return(0,r.Z)(n,[{key:"_next",value:function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}},{key:"_complete",value:function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()}}]),n}(nl.L);function lv(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?(0,Qc.h)(function(e,n){return t(e,n,r)}):Zl.y,sv(1),n?Ll(e):Fl(function(){return new Ol.K}))}}var hv=function(){function t(e){(0,i.Z)(this,t),this.callback=e}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new fv(t,this.callback))}}]),t}(),fv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).add(new y.w(r)),o}return n}(nl.L),dv=(n(30462),function t(e,n){(0,i.Z)(this,t),this.id=e,this.url=n}),pv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,i.Z)(this,n),(o=e.call(this,t,r)).navigationTrigger=a,o.restoredState=s,o}return(0,r.Z)(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(dv),vv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;return(0,i.Z)(this,n),(a=e.call(this,t,r)).urlAfterRedirects=o,a}return(0,r.Z)(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(dv),gv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;return(0,i.Z)(this,n),(a=e.call(this,t,r)).reason=o,a}return(0,r.Z)(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(dv),yv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o){var a;return(0,i.Z)(this,n),(a=e.call(this,t,r)).error=o,a}return(0,r.Z)(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(dv),mv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a){var s;return(0,i.Z)(this,n),(s=e.call(this,t,r)).urlAfterRedirects=o,s.state=a,s}return(0,r.Z)(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(dv),bv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a){var s;return(0,i.Z)(this,n),(s=e.call(this,t,r)).urlAfterRedirects=o,s.state=a,s}return(0,r.Z)(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(dv),wv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a,s){var u;return(0,i.Z)(this,n),(u=e.call(this,t,r)).urlAfterRedirects=o,u.state=a,u.shouldActivate=s,u}return(0,r.Z)(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(dv),_v=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a){var s;return(0,i.Z)(this,n),(s=e.call(this,t,r)).urlAfterRedirects=o,s.state=a,s}return(0,r.Z)(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(dv),Sv=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r,o,a){var s;return(0,i.Z)(this,n),(s=e.call(this,t,r)).urlAfterRedirects=o,s.state=a,s}return(0,r.Z)(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(dv),kv=function(){function t(e){(0,i.Z)(this,t),this.route=e}return(0,r.Z)(t,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),t}(),Ev=function(){function t(e){(0,i.Z)(this,t),this.route=e}return(0,r.Z)(t,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),t}(),xv=function(){function t(e){(0,i.Z)(this,t),this.snapshot=e}return(0,r.Z)(t,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Tv=function(){function t(e){(0,i.Z)(this,t),this.snapshot=e}return(0,r.Z)(t,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Iv=function(){function t(e){(0,i.Z)(this,t),this.snapshot=e}return(0,r.Z)(t,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Cv=function(){function t(e){(0,i.Z)(this,t),this.snapshot=e}return(0,r.Z)(t,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),t}(),Av="primary",Mv=function(){function t(e){(0,i.Z)(this,t),this.params=e||{}}return(0,r.Z)(t,[{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.params,t)}},{key:"get",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e[0]:e}return null}},{key:"getAll",value:function(t){if(this.has(t)){var e=this.params[t];return Array.isArray(e)?e:[e]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),t}();function Rv(t){return new Mv(t)}function Ov(t){var e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Pv(t,e,n){var r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=t[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Nv(t,e){var n,r=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!Dv(t[n=r[o]],e[n]))return!1;return!0}function Dv(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;var n=(0,f.Z)(t).sort(),r=(0,f.Z)(e).sort();return n.every(function(t,e){return r[e]===t})}return t===e}function $v(t){return t.length>0?t[t.length-1]:null}function Lv(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function jv(t){return oi(t)?t:ii(t)?(0,Js.D)(Promise.resolve(t)):(0,Xc.of)(t)}var Uv={exact:function t(e,n,r){if(!Wv(e.segments,n.segments))return!1;if(!Zv(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:qv},Fv={exact:function(t,e){return Nv(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(function(n){return Dv(t[n],e[n])})},ignored:function(){return!0}};function Bv(t,e,n){return Uv[n.paths](t.root,e.root,n.matrixParams)&&Fv[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function qv(t,e,n){return Vv(t,e,e.segments,n)}function Vv(t,e,n,r){if(t.segments.length>n.length){var i=t.segments.slice(0,n.length);return!!Wv(i,n)&&!e.hasChildren()&&!!Zv(i,n,r)}if(t.segments.length===n.length){if(!Wv(t.segments,n))return!1;if(!Zv(t.segments,n,r))return!1;for(var o in e.children){if(!t.children[o])return!1;if(!qv(t.children[o],e.children[o],r))return!1}return!0}var a=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!Wv(t.segments,a)&&!!Zv(t.segments,a,r)&&!!t.children.primary&&Vv(t.children.primary,e,s,r)}function Zv(t,e,n){return e.every(function(e,r){return Fv[n](t[r].parameters,e.parameters)})}var Hv=function(){function t(e,n,r){(0,i.Z)(this,t),this.root=e,this.queryParams=n,this.fragment=r}return(0,r.Z)(t,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Rv(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Jv.serialize(this)}}]),t}(),zv=function(){function t(e,n){var r=this;(0,i.Z)(this,t),this.segments=e,this.children=n,this.parent=null,Lv(n,function(t,e){return t.parent=r})}return(0,r.Z)(t,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Yv(this)}}]),t}(),Gv=function(){function t(e,n){(0,i.Z)(this,t),this.path=e,this.parameters=n}return(0,r.Z)(t,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Rv(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return ig(this)}}]),t}();function Wv(t,e){return t.length===e.length&&t.every(function(t,n){return t.path===e[n].path})}var Kv=function t(){(0,i.Z)(this,t)},Jv=new(function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"parse",value:function(t){var e=new cg(t);return new Hv(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}},{key:"serialize",value:function(t){var e,n,r="/".concat(Xv(t.root,!0)),i=(e=t.queryParams,(n=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return"".concat(tg(t),"=").concat(tg(e))}).join("&"):"".concat(tg(t),"=").concat(tg(n))}).filter(function(t){return!!t})).length?"?".concat(n.join("&")):""),o="string"==typeof t.fragment?"#".concat(encodeURI(t.fragment)):"";return"".concat(r).concat(i).concat(o)}}]),t}());function Yv(t){return t.segments.map(function(t){return ig(t)}).join("/")}function Xv(t,e){if(!t.hasChildren())return Yv(t);if(e){var n=t.children.primary?Xv(t.children.primary,!1):"",r=[];return Lv(t.children,function(t,e){e!==Av&&r.push("".concat(e,":").concat(Xv(t,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(t,e){var n=[];return Lv(t.children,function(t,r){r===Av&&(n=n.concat(e(t,r)))}),Lv(t.children,function(t,r){r!==Av&&(n=n.concat(e(t,r)))}),n}(t,function(e,n){return n===Av?[Xv(t.children.primary,!1)]:["".concat(n,":").concat(Xv(e,!1))]});return 1===Object.keys(t.children).length&&null!=t.children.primary?"".concat(Yv(t),"/").concat(i[0]):"".concat(Yv(t),"/(").concat(i.join("//"),")")}function Qv(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tg(t){return Qv(t).replace(/%3B/gi,";")}function eg(t){return Qv(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ng(t){return decodeURIComponent(t)}function rg(t){return ng(t.replace(/\+/g,"%20"))}function ig(t){return"".concat(eg(t.path)).concat((e=t.parameters,Object.keys(e).map(function(t){return";".concat(eg(t),"=").concat(eg(e[t]))}).join("")));var e}var og=/^[^\/()?;=#]+/;function ag(t){var e=t.match(og);return e?e[0]:""}var sg=/^[^=?&#]+/,ug=/^[^?&#]+/,cg=function(){function t(e){(0,i.Z)(this,t),this.url=e,this.remaining=e}return(0,r.Z)(t,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zv([],{}):new zv([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new zv(t,e)),n}},{key:"parseSegment",value:function(){var t=ag(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(t),new Gv(ng(t),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var t={};this.consumeOptional(";");)this.parseParam(t);return t}},{key:"parseParam",value:function(t){var e=ag(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=ag(this.remaining);r&&this.capture(n=r)}t[ng(e)]=ng(n)}}},{key:"parseQueryParam",value:function(t){var e=function(t){var e=t.match(sg);return e?e[0]:""}(this.remaining);if(e){this.capture(e);var n="";if(this.consumeOptional("=")){var r=function(t){var e=t.match(ug);return e?e[0]:""}(this.remaining);r&&this.capture(n=r)}var i=rg(e),o=rg(n);if(t.hasOwnProperty(i)){var a=t[i];Array.isArray(a)||(t[i]=a=[a]),a.push(o)}else t[i]=o}}},{key:"parseParens",value:function(t){var e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=ag(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Av);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new zv([],o),this.consumeOptional("//")}return e}},{key:"peekStartsWith",value:function(t){return this.remaining.startsWith(t)}},{key:"consumeOptional",value:function(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}},{key:"capture",value:function(t){if(!this.consumeOptional(t))throw new Error('Expected "'.concat(t,'".'))}}]),t}(),lg=function(){function t(e){(0,i.Z)(this,t),this._root=e}return(0,r.Z)(t,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}},{key:"children",value:function(t){var e=hg(t,this._root);return e?e.children.map(function(t){return t.value}):[]}},{key:"firstChild",value:function(t){var e=hg(t,this._root);return e&&e.children.length>0?e.children[0].value:null}},{key:"siblings",value:function(t){var e=fg(t,this._root);return e.length<2?[]:e[e.length-2].children.map(function(t){return t.value}).filter(function(e){return e!==t})}},{key:"pathFromRoot",value:function(t){return fg(t,this._root).map(function(t){return t.value})}}]),t}();function hg(t,e){if(t===e.value)return e;var n,r=u(e.children);try{for(r.s();!(n=r.n()).done;){var i=hg(t,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function fg(t,e){if(t===e.value)return[e];var n,r=u(e.children);try{for(r.s();!(n=r.n()).done;){var i=fg(t,n.value);if(i.length)return i.unshift(e),i}}catch(o){r.e(o)}finally{r.f()}return[]}var dg=function(){function t(e,n){(0,i.Z)(this,t),this.value=e,this.children=n}return(0,r.Z)(t,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),t}();function pg(t){var e={};return t&&t.children.forEach(function(t){return e[t.value.outlet]=t}),e}var vg=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).snapshot=r,Sg((0,l.Z)(o),t),o}return(0,r.Z)(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(lg);function gg(t,e){var n=function(t,e){var n=new wg([],{},{},"",{},Av,e,null,t.root,-1,{});return new _g("",new dg(n,[]))}(t,e),r=new Jf.X([new Gv("",{})]),i=new Jf.X({}),o=new Jf.X({}),a=new Jf.X({}),s=new Jf.X(""),u=new yg(r,i,a,s,o,Av,e,n.root);return u.snapshot=n.root,new vg(new dg(u,[]),n)}var yg=function(){function t(e,n,r,o,a,s,u,c){(0,i.Z)(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=a,this.outlet=s,this.component=u,this._futureSnapshot=c}return(0,r.Z)(t,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ks.U)(function(t){return Rv(t)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ks.U)(function(t){return Rv(t)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),t}();function mg(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=t.pathFromRoot,r=0;if("always"!==e)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return bg(n.slice(r))}function bg(t){return t.reduce(function(t,e){return{params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}},{params:{},data:{},resolve:{}})}var wg=function(){function t(e,n,r,o,a,s,u,c,l,h,f){(0,i.Z)(this,t),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=a,this.outlet=s,this.component=u,this.routeConfig=c,this._urlSegment=l,this._lastPathIndex=h,this._resolve=f}return(0,r.Z)(t,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Rv(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Rv(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var t=this.url.map(function(t){return t.toString()}).join("/"),e=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(t,"', path:'").concat(e,"')")}}]),t}(),_g=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,r)).url=t,Sg((0,l.Z)(o),r),o}return(0,r.Z)(n,[{key:"toString",value:function(){return kg(this._root)}}]),n}(lg);function Sg(t,e){e.value._routerState=t,e.children.forEach(function(e){return Sg(t,e)})}function kg(t){var e=t.children.length>0?" { ".concat(t.children.map(kg).join(", ")," } "):"";return"".concat(t.value).concat(e)}function Eg(t){if(t.snapshot){var e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Nv(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Nv(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!Nv(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Nv(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function xg(t,e){return Nv(t.params,e.params)&&function(t,e){return Wv(t,e)&&t.every(function(t,n){return Nv(t.parameters,e[n].parameters)})}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||xg(t.parent,e.parent))}function Tg(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=e.value;var i=function(t,e,n){return e.children.map(function(e){var r,i=u(n.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.shouldReuseRoute(e.value,o.value.snapshot))return Tg(t,e,o)}}catch(a){i.e(a)}finally{i.f()}return Tg(t,e)})}(t,e,n);return new dg(r,i)}if(t.shouldAttach(e.value)){var o=t.retrieve(e.value);if(null!==o){var a=o.route;return Ig(e,a),a}}var s,c=new yg(new Jf.X((s=e.value).url),new Jf.X(s.params),new Jf.X(s.queryParams),new Jf.X(s.fragment),new Jf.X(s.data),s.outlet,s.component,s),l=e.children.map(function(e){return Tg(t,e)});return new dg(c,l)}function Ig(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(var n=0;n<t.children.length;++n)Ig(t.children[n],e.children[n])}function Cg(t,e,n,r,i){if(0===n.length)return Rg(e.root,e.root,e,r,i);var o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Pg(!0,0,t);var e=0,n=!1,r=t.reduce(function(t,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return Lv(r.outlets,function(t,e){o[e]="string"==typeof t?t.split("/"):t}),[].concat((0,f.Z)(t),[{outlets:o}])}if(r.segmentPath)return[].concat((0,f.Z)(t),[r.segmentPath])}return"string"!=typeof r?[].concat((0,f.Z)(t),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[].concat((0,f.Z)(t),[r])},[]);return new Pg(n,e,r)}(n);if(o.toRoot())return Rg(e.root,new zv([],{}),e,r,i);var a=function(t,e,n){if(t.isAbsolute)return new Ng(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new Ng(r,r===e.root,0)}var i=Ag(t.commands[0])?0:1;return function(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Ng(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(o,e,t),s=a.processChildren?$g(a.segmentGroup,a.index,o.commands):Dg(a.segmentGroup,a.index,o.commands);return Rg(a.segmentGroup,s,e,r,i)}function Ag(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Mg(t){return"object"==typeof t&&null!=t&&t.outlets}function Rg(t,e,n,r,i){var o={};return r&&Lv(r,function(t,e){o[e]=Array.isArray(t)?t.map(function(t){return"".concat(t)}):"".concat(t)}),new Hv(n.root===t?e:Og(n.root,t,e),o,i)}function Og(t,e,n){var r={};return Lv(t.children,function(t,i){r[i]=t===e?n:Og(t,e,n)}),new zv(t.segments,r)}var Pg=function(){function t(e,n,r){if((0,i.Z)(this,t),this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ag(r[0]))throw new Error("Root segment cannot have matrix parameters");var o=r.find(Mg);if(o&&o!==$v(r))throw new Error("{outlets:{}} has to be the last command")}return(0,r.Z)(t,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),t}(),Ng=function t(e,n,r){(0,i.Z)(this,t),this.segmentGroup=e,this.processChildren=n,this.index=r};function Dg(t,e,n){if(t||(t=new zv([],{})),0===t.segments.length&&t.hasChildren())return $g(t,e,n);var r=function(t,e,n){for(var r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};i<t.segments.length;){if(r>=n.length)return o;var a=t.segments[i],s=n[r];if(Mg(s))break;var u="".concat(s),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!Fg(u,c,a))return o;r+=2}else{if(!Fg(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){var o=new zv(t.segments.slice(0,r.pathIndex),{});return o.children.primary=new zv(t.segments.slice(r.pathIndex),t.children),$g(o,0,i)}return r.match&&0===i.length?new zv(t.segments,{}):r.match&&!t.hasChildren()?Lg(t,e,n):r.match?$g(t,0,i):Lg(t,e,n)}function $g(t,e,n){if(0===n.length)return new zv(t.segments,{});var r=function(t){return Mg(t[0])?t[0].outlets:h({},Av,t)}(n),i={};return Lv(r,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Dg(t.children[r],e,n))}),Lv(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new zv(t.segments,i)}function Lg(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){var o=n[i];if(Mg(o)){var a=jg(o.outlets);return new zv(r,a)}if(0===i&&Ag(n[0]))r.push(new Gv(t.segments[e].path,Ug(n[0]))),i++;else{var s=Mg(o)?o.outlets.primary:"".concat(o),u=i<n.length-1?n[i+1]:null;s&&u&&Ag(u)?(r.push(new Gv(s,Ug(u))),i+=2):(r.push(new Gv(s,{})),i++)}}return new zv(r,{})}function jg(t){var e={};return Lv(t,function(t,n){"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Lg(new zv([],{}),0,t))}),e}function Ug(t){var e={};return Lv(t,function(t,n){return e[n]="".concat(t)}),e}function Fg(t,e,n){return t==n.path&&Nv(e,n.parameters)}var Bg=function(){function t(e,n,r,o){(0,i.Z)(this,t),this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o}return(0,r.Z)(t,[{key:"activate",value:function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Eg(this.futureState.root),this.activateChildRoutes(e,n,t)}},{key:"deactivateChildRoutes",value:function(t,e,n){var r=this,i=pg(e);t.children.forEach(function(t){var e=t.value.outlet;r.deactivateRoutes(t,i[e],n),delete i[e]}),Lv(i,function(t,e){r.deactivateRouteAndItsChildren(t,n)})}},{key:"deactivateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}},{key:"deactivateRouteAndItsChildren",value:function(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}},{key:"detachAndStoreRouteSubtree",value:function(t,e){var n=e.getContext(t.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(t,e){for(var n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=pg(t),o=0,a=Object.keys(i);o<a.length;o++)this.deactivateRouteAndItsChildren(i[a[o]],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(t,e,n){var r=this,i=pg(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),r.forwardEvent(new Cv(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Tv(t.value.snapshot))}},{key:"activateRoutes",value:function(t,e,n){var r=t.value,i=e?e.value:null;if(Eg(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),qg(s.route)}else{var u=function(t){for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}}]),t}();function qg(t){Eg(t.value),t.children.forEach(qg)}var Vg=function t(e,n){(0,i.Z)(this,t),this.routes=e,this.module=n};function Zg(t){return"function"==typeof t}function Hg(t){return t instanceof Hv}var zg=Symbol("INITIAL_VALUE");function Gg(){return Ys(function(t){return(0,Kp.aj)(t.map(function(t){return t.pipe(Nl(1),rv(zg))})).pipe(iv(function(t,e){var n=!1;return e.reduce(function(t,r,i){if(t!==zg)return t;if(r===zg&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Hg(r))return r}return t},t)},zg),(0,Qc.h)(function(t){return t!==zg}),(0,Ks.U)(function(t){return Hg(t)?t:!0===t}),Nl(1))})}var Wg=function(){var t=function t(){(0,i.Z)(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=dt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&(ri(0,"router-outlet",undefined,undefined),function(){var t=Gt();Jt()?Vt.lFrame.isParent=!1:Kt(t=t.parent,!1);var e=t;Vt.lFrame.elementDepthCount--;var n=zt();n.firstCreatePass&&(le(n,t),xt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ni(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ni(n,e,Ht(),e.stylesWithoutHost,!1)}())},directives:function(){return[Wy]},encapsulation:2}),t}();function Kg(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;n++){var r=t[n],i=Yg(e,r);Jg(r,i)}}function Jg(t,e){t.children&&Kg(t.children,e)}function Yg(t,e){return e?t||e.path?t&&!e.path?"".concat(t,"/"):!t&&e.path?e.path:"".concat(t,"/").concat(e.path):"":t}function Xg(t){var e=t.children&&t.children.map(Xg),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Av&&(n.component=Wg),n}function Qg(t){return t.outlet||Av}function ty(t,e){var n=t.filter(function(t){return Qg(t)===e});return n.push.apply(n,(0,f.Z)(t.filter(function(t){return Qg(t)!==e}))),n}var ey={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ny(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},ey):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(e.matcher||Pv)(n,t,e);if(!i)return Object.assign({},ey);var o={};Lv(i.posParams,function(t,e){o[e]=t.path});var a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ry(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&ay(t,n,r)){var o=new zv(e,oy(t,e,r,new zv(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&sy(t,n,r)){var a=new zv(t.segments,iy(t,e,n,r,t.children,i));return a._sourceSegment=t,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:n}}var s=new zv(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function iy(t,e,n,r,i,o){var a,s={},c=u(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(uy(t,n,l)&&!i[Qg(l)]){var h=new zv([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Qg(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),s)}function oy(t,e,n,r){var i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;var o,a=u(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(""===s.path&&Qg(s)!==Av){var c=new zv([],{});c._sourceSegment=t,c._segmentIndexShift=e.length,i[Qg(s)]=c}}}catch(l){a.e(l)}finally{a.f()}return i}function ay(t,e,n){return n.some(function(n){return uy(t,e,n)&&Qg(n)!==Av})}function sy(t,e,n){return n.some(function(n){return uy(t,e,n)})}function uy(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function cy(t,e,n,r){return!!(Qg(t)===r||r!==Av&&uy(e,n,t))&&("**"===t.path||ny(e,t,n).matched)}function ly(t,e,n){return 0===e.length&&!t.children[n]}var hy=function t(e){(0,i.Z)(this,t),this.segmentGroup=e||null},fy=function t(e){(0,i.Z)(this,t),this.urlTree=e};function dy(t){return new b.y(function(e){return e.error(new hy(t))})}function py(t){return new b.y(function(e){return e.error(new fy(t))})}function vy(t){return new b.y(function(e){return e.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(t,"'")))})}var gy=function(){function t(e,n,r,o,a){(0,i.Z)(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=o,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(zi)}return(0,r.Z)(t,[{key:"apply",value:function(){var t=this,e=ry(this.urlTree.root,[],[],this.config).segmentGroup,n=new zv(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,Av).pipe((0,Ks.U)(function(e){return t.createUrlTree(yy(e),t.urlTree.queryParams,t.urlTree.fragment)})).pipe(zs(function(e){if(e instanceof fy)return t.allowRedirects=!1,t.match(e.urlTree);if(e instanceof hy)throw t.noMatchError(e);throw e}))}},{key:"match",value:function(t){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,t.root,Av).pipe((0,Ks.U)(function(n){return e.createUrlTree(yy(n),t.queryParams,t.fragment)})).pipe(zs(function(t){if(t instanceof hy)throw e.noMatchError(t);throw t}))}},{key:"noMatchError",value:function(t){return new Error("Cannot match any routes. URL Segment: '".concat(t.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,e,n){var r=t.segments.length>0?new zv([],h({},Av,t)):t;return new Hv(r,e,n)}},{key:"expandSegmentGroup",value:function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Ks.U)(function(t){return new zv([],t)})):this.expandSegment(t,n,e,n.segments,r,!0)}},{key:"expandChildren",value:function(t,e,n){for(var r=this,i=[],o=0,a=Object.keys(n.children);o<a.length;o++){var s=a[o];"primary"===s?i.unshift(s):i.push(s)}return(0,Js.D)(i).pipe(dl(function(i){var o=n.children[i],a=ty(e,i);return r.expandSegmentGroup(t,a,o,i).pipe((0,Ks.U)(function(t){return{segment:t,outlet:i}}))}),iv(function(t,e){return t[e.outlet]=e.segment,t},{}),lv())}},{key:"expandSegment",value:function(t,e,n,r,i,o){var a=this;return(0,Js.D)(n).pipe(dl(function(s){return a.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(zs(function(t){if(t instanceof hy)return(0,Xc.of)(null);throw t}))}),Hl(function(t){return!!t}),zs(function(t,n){if(t instanceof Ol.K||"EmptyError"===t.name){if(ly(e,r,i))return(0,Xc.of)(new zv([],{}));throw new hy(e)}throw t}))}},{key:"expandSegmentAgainstRoute",value:function(t,e,n,r,i,o,a){return cy(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):dy(e):dy(e)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(t,e,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?py(o):this.lineralizeSegments(n,o).pipe((0,fl.zg)(function(n){var o=new zv(n,{});return i.expandSegment(t,o,e,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(t,e,n,r,i,o){var a=this,s=ny(e,r,i),u=s.consumedSegments,c=s.lastChild,l=s.positionalParamSegments;if(!s.matched)return dy(e);var h=this.applyRedirectCommands(u,r.redirectTo,l);return r.redirectTo.startsWith("/")?py(h):this.lineralizeSegments(r,h).pipe((0,fl.zg)(function(r){return a.expandSegment(t,e,n,r.concat(i.slice(c)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(t,e,n,r,i){var o=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Xc.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Ks.U)(function(t){return n._loadedConfig=t,new zv(r,{})})):(0,Xc.of)(new zv(r,{}));var a=ny(e,n,r),s=a.consumedSegments,u=a.lastChild;if(!a.matched)return dy(e);var c=r.slice(u);return this.getChildConfig(t,n,r).pipe((0,fl.zg)(function(t){var r=t.module,a=t.routes,u=ry(e,s,c,a),l=u.segmentGroup,h=u.slicedSegments,f=new zv(l.segments,l.children);if(0===h.length&&f.hasChildren())return o.expandChildren(r,a,f).pipe((0,Ks.U)(function(t){return new zv(s,t)}));if(0===a.length&&0===h.length)return(0,Xc.of)(new zv(s,{}));var d=Qg(n)===i;return o.expandSegment(r,f,a,h,d?Av:i,!0).pipe((0,Ks.U)(function(t){return new zv(s.concat(t.segments),t.children)}))}))}},{key:"getChildConfig",value:function(t,e,n){var r=this;return e.children?(0,Xc.of)(new Vg(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Xc.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,fl.zg)(function(n){return n?r.configLoader.load(t.injector,e).pipe((0,Ks.U)(function(t){return e._loadedConfig=t,t})):function(t){return new b.y(function(e){return e.error(Ov("Cannot load children because the guard of the route \"path: '".concat(t.path,"'\" returned false")))})}(e)})):(0,Xc.of)(new Vg([],t))}},{key:"runCanLoadGuards",value:function(t,e,n){var r=this,i=e.canLoad;if(!i||0===i.length)return(0,Xc.of)(!0);var o=i.map(function(r){var i,o=t.get(r);if(function(t){return t&&Zg(t.canLoad)}(o))i=o.canLoad(e,n);else{if(!Zg(o))throw new Error("Invalid CanLoad guard");i=o(e,n)}return jv(i)});return(0,Xc.of)(o).pipe(Gg(),Wl(function(t){if(Hg(t)){var e=Ov('Redirecting to "'.concat(r.urlSerializer.serialize(t),'"'));throw e.url=t,e}}),(0,Ks.U)(function(t){return!0===t}))}},{key:"lineralizeSegments",value:function(t,e){for(var n=[],r=e.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Xc.of)(n);if(r.numberOfChildren>1||!r.children.primary)return vy(t.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}},{key:"applyRedirectCreatreUrlTree",value:function(t,e,n,r){var i=this.createSegmentGroup(t,e.root,n,r);return new Hv(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}},{key:"createQueryParams",value:function(t,e){var n={};return Lv(t,function(t,r){if("string"==typeof t&&t.startsWith(":")){var i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}},{key:"createSegmentGroup",value:function(t,e,n,r){var i=this,o=this.createSegments(t,e.segments,n,r),a={};return Lv(e.children,function(e,o){a[o]=i.createSegmentGroup(t,e,n,r)}),new zv(o,a)}},{key:"createSegments",value:function(t,e,n,r){var i=this;return e.map(function(e){return e.path.startsWith(":")?i.findPosParam(t,e,r):i.findOrReturn(e,n)})}},{key:"findPosParam",value:function(t,e,n){var r=n[e.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(t,"'. Cannot find '").concat(e.path,"'."));return r}},{key:"findOrReturn",value:function(t,e){var n,r=0,i=u(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===t.path)return e.splice(r),o;r++}}catch(a){i.e(a)}finally{i.f()}return t}}]),t}();function yy(t){for(var e={},n=0,r=Object.keys(t.children);n<r.length;n++){var i=r[n],o=yy(t.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function(t){if(1===t.numberOfChildren&&t.children.primary){var e=t.children.primary;return new zv(t.segments.concat(e.segments),e.children)}return t}(new zv(t.segments,e))}var my=function t(e){(0,i.Z)(this,t),this.path=e,this.route=this.path[this.path.length-1]},by=function t(e,n){(0,i.Z)(this,t),this.component=e,this.route=n};function wy(t,e,n){var r=function(t){if(!t)return null;for(var e=t.parent;e;e=e.parent){var n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function _y(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=pg(e);return t.children.forEach(function(t){Sy(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Lv(o,function(t,e){return Ey(t,n.getContext(e),i)}),i}function Sy(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var u=ky(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new my(r)):(o.data=a.data,o._resolvedData=a._resolvedData),_y(t,e,o.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new by(s.outlet.component,a))}else a&&Ey(e,s,i),i.canActivateChecks.push(new my(r)),_y(t,null,o.component?s?s.children:null:n,r,i);return i}function ky(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Wv(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Wv(t.url,e.url)||!Nv(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xg(t,e)||!Nv(t.queryParams,e.queryParams);case"paramsChange":default:return!xg(t,e)}}function Ey(t,e,n){var r=pg(t),i=t.value;Lv(r,function(t,r){Ey(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new by(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}var xy=function t(){(0,i.Z)(this,t)};function Ty(t){return new b.y(function(e){return e.error(t)})}var Iy=function(){function t(e,n,r,o,a,s){(0,i.Z)(this,t),this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=s}return(0,r.Z)(t,[{key:"recognize",value:function(){var t=ry(this.urlTree.root,[],[],this.config.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Av);if(null===e)return null;var n=new wg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Av,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new dg(n,e),i=new _g(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(t){var e=this,n=t.value,r=mg(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(function(t){return e.inheritParamsAndData(t)})}},{key:"processSegmentGroup",value:function(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}},{key:"processChildren",value:function(t,e){for(var n=[],r=0,i=Object.keys(e.children);r<i.length;r++){var o=i[r],a=e.children[o],s=ty(t,o),u=this.processSegmentGroup(s,a,o);if(null===u)return null;n.push.apply(n,(0,f.Z)(u))}var c=Cy(n);return c.sort(function(t,e){return t.value.outlet===Av?-1:e.value.outlet===Av?1:t.value.outlet.localeCompare(e.value.outlet)}),c}},{key:"processSegment",value:function(t,e,n,r){var i,o=u(t);try{for(o.s();!(i=o.n()).done;){var a=this.processSegmentAgainstRoute(i.value,e,n,r);if(null!==a)return a}}catch(s){o.e(s)}finally{o.f()}return ly(e,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(t,e,n,r){if(t.redirectTo||!cy(t,e,n,r))return null;var i,o=[],a=[];if("**"===t.path){var s=n.length>0?$v(n).parameters:{};i=new wg(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ry(t),Qg(t),t.component,t,Ay(e),My(e)+n.length,Oy(t))}else{var u=ny(e,t,n);if(!u.matched)return null;o=u.consumedSegments,a=n.slice(u.lastChild),i=new wg(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ry(t),Qg(t),t.component,t,Ay(e),My(e)+o.length,Oy(t))}var c=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),l=ry(e,o,a,c.filter(function(t){return void 0===t.redirectTo}),this.relativeLinkResolution),h=l.segmentGroup,f=l.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(c,h);return null===d?null:[new dg(i,d)]}if(0===c.length&&0===f.length)return[new dg(i,[])];var p=Qg(t)===r,v=this.processSegment(c,h,f,p?Av:r);return null===v?null:[new dg(i,v)]}}]),t}();function Cy(t){var e,n=[],r=new Set,i=u(t);try{var o=function(){var t=e.value;if(!function(t){var e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}(t))return n.push(t),"continue";var i,o=n.find(function(e){return t.value.routeConfig===e.value.routeConfig});void 0!==o?((i=o.children).push.apply(i,(0,f.Z)(t.children)),r.add(o)):n.push(t)};for(i.s();!(e=i.n()).done;)o()}catch(h){i.e(h)}finally{i.f()}var a,s=u(r);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=Cy(c.children);n.push(new dg(c.value,l))}}catch(h){s.e(h)}finally{s.f()}return n.filter(function(t){return!r.has(t)})}function Ay(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function My(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)n+=(e=e._sourceSegment)._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Ry(t){return t.data||{}}function Oy(t){return t.resolve||{}}function Py(t){return Ys(function(e){var n=t(e);return n?(0,Js.D)(n).pipe((0,Ks.U)(function(){return e})):(0,Xc.of)(e)})}var Ny=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),e.apply(this,arguments)}return n}(function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"shouldDetach",value:function(t){return!1}},{key:"store",value:function(t,e){}},{key:"shouldAttach",value:function(t){return!1}},{key:"retrieve",value:function(t){return null}},{key:"shouldReuseRoute",value:function(t,e){return t.routeConfig===e.routeConfig}}]),t}()),Dy=new We("ROUTES"),$y=function(){function t(e,n,r,o){(0,i.Z)(this,t),this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=o}return(0,r.Z)(t,[{key:"load",value:function(t,e){var n=this;if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);var r=this.loadModuleFactory(e.loadChildren).pipe((0,Ks.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(e);var i,o=r.create(t);return new Vg((i=o.injector.get(Dy,void 0,H.Self|H.Optional),Array.prototype.concat.apply([],i)).map(Xg),o)}),zs(function(t){throw e._loader$=void 0,t}));return e._loader$=new _.c(r,function(){return new m.xQ}).pipe((0,S.x)()),e._loader$}},{key:"loadModuleFactory",value:function(t){var e=this;return"string"==typeof t?(0,Js.D)(this.loader.load(t)):jv(t()).pipe((0,fl.zg)(function(t){return t instanceof Gi?(0,Xc.of)(t):(0,Js.D)(e.compiler.compileModuleAsync(t))}))}}]),t}(),Ly=function t(){(0,i.Z)(this,t),this.outlet=null,this.route=null,this.resolver=null,this.children=new jy,this.attachRef=null},jy=function(){function t(){(0,i.Z)(this,t),this.contexts=new Map}return(0,r.Z)(t,[{key:"onChildOutletCreated",value:function(t,e){var n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}},{key:"onChildOutletDestroyed",value:function(t){var e=this.getContext(t);e&&(e.outlet=null)}},{key:"onOutletDeactivated",value:function(){var t=this.contexts;return this.contexts=new Map,t}},{key:"onOutletReAttached",value:function(t){this.contexts=t}},{key:"getOrCreateContext",value:function(t){var e=this.getContext(t);return e||(e=new Ly,this.contexts.set(t,e)),e}},{key:"getContext",value:function(t){return this.contexts.get(t)||null}}]),t}(),Uy=function(){function t(){(0,i.Z)(this,t)}return(0,r.Z)(t,[{key:"shouldProcessUrl",value:function(t){return!0}},{key:"extract",value:function(t){return t}},{key:"merge",value:function(t,e){return t}}]),t}();function Fy(t){throw t}function By(t,e,n){return e.parse("/")}function qy(t,e){return(0,Xc.of)(null)}var Vy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Zy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hy=function(){var t=function(){function t(e,n,r,o,a,s,u,c){var l=this;(0,i.Z)(this,t),this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=o,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new m.xQ,this.errorHandler=Fy,this.malformedUriErrorHandler=By,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qy,afterPreactivation:qy},this.urlHandlingStrategy=new Uy,this.routeReuseStrategy=new Ny,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=a.get(zi),this.console=a.get(bo);var h=a.get(Oo);this.isNgZoneEnabled=h instanceof Oo&&Oo.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Hv(new zv([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new $y(s,u,function(t){return l.triggerEvent(new kv(t))},function(t){return l.triggerEvent(new Ev(t))}),this.routerState=gg(this.currentUrlTree,this.rootComponentType),this.transitions=new Jf.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return(0,r.Z)(t,[{key:"browserPageId",get:function(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}},{key:"setupNavigations",value:function(t){var e=this,n=this.events;return t.pipe((0,Qc.h)(function(t){return 0!==t.id}),(0,Ks.U)(function(t){return Object.assign(Object.assign({},t),{extractedUrl:e.urlHandlingStrategy.extract(t.rawUrl)})}),Ys(function(t){var r,i,o,a,s=!1,u=!1;return(0,Xc.of)(t).pipe(Wl(function(t){e.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:e.lastSuccessfulNavigation?Object.assign(Object.assign({},e.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ys(function(t){var r,i,o,a,s=!e.navigated||t.extractedUrl.toString()!==e.browserUrlTree.toString();if(("reload"===e.onSameUrlNavigation||s)&&e.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,Xc.of)(t).pipe(Ys(function(t){var r=e.transitions.getValue();return n.next(new pv(t.id,e.serializeUrl(t.extractedUrl),t.source,t.restoredState)),r!==e.transitions.getValue()?sl.E:Promise.resolve(t)}),(r=e.ngModule.injector,i=e.configLoader,o=e.urlSerializer,a=e.config,Ys(function(t){return function(t,e,n,r,i){return new gy(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,a).pipe((0,Ks.U)(function(e){return Object.assign(Object.assign({},t),{urlAfterRedirects:e})}))})),Wl(function(t){e.currentNavigation=Object.assign(Object.assign({},e.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,n,r,i,o){return(0,fl.zg)(function(r){return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var a=new Iy(t,e,n,r,i,o).recognize();return null===a?Ty(new xy):(0,Xc.of)(a)}catch(jO){return Ty(jO)}}(t,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,e.serializeUrl(a)),i,o).pipe((0,Ks.U)(function(t){return Object.assign(Object.assign({},r),{targetSnapshot:t})}));var a})}(e.rootComponentType,e.config,0,e.paramsInheritanceStrategy,e.relativeLinkResolution),Wl(function(t){"eager"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(t.urlAfterRedirects,t),e.browserUrlTree=t.urlAfterRedirects);var r=new mv(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);n.next(r)}));if(s&&e.rawUrlTree&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){var u=t.extractedUrl,c=t.source,l=t.restoredState,h=t.extras,f=new pv(t.id,e.serializeUrl(u),c,l);n.next(f);var d=gg(u,e.rootComponentType).snapshot;return(0,Xc.of)(Object.assign(Object.assign({},t),{targetSnapshot:d,urlAfterRedirects:u,extras:Object.assign(Object.assign({},h),{skipLocationChange:!1,replaceUrl:!1})}))}return e.rawUrlTree=t.rawUrl,e.browserUrlTree=t.urlAfterRedirects,t.resolve(null),sl.E}),Py(function(t){var n=t.extras;return e.hooks.beforePreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),Wl(function(t){var n=new bv(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),(0,Ks.U)(function(t){return Object.assign(Object.assign({},t),{guards:(n=t.targetSnapshot,r=t.currentSnapshot,i=e.rootContexts,o=n._root,_y(o,r?r._root:null,i,[o.value]))});var n,r,i,o}),function(t,e){return(0,fl.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?(0,Xc.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,Js.D)(t).pipe((0,fl.zg)(function(t){return function(t,e,n,r,i){var o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,Xc.of)(!0);var a=o.map(function(o){var a,s=wy(o,e,i);if(function(t){return t&&Zg(t.canDeactivate)}(s))a=jv(s.canDeactivate(t,e,n,r));else{if(!Zg(s))throw new Error("Invalid CanDeactivate guard");a=jv(s(t,e,n,r))}return a.pipe(Hl())});return(0,Xc.of)(a).pipe(Gg())}(t.component,t.route,n,e,r)}),Hl(function(t){return!0!==t},!0))}(s,r,i,t).pipe((0,fl.zg)(function(n){return n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,Js.D)(e).pipe(dl(function(e){return(0,hl.z)(function(t,e){return null!==t&&e&&e(new xv(t)),(0,Xc.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Iv(t)),(0,Xc.of)(!0)}(e.route,r),function(t,e,n){var r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(function(t){return function(t){var e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)}).filter(function(t){return null!==t}).map(function(e){return(0,qs.P)(function(){var i=e.guards.map(function(i){var o,a=wy(i,e.node,n);if(function(t){return t&&Zg(t.canActivateChild)}(a))o=jv(a.canActivateChild(r,t));else{if(!Zg(a))throw new Error("Invalid CanActivateChild guard");o=jv(a(r,t))}return o.pipe(Hl())});return(0,Xc.of)(i).pipe(Gg())})});return(0,Xc.of)(i).pipe(Gg())}(t,e.path,n),function(t,e,n){var r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Xc.of)(!0);var i=r.map(function(r){return(0,qs.P)(function(){var i,o=wy(r,e,n);if(function(t){return t&&Zg(t.canActivate)}(o))i=jv(o.canActivate(e,t));else{if(!Zg(o))throw new Error("Invalid CanActivate guard");i=jv(o(e,t))}return i.pipe(Hl())})});return(0,Xc.of)(i).pipe(Gg())}(t,e.route,n))}),Hl(function(t){return!0!==t},!0))}(r,a,t,e):(0,Xc.of)(n)}),(0,Ks.U)(function(t){return Object.assign(Object.assign({},n),{guardsResult:t})}))})}(e.ngModule.injector,function(t){return e.triggerEvent(t)}),Wl(function(t){if(Hg(t.guardsResult)){var n=Ov('Redirecting to "'.concat(e.serializeUrl(t.guardsResult),'"'));throw n.url=t.guardsResult,n}var r=new wv(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);e.triggerEvent(r)}),(0,Qc.h)(function(t){return!!t.guardsResult||(e.restoreHistory(t),e.cancelNavigationTransition(t,""),!1)}),Py(function(t){if(t.guards.canActivateChecks.length)return(0,Xc.of)(t).pipe(Wl(function(t){var n=new _v(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}),Ys(function(t){var n,r,i=!1;return(0,Xc.of)(t).pipe((n=e.paramsInheritanceStrategy,r=e.ngModule.injector,(0,fl.zg)(function(t){var e=t.targetSnapshot,i=t.guards.canActivateChecks;if(!i.length)return(0,Xc.of)(t);var o=0;return(0,Js.D)(i).pipe(dl(function(t){return function(t,e,n,r){return function(t,e,n,r){var i=Object.keys(t);if(0===i.length)return(0,Xc.of)({});var o={};return(0,Js.D)(i).pipe((0,fl.zg)(function(i){return function(t,e,n,r){var i=wy(t,e,r);return jv(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Wl(function(t){o[i]=t}))}),sv(1),(0,fl.zg)(function(){return Object.keys(o).length===i.length?(0,Xc.of)(o):sl.E}))}(t._resolve,t,e,r).pipe((0,Ks.U)(function(e){return t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),mg(t,n).resolve),null}))}(t.route,e,n,r)}),Wl(function(){return o++}),sv(1),(0,fl.zg)(function(e){return o===i.length?(0,Xc.of)(t):sl.E}))})),Wl({next:function(){return i=!0},complete:function(){i||(e.restoreHistory(t),e.cancelNavigationTransition(t,"At least one route resolver didn't emit any value."))}}))}),Wl(function(t){var n=new Sv(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.triggerEvent(n)}))}),Py(function(t){var n=t.extras;return e.hooks.afterPreactivation(t.targetSnapshot,{navigationId:t.id,appliedUrlTree:t.extractedUrl,rawUrlTree:t.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),(0,Ks.U)(function(t){var n,r,i,o=(i=Tg(e.routeReuseStrategy,(n=t.targetSnapshot)._root,(r=t.currentRouterState)?r._root:void 0),new vg(i,n));return Object.assign(Object.assign({},t),{targetRouterState:o})}),Wl(function(t){e.currentUrlTree=t.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(e.currentUrlTree,t.rawUrl),e.routerState=t.targetRouterState,"deferred"===e.urlUpdateStrategy&&(t.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,t),e.browserUrlTree=t.urlAfterRedirects)}),(i=e.rootContexts,o=e.routeReuseStrategy,a=function(t){return e.triggerEvent(t)},(0,Ks.U)(function(t){return new Bg(o,t.targetRouterState,t.currentRouterState,a).activate(i),t})),Wl({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){var n="Navigation ID ".concat(t.id," is not equal to the current navigation id ").concat(e.navigationId);"replace"===e.canceledNavigationResolution?(e.restoreHistory(t),e.cancelNavigationTransition(t,n)):e.cancelNavigationTransition(t,n)}e.currentNavigation=null},function(t){return t.lift(new hv(r))}),zs(function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=Hg(r.url);i||(e.navigated=!0,e.restoreHistory(t,!0));var o=new gv(t.id,e.serializeUrl(t.extractedUrl),r.message);n.next(o),i?setTimeout(function(){var n=e.urlHandlingStrategy.merge(r.url,e.rawUrlTree);e.scheduleNavigation(n,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{e.restoreHistory(t,!0);var a=new yv(t.id,e.serializeUrl(t.extractedUrl),r);n.next(a);try{t.resolve(e.errorHandler(r))}catch(hE){t.reject(hE)}}var s;return sl.E}))}))}},{key:"resetRootComponentType",value:function(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}},{key:"setTransition",value:function(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var t=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(e){var n=t.extractLocationChangeInfoFromEvent(e);t.shouldScheduleNavigation(t.lastLocationChangeInfo,n)&&setTimeout(function(){var e=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var a=Object.assign({},r);delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(o.state=a)}t.scheduleNavigation(i,e,r,o)},0),t.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(t,e){if(!t)return!0;var n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(t){this.events.next(t)}},{key:"resetConfig",value:function(t){Kg(t),this.config=t.map(Xg),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.relativeTo,r=e.queryParams,i=e.fragment,o=e.queryParamsHandling,a=e.preserveFragment,s=n||this.routerState.root,u=a?this.currentUrlTree.fragment:i,c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),Cg(s,this.currentUrlTree,t,c,null!=u?u:null)}},{key:"navigateByUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=Hg(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return zy(t),this.navigateByUrl(this.createUrlTree(t,e),e)}},{key:"serializeUrl",value:function(t){return this.urlSerializer.serialize(t)}},{key:"parseUrl",value:function(t){var e;try{e=this.urlSerializer.parse(t)}catch(jO){e=this.malformedUriErrorHandler(jO,this.urlSerializer,t)}return e}},{key:"isActive",value:function(t,e){var n;if(n=!0===e?Object.assign({},Vy):!1===e?Object.assign({},Zy):e,Hg(t))return Bv(this.currentUrlTree,t,n);var r=this.parseUrl(t);return Bv(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return null!=r&&(e[n]=r),e},{})}},{key:"processNavigations",value:function(){var t=this;this.navigations.subscribe(function(e){t.navigated=!0,t.lastSuccessfulId=e.id,t.currentPageId=e.targetPageId,t.events.next(new vv(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(t.currentUrlTree))),t.lastSuccessfulNavigation=t.currentNavigation,e.resolve(!0)},function(e){t.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(t,e,n,r,i){var o,a;if(this.disposed)return Promise.resolve(!1);var s,u,c,l=this.getTransition(),h="imperative"!==e&&"imperative"===(null==l?void 0:l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===t.toString();if(h&&f)return Promise.resolve(!0);i?(s=i.resolve,u=i.reject,c=i.promise):c=new Promise(function(t,e){s=t,u=e});var d,p=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(a=this.browserPageId)&&void 0!==a?a:0)+1):d=0,this.setTransition({id:p,targetPageId:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(function(t){return Promise.reject(t)})}},{key:"setBrowserUrl",value:function(t,e){var n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"restoreHistory",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var i=this.currentPageId-t.targetPageId,o="popstate"===t.source||"eager"===this.urlUpdateStrategy||this.currentUrlTree===(null===(e=this.currentNavigation)||void 0===e?void 0:e.finalUrl);o&&0!==i?this.location.historyGo(i):this.currentUrlTree===(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(t,e){var n=new gv(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}},{key:"generateNgRouterState",value:function(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(sn(Ke),sn(Kv),sn(jy),sn(Sa),sn(Kr),sn(na),sn(Ao),sn(void 0))},t.\u0275prov=D({token:t,factory:t.\u0275fac}),t}();function zy(t){for(var e=0;e<t.length;e++){var n=t[e];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(e))}}var Gy,Wy=function(){var t=function(){function t(e,n,r,o,a){(0,i.Z)(this,t),this.parentContexts=e,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new co,this.deactivateEvents=new co,this.name=o||Av,e.onChildOutletCreated(this.name,this)}return(0,r.Z)(t,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var t=this.activated;return this.activated=null,this._activatedRoute=null,t}},{key:"attach",value:function(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}},{key:"deactivate",value:function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}},{key:"activateWith",value:function(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;var n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Ky(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(ei(jy),ei(Ki),ei(gi),("name",function(t,e){var n=t.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(be(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===e)return n[i+1];i+=2}}return null}(Gt(),"name")),ei(qi))},t.\u0275dir=bt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t}(),Ky=function(){function t(e,n,r){(0,i.Z)(this,t),this.route=e,this.childContexts=n,this.parent=r}return(0,r.Z)(t,[{key:"get",value:function(t,e){return t===yg?this.route:t===jy?this.childContexts:this.parent.get(t,e)}}]),t}(),Jy=function(){return function(){this.busyCnt=0}}(),Yy=function(t){function e(e){var n=t.call(this)||this;return n._router=e,n._fbAuth=_l().auth(),n._log=fu.create("AuthService"),n._isSignedOutSubject=new Jf.X(!1),n}return(0,Us.ZT)(e,t),e.prototype.refreshFbToken=function(){var t;return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,null===(t=this._fbAuth.currentUser)||void 0===t?void 0:t.getIdToken(!0)];case 1:return e.sent(),[2]}})})},e.prototype.endBusyAction=function(){this.setState({busyCnt:this.getState().busyCnt-1})},e.prototype.onFbAuthToken=function(){return Ff(this._fbAuth)},e.prototype.onGoogleAuthToken=function(){throw new Error("Error: onGoogleAuthToken not implemented")},e.prototype.onSignedIn=function(){return this.onUser().pipe((0,Ks.U)(function(t){return!!t}))},e.prototype.onSignInInProgress=function(){return this.select(function(t){return t.busyCnt>0})},e.prototype.onUser=function(){return Uf(this._fbAuth).pipe(this._delayWhileInProgress())},e.prototype.onUserEmail=function(){return this.onUser().pipe((0,Ks.U)(function(t){return t&&t.email}))},e.prototype.onIsSignedOut=function(){return this._isSignedOutSubject},e.prototype.signIn=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return(t=new ll.Z.auth.GoogleAuthProvider).addScope("profile"),t.addScope("email"),[4,this._fbAuth.signInWithPopup(t)];case 1:return e.sent(),[2]}})})},e.prototype.signOut=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this._log.data("signOut"),[4,this._fbAuth.signOut()];case 1:return e.sent(),this._isSignedOutSubject.next(!0),[4,this._router.navigate(["/signin"],{queryParams:"/"===t?{}:{returnUrl:t}})];case 2:return e.sent(),[2]}})})},e.prototype.startBusyAction=function(){this.setState({busyCnt:this.getState().busyCnt+1})},e.prototype.create=function(){return new Jy},e.prototype._delayWhileInProgress=function(){var t=this;return Ys(function(e){return t.onSignInInProgress().pipe(Hl(function(t){return!t}),Nf(e))})},e.\u0275prov=D({token:e,factory:e.\u0275fac=function(t){return new(t||e)(sn(Hy))},providedIn:"root"}),(0,Us.gn)([function(t,e,n){var r=n.value;n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.startBusyAction();var i=r.apply(this,e);return i.then(function(){return t.endBusyAction()},function(){return t.endBusyAction()}),i}},(0,Us.w6)("design:type",Function),(0,Us.w6)("design:paramtypes",[]),(0,Us.w6)("design:returntype",Promise)],e.prototype,"signIn",null),(0,Us.gn)([function(t,e,n){var r=n.value;n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.startBusyAction();var i=r.apply(this,e);return i.then(function(){return t.endBusyAction()},function(){return t.endBusyAction()}),i}},(0,Us.w6)("design:type",Function),(0,Us.w6)("design:paramtypes",[String]),(0,Us.w6)("design:returntype",Promise)],e.prototype,"signOut",null),e}(td),Xy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype.shouldAuthenticate=function(t){return(t.url.startsWith(Yc.extensionServiceUrl)||!!t.url.startsWith(Yc.umbrellaServiceUrl))&&"fb"},e.\u0275prov=D({token:e,factory:e.\u0275fac=function(){var t;return function(n){return(t||(t=Ze(e)))(n||e)}}()}),e}(tv),Qy=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=yt({type:t}),t.\u0275inj=$({imports:[[Ma]]}),t}(),tm=new We("CASTIFY_WEB_API_SERVICE_ENDPOINT"),em=new We("NEW_CASTIFY_WEB_API_SERVICE_ENDPOINT"),nm=function(){function t(t,e,n,r){this._http=t,this._remoteConfig=e,this._apiUrl=n,this._proxyUrl=r}return Object.defineProperty(t.prototype,"_endpoint",{get:function(){return this._apiUrl+"/account/survey"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_maybeProxyEndpoint",{get:function(){return(this._remoteConfig.isFeatureEnabled("useApiProxy")?this._proxyUrl:this._apiUrl)+"/account/survey"},enumerable:!1,configurable:!0}),t.prototype.getSurveyInfo=function(){return this._http.get(this._maybeProxyEndpoint,{headers:{auth:"google"}})},t.prototype.postSurveyInfo=function(t){var e=JSON.stringify(t,function(t,e){return e instanceof Set?Array.from(e):e}),n=this._remoteConfig.isFeatureEnabled("useApiProxy")?this.getStudioBackendRequestBody(t):e;return this._http.post(this._maybeProxyEndpoint,n,{headers:{auth:"google"}})},t.prototype.getStudioBackendRequestBody=function(t){var e={user_type:t.user_type};return t.admin_type&&Object.assign(e,{admin_type:t.admin_type}),t.corporate_type&&Object.assign(e,{corporate_type:Array.from(t.corporate_type)}),t.education_type&&Object.assign(e,{education_type:Array.from(t.education_type)}),t.other_type&&Object.assign(e,{other_type:t.other_type}),t.school_affiliation&&Object.assign(e,{school_affiliation:t.school_affiliation}),e},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh),sn(od),sn(tm),sn(em))},providedIn:Qy}),t}(),rm=new We("ENABLE_PENDO"),im=new We("LAZILY_INITIALIZE_PENDO"),om=new Set(["screencastifye2e@gmail.com","screencastifye2e2@gmail.com"]),am=globalThis,sm=fu.create("PendoInitializerService"),um=function(){function t(t,e,n,r){var i=this;void 0===n&&(n=!1),this._authService=t,this._enablePendo=e,this._lazilyInitializePendo=n,this._surveyClient=r,this._pendoUserIsInitialized=!1,this._userAndSurvey$=new Jf.X(null),this._enablePendo&&this._authService.onUser().pipe(function(t){return t.pipe((0,Qc.h)(function(t){return!!t&&!t.isAnonymous&&!om.has(t.email)}),(0,Ks.U)(function(t){return t}))},function(t){return t.pipe(i._surveyClient?Ys(function(t){return i._surveyClient.getSurveyInfo().pipe((0,Ks.U)(function(e){return{user:t,surveyResponse:e}}))}):(0,Ks.U)(function(t){return{user:t}}))},Kf(1),zs(function(t){return sm.error("Error in loading user and survey data",t),sl.E})).subscribe(function(t){i._userAndSurvey$.next(t),i._pendoUserIsInitialized?i._updatePendoVisitor(t):i._lazilyInitializePendo||i._initializePendoVisitor(t)})}return t._ensurePendoSetup=function(){this._pendoIsSetup||(sm.info("Loading pendo script"),function(t,e,n,r,i){var o,a,s,u,c;for((i=t[r]=t[r]||{})._q=i._q||[],a=0,s=(o=["initialize","identify","updateOptions","pageLoad","track"]).length;a<s;++a)!function(t){i[t]=i[t]||function(){i._q[t===o[0]?"unshift":"push"]([t].concat([].slice.call(arguments,0)))}}(o[a]);(u=e.createElement(n)).async=!0,u.src="https://cdn.pendo.io/agent/static/7d729e1e-f991-4862-4839-ee60b119170e/pendo.js",(c=e.getElementsByTagName(n)[0]).parentNode.insertBefore(u,c)}(window,document,"script","pendo"),this._pendoIsSetup=!0)},t._getPendoInfo=function(t){var e,n,r=t.user,i=t.surveyResponse;if(r.email){var o=null===(n=null===(e=r.email)||void 0===e?void 0:e.split(/([^@]+)$/))||void 0===n?void 0:n[1];if(o)return{visitor:{id:r.uid,name:r.displayName||"[name not available]",email:r.email,role:(null==i?void 0:i.user_type)||"[user type not available]"},account:{id:o,name:o}};sm.error("Attempted to initialize/update pendo visitor with a mal-formed email address",r.email)}else sm.error("Attempted to initialize/update pendo visitor that has no email address.",r)},t.prototype.track=function(e,n){var r,i,o=null===(r=this._userAndSurvey$)||void 0===r?void 0:r.getValue();this._enablePendo&&o&&(t._ensurePendoSetup(),this._pendoUserIsInitialized||this._initializePendoVisitor(o),(null===(i=am.pendo)||void 0===i?void 0:i.track)&&am.pendo.track(e,n))},t.prototype._initializePendoVisitor=function(e){var n,r=e.user,i=e.surveyResponse;if(t._ensurePendoSetup(),null===(n=am.pendo)||void 0===n?void 0:n.initialize){var o=t._getPendoInfo({user:r,surveyResponse:i});sm.info("Initializing Pendo with",o),am.pendo.initialize(o),this._pendoUserIsInitialized=!0}else sm.error("Attempted to initialize pendo visitor, but window.pendo.initialize is not available.")},t.prototype._updatePendoVisitor=function(e){var n,r=e.user,i=e.surveyResponse;if(t._ensurePendoSetup(),null===(n=am.pendo)||void 0===n?void 0:n.updateOptions){var o=t._getPendoInfo({user:r,surveyResponse:i});sm.info("Updating Pendo with",o),am.pendo.updateOptions(o)}else sm.error("Attempted to update pendo visitor, but window.pendo.updateOptions is not available.")},t._pendoIsSetup=!1,t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Yy),sn(rm),sn(im,8),sn(nm,8))}}),t}(),cm=function(){function t(t){this._pendo=t}return t.\u0275fac=function(e){return new(e||t)(sn(um))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[um]}),t}();!function(t){var e=0;t.ensureOnline=function(){0===e&&ll.Z.database().goOnline(),e++},t.goOfflineIfIdle=function(){0==--e&&ll.Z.database().goOffline()}}(Gy||(Gy={}));var lm=function(){function t(){}return t._ref=function(){return ll.Z.database().ref(this.ROOT_REF)},t.get=function(){var t=this;Gy.ensureOnline();var e=function(){t._ref().off("value",r),Gy.goOfflineIfIdle()},n=new m.xQ,r=function(t){e(),n.next(t.val())};return this._ref().on("value",r,function(t){e(),n.error(t)}),n.pipe(Hl()).toPromise()},t.ROOT_REF="/featureRollout",t}(),hm=["gmail.com","googlemail.com","hotmail.com","yahoo.com"],fm=["screencastify.com"],dm=function(){function t(){}return t.prototype.generate=function(t){var e=t.split("@")[1];if(fm.includes(e))return 0;var n=hm.includes(e)?t:e,r=nd().MD5(n).toString();return parseInt(r.slice(0,2),16)/256},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)},providedIn:"root"}),t}(),pm=function(){function t(t,e,n,r){this._appOptions=t,this._chromeRuntime=e,this._bgUserAccount=n,this._domainRandom=r,this._log=fu.create("FeatureRolloutService")}return t.prototype._updateRolloutOptions=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,l,h;return(0,Us.Jh)(this,function(f){switch(f.label){case 0:return[4,this._appOptions.loadedPromise];case 1:return f.sent(),n=(e=t&&t.user||null)&&e.email?this._domainRandom.generate(e.email):.9999,[4,lm.get()];case 2:r=f.sent()||{},i={};try{for(o=(0,Us.XA)(Object.entries(r)),a=o.next();!a.done;a=o.next())s=(0,Us.CR)(a.value,2),c="number"==typeof(u=s[1])?u:u.percentage,i[s[0]]=this._hasMinimumVersion(u)&&n<c}catch(MD){l={error:MD}}finally{try{a&&!a.done&&(h=o.return)&&h.call(o)}finally{if(l)throw l.error}}return this._log.data("Feature rollout config is",i),this._appOptions.setRolloutValues(i),[2]}})})},t.prototype._hasMinimumVersion=function(t){if("number"==typeof t)return!0;var e=this._chromeRuntime.getManifest().version;return rd.isLessOrEqual(t.minVersion,e)},t.prototype.install=function(){var t=this;this._bgUserAccount.onAccount().subscribe(function(e){return t._updateRolloutOptions(e)})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(bf),sn(wf),sn(xf),sn(dm))},providedIn:"root"}),t}();function vm(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new Promise(function(r,i){n.push(function(t){chrome.runtime.lastError?i(chrome.runtime.lastError):r(t)}),t.apply(e,n)})}}var gm={executeScript:vm(chrome.tabs.executeScript,chrome.tabs),insertCSS:vm(chrome.tabs.insertCSS,chrome.tabs),connect:chrome.tabs.connect.bind(chrome.tabs)},ym=function(){function t(t,e,n,r,i,o){var a=this;this._analytics=t,this._recordTool=e,this._auth=n,this._remoteConfig=r,this._upgradeHelper=i,this._pendoService=o,this._jsPath="./feedback-content-script.js",this._log=fu.create("FeedbackBackgroundService"),this._hasAccess$=this._auth.onUser().pipe((0,Qc.h)(function(t){return!!t}),Ys(function(t){return(0,Us.mG)(a,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this._remoteConfig.isEmailDomainInArray(t.email,"feedbackToolMVP")]})})}),Kf(1))}return t.prototype.install=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return chrome.webNavigation?[4,this._remoteConfig.isActivated$.pipe(Hl(function(t){return!!t})).toPromise()]:[2];case 1:return o.sent(),t=this._remoteConfig.isFeatureEnabled("quickFeedbackToolPOC"),[4,this._hasAccess$.pipe(Hl()).toPromise()];case 2:return e=o.sent(),n=t&&e,r=this._onCommitted.bind(this),i=this._remoteConfig.getArray("quickFeedbackToolInjectableURLs"),chrome.webNavigation.onCommitted.addListener(r,{url:i.map(function(t){return{urlMatches:t}})}),n||chrome.webNavigation.onCommitted.removeListener(r),[2]}})})},t.prototype._onCommitted=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this._upgradeHelper.isStudent$.pipe(Hl()).toPromise()];case 1:return e.sent()?[2]:this._remoteConfig.getArray("quickFeedbackToolInjectableURLs").some(function(e){return t.url.match(new RegExp(e))})?[4,this._loadContentScript(t.tabId)]:[2];case 2:return e.sent(),this._setupMessagePort(t.tabId),[2]}})})},t.prototype._loadContentScript=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,gm.executeScript(t,{file:this._jsPath,allFrames:!0,runAt:"document_start"})];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),this._log.error("injecting feedback failed",e),[3,3];case 3:return[2]}})})},t.prototype._setupMessagePort=function(t){var e=this,n=gm.connect(t,{name:"castifyFeedbackTool"});n.onMessage.addListener(function(t){var n,r,i;"analytics"===(null==t?void 0:t.type)&&e._analytics.trackEvent("feedback-tool",null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.action,null===(r=e._user)||void 0===r?void 0:r.email),"pendo"===(null==t?void 0:t.type)&&e._pendoService.track(null===(i=t.data)||void 0===i?void 0:i.action)}),this._sendRecordConfig(n)},t.prototype._sendRecordConfig=function(t){t.postMessage({type:"recordConfig",data:(0,Us.pi)((0,Us.pi)({},this._recordTool.getRecordConfigDefaults()),{embedWebcam:!1,draw:{showToolbox:!0}})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(yf),sn(Ef),sn(Gf),sn(od),sn(kp),sn(um))},providedIn:"root"}),t}(),mm=function(){function t(t){this._http=t,this._endpoint=Yc.dashboardServiceUrl+"/onboarding",this._authConfig={headers:{auth:"google"}}}return t.prototype.completeUserOnboarding=function(t){return this._http.post(this._endpoint,{product:t},this._authConfig).toPromise()},t.prototype.fetchUserOnboarding=function(){return this._http.get(this._endpoint,this._authConfig).toPromise()},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh))},providedIn:"root"}),t}(),bm={extensionAuth:Gf,onboarding:function(){function t(t){this._onboardingClient=t,this._log=fu.create("BgOnboardingService")}return t.prototype.getOnboardingStatus=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._getUserOnboarding()];case 1:return[2,n.sent()[t]];case 2:return e=n.sent(),this._log.info("Failed to load onboarding info, treating as onboarded. Offline?",e),[2,Date.now()];case 3:return[2]}})})},t.prototype.completeOnboarding=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e=this,[4,this._onboardingClient.completeUserOnboarding(t)];case 1:return e._cachedOnboarding=n.sent(),[2,this._cachedOnboarding]}})})},t.prototype._getUserOnboarding=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this._cachedOnboarding?[3,2]:(t=this,[4,this._onboardingClient.fetchUserOnboarding()]);case 1:t._cachedOnboarding=e.sent(),e.label=2;case 2:return[2,this._cachedOnboarding]}})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(mm))},providedIn:"root"}),(0,Us.gn)([eh,(0,Us.w6)("design:type",Function),(0,Us.w6)("design:paramtypes",[]),(0,Us.w6)("design:returntype",Promise)],t.prototype,"_getUserOnboarding",null),t}(),reset:function(){function t(t,e,n){this._chromeStorageService=t,this._filesHelper=e,this._chromeTabs=n,this._log=fu.create("ResetService"),this._tabs=[]}return t.prototype.run=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this._clearData()];case 1:return t.sent(),[4,this._closeAndReloadPages()];case 2:return t.sent(),[2]}})})},t.prototype._clearData=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),this._log.info("clearing data"),[4,this._chromeStorageService.local.clear()];case 1:return e.sent(),[4,this._chromeStorageService.sync.clear()];case 2:return e.sent(),[4,this._filesHelper.clearAll()];case 3:return e.sent(),window.localStorage.clear(),this._log.info("cleared all data"),[3,5];case 4:throw t=e.sent(),this._log.error("clearing data unknown error",t),t;case 5:return[2]}})})},t.prototype._closeAndReloadPages=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Promise.all(this._tabs.map(function(t){return e._chromeTabs.remove([t]).catch(function(){return null})}))];case 1:return n.sent(),this._tabs=[],location.reload(),[3,3];case 2:throw t=n.sent(),this._log.error("reload page unknown error",t),t;case 3:return[2]}})})},t.prototype.track=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return this._tabs.push(t),[2]})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(vf),sn(kf),sn(Sf))},providedIn:"root"}),t}()},wm=function(t){function e(e){return t.call(this,"Servify usage error: "+e)||this}return(0,Us.ZT)(e,t),e}(Error),_m=function(){function t(t,e){this._service=e,this._ports=new Map,this._clientSubscriptions=new Map,this._portName="servify_"+t,this._log=fu.create("ServifyPublisher:"+t)}return t.prototype.publish=function(){var t=this;if(this._log.data("publishing service"),this._subscription)throw new Error;this._subscription=Bs(chrome.runtime.onConnect).subscribe(function(e){var n=(0,Us.CR)(e,1);return t._onConnect(n[0])})},t.prototype._onConnect=function(t){var e=this;t.name===this._portName&&(this._log.data("New connection from",t.sender),this._ports.set(t,new nu(function(n){e._ports.has(t)&&t.postMessage(n)})),this._clientSubscriptions.set(t,new y.w),Bs(t.onMessage).subscribe(function(t){var n=(0,Us.CR)(t,2);return e._onMessage(n[0],n[1])}),Bs(t.onDisconnect).subscribe(function(){e._log.data("Disconnected from",t.sender),e._ports.delete(t),e._clientSubscriptions.get(t).unsubscribe()}))},t.prototype._handleMessage=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){if(t.type in this._service){if(!(e=(n=this._service)[t.type].apply(n,(0,Us.ev)([],(0,Us.CR)(t.data)))))throw new wm("Invalid return type");if(t.type.startsWith("_"))throw new wm(t.type+"is considered private");if(t.type.startsWith("on")){if(!(0,Zs.b)(e))throw this._log.error("Service returned invalid return type",t.type),new wm(t.type+" must return Observable")}else if(!e.then)throw this._log.error("Service returned invalid return type",t.type),new wm(t.type+" must return Promise");return[2,e]}throw new wm("service does not implement "+t.type)})})},t.prototype._onMessage=function(t,e){var n=this._ports.get(e);if(!n.handleMessage(t)){var r=this._handleMessage(t);n.respond(r,t)}},t.prototype.dispose=function(){this._subscription.unsubscribe()},t}(),Sm=function(){function t(t){this._injector=t}return t.prototype.publish=function(t,e){new _m(t,e).publish()},t.prototype.publishAll=function(){var t,e;try{for(var n=(0,Us.XA)(Object.entries(bm)),r=n.next();!r.done;r=n.next()){var i=(0,Us.CR)(r.value,2);this.publish(i[0],this._injector.get(i[1]))}}catch(MD){t={error:MD}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Kr))},providedIn:"root"}),t}(),km=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e}(Yl),Em=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),Object.defineProperty(e,"root",{get:function(){return this._getRoot("/youtubeUploadTasks")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"queueTopicSuffix",{get:function(){return"simpleTask2"},enumerable:!1,configurable:!0}),e.Collection=km,e.taskType="FisYoutubeUploadTask",(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"userId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"driveFileId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"traceContext",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"privacy",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"channelId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"title",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"description",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Boolean)],e.prototype,"addWatermark",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Boolean)],e.prototype,"watermarkAdded",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"youtubeInfo",void 0),e}(fh),xm=function(){function t(t){this._http=t}return t.prototype.createJob=function(t){return this._http.post(Yc.extensionServiceUrl+"/youtubeUploads/upload",t).toPromise()},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Zh))},providedIn:"root"}),t}(),Tm="youtubeSignupRequired",Im=function(t){function e(){return t.call(this,"no job found")||this}return(0,Us.ZT)(e,t),e}(Error),Cm=function(){function t(t,e,n,r){this._bgFiles=t,this._uploadBase=e,this._clientService=n,this._newVideoLimitService=r,this._subscription=new y.w,e.register_("_youtube_remote_2",function(e){function i(t,n){var r=e.call(this,t)||this;return r.config=t,r.jobId=n,r._task=null,r.progress=null,r._log=fu.create("RemoteYoutubeUpload"),r}return(0,Us.ZT)(i,e),i.fromObject=function(t){return new i(t.config,t.jobId)},i.prototype.start=function(){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,9,,10]),e=this.config,this.jobId?[4,this._trackProgress(this.jobId)]:[3,3];case 1:return o.sent(),[4,this._handleComplete()];case 2:return o.sent(),[3,8];case 3:return[4,t.getFileDescriptor(e.fileId)];case 4:return n=o.sent(),[4,this._createJob(n)];case 5:return r=o.sent(),[4,this._trackProgress(r)];case 6:return o.sent(),[4,this._handleComplete()];case 7:o.sent(),o.label=8;case 8:return[3,10];case 9:return i=o.sent(),this._handleError(i),[3,10];case 10:return[2]}})})},i.prototype._createJob=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return[4,r.isNewLimitUserAlwaysEmits$.pipe(Hl()).toPromise()];case 1:return e=o.sent(),[4,n.createJob({driveFileId:t.driveInfo.id,privacy:this.config.privacy,title:this.config.title,channelId:this.config.channelId,description:this.config.description||"",addWatermark:e})];case 2:return i=o.sent(),this.jobId=i.taskId,this._log.data("Task id is %s",this.jobId),[2,i.taskId]}})})},i.prototype._getYoutubeInfo=function(t){return{id:t.id,channelId:t.snippet.channelId}},i.prototype._trackProgress=function(t){var e=this;return(0,Js.D)(Em.root.getById(t)).pipe((0,Ks.U)(function(t){if(!t)throw new Im;return e._task=t,t}),Ys(function(t){return t.onProgressNum()}),Wl(function(t){e.progress=t,e.onProgress()}),lv()).toPromise()},i.prototype._handleError=function(t){this._log.warn("original error is",t);var e=!1,n="unknown";t instanceof Im?(e=!1,n=t.message):"unavailable"===t.code?(e=!0,n=t.message):t.status<=0?(e=!0,n=t.statusText||n):t.msg===Tm?(e=!1,n=t.msg):t.status>=500&&t.status<=600||t.config&&!1===t.config.authAutoRetry&&401===t.status?(e=!0,n=t.statusText||n):401===t.status?(e=!1,n=t.statusText||n):"no_youtube_credentials"===t.msg&&(e=!1,n=t.msg),this.onError({isTransient:e,reason:n})},i.prototype._handleComplete=function(){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,Em.root.getById(this._task.id)];case 1:return e=n.sent(),this._task=e,this.handleComplete_(e.youtubeInfo),t.updateYoutubeInfo(this.config.fileId,this._getYoutubeInfo(e.youtubeInfo)),this.openLink="http://youtu.be/"+e.youtubeInfo.id,this.onComplete(),[2]}})})},i.prototype.toObject=function(){return{config:this.config,jobId:this.jobId}},i}(e))}return t.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},t.prototype.install=function(){},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Tf),sn(If),sn(xm),sn(fp))},providedIn:"root"}),t}(),Am=function(){function t(t,e,n){var r=this;this._auth=t,this._remoteConfig=e,this._pendoService=n,this._contentScriptBundle="./host-flow-content-script.js",this._log=fu.create("HostFlowInjectorService"),this._hasAccess$=this._auth.onUser().pipe((0,Qc.h)(function(t){return!!t}),Ys(function(t){return(0,Us.mG)(r,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return[2,this._remoteConfig.isEmailDomainInArray(t.email,"submitInClassroomMVP")]})})}),Kf(1))}return t.prototype.install=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return chrome.webNavigation?[4,this._remoteConfig.isActivated$.pipe(Hl(function(t){return!!t})).toPromise()]:(this._log.data("tab permissions are not enabled, skipping"),[2]);case 1:return i.sent(),t=this._remoteConfig.isFeatureEnabled("submitInClassroomPOC"),[4,this._hasAccess$.pipe(Hl()).toPromise()];case 2:return e=i.sent(),n=t&&e,r=this._onCommitted.bind(this),n&&chrome.webNavigation.onCommitted.addListener(r,{url:[{urlContains:"classroom.google.com"}]}),[2]}})})},t.prototype._onCommitted=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return 0!==t.frameId?[2]:t.url.match(new RegExp("classroom.google.com/"))?[4,chrome.tabs.executeScript(t.tabId,{file:this._contentScriptBundle,allFrames:!1,runAt:"document_start"})]:[2];case 1:return e.sent(),this._setupMessagePort(),[2]}})})},t.prototype._setupMessagePort=function(){var t=this;chrome.runtime.onConnect.addListener(function(e){"submitButtonInClassroom"===e.name&&e.onMessage.addListener(function(e){var n;"pendo"===(null==e?void 0:e.type)&&t._pendoService.track(null===(n=e.data)||void 0===n?void 0:n.action)})})},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(Gf),sn(od),sn(um))},providedIn:"root"}),t}(),Mm=function(){function t(t,e,n,r,i,o,a,s,u){this._bgUserAccount=t,this._extensionAuth=e,this._featureRollout=n,this._feedbackBackgroundService=r,this._remoteConfig=i,this._remoteLogger=o,this._servify=a,this._ytUploader=s,this._hostFlowInjector=u}return t.prototype.install=function(){this._ytUploader.install(),this._featureRollout.install(),this._feedbackBackgroundService.install(),this._hostFlowInjector.install(),this._servify.publish("userAccount",this._bgUserAccount),this._servify.publishAll(),this._extensionAuth.install(),Yc.production&&this._remoteLogger.install({appName:"EXTENSION_BACKGROUND",buildId:chrome.runtime.getManifest().version_name}),this._remoteConfig.init(!0)},t.\u0275prov=D({token:t,factory:t.\u0275fac=function(e){return new(e||t)(sn(xf),sn(Gf),sn(pm),sn(ym),sn(od),sn(lf),sn(Sm),sn(Cm),sn(Am))},providedIn:"root"}),t}(),Rm=function(){function t(t){this.upgrade=t}return t.prototype.ngDoBootstrap=function(){var t=document.createElement("div");document.body.appendChild(t),this.upgrade.bootstrap(t,["castifyExt.bgApp"],{strictDi:!1})},t.\u0275fac=function(e){return new(e||t)(sn(js))},t.\u0275mod=yt({type:t}),t.\u0275inj=$({providers:[{provide:au,useExisting:xf},{provide:su,useExisting:Gf},{provide:rm,useValue:Yc.production},{provide:im,useValue:!0},{provide:Yy,useExisting:Gf},{provide:tm,useValue:Yc.apiUrl},{provide:em,useValue:Yc.newCastifyApiUrl},{provide:tv,useClass:Xy},{provide:zh,useClass:ev,multi:!0},{provide:Qp,useExisting:Gf},{provide:_h,useClass:Hp},{provide:Jp,useValue:Yc.umbrellaServiceUrl}],imports:[[Ma,js,cs,pf,Pf,Ep,rf,Qy,cm]]}),t}();ls.module("castifyExt.castifyAuth",[]).factory("castifyAuth",Ps(Gf)).factory("googleauth",["castifyAuth","$q",function(t,e){return{loadClient:function(){return e.when()},getAuthToken:function(e){t.getAuthToken(ls.isObject(e)?e:{interactive:!!e})}}}]),ls.module("cf2.background",[]).factory("cf2InAppTabService",Ps(xp)).factory("cf2BgMessagesService",Ps(mp)).factory("bgCastifyAuth",Ps(Gf)).factory("authService",Ps(Gf)).factory("ExportClientService",Ps(qp)).factory("cf2SupportArticlesService",Ps(Zp)).factory("cf2BgUsageStatsService",Ps(Of)).factory("cf2UpgradeHelperService",Ps(kp)).factory("cf2BgCastifyDrawService",Ps(Fp)).factory("cf2RemoteConfigService",Ps(od)).factory("cf2SpeechDetectionService",Ps(Wp)).factory("bgCf2OnlyServices",Ps(Mm)).factory("cf2UmbrellaService",Ps(Xp)),n(97154);var Om=function(t,e){return(Om=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Pm(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Nm,Dm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$m=$m||{},Lm=Dm||self;function jm(){}function Um(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Fm(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Bm="closure_uid_"+(1e9*Math.random()>>>0),qm=0;function Vm(t,e,n){return t.call.apply(t.bind,arguments)}function Zm(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Hm(t,e,n){return(Hm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vm:Zm).apply(null,arguments)}function zm(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Gm(){return Date.now()}function Wm(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Km(){this.j=this.j,this.i=this.i}Km.prototype.j=!1,Km.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Bm)&&t[Bm]||(t[Bm]=++qm)}(this)},Km.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Jm=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ym=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Xm(t){return Array.prototype.concat.apply([],arguments)}function Qm(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function tb(t){return/^[\s\xa0]*$/.test(t)}var eb,nb=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function rb(t,e){return-1!=t.indexOf(e)}function ib(t,e){return t<e?-1:t>e?1:0}t:{var ob=Lm.navigator;if(ob){var ab=ob.userAgent;if(ab){eb=ab;break t}}eb=""}function sb(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ub(t){var e={};for(var n in t)e[n]=t[n];return e}var cb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lb(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<cb.length;o++)n=cb[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function hb(t){return hb[" "](t),t}hb[" "]=jm;var fb,db,pb=rb(eb,"Opera"),vb=rb(eb,"Trident")||rb(eb,"MSIE"),gb=rb(eb,"Edge"),yb=gb||vb,mb=rb(eb,"Gecko")&&!(rb(eb.toLowerCase(),"webkit")&&!rb(eb,"Edge"))&&!(rb(eb,"Trident")||rb(eb,"MSIE"))&&!rb(eb,"Edge"),bb=rb(eb.toLowerCase(),"webkit")&&!rb(eb,"Edge");function wb(){var t=Lm.document;return t?t.documentMode:void 0}t:{var _b="",Sb=(db=eb,mb?/rv:([^\);]+)(\)|;)/.exec(db):gb?/Edge\/([\d\.]+)/.exec(db):vb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(db):bb?/WebKit\/(\S+)/.exec(db):pb?/(?:Version)[ \/]?(\S+)/.exec(db):void 0);if(Sb&&(_b=Sb?Sb[1]:""),vb){var kb=wb();if(null!=kb&&kb>parseFloat(_b)){fb=String(kb);break t}}fb=_b}var Eb={};function xb(t){return function(t,e){var n=Eb;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=nb(String(fb)).split("."),r=nb(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ib(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ib(0==a[2].length,0==s[2].length)||ib(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e})}var Tb=Lm.document&&vb&&(wb()||parseInt(fb,10))||void 0,Ib=!vb||9<=Number(Tb),Cb=vb&&!xb("9"),Ab=function(){if(!Lm.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Lm.addEventListener("test",jm,e),Lm.removeEventListener("test",jm,e)}catch(n){}return t}();function Mb(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Rb(t,e){if(Mb.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(mb){t:{try{hb(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ob[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Mb.prototype.b=function(){this.defaultPrevented=!0},Wm(Rb,Mb);var Ob={2:"touch",3:"pen",4:"mouse"};Rb.prototype.b=function(){Rb.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Cb)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Pb="closure_listenable_"+(1e6*Math.random()|0),Nb=0;function Db(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Nb,this.Y=this.Z=!1}function $b(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Lb(t){this.src=t,this.a={},this.b=0}function jb(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Jm(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&($b(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ub(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Lb.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Ub(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new Db(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Fb="closure_lm_"+(1e6*Math.random()|0),Bb={};function qb(t,e,n,r,i){if(r&&r.once)return Zb(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)qb(t,e[o],n,r,i);return null}return n=Xb(n),t&&t[Pb]?t.va(e,n,Fm(r)?!!r.capture:!!r,i):Vb(t,e,n,!1,r,i)}function Vb(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Fm(i)?!!i.capture:!!i;if(a&&!Ib)return null;var s=Jb(t);if(s||(t[Fb]=s=new Lb(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Kb,e=Ib?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ab||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Gb(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Zb(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Zb(t,e[o],n,r,i);return null}return n=Xb(n),t&&t[Pb]?t.wa(e,n,Fm(r)?!!r.capture:!!r,i):Vb(t,e,n,!0,r,i)}function Hb(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Hb(t,e[o],n,r,i);else r=Fm(r)?!!r.capture:!!r,n=Xb(n),t&&t[Pb]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Ub(o=t.a[e],n,r,i))&&($b(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Jb(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ub(e,n,r,i)),(n=-1<t?e[t]:null)&&zb(n))}function zb(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Pb])jb(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Gb(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Jb(e))?(jb(n,t),0==n.b&&(n.src=null,e[Fb]=null)):$b(t)}}}function Gb(t){return t in Bb?Bb[t]:Bb[t]="on"+t}function Wb(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&zb(t),n.call(r,e)}function Kb(t,e){if(t.Y)return!0;if(!Ib){if(!e)t:{e=["window","event"];for(var n=Lm,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Wb(t,e=new Rb(e,this))}return Wb(t,new Rb(e,this))}function Jb(t){return(t=t[Fb])instanceof Lb?t:null}var Yb="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xb(t){return"function"==typeof t?t:(t[Yb]||(t[Yb]=function(e){return t.handleEvent(e)}),t[Yb])}function Qb(){Km.call(this),this.c=new Lb(this),this.J=this,this.C=null}function tw(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Mb(e,t);else if(e instanceof Mb)e.target=e.target||t;else{var i=e;lb(e=new Mb(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=ew(a,r,!0,e)&&i}if(i=ew(a=e.a=t,r,!0,e)&&i,i=ew(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ew(a=e.a=n[o],r,!1,e)&&i}function ew(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&jb(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Wm(Qb,Km),Qb.prototype[Pb]=!0,(Nm=Qb.prototype).addEventListener=function(t,e,n,r){qb(this,t,e,n,r)},Nm.removeEventListener=function(t,e,n,r){Hb(this,t,e,n,r)},Nm.G=function(){if(Qb.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)$b(n[r]);delete e.a[t],e.b--}}this.C=null},Nm.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Nm.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var nw=Lm.JSON.stringify;function rw(){this.b=this.a=null}var iw,ow=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new sw},function(t){t.reset()});function aw(){var t=hw,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function sw(){this.next=this.b=this.a=null}function uw(t){Lm.setTimeout(function(){throw t},0)}function cw(t,e){iw||function(){var t=Lm.Promise.resolve(void 0);iw=function(){t.then(fw)}}(),lw||(iw(),lw=!0),hw.add(t,e)}rw.prototype.add=function(t,e){var n=ow.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},sw.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},sw.prototype.reset=function(){this.next=this.b=this.a=null};var lw=!1,hw=new rw;function fw(){for(var t;t=aw();){try{t.a.call(t.b)}catch(n){uw(n)}var e=ow;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}lw=!1}function dw(t,e){Qb.call(this),this.b=t||1,this.a=e||Lm,this.f=Hm(this.Za,this),this.g=Gm()}function pw(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function vw(t,e,n){if("function"==typeof t)n&&(t=Hm(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Hm(t.handleEvent,t)}return 2147483647<Number(e)?-1:Lm.setTimeout(t,e||0)}function gw(t){t.a=vw(function(){t.a=null,t.c&&(t.c=!1,gw(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Wm(dw,Qb),(Nm=dw.prototype).aa=!1,Nm.M=null,Nm.Za=function(){if(this.aa){var t=Gm()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),tw(this,"tick"),this.aa&&(pw(this),this.start()))}},Nm.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Gm())},Nm.G=function(){dw.X.G.call(this),pw(this),delete this.a};var yw=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Om(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:gw(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Lm.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Km);function mw(t){Km.call(this),this.b=t,this.a={}}Wm(mw,Km);var bw=[];function ww(t,e,n,r){Array.isArray(n)||(n&&(bw[0]=n.toString()),n=bw);for(var i=0;i<n.length;i++){var o=qb(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function _w(t){sb(t.a,function(t,e){this.a.hasOwnProperty(e)&&zb(t)},t),t.a={}}function Sw(){this.a=!0}function kw(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return nw(n)}catch(s){return e}}(t,n)+(r?" "+r:"")})}mw.prototype.G=function(){mw.X.G.call(this),_w(this)},mw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Sw.prototype.info=function(){};var Ew={},xw=null;function Tw(){return xw=xw||new Qb}function Iw(t){Mb.call(this,Ew.Fa,t)}function Cw(t){var e=Tw();tw(e,new Iw(e,t))}function Aw(t,e){Mb.call(this,Ew.STAT_EVENT,t),this.stat=e}function Mw(t){var e=Tw();tw(e,new Aw(e,t))}function Rw(t){Mb.call(this,Ew.Ga,t)}function Ow(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Lm.setTimeout(function(){t()},e)}Ew.Fa="serverreachability",Wm(Iw,Mb),Ew.STAT_EVENT="statevent",Wm(Aw,Mb),Ew.Ga="timingevent",Wm(Rw,Mb);var Pw={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Nw={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Dw(){}function $w(){}Dw.prototype.a=null;var Lw,jw={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Uw(){Mb.call(this,"d")}function Fw(){Mb.call(this,"c")}function Bw(){}function qw(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new mw(this),this.P=Vw,this.R=new dw(t=yb?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Wm(Uw,Mb),Wm(Fw,Mb),Wm(Bw,Dw),Lw=new Bw;var Vw=45e3,Zw={},Hw={};function zw(t,e,n){t.H=1,t.i=p_(u_(e)),t.j=n,t.I=!0,Gw(t,null)}function Gw(t,e){t.u=Gm(),Jw(t),t.l=u_(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),I_(n.b,"t",r),t.D=0,t.a=_S(t.g,t.g.C?e:null),0<t.O&&(t.F=new yw(Hm(t.Ca,t,t.a),t.O)),ww(t.J,t.a,"readystatechange",t.Xa),e=t.B?ub(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Cw(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ww(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Kw(t,n);if(i==Hw){4==e&&(t.h=4,Mw(14),r=!1),kw(t.c,t.f,null,"[Incomplete Response]");break}if(i==Zw){t.h=4,Mw(15),kw(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}kw(t.c,t.f,i,null),e_(t,i)}4==e&&0==n.length&&(t.h=1,Mw(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),dS(e),e.F=!0,Mw(11))):(kw(t.c,t.f,n,"[Invalid Chunked Response]"),t_(t),Qw(t))}function Kw(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Hw:(n=Number(e.substring(n,r)),isNaN(n)?Zw:(r+=1)+n>e.length?Hw:(e=e.substr(r,n),t.D=r+n,e))}function Jw(t){t.T=Gm()+t.P,Yw(t,t.P)}function Yw(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ow(Hm(t.Va,t),e)}function Xw(t){t.o&&(Lm.clearTimeout(t.o),t.o=null)}function Qw(t){0==t.g.v||t.A||gS(t.g,t)}function t_(t){Xw(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,pw(t.R),_w(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function e_(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||N_(n.b,t)))if(n.I=t.N,!t.C&&N_(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(eO){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;vS(n),iS(n)}fS(n),Mw(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ow(Hm(n.Sa,n),6e3));if(1>=P_(n.b)&&n.ea){try{n.ea()}catch(eO){}n.ea=void 0}}else mS(n,11)}else if((t.C||n.a==t)&&vS(n),!tb(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(rb(l,"spdy")||rb(l,"quic")||rb(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(D_(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,d_(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Gm()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=wS(u,u.C?u.ga:null,u.fa),d.C){$_(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Xw(p),Jw(p)),u.a=d}else hS(u);0<n.g.length&&sS(n)}else"stop"!=i[0]&&"close"!=i[0]||mS(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?mS(n,7):rS(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Cw(4)}catch(eO){}}function n_(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Um(t)||"string"==typeof t)Ym(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Um(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Um(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function r_(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof r_)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function i_(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];o_(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)o_(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function o_(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Nm=qw.prototype).setTimeout=function(t){this.P=t},Nm.Xa=function(t){t=t.target;var e=this.F;e&&3==Q_(t)?e.f():this.Ca(t)},Nm.Ca=function(t){try{if(t==this.a)t:{var e=Q_(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!yb&&!this.a.$())){this.A||4!=e||7==n||Cw(8==n||0>=r?3:2),Xw(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tb(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,Mw(12),t_(this),Qw(this);break t}kw(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,e_(this,u)}this.I?(Ww(this,e,o),yb&&this.b&&3==e&&(ww(this.J,this.R,"tick",this.Wa),this.R.start())):(kw(this.c,this.f,o,null),e_(this,o)),4==e&&t_(this),this.b&&!this.A&&(4==e?gS(this.g,this):(this.b=!1,Jw(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Mw(12)):(this.h=0,Mw(13)),t_(this),Qw(this)}}}catch(ai){}},Nm.Wa=function(){if(this.a){var t=Q_(this.a),e=this.a.$();this.D<e.length&&(Xw(this),Ww(this,t,e),this.b&&4!=t&&Jw(this))}},Nm.cancel=function(){this.A=!0,t_(this)},Nm.Va=function(){this.o=null;var t=Gm();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Cw(3),Mw(17)),t_(this),this.h=2,Qw(this)):Yw(this,this.T-t)},(Nm=r_.prototype).K=function(){i_(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Nm.L=function(){return i_(this),this.a.concat()},Nm.get=function(t,e){return o_(this.b,t)?this.b[t]:e},Nm.set=function(t,e){o_(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Nm.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var a_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function s_(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof s_){this.a=void 0!==e?e:t.a,c_(this,t.f),this.j=t.j,l_(this,t.c),h_(this,t.h),this.g=t.g,e=t.b;var n=new k_;n.c=e.c,e.a&&(n.a=new r_(e.a),n.b=e.b),f_(this,n),this.i=t.i}else t&&(n=String(t).match(a_))?(this.a=!!e,c_(this,n[1]||"",!0),this.j=v_(n[2]||""),l_(this,n[3]||"",!0),h_(this,n[4]),this.g=v_(n[5]||"",!0),f_(this,n[6]||"",!0),this.i=v_(n[7]||"")):(this.a=!!e,this.b=new k_(null,this.a))}function u_(t){return new s_(t)}function c_(t,e,n){t.f=n?v_(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function l_(t,e,n){t.c=n?v_(e,!0):e}function h_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function f_(t,e,n){e instanceof k_?(t.b=e,function(t,e){e&&!t.f&&(E_(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(x_(this,e),I_(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=g_(e,__)),t.b=new k_(e,t.a))}function d_(t,e,n){t.b.set(e,n)}function p_(t){return d_(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Gm()).toString(36)),t}function v_(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function g_(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,y_),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function y_(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}s_.prototype.toString=function(){var t=[],e=this.f;e&&t.push(g_(e,m_,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(g_(e,m_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(g_(n,"/"==n.charAt(0)?w_:b_,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",g_(n,S_)),t.join("")};var m_=/[#\/\?@]/g,b_=/[#\?:]/g,w_=/[#\?]/g,__=/[#\?@]/g,S_=/#/g;function k_(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function E_(t){t.a||(t.a=new r_,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function x_(t,e){E_(t),e=C_(t,e),o_(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,o_((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&i_(t)))}function T_(t,e){return E_(t),e=C_(t,e),o_(t.a.b,e)}function I_(t,e,n){x_(t,e),0<n.length&&(t.c=null,t.a.set(C_(t,e),Qm(n)),t.b+=n.length)}function C_(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Nm=k_.prototype).add=function(t,e){E_(this),this.c=null,t=C_(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Nm.forEach=function(t,e){E_(this),this.a.forEach(function(n,r){Ym(n,function(n){t.call(e,n,r,this)},this)},this)},Nm.L=function(){E_(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Nm.K=function(t){E_(this);var e=[];if("string"==typeof t)T_(this,t)&&(e=Xm(e,this.a.get(C_(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Xm(e,t[n])}return e},Nm.set=function(t,e){return E_(this),this.c=null,T_(this,t=C_(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Nm.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Nm.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var A_=function(){return function(t,e){this.b=t,this.a=e}}();function M_(t){this.g=t||R_,t=Lm.PerformanceNavigationTiming?0<(t=Lm.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Lm.ia&&Lm.ia.ya&&Lm.ia.ya()&&Lm.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var R_=10;function O_(t){return!!t.b||!!t.a&&t.a.size>=t.f}function P_(t){return t.b?1:t.a?t.a.size:0}function N_(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function D_(t,e){t.a?t.a.add(e):t.b=e}function $_(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function L_(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Pm(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Qm(t.c)}function j_(){}function U_(){this.a=new j_}function F_(t,e,n){var r=n||"";try{n_(t,function(t,n){var i=t;Fm(t)&&(i=nw(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(jO){throw e.push(r+"type="+encodeURIComponent("_badmap")),jO}}function B_(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}M_.prototype.cancel=function(){var t,e;if(this.c=L_(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Pm(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(MD){t={error:MD}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},j_.prototype.stringify=function(t){return Lm.JSON.stringify(t,void 0)},j_.prototype.parse=function(t){return Lm.JSON.parse(t,void 0)};var q_=Lm.JSON.parse;function V_(t){Qb.call(this),this.headers=new r_,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Z_,this.D=this.F=!1}Wm(V_,Qb);var Z_="",H_=/^https?$/i,z_=["POST","PUT"];function G_(t){return"content-type"==t.toLowerCase()}function W_(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,K_(t),Y_(t)}function K_(t){t.u||(t.u=!0,tw(t,"complete"),tw(t,"error"))}function J_(t){if(t.b&&void 0!==$m&&(!t.s[1]||4!=Q_(t)||2!=t.W()))if(t.l&&4==Q_(t))vw(t.za,0,t);else if(tw(t,"readystatechange"),4==Q_(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(a_)[1]||null;if(!o&&Lm.self&&Lm.self.location){var a=Lm.self.location.protocol;o=a.substr(0,a.length-1)}i=!H_.test(o?o.toLowerCase():"")}e=i}if(e)tw(t,"complete"),tw(t,"success");else{t.h=6;try{var s=2<Q_(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",K_(t)}}finally{Y_(t)}}}function Y_(t,e){if(t.a){X_(t);var n=t.a,r=t.s[0]?jm:null;t.a=null,t.s=null,e||tw(t,"ready");try{n.onreadystatechange=r}catch(jO){}}}function X_(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Lm.clearTimeout(t.m),t.m=null)}function Q_(t){return t.a?t.a.readyState:0}function tS(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return sb(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):d_(t,e,n))}function eS(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function nS(t){this.pa=0,this.g=[],this.c=new Sw,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=eS("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=eS("baseRetryDelayMs",5e3,t),this.Ra=eS("retryDelaySeedMs",1e4,t),this.Ma=eS("forwardChannelMaxRetries",2,t),this.ma=eS("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new M_(t&&t.concurrentRequestLimit),this.ka=new U_,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function rS(t){if(oS(t),3==t.v){var e=t.R++,n=u_(t.B);d_(n,"SID",t.J),d_(n,"RID",e),d_(n,"TYPE","terminate"),cS(t,n),(e=new qw(t,t.c,e,void 0)).H=2,e.i=p_(u_(n)),n=!1,Lm.navigator&&Lm.navigator.sendBeacon&&(n=Lm.navigator.sendBeacon(e.i.toString(),"")),!n&&Lm.Image&&((new Image).src=e.i,n=!0),n||(e.a=_S(e.g,null),e.a.ba(e.i)),e.u=Gm(),Jw(e)}bS(t)}function iS(t){t.a&&(dS(t),t.a.cancel(),t.a=null)}function oS(t){iS(t),t.j&&(Lm.clearTimeout(t.j),t.j=null),vS(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Lm.clearTimeout(t.h),t.h=null)}function aS(t,e){t.g.push(new A_(t.Oa++,e)),3==t.v&&sS(t)}function sS(t){O_(t.b)||t.h||(t.h=!0,cw(t.Ba,t),t.u=0)}function uS(t,e){var n;n=e?e.f:t.R++;var r=u_(t.B);d_(r,"SID",t.J),d_(r,"RID",n),d_(r,"AID",t.P),cS(t,r),t.i&&t.l&&tS(r,t.i,t.l),n=new qw(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=lS(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),D_(t.b,n),zw(n,r,e)}function cS(t,e){t.f&&n_({},function(t,n){d_(e,n,t)})}function lS(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Hm(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].b)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{F_(l,a,"req"+c+"_")}catch(YS){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function hS(t){t.a||t.j||(t.T=1,cw(t.Aa,t),t.o=0)}function fS(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ow(Hm(t.Aa,t),yS(t,t.o)),t.o++,0))}function dS(t){null!=t.s&&(Lm.clearTimeout(t.s),t.s=null)}function pS(t){t.a=new qw(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=u_(t.la);d_(e,"RID","rpc"),d_(e,"SID",t.J),d_(e,"CI",t.H?"0":"1"),d_(e,"AID",t.P),cS(t,e),d_(e,"TYPE","xmlhttp"),t.i&&t.l&&tS(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=p_(u_(e)),n.j=null,n.I=!0,Gw(n,t)}function vS(t){null!=t.m&&(Lm.clearTimeout(t.m),t.m=null)}function gS(t,e){var n=null;if(t.a==e){vS(t),dS(t),t.a=null;var r=2}else{if(!N_(t.b,e))return;n=e.s,$_(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Gm()-e.u;var i=t.u;tw(r=Tw(),new Rw(r,n,e,i)),sS(t)}else hS(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(P_(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ow(Hm(t.Ba,t,e),yS(t,t.u)),t.u++,0)))}(t,e)||2==r&&fS(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:mS(t,5);break;case 4:mS(t,10);break;case 3:mS(t,6);break;default:mS(t,2)}}function yS(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function mS(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Hm(t.Ya,t);n||(n=new s_("//www.google.com/images/cleardot.gif"),Lm.location&&"http"==Lm.location.protocol||c_(n,"https"),p_(n)),function(t,e){var n=new Sw;if(Lm.Image){var r=new Image;r.onload=zm(B_,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zm(B_,n,r,"TestLoadImage: error",!1,e),r.onabort=zm(B_,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zm(B_,n,r,"TestLoadImage: timeout",!1,e),Lm.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Mw(2);t.v=0,t.f&&t.f.ra(e),bS(t),oS(t)}function bS(t){t.v=0,t.I=-1,t.f&&(0==L_(t.b).length&&0==t.g.length||(t.b.c.length=0,Qm(t.g),t.g.length=0),t.f.qa())}function wS(t,e,n){var r=function(t){return t instanceof s_?u_(t):new s_(t,void 0)}(n);if(""!=r.c)e&&l_(r,e+"."+r.c),h_(r,r.h);else{var i=Lm.location;r=function(t,e,n,r){var i=new s_(null,void 0);return t&&c_(i,t),e&&l_(i,e),n&&h_(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&sb(t.V,function(t,e){d_(r,e,t)}),n=t.na,(e=t.A)&&n&&d_(r,e,n),d_(r,"VER",t.ha),cS(t,r),r}function _S(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new V_(t.Na)).F=t.C,e}function SS(){}function kS(){if(vb&&!(10<=Number(Tb)))throw Error("Environmental error: no available transport.")}function ES(t,e){Qb.call(this),this.a=new nS(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!tb(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tb(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new IS(this)}function xS(t){Uw.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function TS(){Fw.call(this),this.status=1}function IS(t){this.a=t}(Nm=V_.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Lw),this.a.onreadystatechange=Hm(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void W_(this,o)}t=n||"";var i=new r_(this.headers);r&&n_(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=G_,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Lm.FormData&&t instanceof Lm.FormData,!(0<=Jm(z_,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{X_(this),0<this.o&&((this.D=function(t){return vb&&xb(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Hm(this.xa,this)):this.m=vw(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){W_(this,o)}},Nm.xa=function(){void 0!==$m&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,tw(this,"timeout"),this.abort(8))},Nm.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,tw(this,"complete"),tw(this,"abort"),Y_(this))},Nm.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Y_(this,!0)),V_.X.G.call(this)},Nm.za=function(){this.j||(this.A||this.l||this.g?J_(this):this.Ua())},Nm.Ua=function(){J_(this)},Nm.W=function(){try{return 2<Q_(this)?this.a.status:-1}catch(db){return-1}},Nm.$=function(){try{return this.a?this.a.responseText:""}catch(db){return""}},Nm.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),q_(e)}},Nm.ua=function(){return this.h},Nm.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Nm=nS.prototype).ha=8,Nm.v=1,Nm.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new qw(this,this.c,t,void 0),r=this.l;if(this.O&&(r?lb(r=ub(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=lS(this,n,e),d_(i=u_(this.B),"RID",t),d_(i,"CVER",22),this.A&&d_(i,"X-HTTP-Session-Id",this.A),cS(this,i),this.i&&r&&tS(i,this.i,r),D_(this.b,n),this.Ia&&d_(i,"TYPE","init"),this.da?(d_(i,"$req",e),d_(i,"SID","null"),n.U=!0,zw(n,i,null)):zw(n,i,e),this.v=2}}else 3==this.v&&(t?uS(this,t):0==this.g.length||O_(this.b)||uS(this))},Nm.Aa=function(){if(this.j=null,pS(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ow(Hm(this.Ta,this),t)}},Nm.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Mw(10),iS(this),pS(this))},Nm.Sa=function(){null!=this.m&&(this.m=null,iS(this),fS(this),Mw(19))},Nm.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Mw(2)):(this.c.info("Failed to ping google.com"),Mw(1))},(Nm=SS.prototype).ta=function(){},Nm.sa=function(){},Nm.ra=function(){},Nm.qa=function(){},Nm.Ja=function(){},kS.prototype.a=function(t,e){return new ES(t,e)},Wm(ES,Qb),ES.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Mw(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=wS(t,null,t.fa),sS(t)},ES.prototype.close=function(){rS(this.a)},ES.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,aS(this.a,e)}else this.l?((e={}).__data__=nw(t),aS(this.a,e)):aS(this.a,t)},ES.prototype.G=function(){this.a.f=null,delete this.f,rS(this.a),delete this.a,ES.X.G.call(this)},Wm(xS,Uw),Wm(TS,Fw),Wm(IS,SS),IS.prototype.ta=function(){tw(this.a,"a")},IS.prototype.sa=function(t){tw(this.a,new xS(t))},IS.prototype.ra=function(t){tw(this.a,new TS(t))},IS.prototype.qa=function(){tw(this.a,"b")},kS.prototype.createWebChannel=kS.prototype.a,ES.prototype.send=ES.prototype.h,ES.prototype.open=ES.prototype.g,ES.prototype.close=ES.prototype.close,Pw.NO_ERROR=0,Pw.TIMEOUT=8,Pw.HTTP_ERROR=6,Nw.COMPLETE="complete",$w.EventType=jw,jw.OPEN="a",jw.CLOSE="b",jw.ERROR="c",jw.MESSAGE="d",Qb.prototype.listen=Qb.prototype.va,V_.prototype.listenOnce=V_.prototype.wa,V_.prototype.getLastError=V_.prototype.Qa,V_.prototype.getLastErrorCode=V_.prototype.ua,V_.prototype.getStatus=V_.prototype.W,V_.prototype.getResponseJson=V_.prototype.Pa,V_.prototype.getResponseText=V_.prototype.$,V_.prototype.send=V_.prototype.ba;var CS=Pw,AS=Nw,MS=Ew,RS=$w,OS=V_,PS=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();PS.o=-1;var NS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},DS=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Us.ZT)(e,t),e}(Error),$S=new Kd.Yd("@firebase/firestore");function LS(){return $S.logLevel}function jS(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if($S.logLevel<=Kd.in.DEBUG){var r=e.map(BS);$S.debug.apply($S,(0,Us.ev)(["Firestore (8.5.0): "+t],r))}}function US(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if($S.logLevel<=Kd.in.ERROR){var r=e.map(BS);$S.error.apply($S,(0,Us.ev)(["Firestore (8.5.0): "+t],r))}}function FS(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if($S.logLevel<=Kd.in.WARN){var r=e.map(BS);$S.warn.apply($S,(0,Us.ev)(["Firestore (8.5.0): "+t],r))}}function BS(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(jO){return t}}function qS(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw US(e),new Error(e)}function VS(t,e){t||qS()}function ZS(t,e){return t}function HS(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var zS=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=HS(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function GS(t,e){return t<e?-1:t>e?1:0}function WS(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function KS(t){return t+"\0"}var JS=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new DS(NS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new DS(NS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new DS(NS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new DS(NS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?GS(this.nanoseconds,t.nanoseconds):GS(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),YS=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new JS(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function XS(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function QS(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tk(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ek=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&qS(),void 0===n?n=t.length-e:n>t.length-e&&qS(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),nk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new DS(NS.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(ek),rk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ik=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return rk.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new DS(NS.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new DS(NS.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new DS(NS.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new DS(NS.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(ek),ok=function(){function t(t){this.fields=t,t.sort(ik.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return WS(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),ak=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return GS(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ak.EMPTY_BYTE_STRING=new ak("");var sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uk(t){if(VS(!!t),"string"==typeof t){var e=0,n=sk.exec(t);if(VS(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ck(t.seconds),nanos:ck(t.nanos)}}function ck(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lk(t){return"string"==typeof t?ak.fromBase64String(t):ak.fromUint8Array(t)}function hk(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fk(t){var e=t.mapValue.fields.__previous_value__;return hk(e)?fk(e):e}function dk(t){var e=uk(t.mapValue.fields.__local_write_time__.timestampValue);return new JS(e.seconds,e.nanos)}function pk(t){return null==t}function vk(t){return 0===t&&1/t==-1/0}function gk(t){return"number"==typeof t&&Number.isInteger(t)&&!vk(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var yk=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(nk.fromString(e))},t.fromName=function(e){return new t(nk.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===nk.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return nk.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new nk(e.slice()))},t}();function mk(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hk(t)?4:10:qS()}function bk(t,e){var n=mk(t);if(n!==mk(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dk(t).isEqual(dk(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=uk(t.timestampValue),r=uk(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return lk(t.bytesValue).isEqual(lk(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ck(t.geoPointValue.latitude)===ck(e.geoPointValue.latitude)&&ck(t.geoPointValue.longitude)===ck(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ck(t.integerValue)===ck(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ck(t.doubleValue),r=ck(e.doubleValue);return n===r?vk(n)===vk(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return WS(t.arrayValue.values||[],e.arrayValue.values||[],bk);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(XS(n)!==XS(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!bk(n[i],r[i])))return!1;return!0}(t,e);default:return qS()}}function wk(t,e){return void 0!==(t.values||[]).find(function(t){return bk(t,e)})}function _k(t,e){var n=mk(t),r=mk(e);if(n!==r)return GS(n,r);switch(n){case 0:return 0;case 1:return GS(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ck(t.integerValue||t.doubleValue),r=ck(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Sk(t.timestampValue,e.timestampValue);case 4:return Sk(dk(t),dk(e));case 5:return GS(t.stringValue,e.stringValue);case 6:return function(t,e){var n=lk(t),r=lk(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=GS(n[i],r[i]);if(0!==o)return o}return GS(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=GS(ck(t.latitude),ck(e.latitude));return 0!==n?n:GS(ck(t.longitude),ck(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=_k(n[i],r[i]);if(o)return o}return GS(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=GS(r[a],o[a]);if(0!==s)return s;var u=_k(n[r[a]],i[o[a]]);if(0!==u)return u}return GS(r.length,o.length)}(t.mapValue,e.mapValue);default:throw qS()}}function Sk(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return GS(t,e);var n=uk(t),r=uk(e),i=GS(n.seconds,r.seconds);return 0!==i?i:GS(n.nanos,r.nanos)}function kk(t){return Ek(t)}function Ek(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=uk(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?lk(t.bytesValue).toBase64():"referenceValue"in t?yk.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ek(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ek(t.fields[o])}return e+"}"}(t.mapValue):qS();var e}function xk(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Tk(t){return!!t&&"integerValue"in t}function Ik(t){return!!t&&"arrayValue"in t}function Ck(t){return!!t&&"nullValue"in t}function Ak(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mk(t){return!!t&&"mapValue"in t}var Rk=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(ik.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return bk(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===mk(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=Mk(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)}),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(ik.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Mk(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Ok(t){var e=[];return QS(t.fields||{},function(t,n){var r=new ik([t]);if(Mk(n)){var i=Ok(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++)e.push(r.child(a[o]))}else e.push(r)}),new ok(e)}var Pk=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,YS.min(),Rk.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Rk.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Rk.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Rk.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Rk.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Nk=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Dk(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Nk(t,e,n,r,i,o,a)}function $k(t){var e=ZS(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+kk(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),pk(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Kk(e.startAt)),e.endAt&&(n+="|ub:",n+=Kk(e.endAt)),e.h=n}return e.h}function Lk(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Yk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!bk(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qk(t.startAt,e.startAt)&&Qk(t.endAt,e.endAt)}function jk(t){return yk.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Uk=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Us.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Fk(t,n,r):"array-contains"===n?new Zk(t,r):"in"===n?new Hk(t,r):"not-in"===n?new zk(t,r):"array-contains-any"===n?new Gk(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Bk(t,n):new qk(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(_k(e,this.value)):null!==e&&mk(this.value)===mk(e)&&this.m(_k(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return qS()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Fk=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=yk.fromName(r.referenceValue),i}return(0,Us.ZT)(e,t),e.prototype.matches=function(t){var e=yk.comparator(t.key,this.key);return this.m(e)},e}(Uk),Bk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Vk(0,n),r}return(0,Us.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Uk),qk=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Vk(0,n),r}return(0,Us.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Uk);function Vk(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return yk.fromName(t.referenceValue)})}var Zk=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Us.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Ik(e)&&wk(e.arrayValue,this.value)},e}(Uk),Hk=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Us.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&wk(this.value.arrayValue,e)},e}(Uk),zk=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Us.ZT)(e,t),e.prototype.matches=function(t){if(wk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!wk(this.value.arrayValue,e)},e}(Uk),Gk=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Us.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Ik(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return wk(e.value.arrayValue,t)})},e}(Uk),Wk=function(t,e){this.position=t,this.before=e};function Kk(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return kk(t)}).join(",")}var Jk=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Yk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Xk(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?yk.comparator(yk.fromName(a.referenceValue),n.key):_k(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Qk(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!bk(t.position[n],e.position[n]))return!1;return!0}var tE=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null};function eE(t,e,n,r,i,o,a,s){return new tE(t,e,n,r,i,o,a,s)}function nE(t){return new tE(t)}function rE(t){return!pk(t.limit)&&"F"===t.limitType}function iE(t){return!pk(t.limit)&&"L"===t.limitType}function oE(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function aE(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function sE(t){return null!==t.collectionGroup}function uE(t){var e=ZS(t);if(null===e.p){e.p=[];var n=aE(e),r=oE(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Jk(n)),e.p.push(new Jk(ik.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Jk(ik.keyField(),u))}}}return e.p}function cE(t){var e=ZS(t);if(!e.T)if("F"===e.limitType)e.T=Dk(e.path,e.collectionGroup,uE(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=uE(e);r<i.length;r++){var o=i[r];n.push(new Jk(o.field,"desc"===o.dir?"asc":"desc"))}var a=e.endAt?new Wk(e.endAt.position,!e.endAt.before):null,s=e.startAt?new Wk(e.startAt.position,!e.startAt.before):null;e.T=Dk(e.path,e.collectionGroup,n,e.filters,e.limit,a,s)}return e.T}function lE(t,e,n){return new tE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hE(t,e){return Lk(cE(t),cE(e))&&t.limitType===e.limitType}function fE(t){return $k(cE(t))+"|lt:"+t.limitType}function dE(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+kk(e.value);var e}).join(", ")+"]"),pk(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Kk(t.startAt)),t.endAt&&(e+=", endAt: "+Kk(t.endAt)),"Target("+e+")"}(cE(t))+"; limitType="+t.limitType+")"}function pE(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):yk.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Xk(t.startAt,uE(t),e)||t.endAt&&Xk(t.endAt,uE(t),e))}(t,e)}function vE(t){return function(e,n){for(var r=!1,i=0,o=uE(t);i<o.length;i++){var a=o[i],s=gE(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function gE(t,e,n){var r=t.field.isKeyField()?yk.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?_k(r,i):qS()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return qS()}}function yE(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vk(e)?"-0":e}}function mE(t){return{integerValue:""+t}}function bE(t,e){return gk(e)?mE(e):yE(t,e)}var wE=function(){this._=void 0};function _E(t,e,n){return t instanceof EE?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xE?TE(t,e):t instanceof IE?CE(t,e):function(t,e){var n=kE(t,e),r=ME(n)+ME(t.A);return Tk(n)&&Tk(t.A)?mE(r):yE(t.R,r)}(t,e)}function SE(t,e,n){return t instanceof xE?TE(t,e):t instanceof IE?CE(t,e):n}function kE(t,e){return t instanceof AE?Tk(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var EE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e}(wE),xE=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Us.ZT)(e,t),e}(wE);function TE(t,e){for(var n=RE(e),r=function(t){n.some(function(e){return bk(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var IE=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Us.ZT)(e,t),e}(wE);function CE(t,e){for(var n=RE(e),r=function(t){n=n.filter(function(e){return!bk(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var AE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Us.ZT)(e,t),e}(wE);function ME(t){return ck(t.integerValue||t.doubleValue)}function RE(t){return Ik(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var OE=function(t,e){this.field=t,this.transform=e},PE=function(t,e){this.version=t,this.transformResults=e},NE=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function DE(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var $E=function(){};function LE(t,e,n){t instanceof qE?function(t,e,n){var r=t.value.clone(),i=HE(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof VE?function(t,e,n){if(DE(t.precondition,e)){var r=HE(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ZE(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function jE(t,e,n){t instanceof qE?function(t,e,n){if(DE(t.precondition,e)){var r=t.value.clone(),i=zE(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(BE(e),r).setHasLocalMutations()}}(t,e,n):t instanceof VE?function(t,e,n){if(DE(t.precondition,e)){var r=zE(t.fieldTransforms,n,e),i=e.data;i.setAll(ZE(t)),i.setAll(r),e.convertToFoundDocument(BE(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){DE(t.precondition,e)&&e.convertToNoDocument(YS.min())}(t,e)}function UE(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=kE(o.transform,a||null);null!=s&&(null==n&&(n=Rk.empty()),n.set(o.field,s))}return n||null}function FE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&WS(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xE&&e instanceof xE||t instanceof IE&&e instanceof IE?WS(t.elements,e.elements,bk):t instanceof AE&&e instanceof AE?bk(t.A,e.A):t instanceof EE&&e instanceof EE}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function BE(t){return t.isFoundDocument()?t.version:YS.min()}var qE=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Us.ZT)(e,t),e}($E),VE=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return(0,Us.ZT)(e,t),e}($E);function ZE(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function HE(t,e,n){var r=new Map;VS(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,SE(a,s,n[i]))}return r}function zE(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,_E(s,u,e))}return r}var GE,WE,KE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Us.ZT)(e,t),e}($E),JE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Us.ZT)(e,t),e}($E),YE=function(t){this.count=t};function XE(t){switch(t){case NS.OK:return qS();case NS.CANCELLED:case NS.UNKNOWN:case NS.DEADLINE_EXCEEDED:case NS.RESOURCE_EXHAUSTED:case NS.INTERNAL:case NS.UNAVAILABLE:case NS.UNAUTHENTICATED:return!1;case NS.INVALID_ARGUMENT:case NS.NOT_FOUND:case NS.ALREADY_EXISTS:case NS.PERMISSION_DENIED:case NS.FAILED_PRECONDITION:case NS.ABORTED:case NS.OUT_OF_RANGE:case NS.UNIMPLEMENTED:case NS.DATA_LOSS:return!0;default:return qS()}}function QE(t){if(void 0===t)return US("GRPC error has no .code"),NS.UNKNOWN;switch(t){case GE.OK:return NS.OK;case GE.CANCELLED:return NS.CANCELLED;case GE.UNKNOWN:return NS.UNKNOWN;case GE.DEADLINE_EXCEEDED:return NS.DEADLINE_EXCEEDED;case GE.RESOURCE_EXHAUSTED:return NS.RESOURCE_EXHAUSTED;case GE.INTERNAL:return NS.INTERNAL;case GE.UNAVAILABLE:return NS.UNAVAILABLE;case GE.UNAUTHENTICATED:return NS.UNAUTHENTICATED;case GE.INVALID_ARGUMENT:return NS.INVALID_ARGUMENT;case GE.NOT_FOUND:return NS.NOT_FOUND;case GE.ALREADY_EXISTS:return NS.ALREADY_EXISTS;case GE.PERMISSION_DENIED:return NS.PERMISSION_DENIED;case GE.FAILED_PRECONDITION:return NS.FAILED_PRECONDITION;case GE.ABORTED:return NS.ABORTED;case GE.OUT_OF_RANGE:return NS.OUT_OF_RANGE;case GE.UNIMPLEMENTED:return NS.UNIMPLEMENTED;case GE.DATA_LOSS:return NS.DATA_LOSS;default:return qS()}}(WE=GE||(GE={}))[WE.OK=0]="OK",WE[WE.CANCELLED=1]="CANCELLED",WE[WE.UNKNOWN=2]="UNKNOWN",WE[WE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",WE[WE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",WE[WE.NOT_FOUND=5]="NOT_FOUND",WE[WE.ALREADY_EXISTS=6]="ALREADY_EXISTS",WE[WE.PERMISSION_DENIED=7]="PERMISSION_DENIED",WE[WE.UNAUTHENTICATED=16]="UNAUTHENTICATED",WE[WE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",WE[WE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",WE[WE.ABORTED=10]="ABORTED",WE[WE.OUT_OF_RANGE=11]="OUT_OF_RANGE",WE[WE.UNIMPLEMENTED=12]="UNIMPLEMENTED",WE[WE.INTERNAL=13]="INTERNAL",WE[WE.UNAVAILABLE=14]="UNAVAILABLE",WE[WE.DATA_LOSS=15]="DATA_LOSS";var tx=function(){function t(t,e){this.comparator=t,this.root=e||nx.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nx.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nx.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ex(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ex(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ex(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ex(this.root,t,this.comparator,!0)},t}(),ex=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),nx=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw qS();if(this.right.isRed())throw qS();var t=this.left.check();if(t!==this.right.check())throw qS();return t+(this.isRed()?0:1)},t}();nx.EMPTY=null,nx.RED=!0,nx.BLACK=!1,nx.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw qS()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw qS()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw qS()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw qS()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw qS()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new nx(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var rx=function(){function t(t){this.comparator=t,this.data=new tx(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ix(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ix(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ix=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ox=new tx(yk.comparator);function ax(){return ox}var sx=new tx(yk.comparator);function ux(){return sx}var cx=new tx(yk.comparator);function lx(){return cx}var hx=new rx(yk.comparator);function fx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=hx,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var dx=new rx(GS);function px(){return dx}var vx=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,gx.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(YS.min(),r,px(),ax(),fx())},t}(),gx=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ak.EMPTY_BYTE_STRING,n,fx(),fx(),fx())},t}(),yx=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},mx=function(t,e){this.targetId=t,this.V=e},bx=function(t,e,n,r){void 0===n&&(n=ak.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},wx=function(){function t(){this.S=0,this.D=kx(),this.C=ak.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=fx(),e=fx(),n=fx();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:qS()}}),new gx(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=kx()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),_x=function(){function t(t){this.W=t,this.G=new Map,this.H=ax(),this.J=Sx(),this.Y=new rx(GS)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:qS()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(jk(i))if(0===n){var o=new yk(i.path);this.tt(e,o,Pk.newNoDocument(o,YS.min()))}else VS(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&jk(o.target)){var a=new yk(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Pk.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=fx();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new vx(t,n,this.Y,this.H,r);return this.H=ax(),this.J=Sx(),this.Y=new rx(GS),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new wx,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new rx(GS),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||jS("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new wx),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Sx(){return new tx(yk.comparator)}function kx(){return new tx(yk.comparator)}var Ex={asc:"ASCENDING",desc:"DESCENDING"},xx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tx=function(t,e){this.databaseId=t,this.I=e};function Ix(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cx(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ax(t,e){return Ix(t,e.toTimestamp())}function Mx(t){return VS(!!t),YS.fromTimestamp(function(t){var e=uk(t);return new JS(e.seconds,e.nanos)}(t))}function Rx(t,e){return function(t){return new nk(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ox(t){var e=nk.fromString(t);return VS(nT(e)),e}function Px(t,e){return Rx(t.databaseId,e.path)}function Nx(t,e){var n=Ox(e);if(n.get(1)!==t.databaseId.projectId)throw new DS(NS.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new DS(NS.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new yk(jx(n))}function Dx(t,e){return Rx(t.databaseId,e)}function $x(t){var e=Ox(t);return 4===e.length?nk.emptyPath():jx(e)}function Lx(t){return new nk(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jx(t){return VS(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ux(t,e,n){return{name:Px(t,e),fields:n.toProto().mapValue.fields}}function Fx(t,e,n){var r=Nx(t,e.name),i=Mx(e.updateTime),o=new Rk({mapValue:{fields:e.fields}}),a=Pk.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Bx(t,e){var n;if(e instanceof qE)n={update:Ux(t,e.key,e.value)};else if(e instanceof KE)n={delete:Px(t,e.key)};else if(e instanceof VE)n={update:Ux(t,e.key,e.data),updateMask:eT(e.fieldMask)};else{if(!(e instanceof JE))return qS();n={verify:Px(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof EE)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xE)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof IE)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof AE)return{fieldPath:e.field.canonicalString(),increment:n.A};throw qS()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ax(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:qS()}(t,e.precondition)),n}function qx(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?NE.updateTime(Mx(t.updateTime)):void 0!==t.exists?NE.exists(t.exists):NE.none()}(e.currentDocument):NE.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(VS("REQUEST_TIME"===e.setToServerValue),n=new EE):"appendMissingElements"in e?n=new xE(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new IE(e.removeAllFromArray.values||[]):"increment"in e?n=new AE(t,e.increment):qS();var r=ik.fromServerFormat(e.fieldPath);return new OE(r,n)}(t,e)}):[];if(e.update){var i=Nx(t,e.update.name),o=new Rk({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){return new ok((t.fieldPaths||[]).map(function(t){return ik.fromServerFormat(t)}))}(e.updateMask);return new VE(i,o,a,n,r)}return new qE(i,o,n,r)}if(e.delete){var s=Nx(t,e.delete);return new KE(s,n)}if(e.verify){var u=Nx(t,e.verify);return new JE(u,n)}return qS()}function Vx(t,e){return{documents:[Dx(t,e.path)]}}function Zx(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Dx(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Dx(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Ak(t.value))return{unaryFilter:{field:Yx(t.field),op:"IS_NAN"}};if(Ck(t.value))return{unaryFilter:{field:Yx(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ak(t.value))return{unaryFilter:{field:Yx(t.field),op:"IS_NOT_NAN"}};if(Ck(t.value))return{unaryFilter:{field:Yx(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yx(t.field),op:Jx(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Yx(t.field),direction:Kx(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||pk(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Gx(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Gx(e.endAt)),n}function Hx(t){var e=$x(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){VS(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=zx(n.where));var s=[];n.orderBy&&(s=n.orderBy.map(function(t){return function(t){return new Jk(Xx(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return pk(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Wx(n.startAt));var l=null;return n.endAt&&(l=Wx(n.endAt)),eE(e,i,s,a,u,"F",c,l)}function zx(t){return t?void 0!==t.unaryFilter?[tT(t)]:void 0!==t.fieldFilter?[Qx(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return zx(t)}).reduce(function(t,e){return t.concat(e)}):qS():[]}function Gx(t){return{before:t.before,values:t.position}}function Wx(t){return new Wk(t.values||[],!!t.before)}function Kx(t){return Ex[t]}function Jx(t){return xx[t]}function Yx(t){return{fieldPath:t.canonicalString()}}function Xx(t){return ik.fromServerFormat(t.fieldPath)}function Qx(t){return Uk.create(Xx(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return qS()}}(t.fieldFilter.op),t.fieldFilter.value)}function tT(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Xx(t.unaryFilter.field);return Uk.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Xx(t.unaryFilter.field);return Uk.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xx(t.unaryFilter.field);return Uk.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xx(t.unaryFilter.field);return Uk.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return qS()}}function eT(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function nT(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function rT(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=oT(e)),e=iT(t.get(n),e);return oT(e)}function iT(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function oT(t){return t+"\x01\x01"}function aT(t){var e=t.length;if(VS(e>=2),2===e)return VS("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),nk.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&qS(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:qS()}o=a+2}return new nk(r)}var sT=function(t,e){this.seconds=t,this.nanoseconds=e},uT=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};uT.store="owner",uT.key="owner";var cT=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};cT.store="mutationQueues",cT.keyPath="userId";var lT=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};lT.store="mutations",lT.keyPath="batchId",lT.userMutationsIndex="userMutationsIndex",lT.userMutationsKeyPath=["userId","batchId"];var hT=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rT(e)]},t.key=function(t,e,n){return[t,rT(e),n]},t}();hT.store="documentMutations",hT.PLACEHOLDER=new hT;var fT=function(t,e){this.path=t,this.readTime=e},dT=function(t,e){this.path=t,this.version=e},pT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};pT.store="remoteDocuments",pT.readTimeIndex="readTimeIndex",pT.readTimeIndexPath="readTime",pT.collectionReadTimeIndex="collectionReadTimeIndex",pT.collectionReadTimeIndexPath=["parentPath","readTime"];var vT=function(t){this.byteSize=t};vT.store="remoteDocumentGlobal",vT.key="remoteDocumentGlobalKey";var gT=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};gT.store="targets",gT.keyPath="targetId",gT.queryTargetsIndexName="queryTargetsIndex",gT.queryTargetsKeyPath=["canonicalId","targetId"];var yT=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};yT.store="targetDocuments",yT.keyPath=["targetId","path"],yT.documentTargetsIndex="documentTargetsIndex",yT.documentTargetsKeyPath=["path","targetId"];var mT=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};mT.key="targetGlobalKey",mT.store="targetGlobal";var bT=function(t,e){this.collectionId=t,this.parent=e};bT.store="collectionParents",bT.keyPath=["collectionId","parent"];var wT=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};wT.store="clientMetadata",wT.keyPath="clientId";var _T=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};_T.store="bundles",_T.keyPath="bundleId";var ST=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ST.store="namedQueries",ST.keyPath="name";var kT=(0,Us.ev)((0,Us.ev)([],(0,Us.ev)((0,Us.ev)([],(0,Us.ev)((0,Us.ev)([],(0,Us.ev)((0,Us.ev)([],[cT.store,lT.store,hT.store,pT.store,gT.store,uT.store,mT.store,yT.store]),[wT.store])),[vT.store])),[bT.store])),[_T.store,ST.store]),ET="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xT=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),TT=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},IT=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&qS(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),CT=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new TT,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new RT(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=$T(e.target.error);n.ft.reject(new RT(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new RT(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(jS("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new PT(e)},t}(),AT=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,sd.z$)())&&US("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return jS("SimpleDb","Removing database:",t),NT(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,sd.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(jS("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new RT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new DS(NS.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new RT(t,n))},i.onupgradeneeded=function(t){jS("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){jS("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Us.mG)(this,void 0,void 0,function(){var i,o,a,s,u;return(0,Us.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return(0,Us.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=CT.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch(function(t){return e.abort(t),IT.reject(t)}).toPromise(),u={},a.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return jS("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),MT=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return NT(this.Pt.delete())},t}(),RT=function(t){function e(e,n){var r=this;return(r=t.call(this,NS.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Us.ZT)(e,t),e}(DS);function OT(t){return"IndexedDbTransactionError"===t.name}var PT=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(jS("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(jS("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),NT(n)},t.prototype.add=function(t){return jS("SimpleDb","ADD",this.store.name,t,t),NT(this.store.add(t))},t.prototype.get=function(t){var e=this;return NT(this.store.get(t)).next(function(n){return void 0===n&&(n=null),jS("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return jS("SimpleDb","DELETE",this.store.name,t),NT(this.store.delete(t))},t.prototype.count=function(){return jS("SimpleDb","COUNT",this.store.name),NT(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){jS("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new IT(function(n,r){e.onerror=function(t){var e=$T(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new IT(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new MT(i),a=e(i.primaryKey,i.value,o);if(a instanceof IT){var s=a.catch(function(t){return o.done(),IT.reject(t)});n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return IT.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function NT(t){return new IT(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=$T(t.target.error);n(e)}})}var DT=!1;function $T(t){var e=AT._t((0,sd.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new DS("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return DT||(DT=!0,setTimeout(function(){throw r},0)),r}}return t}var LT=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Us.ZT)(e,t),e}(xT);function jT(t,e){var n=ZS(t);return AT.It(n.Mt,e)}var UT=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&LE(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&jE(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&jE(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(YS.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},fx())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&WS(this.mutations,t.mutations,function(t,e){return FE(t,e)})&&WS(this.baseMutations,t.baseMutations,function(t,e){return FE(t,e)})},t}(),FT=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){VS(e.mutations.length===r.length);for(var i=lx(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),BT=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=YS.min()),void 0===o&&(o=YS.min()),void 0===a&&(a=ak.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),qT=function(t){this.Lt=t};function VT(t,e){if(e.document)return Fx(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=yk.fromSegments(e.noDocument.path),r=WT(e.noDocument.readTime),i=Pk.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=yk.fromSegments(e.unknownDocument.path);return r=WT(e.unknownDocument.version),Pk.newUnknownDocument(o,r)}return qS()}function ZT(t,e,n){var r=HT(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Px(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Ix(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new pT(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=GT(e.version);return a=e.hasCommittedMutations,new pT(null,new fT(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=GT(e.version);return new pT(new dT(c,l),null,null,!0,r,i)}return qS()}function HT(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zT(t){var e=new JS(t[0],t[1]);return YS.fromTimestamp(e)}function GT(t){var e=t.toTimestamp();return new sT(e.seconds,e.nanoseconds)}function WT(t){var e=new JS(t.seconds,t.nanoseconds);return YS.fromTimestamp(e)}function KT(t,e){for(var n=(e.baseMutations||[]).map(function(e){return qx(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return qx(t.Lt,e)}),o=JS.fromMillis(e.localWriteTimeMs);return new UT(e.batchId,o,n,i)}function JT(t){var e,n,r=WT(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?WT(t.lastLimboFreeSnapshotVersion):YS.min();return void 0!==t.query.documents?(VS(1===(n=t.query).documents.length),e=cE(nE($x(n.documents[0])))):e=function(t){return cE(Hx(t))}(t.query),new BT(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ak.fromBase64String(t.resumeToken))}function YT(t,e){var n,r=GT(e.snapshotVersion),i=GT(e.lastLimboFreeSnapshotVersion);n=jk(e.target)?Vx(t.Lt,e.target):Zx(t.Lt,e.target);var o=e.resumeToken.toBase64();return new gT(e.targetId,$k(e.target),r,o,e.sequenceNumber,i,n)}function XT(t){var e=Hx({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?lE(e,e.limit,"L"):e}var QT=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return tI(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:WT(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return tI(t).put({bundleId:(n=e).id,createTime:GT(Mx(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return eI(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:XT(e.bundledQuery),readTime:WT(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return eI(t).put(function(t){return{name:t.name,readTime:GT(Mx(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function tI(t){return jT(t,_T.store)}function eI(t){return jT(t,ST.store)}var nI=function(){function t(){this.Bt=new rI}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),IT.resolve()},t.prototype.getCollectionParents=function(t,e){return IT.resolve(this.Bt.getEntries(e))},t}(),rI=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new rx(nk.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new rx(nk.comparator)).toArray()},t}(),iI=function(){function t(){this.qt=new rI}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:rT(i)};return oI(t).put(o)}return IT.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[KS(e),""],!1,!0);return oI(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(aT(o.parent))}return n})},t}();function oI(t){return jT(t,bT.store)}var aI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sI=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function uI(t,e,n){var r=t.store(lT.store),i=t.store(hT.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},function(t,e,n){return s++,n.delete()});o.push(u.next(function(){VS(1===s)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=hT.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return IT.waitFor(o).next(function(){return c})}function cI(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw qS();e=t.noDocument}return JSON.stringify(e).length}sI.DEFAULT_COLLECTION_PERCENTILE=10,sI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sI.DEFAULT=new sI(41943040,sI.DEFAULT_COLLECTION_PERCENTILE,sI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sI.DISABLED=new sI(-1,0,0);var lI=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return VS(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fI(t).Ot({index:lT.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=dI(t),a=fI(t);return a.add({}).next(function(s){VS("number"==typeof s);for(var u=new UT(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Bx(t.Lt,e)}),i=n.mutations.map(function(e){return Bx(t.Lt,e)});return new lT(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new rx(function(t,e){return GS(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],v=hT.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,hT.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[s]=u.keys()}),IT.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return fI(t).get(e).next(function(t){return t?(VS(t.userId===n.userId),KT(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?IT.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fI(t).Ot({index:lT.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(VS(e.batchId>=r),o=KT(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return fI(t).Ot({index:lT.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fI(t).Nt(lT.userMutationsIndex,n).next(function(t){return t.map(function(t){return KT(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=hT.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return dI(t).Ot({range:i},function(r,i,a){var s=r[0],u=r[2],c=aT(r[1]);if(s===n.userId&&e.path.isEqual(c))return fI(t).get(u).next(function(t){if(!t)throw qS();VS(t.userId===n.userId),o.push(KT(n.R,t))});a.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new rx(GS),i=[];return e.forEach(function(e){var o=hT.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=dI(t).Ot({range:a},function(t,i,o){var a=t[0],s=t[2],u=aT(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()});i.push(s)}),IT.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=hT.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new rx(GS);return dI(t).Ot({range:a},function(t,e,o){var a=t[0],u=t[2],c=aT(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()}).next(function(){return n.Wt(t,s)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(fI(t).get(e).next(function(t){if(null===t)throw qS();VS(t.userId===n.userId),r.push(KT(n.R,t))}))}),IT.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return uI(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),IT.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return IT.resolve();var r=IDBKeyRange.lowerBound(hT.prefixForUser(e.userId)),i=[];return dI(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=aT(t[1]);i.push(o)}else r.done()}).next(function(){VS(0===i.length)})})},t.prototype.containsKey=function(t,e){return hI(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return pI(t).get(this.userId).next(function(t){return t||new cT(e.userId,-1,"")})},t}();function hI(t,e,n){var r=hT.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return dI(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()}).next(function(){return a})}function fI(t){return jT(t,lT.store)}function dI(t){return jT(t,hT.store)}function pI(t){return jT(t,cT.store)}var vI=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),gI=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new vI(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return YS.fromTimestamp(new JS(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return yI(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return VS(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return yI(t).Ot(function(a,s){var u=JT(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return IT.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return yI(t).Ot(function(t,n){var r=JT(n);e(r)})},t.prototype.Xt=function(t){return mI(t).get(mT.key).next(function(t){return VS(null!==t),t})},t.prototype.Zt=function(t,e){return mI(t).put(mT.key,e)},t.prototype.te=function(t,e){return yI(t).put(YT(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=$k(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return yI(t).Ot({range:r,index:gT.queryTargetsIndexName},function(t,n,r){var o=JT(n);Lk(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=bI(t);return e.forEach(function(e){var a=rT(e.path);i.push(o.put(new yT(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))}),IT.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=bI(t);return IT.forEach(e,function(e){var o=rT(e.path);return IT.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=bI(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=bI(t),i=fx();return r.Ot({range:n,kt:!0},function(t,e,n){var r=aT(t[1]),o=new yk(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=rT(e.path),r=IDBKeyRange.bound([n],[KS(n)],!1,!0),i=0;return bI(t).Ot({index:yT.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return yI(t).get(e).next(function(t){return t?JT(t):null})},t}();function yI(t){return jT(t,gT.store)}function mI(t){return jT(t,mT.store)}function bI(t){return jT(t,yT.store)}function wI(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){if(t.code!==NS.FAILED_PRECONDITION||t.message!==ET)throw t;return jS("LocalStore","Unexpectedly lost primary lease"),[2]})})}function _I(t,e){var n=t[1],r=e[1],i=GS(t[0],e[0]);return 0===i?GS(n,r):i}var SI=function(){function t(t){this.ne=t,this.buffer=new rx(_I),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();_I(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),kI=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;jS("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Us.mG)(e,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return OT(e=n.sent())?(jS("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,wI(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),EI=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return IT.resolve(PS.o);var r=new SI(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jS("LruGarbageCollector","Garbage collection skipped; disabled"),IT.resolve(aI)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(jS("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),aI):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(jS("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),LS()<=Kd.in.DEBUG&&jS("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),IT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),xI=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new EI(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return TI(t,n)},t.prototype.removeReference=function(t,e,n){return TI(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return TI(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return pI(t).$t(function(r){return hI(t,r,e).next(function(t){return t&&(n=!0),IT.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(a,s){if(s<=e){var u=n._e(t,a).next(function(e){if(!e)return o++,r.getEntry(t,a).next(function(){return r.removeEntry(a),bI(t).delete([0,rT(a.path)])})});i.push(u)}}).next(function(){return IT.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return TI(t,e)},t.prototype.we=function(t,e){var n,r=bI(t),i=PS.o;return r.Ot({index:yT.documentTargetsIndex},function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==PS.o&&e(new yk(aT(n)),i),i=a,n=o):i=PS.o}).next(function(){i!==PS.o&&e(new yk(aT(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function TI(t,e){return bI(t).put(function(t,e){return new yT(0,rT(t.path),e)}(e,t.currentSequenceNumber))}var II=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(this.equalsFn(o[0],t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){QS(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return tk(this.inner)},t}(),CI=function(){function t(){this.changes=new II(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:YS.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Pk.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?IT.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),AI=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return OI(t).put(PI(e),n)},t.prototype.removeEntry=function(t,e){var n=OI(t),r=PI(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return OI(t).get(PI(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return OI(t).get(PI(e)).next(function(t){return{document:n.ye(e,t),size:cI(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ax();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ax(),i=new tx(yk.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,cI(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return IT.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return OI(t).Ot({range:r},function(t,e,r){for(var a=yk.fromSegments(t);o&&yk.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ax(),o=e.path.length+1,a={};if(n.isEqual(YS.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=HT(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=pT.collectionReadTimeIndex}return OI(t).Ot(a,function(t,n,a){if(t.length===o){var s=VT(r.R,n);e.path.isPrefixOf(s.key.path)?pE(e,s)&&(i=i.insert(s.key,s)):a.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new MI(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return RI(t).get(vT.key).next(function(t){return VS(!!t),t})},t.prototype.me=function(t,e){return RI(t).put(vT.key,e)},t.prototype.ye=function(t,e){if(e){var n=VT(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(YS.min()))return n}return Pk.newInvalidDocument(t)},t}(),MI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new II(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Us.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new rx(function(t,e){return GS(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=ZT(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=cI(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=ZT(e.Ie.R,Pk.newNoDocument(o,YS.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),IT.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(CI);function RI(t){return jT(t,vT.store)}function OI(t){return jT(t,pT.store)}function PI(t){return t.path.toArray()}var NI=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;VS(n<r&&n>=0&&r<=11);var o=new CT("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(uT.store)}(t),function(t){t.createObjectStore(cT.store,{keyPath:cT.keyPath}),t.createObjectStore(lT.store,{keyPath:lT.keyPath,autoIncrement:!0}).createIndex(lT.userMutationsIndex,lT.userMutationsKeyPath,{unique:!0}),t.createObjectStore(hT.store)}(t),DI(t),function(t){t.createObjectStore(pT.store)}(t));var a=IT.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(yT.store),t.deleteObjectStore(gT.store),t.deleteObjectStore(mT.store)}(t),DI(t)),a=a.next(function(){return function(t){var e=t.store(mT.store),n=new mT(0,0,YS.min().toTimestamp(),0);return e.put(mT.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(a=a.next(function(){return function(t,e){return e.store(lT.store).Nt().next(function(n){t.deleteObjectStore(lT.store),t.createObjectStore(lT.store,{keyPath:lT.keyPath,autoIncrement:!0}).createIndex(lT.userMutationsIndex,lT.userMutationsKeyPath,{unique:!0});var r=e.store(lT.store),i=n.map(function(t){return r.put(t)});return IT.waitFor(i)})}(t,o)})),a=a.next(function(){!function(t){t.createObjectStore(wT.store,{keyPath:wT.keyPath})}(t)})),n<5&&r>=5&&(a=a.next(function(){return i.Re(o)})),n<6&&r>=6&&(a=a.next(function(){return function(t){t.createObjectStore(vT.store)}(t),i.be(o)})),n<7&&r>=7&&(a=a.next(function(){return i.ve(o)})),n<8&&r>=8&&(a=a.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(a=a.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(pT.store);e.createIndex(pT.readTimeIndex,pT.readTimeIndexPath,{unique:!1}),e.createIndex(pT.collectionReadTimeIndex,pT.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(a=a.next(function(){return i.Ve(o)})),n<11&&r>=11&&(a=a.next(function(){!function(t){t.createObjectStore(_T.store,{keyPath:_T.keyPath})}(t),function(t){t.createObjectStore(ST.store,{keyPath:ST.keyPath})}(t)})),a},t.prototype.be=function(t){var e=0;return t.store(pT.store).Ot(function(t,n){e+=cI(n)}).next(function(){var n=new vT(e);return t.store(vT.store).put(vT.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(cT.store),r=t.store(lT.store);return n.Nt().next(function(n){return IT.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(lT.userMutationsIndex,i).next(function(r){return IT.forEach(r,function(r){VS(r.userId===n.userId);var i=KT(e.R,r);return uI(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(yT.store),n=t.store(pT.store);return t.store(mT.store).get(mT.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new nk(n),a=function(t){return[0,rT(t)]}(o);r.push(e.get(a).next(function(n){return n?IT.resolve():function(n){return e.put(new yT(0,rT(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return IT.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(bT.store,{keyPath:bT.keyPath});var n=e.store(bT.store),r=new rI,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:rT(i)})}};return e.store(pT.store).Ot({kt:!0},function(t,e){var n=new nk(t);return i(n.popLast())}).next(function(){return e.store(hT.store).Ot({kt:!0},function(t,e){var n=aT(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(gT.store);return n.Ot(function(t,r){var i=JT(r),o=YT(e.R,i);return n.put(o)})},t}();function DI(t){t.createObjectStore(yT.store,{keyPath:yT.keyPath}).createIndex(yT.documentTargetsIndex,yT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(gT.store,{keyPath:gT.keyPath}).createIndex(gT.queryTargetsIndexName,gT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mT.store)}var $I="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",LI=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new DS(NS.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xI(this,i),this.Le=n+"main",this.R=new qT(u),this.Be=new AT(this.Le,11,new NI(this.R)),this.qe=new gI(this.referenceDelegate,this.R),this.Ut=new iI,this.Ue=function(t,e){return new AI(t,e)}(this.R,this.Ut),this.Qe=new QT,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&US("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new DS(NS.FAILED_PRECONDITION,$I);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new PS(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Us.mG)(e,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Us.mG)(e,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Us.mG)(e,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return UI(e).put(new wT(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(OT(e))return jS("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return jS("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return jI(t).get(uT.key).next(function(t){return IT.resolve(e.tn(t))})},t.prototype.en=function(t){return UI(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=jT(t,wT.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return IT.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?IT.resolve(!0):jI(t).get(uT.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new DS(NS.FAILED_PRECONDITION,$I);return!1}}return!(!e.networkEnabled||!e.inForeground)||UI(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&jS("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t=this;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[uT.store,wT.store],function(e){var n=new LT(e,PS.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return UI(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return lI.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return jS("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",kT,function(o){return r=new LT(o,i.Ne?i.Ne.next():PS.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw US("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new DS(NS.FAILED_PRECONDITION,ET);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return jI(t).get(uT.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new DS(NS.FAILED_PRECONDITION,$I)})},t.prototype.Ze=function(t){var e=new uT(this.clientId,this.allowTabSynchronization,Date.now());return jI(t).put(uT.key,e)},t.yt=function(){return AT.yt()},t.prototype.Xe=function(t){var e=this,n=jI(t);return n.get(uT.key).next(function(t){return e.tn(t)?(jS("IndexedDbPersistence","Releasing primary lease."),n.delete(uT.key)):IT.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(US("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return jS("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return US("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){US("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function jI(t){return jT(t,uT.store)}function UI(t){return jT(t,wT.store)}function FI(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var BI=function(t,e){this.progress=t,this.wn=e},qI=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return yk.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):sE(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new yk(e)).next(function(t){var e=ux();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ux();return this.Ut.getCollectionParents(t,i).next(function(a){return IT.forEach(a,function(a){var s=function(t,e){return new tE(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Pk.newInvalidDocument(c),r=r.insert(c,l)),jE(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){pE(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=fx(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof VE&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),VI=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=fx(),i=fx(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),ZI=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(YS.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var a=i.Cn(e,o);return(rE(e)||iE(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(LS()<=Kd.in.DEBUG&&jS("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),dE(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return a.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new rx(vE(t));return e.forEach(function(e,r){pE(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return LS()<=Kd.in.DEBUG&&jS("QueryEngine","Using full collection scan to execute query:",dE(e)),this.Sn.getDocumentsMatchingQuery(t,e,YS.min())},t}(),HI=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new tx(GS),this.kn=new II(function(t){return $k(t)},Lk),this.On=YS.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new qI(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function zI(t,e,n,r){return new HI(t,e,n,r)}function GI(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return n=ZS(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new qI(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],a=fx(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)a=a.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var v=0,g=p.mutations;v<g.length;v++)a=a.add(g[v].key)}return i.pn(t,a).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function WI(t,e){var n=ZS(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=IT.resolve();return o.forEach(function(t){a=a.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);VS(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),a.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function KI(t){var e=ZS(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function JI(t,e){var n=ZS(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach(function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return VS(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}});var s=ax();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),a.push(YI(t,o,e.documentUpdates,r,void 0).next(function(t){s=t})),!r.isEqual(YS.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});a.push(u)}return IT.waitFor(a).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,s)}).next(function(){return s})}).then(function(t){return n.Fn=i,t})}function YI(t,e,n,r,i){var o=fx();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ax();return n.forEach(function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(YS.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):jS("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)}),o})}function XI(t,e){var n=ZS(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function QI(t,e){var n=ZS(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?IT.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new BT(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function tC(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:r=ZS(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!OT(a=s.sent()))throw a;return jS("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function eC(t,e,n){var r=ZS(t),i=YS.min(),o=fx();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ZS(t),i=r.kn.get(n);return void 0!==i?IT.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,cE(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:YS.min(),n?o:fx())}).next(function(t){return{documents:t,Bn:o}})})}function nC(t,e){var n=ZS(t),r=ZS(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function rC(t){var e=ZS(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ZS(t),i=ax(),o=HT(n),a=OI(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:pT.readTimeIndex,range:s},function(t,e){var n=VT(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:zT(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function iC(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){return[2,(e=ZS(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=OI(t),n=YS.min();return e.Ot({index:pT.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=zT(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function oC(t,e,n,r){return(0,Us.mG)(this,void 0,void 0,function(){var i,o,a,s,u,c,l,h,f,d;return(0,Us.Jh)(this,function(p){switch(p.label){case 0:for(i=ZS(t),o=fx(),a=ax(),s=lx(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,QI(i,function(t){return cE(nE(nk.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return YI(t,f,a,YS.min(),s).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function aC(t,e,n){return void 0===n&&(n=fx()),(0,Us.mG)(this,void 0,void 0,function(){var r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return[4,QI(t,cE(XT(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ZS(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Mx(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(ak.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var sC=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return IT.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Mx(n.createTime)}),IT.resolve()},t.prototype.getNamedQuery=function(t,e){return IT.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:XT(t.bundledQuery),readTime:Mx(t.readTime)}}(e)),IT.resolve()},t}(),uC=function(){function t(){this.Wn=new rx(cC.Gn),this.zn=new rx(cC.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new cC(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new cC(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new yk(new nk([])),r=new cC(n,t),i=new cC(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new yk(new nk([])),n=new cC(e,t),r=new cC(e,t+1),i=fx();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new cC(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),cC=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return yk.comparator(t.key,e.key)||GS(t.ns,e.ns)},t.Hn=function(t,e){return GS(t.ns,e.ns)||yk.comparator(t.key,e.key)},t}(),lC=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new rx(cC.Gn)}return t.prototype.checkEmpty=function(t){return IT.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new UT(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new cC(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return IT.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return IT.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return IT.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return IT.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return IT.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new cC(e,0),i=new cC(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),IT.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new rx(GS);return e.forEach(function(t){var e=new cC(t,0),i=new cC(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),IT.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;yk.isDocumentKey(i)||(i=i.child(""));var o=new cC(new yk(i),0),a=new rx(GS);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)},o),IT.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;VS(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return IT.forEach(e.mutations,function(i){var o=new cC(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new cC(e,0),r=this.rs.firstAfterOrEqual(n);return IT.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return IT.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),hC=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new tx(yk.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return IT.resolve(n?n.document.clone():Pk.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ax();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Pk.newInvalidDocument(t))}),IT.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ax(),i=new yk(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.value,u=s.document,c=s.readTime;if(!e.path.isPrefixOf(a.key.path))break;c.compareTo(n)<=0||pE(e,u)&&(r=r.insert(u.key,u.clone()))}return IT.resolve(r)},t.prototype.fs=function(t,e){return IT.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new fC(this)},t.prototype.getSize=function(t){return IT.resolve(this.size)},t}(),fC=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Us.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),IT.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(CI),dC=function(){function t(t){this.persistence=t,this.ds=new II(function(t){return $k(t)},Lk),this.lastRemoteSnapshotVersion=YS.min(),this.highestTargetId=0,this.ws=0,this._s=new uC,this.targetCount=0,this.ys=vI.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),IT.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return IT.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return IT.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),IT.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),IT.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new vI(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,IT.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),IT.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,IT.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)}),IT.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return IT.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return IT.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),IT.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),IT.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),IT.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return IT.resolve(n)},t.prototype.containsKey=function(t,e){return IT.resolve(this._s.containsKey(e))},t}(),pC=function(){function t(t,e){var n=this;this.gs={},this.Ne=new PS(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new dC(this),this.Ut=new nI,this.Ue=function(t,e){return new hC(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new qT(e),this.Qe=new sC(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new lC(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;jS("MemoryPersistence","Starting transaction:",t);var i=new vC(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return IT.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),vC=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Us.ZT)(e,t),e}(xT),gC=function(){function t(t){this.persistence=t,this.As=new uC,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw qS()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),IT.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),IT.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),IT.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return IT.forEach(this.vs,function(r){var i=yk.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return IT.or([function(){return IT.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),yC=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function mC(t,e){return"firestore_clients_"+t+"_"+e}function bC(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function wC(t,e){return"firestore_targets_"+t+"_"+e}yC.UNAUTHENTICATED=new yC(null),yC.GOOGLE_CREDENTIALS=new yC("google-credentials-uid"),yC.FIRST_PARTY=new yC("first-party-uid");var _C=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new DS(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(US("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),SC=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new DS(i.error.code,i.error.message)),o?new t(e,i.state,r):(US("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),kC=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=px(),a=0;i&&a<r.activeTargetIds.length;++a)i=gk(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(US("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),EC=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(US("SharedClientState","Failed to parse online state: "+e),null)},t}(),xC=function(){function t(){this.activeTargetIds=px()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),TC=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new tx(GS),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=mC(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new xC),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,a,s,u,c,l=this;return(0,Us.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(mC(this.persistenceKey,r)))&&(o=kC.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(wC(this.persistenceKey,t));if(n){var r=SC.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(wC(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return jS("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){jS("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){jS("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(jS("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void US("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Us.mG)(e,void 0,void 0,function(){var t,e,r,i,o,a;return(0,Us.Jh)(this,function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=PS.o;if(null!=t)try{var n=JSON.parse(t);VS("number"==typeof n),e=n}catch(t){US("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==PS.o&&this.sequenceNumberHandler(a);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new _C(this.currentUser,t,e,n),i=bC(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=bC(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=wC(this.persistenceKey,t),i=new SC(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return kC.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return _C.Vs(new yC(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return SC.Vs(r,e)},t.prototype.js=function(t){return EC.Vs(t)},t.prototype.ii=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(jS("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach(function(t){i.has(t)||a.push(t)}),i.forEach(function(t){o.has(t)||s.push(t)}),this.syncEngine.hi(a,s).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=px();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),IC=function(){function t(){this.li=new xC,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new xC,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),CC=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),AC=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){jS("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){jS("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),MC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},RC=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),OC=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return(0,Us.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var a=new OS;a.listenOnce(AS.COMPLETE,function(){try{switch(a.getLastErrorCode()){case CS.NO_ERROR:var e=a.getResponseJson();jS("Connection","XHR received:",JSON.stringify(e)),i(e);break;case CS.TIMEOUT:jS("Connection",'RPC "'+t+'" timed out'),o(new DS(NS.DEADLINE_EXCEEDED,"Request time out"));break;case CS.HTTP_ERROR:var n=a.getStatus();if(jS("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(NS).indexOf(e)>=0?e:NS.UNKNOWN}(r.status);o(new DS(s,r.message))}else o(new DS(NS.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new DS(NS.UNAVAILABLE,"Connection failed."));break;default:qS()}}finally{jS("Connection",'RPC "'+t+'" completed.')}});var s=JSON.stringify(r);a.send(e,"POST",s,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new kS,i=Tw(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),(0,sd.uI)()||(0,sd.b$)()||(0,sd.d)()||(0,sd.w1)()||(0,sd.Mn)()||(0,sd.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");jS("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new RC({Ei:function(t){c?jS("Connection","Not sending because WebChannel is closed:",t):(u||(jS("Connection","Opening WebChannel transport."),s.open(),u=!0),jS("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(s,RS.EventType.OPEN,function(){c||jS("Connection","WebChannel transport opened.")}),h(s,RS.EventType.CLOSE,function(){c||(c=!0,jS("Connection","WebChannel transport closed"),l.Vi())}),h(s,RS.EventType.ERROR,function(t){c||(c=!0,FS("Connection","WebChannel transport errored:",t),l.Vi(new DS(NS.UNAVAILABLE,"The operation could not be completed")))}),h(s,RS.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];VS(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){jS("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=GE[t];if(void 0!==e)return QE(e)}(i),a=r.message;void 0===o&&(o=NS.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new DS(o,a)),s.close()}else jS("Connection","WebChannel received:",n),l.Si(n)}}),h(i,MS.STAT_EVENT,function(t){10===t.stat?jS("Connection","Detected buffering proxy"):11===t.stat&&jS("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);jS("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return jS("RestConnection","Received: ",t),t},function(e){throw FS("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+MC[t]},t}());function PC(){return"undefined"!=typeof window?window:null}function NC(){return"undefined"!=typeof document?document:null}function DC(t){return new Tx(t,!0)}var $C=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&jS("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),LC=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new $C(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===NS.RESOURCE_EXHAUSTED?(US(e.toString()),US("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===NS.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new DS(NS.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Us.mG)(t,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return jS("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(jS("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),jC=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return(0,Us.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:qS()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(VS(void 0===e||"string"==typeof e),ak.fromBase64String(e||"")):(VS(void 0===e||e instanceof Uint8Array),ak.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?NS.UNKNOWN:QE(t.code);return new DS(e,t.message||"")}(s);n=new bx(r,i,o,a||null)}else if("documentChange"in e){i=Nx(t,(r=e.documentChange).document.name),o=Mx(r.document.updateTime);var s=new Rk({mapValue:{fields:r.document.fields}}),u=(a=Pk.newFoundDocument(i,o,s),r.targetIds||[]);n=new yx(u,r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e)i=Nx(t,(r=e.documentDelete).document),o=r.readTime?Mx(r.readTime):YS.min(),s=Pk.newNoDocument(i,o),n=new yx([],a=r.removedTargetIds||[],s.key,s);else if("documentRemove"in e)i=Nx(t,(r=e.documentRemove).document),n=new yx([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return qS();var c=e.filter;i=new YE(r=c.count||0),n=new mx(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return YS.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?YS.min():e.readTime?Mx(e.readTime):YS.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Lx(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=jk(r)?{documents:Vx(t,r)}:{query:Zx(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Cx(t,e.resumeToken):e.snapshotVersion.compareTo(YS.min())>0&&(n.readTime=Ix(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return qS()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Lx(this.R),e.removeTarget=t,this.cr(e)},e}(LC),UC=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return(0,Us.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(VS(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(VS(void 0!==e),t.map(function(t){return function(t,e){var n=Mx(t.updateTime?t.updateTime:e);return n.isEqual(YS.min())&&(n=Mx(e)),new PE(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Mx(t.commitTime);return this.listener.Tr(n,e)}return VS(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Lx(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Bx(e.R,t)})};this.cr(n)},e}(LC),FC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Us.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new DS(NS.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===NS.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new DS(NS.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===NS.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new DS(NS.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),BC=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(US(e),this.Vr=!1):jS("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),qC=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Us.mG)(o,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return YC(this)?(jS("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return(e=ZS(t)).$r.add(4),[4,ZC(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,VC(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new BC(n,r)};function VC(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:if(!YC(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ZC(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function HC(t,e){var n=ZS(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),JC(n)?KC(n):fA(n).er()&&GC(n,e))}function zC(t,e){var n=ZS(t),r=fA(n);n.Or.delete(e),r.er()&&WC(n,e),0===n.Or.size&&(r.er()?r.ir():YC(n)&&n.Br.set("Unknown"))}function GC(t,e){t.qr.U(e.targetId),fA(t).mr(e)}function WC(t,e){t.qr.U(e),fA(t).yr(e)}function KC(t){t.qr=new _x({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),fA(t).start(),t.Br.Sr()}function JC(t){return YC(t)&&!fA(t).tr()&&t.Or.size>0}function YC(t){return 0===ZS(t).$r.size}function XC(t){t.qr=void 0}function QC(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return t.Or.forEach(function(e,n){GC(t,e)}),[2]})})}function tA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){return XC(t),JC(t)?(t.Br.Nr(e),KC(t)):t.Br.set("Unknown"),[2]})})}function eA(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof bx&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),jS("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,nA(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof yx?t.qr.X(e):e instanceof mx?t.qr.rt(e):t.qr.et(e),n.isEqual(YS.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,KI(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(ak.EMPTY_BYTE_STRING,n.snapshotVersion)),WC(t,e);var r=new BT(n.target,e,1,n.sequenceNumber);GC(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return jS("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,nA(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function nA(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r=this;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:if(!OT(e))throw e;return t.$r.add(1),[4,ZC(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return KI(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Us.mG)(r,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return jS("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,VC(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function rA(t,e){return e().catch(function(n){return nA(t,n,e)})}function iA(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:e=ZS(t),n=dA(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return YC(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,XI(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=dA(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,nA(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return oA(e)&&aA(e),[2]}})})}function oA(t){return YC(t)&&!dA(t).tr()&&t.kr.length>0}function aA(t){dA(t).start()}function sA(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){return dA(t).Ar(),[2]})})}function uA(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Us.Jh)(this,function(i){for(e=dA(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function cA(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=FT.from(r,e,n),[4,rA(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,iA(t)];case 2:return o.sent(),[2]}})})}function lA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e&&dA(t).pr?[4,function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return XE(r=e.code)&&r!==NS.ABORTED?(n=t.kr.shift(),dA(t).sr(),[4,rA(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,iA(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return oA(t)&&aA(t),[2]}})})}function hA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return n=ZS(t),e?(n.$r.delete(2),[4,VC(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,ZC(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function fA(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ZS(t);return r.br(),new jC(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:QC.bind(null,t),Ri:tA.bind(null,t),_r:eA.bind(null,t)}),t.Mr.push(function(n){return(0,Us.mG)(e,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),JC(t)?KC(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),XC(t),e.label=3;case 3:return[2]}})})})),t.Ur}function dA(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=ZS(t);return r.br(),new UC(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:sA.bind(null,t),Ri:lA.bind(null,t),Ir:uA.bind(null,t),Tr:cA.bind(null,t)}),t.Mr.push(function(n){return(0,Us.mG)(e,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,iA(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(jS("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var pA=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new TT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new DS(NS.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function vA(t,e){if(US("AsyncQueue",e+": "+t),OT(t))return new DS(NS.UNAVAILABLE,e+": "+t);throw t}var gA=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||yk.comparator(e.key,n.key)}:function(t,e){return yk.comparator(t.key,e.key)},this.keyedMap=ux(),this.sortedSet=new tx(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),yA=function(){function t(){this.Kr=new tx(yk.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):qS():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),mA=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,gA.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&hE(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),bA=function(){this.Wr=void 0,this.listeners=[]},wA=function(){this.queries=new II(function(t){return fE(t)},hE),this.onlineState="Unknown",this.Gr=new Set};function _A(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return(0,Us.Jh)(this,function(c){switch(c.label){case 0:if(n=ZS(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new bA),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=vA(s,"Initialization of query '"+dE(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&xA(n),[2]}})})}function SA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,Us.Jh)(this,function(s){return n=ZS(t),i=!1,(o=n.queries.get(r=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function kA(t,e){for(var n=ZS(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.queries.get(a.query);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&xA(n)}function EA(t,e,n){var r=ZS(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function xA(t){t.Gr.forEach(function(t){t.next()})}var TA=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new mA(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=mA.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),IA=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),CA=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Nx(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Fx(this.R,t.document,!1):Pk.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Mx(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new CA(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||fx()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return[4,oC(this.localStore,new CA(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,aC(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new BI(Object.assign({},this.progress),t))]}})})}}();var AA=function(t){this.key=t},MA=function(t){this.key=t},RA=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=fx(),this.mutatedKeys=fx(),this.lo=vE(t),this.fo=new gA(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new yA,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=rE(this.query)&&i.size===this.query.limit?i.last():null,c=iE(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=pE(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))}),rE(this.query)||iE(this.query))for(;a.size>this.query.limit;){var l=rE(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qS()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new mA(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new yA,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=fx(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new MA(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new AA(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=fx();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return mA.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),OA=function(t,e,n){this.query=t,this.targetId=e,this.view=n},PA=function(t){this.key=t,this.bo=!1},NA=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new II(function(t){return fE(t)},hE),this.Vo=new Map,this.So=new Set,this.Do=new tx(yk.comparator),this.Co=new Map,this.No=new uC,this.xo={},this.Fo=new Map,this.ko=vI.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function DA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return n=lM(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,QI(n.localStore,cE(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,$A(n,e,o.targetId,"current"===a)];case 3:r=s.sent(),n.isPrimaryClient&&HC(n.remoteStore,o),s.label=4;case 4:return[2,r]}})})}function $A(t,e,n,r){return(0,Us.mG)(this,void 0,void 0,function(){var i,o,a,s,u,c;return(0,Us.Jh)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return(0,Us.mG)(this,void 0,void 0,function(){var i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,eC(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(KA(t,e.targetId,a.To),a.snapshot)]}})})}(t,e,n,r)},[4,eC(t.localStore,e,!0)];case 1:return i=l.sent(),o=new RA(e,i.Bn),a=o._o(i.documents),s=gx.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),KA(t,n,u.To),c=new OA(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function LA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return n=ZS(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!hE(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,tC(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),zC(n.remoteStore,r.targetId),GA(n,r.targetId)}).catch(wI)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return GA(n,r.targetId),[4,tC(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function jA(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:r=hM(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=ZS(t),i=JS.now(),o=e.reduce(function(t,e){return t.add(e.key)},fx());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=UE(c,n.get(c.key));null!=l&&a.push(new VE(c.key,l,Ok(l.toProto().mapValue),NE.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new tx(GS)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,XA(r,i.changes)];case 3:return s.sent(),[4,iA(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=vA(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function UA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:n=ZS(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,JI(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(VS(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?VS(r.bo):t.removedDocuments.size>0&&(VS(r.bo),r.bo=!1))}),[4,XA(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,wI(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function FA(t,e,n){var r=ZS(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ZS(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&xA(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BA(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o,a,s,u;return(0,Us.Jh)(this,function(c){switch(c.label){case 0:return(r=ZS(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new tx(yk.comparator)).insert(o,Pk.newNoDocument(o,YS.min())),s=fx().add(o),u=new vx(YS.min(),new Map,new rx(GS),a,s),[4,UA(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),YA(r),[3,4];case 2:return[4,tC(r.localStore,e,!1).then(function(){return GA(r,e,n)}).catch(wI)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function qA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:n=ZS(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,WI(n.localStore,e)];case 2:return i=o.sent(),zA(n,r,null),HA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,XA(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,wI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function VA(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:r=ZS(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ZS(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return VS(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),zA(r,e,n),HA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,XA(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,wI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function ZA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:YC((n=ZS(t)).remoteStore)||jS("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=ZS(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=vA(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}})})}function HA(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function zA(t,e,n){var r=ZS(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function GA(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||WA(t,e)})}function WA(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(zC(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),YA(t))}function KA(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof AA?(t.No.addReference(o.key,e),JA(t,o)):o instanceof MA?(jS("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||WA(t,o.key)):qS()}}function JA(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(jS("SyncEngine","New document in limbo: "+n),t.So.add(r),YA(t))}function YA(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new yk(nk.fromString(e)),r=t.ko.next();t.Co.set(r,new PA(n)),t.Do=t.Do.insert(n,r),HC(t.remoteStore,new BT(cE(nE(n.path)),r,2,PS.o))}}function XA(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return r=ZS(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,s){a.push(r.$o(s,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=VI.Pn(s.targetId,t);o.push(e)}}))}),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c;return(0,Us.Jh)(this,function(l){switch(l.label){case 0:n=ZS(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return IT.forEach(e,function(e){return IT.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return IT.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!OT(r=l.sent()))throw r;return jS("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=(a=o[i]).targetId,a.fromCache||(u=n.Fn.get(s),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(s,c));return[2]}})})}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function QA(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return(n=ZS(t)).currentUser.isEqual(e)?[3,3]:(jS("SyncEngine","User change. New user:",e.toKey()),[4,GI(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new DS(NS.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,XA(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function tM(t,e){var n=ZS(t),r=n.Co.get(e);if(r&&r.bo)return fx().add(r.key);var i=fx(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=n.Po.get(s[a]);i=i.unionWith(u.view.wo)}return i}function eM(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return[4,eC((n=ZS(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&KA(n,e.targetId,i.To),i)]}})})}function nM(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){return[2,rC((e=ZS(t)).localStore).then(function(t){return XA(e,t)})]})})}function rM(t,e,n,r){return(0,Us.mG)(this,void 0,void 0,function(){var i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return[4,function(t,e){var n=ZS(t),r=ZS(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):IT.resolve(null)})})}((i=ZS(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,iA(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(zA(i,e,r||null),HA(i,e),function(t,e){ZS(ZS(t)._n).Gt(e)}(i.localStore,e)):qS(),a.label=4;case 4:return[4,XA(i,o)];case 5:return a.sent(),[3,7];case 6:jS("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}})})}function iM(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a,s,u;return(0,Us.Jh)(this,function(c){switch(c.label){case 0:return lM(n=ZS(t)),hM(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,oM(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,hA(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)HC(n.remoteStore,a[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(s=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then(function(){return GA(n,e),tC(n.localStore,e,!0)}),zC(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,oM(n,s)];case 5:return c.sent(),function(t){var e=ZS(t);e.Co.forEach(function(t,n){zC(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new tx(yk.comparator)}(n),n.Oo=!1,[4,hA(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function oM(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,l,h,f,d,p;return(0,Us.Jh)(this,function(v){switch(v.label){case 0:n=ZS(t),r=[],i=[],o=0,a=e,v.label=1;case 1:return o<a.length?(u=void 0,(c=n.Vo.get(s=a[o]))&&0!==c.length?[4,QI(n.localStore,cE(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,eM(n,f)]):[3,6];case 4:(d=v.sent()).snapshot&&i.push(d.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,nC(n.localStore,s)];case 8:return p=v.sent(),[4,QI(n.localStore,p)];case 9:return u=v.sent(),[4,$A(n,aM(p),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function aM(t){return eE(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function sM(t){var e=ZS(t);return ZS(ZS(e.localStore).persistence).fn()}function uM(t,e,n,r){return(0,Us.mG)(this,void 0,void 0,function(){var i,o,a;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return(i=ZS(t)).Oo?(jS("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,rC(i.localStore)];case 3:return o=s.sent(),a=vx.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,XA(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,tC(i.localStore,e,!0)];case 6:return s.sent(),GA(i,e,r),[3,8];case 7:qS(),s.label=8;case 8:return[2]}})})}function cM(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,h;return(0,Us.Jh)(this,function(f){switch(f.label){case 0:if(!(r=lM(t)).Oo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(a=o[i])?(jS("SyncEngine","Adding an already active target "+a),[3,5]):[4,nC(r.localStore,a)]:[3,6];case 2:return s=f.sent(),[4,QI(r.localStore,s)];case 3:return u=f.sent(),[4,$A(r,aM(s),u.targetId,!1)];case 4:f.sent(),HC(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,tC(r.localStore,t,!1).then(function(){zC(r.remoteStore,t),GA(r,t)}).catch(wI)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function lM(t){var e=ZS(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BA.bind(null,e),e.vo._r=kA.bind(null,e.eventManager),e.vo.Mo=EA.bind(null,e.eventManager),e}function hM(t){var e=ZS(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VA.bind(null,e),e}var fM=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return this.R=DC(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return zI(this.persistence,new ZI,t.initialUser,this.R)},t.prototype.qo=function(t){return new pC(gC.bs,this.R)},t.prototype.Bo=function(t){return new IC},t.prototype.terminate=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),dM=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Us.ZT)(e,t),e.prototype.initialize=function(e){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,iC(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,hM(this.Ko.syncEngine)];case 4:return n.sent(),[4,iA(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return zI(this.persistence,new ZI,t.initialUser,this.R)},e.prototype.Uo=function(t){return new kI(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=FI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sI.withCacheSize(this.cacheSizeBytes):sI.DEFAULT;return new LI(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,PC(),NC(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new IC},e}(fM),pM=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Us.ZT)(e,t),e.prototype.initialize=function(e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof TC?(this.sharedClientState.syncEngine={ui:rM.bind(null,n),ai:uM.bind(null,n),hi:cM.bind(null,n),fn:sM.bind(null,n),ci:nM.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Us.mG)(r,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,iM(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=PC();if(!TC.yt(e))throw new DS(NS.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=FI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new TC(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(dM),vM=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n=this;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return FA(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=QA.bind(null,this.syncEngine),[4,hA(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new wA},t.prototype.createDatastore=function(t){var e=DC(t.databaseInfo.databaseId),n=new OC(t.databaseInfo);return function(t,e,n){return new FC(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return FA(a.syncEngine,t,0)},o=AC.yt()?new AC:new CC,new qC(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new NA(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e=ZS(t),jS("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,ZC(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),gM=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),yM=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new TT,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new IA(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new DS(NS.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i,o,a,s;return(0,Us.Jh)(this,function(u){switch(u.label){case 0:return n=ZS(t),r=Lx(n.R)+"/documents",i={documents:e.map(function(t){return Px(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){VS(!!e.found);var n=Nx(t,e.found.name),r=Mx(e.found.updateTime),i=new Rk({mapValue:{fields:e.found.fields}});return Pk.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){VS(!!e.missing),VS(!!e.readTime);var n=Nx(t,e.missing),r=Mx(e.readTime);return Pk.newNoDocument(n,r)}(t,e):qS()}(n.R,t);a.set(e.key.toString(),e)}),s=[],[2,(e.forEach(function(t){var e=a.get(t.toString());VS(!!e),s.push(e)}),s)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new KE(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=yk.fromPath(n);e.mutations.push(new JE(r,e.precondition(r)))}),[4,function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return n=ZS(t),r=Lx(n.R)+"/documents",i={writes:e.map(function(t){return Bx(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw qS();e=YS.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new DS(NS.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?NE.updateTime(e):NE.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(YS.min()))throw new DS(NS.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return NE.updateTime(e)}return NE.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),mM=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new $C(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Us.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Us.Jh)(this,function(r){return t=new yM(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!pk(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!XE(e)}return!1},t}(),bM=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=yC.UNAUTHENTICATED,this.clientId=zS.u(),this.credentialListener=function(){},this.receivedInitialUser=new TT,this.credentials.setChangeListener(function(t){jS("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new DS(NS.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new TT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Us.mG)(t,void 0,void 0,function(){var t,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=vA(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function wM(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),jS("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return(0,Us.mG)(i,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,GI(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function _M(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,SM(t)];case 1:return n=i.sent(),jS("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return(n=ZS(t)).asyncQueue.verifyOperationInProgress(),jS("RemoteStore","RemoteStore received new credentials"),r=YC(n),n.$r.add(3),[4,ZC(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,VC(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function SM(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(jS("FirestoreClient","Using default OfflineComponentProvider"),[4,wM(t,new fM)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function kM(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(jS("FirestoreClient","Using default OnlineComponentProvider"),[4,_M(t,new vM)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function EM(t){return SM(t).then(function(t){return t.persistence})}function xM(t){return SM(t).then(function(t){return t.localStore})}function TM(t){return kM(t).then(function(t){return t.remoteStore})}function IM(t){return kM(t).then(function(t){return t.syncEngine})}function CM(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,kM(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=DA.bind(null,e.syncEngine),n.onUnlisten=LA.bind(null,e.syncEngine),n)]}})})}function AM(t,e,n){var r=this;void 0===n&&(n={});var i=new TT;return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(r,void 0,void 0,function(){var r;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gM({next:function(o){e.enqueueAndForget(function(){return SA(t,a)});var s=o.docs.has(n);!s&&o.fromCache?i.reject(new DS(NS.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new DS(NS.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new TA(nE(n.path),o,{includeMetadataChanges:!0,so:!0});return _A(t,a)},[4,CM(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function MM(t,e,n){var r=this;void 0===n&&(n={});var i=new TT;return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(r,void 0,void 0,function(){var r;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new gM({next:function(n){e.enqueueAndForget(function(){return SA(t,a)}),n.fromCache&&"server"===r.source?i.reject(new DS(NS.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new TA(n,o,{includeMetadataChanges:!0,so:!0});return _A(t,a)},[4,CM(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var RM=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},OM=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),PM=new Map,NM=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},DM=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(yC.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),$M=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),LM=function(){function t(t){var e=this;this.oc=null,this.currentUser=yC.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(jS("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(VS("string"==typeof n.accessToken),new NM(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return VS(null===t||"string"==typeof t),new yC(t)},t}(),jM=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=yC.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),UM=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new jM(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(yC.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function FM(t,e,n){if(!n)throw new DS(NS.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function BM(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new DS(NS.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function qM(t,e,n,r){if(!0===e&&!0===r)throw new DS(NS.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function VM(t){if(!yk.isDocumentKey(t))throw new DS(NS.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ZM(t){if(yk.isDocumentKey(t))throw new DS(NS.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function HM(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":qS()}function zM(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new DS(NS.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=HM(t);throw new DS(NS.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function GM(t,e){if(e<=0)throw new DS(NS.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var WM=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new DS(NS.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new DS(NS.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,qM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),KM=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WM({}),this._settingsFrozen=!1,t instanceof OM?(this._databaseId=t,this._credentials=new DM):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new DS(NS.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new OM(t.options.projectId)}(t),this._credentials=new LM(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new DS(NS.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new DS(NS.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WM(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new DM;switch(t.type){case"gapi":var e=t.client;return VS(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new UM(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new DS(NS.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=PM.get(this))&&(jS("ComponentProvider","Removing Datastore"),PM.delete(this),t.terminate()),Promise.resolve();var t},t}(),JM=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new XM(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),YM=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),XM=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,nE(r))||this)._path=r,i.type="collection",i}return(0,Us.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new JM(this.firestore,null,new yk(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(YM);function QM(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,sd.m9)(t),FM("collection","path",e),t instanceof KM)return ZM(n=nk.fromString.apply(nk,(0,Us.ev)([e],r))),new XM(t,null,n);if(!(t instanceof JM||t instanceof XM))throw new DS(NS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ZM(n=nk.fromString.apply(nk,(0,Us.ev)([t.path],r)).child(nk.fromString(e))),new XM(t.firestore,null,n)}function tR(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,sd.m9)(t),1===arguments.length&&(e=zS.u()),FM("doc","path",e),t instanceof KM)return VM(n=nk.fromString.apply(nk,(0,Us.ev)([e],r))),new JM(t,null,new yk(n));if(!(t instanceof JM||t instanceof XM))throw new DS(NS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return VM(n=t._path.child(nk.fromString.apply(nk,(0,Us.ev)([e],r)))),new JM(t.firestore,t instanceof XM?t.converter:null,new yk(n))}function eR(t,e){return t=(0,sd.m9)(t),e=(0,sd.m9)(e),(t instanceof JM||t instanceof XM)&&(e instanceof JM||e instanceof XM)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nR(t,e){return t=(0,sd.m9)(t),e=(0,sd.m9)(e),t instanceof YM&&e instanceof YM&&t.firestore===e.firestore&&hE(t._query,e._query)&&t.converter===e.converter}var rR=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new $C(this,"async_queue_retry"),this.Ec=function(){var e=NC();e&&jS("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=NC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=NC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!OT(t=n.sent()))throw t;return jS("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,US("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=pA.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&qS()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function iR(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new TT,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var oR=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new rR,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Us.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||sR(this),this._firestoreClient.terminate()},e}(KM);function aR(t){return t._firestoreClient||sR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function sR(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new RM(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new bM(t._credentials,t._queue,r)}function uR(t,e,n){var r=this,i=new TT;return t.asyncQueue.enqueue(function(){return(0,Us.mG)(r,void 0,void 0,function(){var r;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,wM(t,n)];case 1:return o.sent(),[4,_M(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===NS.FAILED_PRECONDITION||t.code===NS.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function cR(t){if(t._initialized||t._terminated)throw new DS(NS.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var lR=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new DS(NS.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ik(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),hR=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ak.fromBase64String(e))}catch(e){throw new DS(NS.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ak.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),fR=function(t){this._methodName=t},dR=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new DS(NS.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new DS(NS.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return GS(this._lat,t._lat)||GS(this._long,t._long)},t}(),pR=/^__.*__$/,vR=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new VE(t,this.data,this.fieldMask,e,this.fieldTransforms):new qE(t,this.data,e,this.fieldTransforms)},t}(),gR=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new VE(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function yR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qS()}}var mR=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return jR(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(yR(this.Dc)&&pR.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),bR=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||DC(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new mR({Dc:t,methodName:e,Lc:n,path:ik.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function wR(t){var e=t._freezeSettings(),n=DC(t._databaseId);return new bR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _R(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);NR("Data must be an object, but it was:",a,r);var s,u,c=OR(r,a);if(o.merge)s=new ok(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=DR(e,f[h],n);if(!a.contains(d))throw new DS(NS.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");UR(l,d)||l.push(d)}s=new ok(l),u=a.fieldTransforms.filter(function(t){return s.covers(t.field)})}else s=null,u=a.fieldTransforms;return new vR(new Rk(c),s,u)}var SR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(fR);function kR(t,e,n){return new mR({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var ER=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new OE(t.path,new EE)},e.prototype.isEqual=function(t){return t instanceof e},e}(fR),xR=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Us.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=kR(this,t,!0),n=this.qc.map(function(t){return RR(t,e)}),r=new xE(n);return new OE(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fR),TR=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return(0,Us.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=kR(this,t,!0),n=this.qc.map(function(t){return RR(t,e)}),r=new IE(n);return new OE(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(fR),IR=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Us.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new AE(t.R,bE(t.R,this.Uc));return new OE(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(fR);function CR(t,e,n,r){var i=t.Bc(1,e,n);NR("Data must be an object, but it was:",i,r);var o=[],a=Rk.empty();QS(r,function(t,r){var s=LR(e,t,n);r=(0,sd.m9)(r);var u=i.kc(s);if(r instanceof SR)o.push(s);else{var c=RR(r,u);null!=c&&(o.push(s),a.set(s,c))}});var s=new ok(o);return new gR(a,s,i.fieldTransforms)}function AR(t,e,n,r,i,o){var a=t.Bc(1,e,n),s=[DR(e,r,n)],u=[i];if(o.length%2!=0)throw new DS(NS.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(DR(e,o[c])),u.push(o[c+1]);for(var l=[],h=Rk.empty(),f=s.length-1;f>=0;--f)if(!UR(l,s[f])){var d=s[f],p=u[f];p=(0,sd.m9)(p);var v=a.kc(d);if(p instanceof SR)l.push(d);else{var g=RR(p,v);null!=g&&(l.push(d),h.set(d,g))}}var y=new ok(l);return new gR(h,y,a.fieldTransforms)}function MR(t,e,n,r){return void 0===r&&(r=!1),RR(n,t.Bc(r?4:3,e))}function RR(t,e){if(PR(t=(0,sd.m9)(t)))return NR("Unsupported field value:",e,t),OR(t,e);if(t instanceof fR)return function(t,e){if(!yR(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=RR(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,sd.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bE(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=JS.fromDate(t);return{timestampValue:Ix(e.R,n)}}if(t instanceof JS)return n=new JS(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ix(e.R,n)};if(t instanceof dR)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hR)return{bytesValue:Cx(e.R,t._byteString)};if(t instanceof JM){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Rx(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+HM(t))}(t,e)}function OR(t,e){var n={};return tk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):QS(t,function(t,r){var i=RR(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function PR(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof JS||t instanceof dR||t instanceof hR||t instanceof JM||t instanceof fR)}function NR(t,e,n){if(!PR(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=HM(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function DR(t,e,n){if((e=(0,sd.m9)(e))instanceof lR)return e._internalPath;if("string"==typeof e)return LR(t,e);throw jR("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var $R=new RegExp("[~\\*/\\[\\]]");function LR(t,e,n){if(e.search($R)>=0)throw jR("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(lR.bind.apply(lR,(0,Us.ev)([void 0],e.split(".")))))._internalPath}catch(Wm){throw jR("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function jR(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new DS(NS.INVALID_ARGUMENT,(s+=". ")+t+u)}function UR(t,e){return t.some(function(t){return t.isEqual(e)})}var FR=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new JM(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new BR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(qR("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),BR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(FR);function qR(t,e){return"string"==typeof e?LR(t,e):e instanceof lR?e._internalPath:e._delegate._internalPath}var VR=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ZR=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return(0,Us.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new HR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(qR("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(FR),HR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ZR),zR=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new VR(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new HR(n._firestore,n._userDataWriter,r.key,r,new VR(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new DS(NS.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new HR(t._firestore,t._userDataWriter,e.doc.key,e.doc,new VR(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new HR(t._firestore,t._userDataWriter,e.doc.key,e.doc,new VR(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:GR(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function GR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qS()}}function WR(t,e){return t instanceof ZR&&e instanceof ZR?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof zR&&e instanceof zR&&t._firestore===e._firestore&&nR(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function KR(t){if(iE(t)&&0===t.explicitOrderBy.length)throw new DS(NS.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var JR=function(){};function YR(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var XR=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return(0,Us.ZT)(e,t),e.prototype._apply=function(t){var e=wR(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new DS(NS.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){oO(a,o);for(var u=[],c=0,l=a;c<l.length;c++)u.push(iO(r,t,l[c]));s={arrayValue:{values:u}}}else s=iO(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||oO(a,o),s=MR(n,"where",a,"in"===o||"not-in"===o);var h=Uk.create(i,o,s);return function(t,e){if(e.g()){var n=aE(t);if(null!==n&&!n.isEqual(e.field))throw new DS(NS.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=oE(t);null!==r&&aO(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new DS(NS.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new YM(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new tE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(JR),QR=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return(0,Us.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new DS(NS.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new DS(NS.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Jk(e,n);return function(t,e){if(null===oE(t)){var n=aE(t);null!==n&&aO(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new YM(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new tE(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(JR),tO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return(0,Us.ZT)(e,t),e.prototype._apply=function(t){return new YM(t.firestore,t.converter,lE(t._query,this.Gc,this.zc))},e}(JR),eO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Us.ZT)(e,t),e.prototype._apply=function(t){var e=rO(t,this.type,this.Hc,this.Jc);return new YM(t.firestore,t.converter,function(t,e){return new tE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(JR),nO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,Us.ZT)(e,t),e.prototype._apply=function(t){var e=rO(t,this.type,this.Hc,this.Jc);return new YM(t.firestore,t.converter,function(t,e){return new tE(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(JR);function rO(t,e,n,r){if(n[0]=(0,sd.m9)(n[0]),n[0]instanceof FR)return function(t,e,n,r,i){if(!r)throw new DS(NS.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=uE(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(xk(e,r.key));else{var c=r.data.field(u.field);if(hk(c))throw new DS(NS.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new DS(NS.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Wk(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=wR(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new DS(NS.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new DS(NS.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!sE(t)&&-1!==c.indexOf("/"))throw new DS(NS.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(nk.fromString(c));if(!yk.isDocumentKey(l))throw new DS(NS.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new yk(l);s.push(xk(e,h))}else{var f=MR(n,r,c);s.push(f)}}return new Wk(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function iO(t,e,n){if("string"==typeof(n=(0,sd.m9)(n))){if(""===n)throw new DS(NS.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sE(e)&&-1!==n.indexOf("/"))throw new DS(NS.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(nk.fromString(n));if(!yk.isDocumentKey(r))throw new DS(NS.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return xk(t,new yk(r))}if(n instanceof JM)return xk(t,n._key);throw new DS(NS.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+HM(n)+".")}function oO(t,e){if(!Array.isArray(t)||0===t.length)throw new DS(NS.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new DS(NS.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function aO(t,e,n){if(!n.isEqual(e))throw new DS(NS.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var sO=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),mk(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ck(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lk(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw qS()}},t.prototype.convertObject=function(t,e){var n=this,r={};return QS(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new dR(ck(t.latitude),ck(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=fk(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(dk(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=uk(t);return new JS(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=nk.fromString(t);VS(nT(n));var r=new OM(n.get(1),n.get(3)),i=new yk(n.popFirst(5));return r.isEqual(e)||US("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function uO(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var cO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Us.ZT)(e,t),e.prototype.convertBytes=function(t){return new hR(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new JM(this.firestore,null,e)},e}(sO),lO=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=wR(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=hO(t,this._firestore),i=uO(r.converter,e,n),o=_R(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,NE.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=hO(t,this._firestore);return o="string"==typeof(e=(0,sd.m9)(e))||e instanceof lR?AR(this._dataReader,"WriteBatch.update",a._key,e,n,r):CR(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,NE.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=hO(t,this._firestore);return this._mutations=this._mutations.concat(new KE(e._key,NE.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new DS(NS.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function hO(t,e){if((t=(0,sd.m9)(t)).firestore!==e)throw new DS(NS.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var fO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Us.ZT)(e,t),e.prototype.convertBytes=function(t){return new hR(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new JM(this.firestore,null,e)},e}(sO);function dO(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=zM(t,JM);var o=zM(t.firestore,oR),a=wR(o);return vO(o,[("string"==typeof(e=(0,sd.m9)(e))||e instanceof lR?AR(a,"updateDoc",t._key,e,n,r):CR(a,"updateDoc",t._key,e)).toMutation(t._key,NE.exists(!0))])}function pO(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,sd.m9)(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||iR(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(iR(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof JM)c=zM(t.firestore,oR),l=nE(t._key.path),u={next:function(e){i[s]&&i[s](gO(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=zM(t,YM);c=zM(d.firestore,oR),l=d._query;var p=new fO(c);u={next:function(t){i[s]&&i[s](new zR(c,p,d,t))},error:i[s+1],complete:i[s+2]},KR(t._query)}return function(t,e,n,r){var i=this,o=new gM(r),a=new TA(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(i,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e=_A,[4,CM(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(i,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e=SA,[4,CM(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}})})})}}(aR(c),l,h,u)}function vO(t,e){return function(t,e){var n=this,r=new TT;return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(n,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return n=jA,[4,IM(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(aR(t),e)}function gO(t,e,n){var r=n.docs.get(e._key),i=new fO(t);return new ZR(t,i,e._key,r,new VR(n.hasPendingWrites,n.fromCache),e.converter)}var yO=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Us.ZT)(e,t),e.prototype.get=function(e){var n=this,r=hO(e,this._firestore),i=new fO(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new ZR(n._firestore,i,r._key,t._document,new VR(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=wR(t)}return t.prototype.get=function(t){var e=this,n=hO(t,this._firestore),r=new cO(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return qS();var i=t[0];if(i.isFoundDocument())return new FR(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new FR(e._firestore,r,n._key,null,n.converter);throw qS()})},t.prototype.set=function(t,e,n){var r=hO(t,this._firestore),i=uO(r.converter,e,n),o=_R(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=hO(t,this._firestore);return o="string"==typeof(e=(0,sd.m9)(e))||e instanceof lR?AR(this._dataReader,"Transaction.update",a._key,e,n,r):CR(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=hO(t,this._firestore);return this._transaction.delete(e._key),this},t}());function mO(){if("undefined"==typeof Uint8Array)throw new DS(NS.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function bO(){if("undefined"==typeof atob)throw new DS(NS.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wO=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return bO(),new t(hR.fromBase64String(e))},t.fromUint8Array=function(e){return mO(),new t(hR.fromUint8Array(e))},t.prototype.toBase64=function(){return bO(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return mO(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),_O=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){cR(t=zM(t,oR));var n=aR(t),r=t._freezeSettings(),i=new vM;return uR(n,i,new dM(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){cR(t=zM(t,oR));var e=aR(t),n=t._freezeSettings(),r=new vM;return uR(e,r,new pM(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new DS(NS.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new TT;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Us.mG)(e,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return AT.yt()?[4,AT.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(FI(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),SO=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof OM||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=zM(t,KM))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&FS("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,sd.Sg)(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new DS(NS.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new $M(new NM(o,new yC(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Us.mG)(e,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,EM(t)];case 1:return e=r.sent(),[4,TM(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ZS(t);return e.$r.delete(0),VC(e)}(n))]}})})})}(aR(zM(this._delegate,oR)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Us.mG)(e,void 0,void 0,function(){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,EM(t)];case 1:return e=r.sent(),[4,TM(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return(e=ZS(t)).$r.add(0),[4,ZC(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(aR(zM(this._delegate,oR)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&qM("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new TT;return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(e,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return e=ZA,[4,IM(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(aR(zM(this._delegate,oR)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new gM(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(n,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ZS(t).Gr.add(e),e.next()},[4,CM(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(n,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ZS(t).Gr.delete(e)},[4,CM(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(aR(t=zM(t,oR)),iR(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new DS(NS.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new $O(this,QM(this._delegate,t))}catch(t){throw CO(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new IO(this,tR(this._delegate,t))}catch(t){throw CO(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new PO(this,function(t,e){if(t=zM(t,KM),FM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new DS(NS.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new YM(t,null,function(t){return new tE(nk.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw CO(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new TT;return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(n,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return kM(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new mM(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(aR(t),function(n){return e(new yO(t,n))})}(this._delegate,function(n){return t(new EO(e,n))})},t.prototype.batch=function(){var t=this;return aR(this._delegate),new xO(new lO(this._delegate,function(e){return vO(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new DS(NS.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new DS(NS.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),kO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Us.ZT)(e,t),e.prototype.convertBytes=function(t){return new wO(new hR(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return IO.Zc(e,this.firestore,null)},e}(sO),EO=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new kO(t)}return t.prototype.get=function(t){var e=this,n=LO(t);return this._delegate.get(n).then(function(t){return new RO(e._firestore,new ZR(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=LO(t);return n?(BM("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=LO(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,Us.ev)([a,e,n],i)),this},t.prototype.delete=function(t){var e=LO(t);return this._delegate.delete(e),this},t}(),xO=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=LO(t);return n?(BM("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=LO(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,Us.ev)([a,e,n],i)),this},t.prototype.delete=function(t){var e=LO(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),TO=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new HR(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new OO(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new kO(e),n),i.set(n,o)),o},t}();TO.eu=new WeakMap;var IO=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kO(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new DS(NS.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new JM(n._delegate,r,new yk(e)))},t.Zc=function(e,n,r){return new t(n,new JM(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new $O(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new $O(this.firestore,QM(this._delegate,t))}catch(t){throw CO(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,sd.m9)(t))instanceof JM&&eR(this._delegate,t)},t.prototype.set=function(t,e){e=BM("DocumentReference.set",e);try{return function(t,e,n){t=zM(t,JM);var r=zM(t.firestore,oR),i=uO(t.converter,e,n);return vO(r,[_R(wR(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,NE.none())])}(this._delegate,t,e)}catch(t){throw CO(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?dO(this._delegate,t):dO.apply(void 0,(0,Us.ev)([this._delegate,t,e],n))}catch(t){throw CO(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return vO(zM((t=this._delegate).firestore,oR),[new KE(t._key,NE.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=AO(e),i=MO(e,function(e){return new RO(t.firestore,new ZR(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return pO(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zM(t,JM);var e=zM(t.firestore,oR),n=aR(e),r=new fO(e);return function(t,e){var n=this,r=new TT;return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(n,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ZS(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new DS(NS.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=vA(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,xM(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new ZR(e,r,t._key,n,new VR(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zM(t,JM);var e=zM(t.firestore,oR);return AM(aR(e),t._key,{source:"server"}).then(function(n){return gO(e,t,n)})}(this._delegate):function(t){t=zM(t,JM);var e=zM(t.firestore,oR);return AM(aR(e),t._key).then(function(n){return gO(e,t,n)})}(this._delegate)).then(function(t){return new RO(e.firestore,new ZR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?TO.tu(this.firestore,e):null))},t}();function CO(t,e,n){return t.message=t.message.replace(e,n),t}function AO(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!iR(r))return r}return{}}function MO(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=iR(t[0])?t[0]:iR(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var RO=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new IO(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return WR(this._delegate,t._delegate)},t}(),OO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(RO),PO=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kO(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,YR(this._delegate,function(t,e,n){var r=e,i=qR("where",t);return new XR(i,r,n)}(e,n,r)))}catch(e){throw CO(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,YR(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=qR("orderBy",t);return new QR(r,n)}(e,n)))}catch(e){throw CO(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,YR(this._delegate,function(t){return GM("limit",t),new tO("limit",t,"F")}(e)))}catch(e){throw CO(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,YR(this._delegate,function(t){return GM("limitToLast",t),new tO("limitToLast",t,"L")}(e)))}catch(e){throw CO(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,YR(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eO("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw CO(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,YR(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eO("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw CO(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,YR(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nO("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw CO(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,YR(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nO("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw CO(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return nR(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=zM(t,YM);var e=zM(t.firestore,oR),n=aR(e),r=new fO(e);return function(t,e){var n=this,r=new TT;return t.asyncQueue.enqueueAndForget(function(){return(0,Us.mG)(n,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o,a,s;return(0,Us.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,eC(t,e,!0)];case 1:return s=u.sent(),r=new RA(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=vA(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}})})},[4,xM(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new zR(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=zM(t,YM);var e=zM(t.firestore,oR),n=aR(e),r=new fO(e);return MM(n,t._query,{source:"server"}).then(function(n){return new zR(e,r,t,n)})}(this._delegate):function(t){t=zM(t,YM);var e=zM(t.firestore,oR),n=aR(e),r=new fO(e);return KR(t._query),MM(n,t._query).then(function(n){return new zR(e,r,t,n)})}(this._delegate)).then(function(t){return new DO(e.firestore,new zR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=AO(e),i=MO(e,function(e){return new DO(t.firestore,new zR(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return pO(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?TO.tu(this.firestore,e):null))},t}(),NO=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new OO(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),DO=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new PO(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new OO(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new NO(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new OO(n._firestore,r))})},t.prototype.isEqual=function(t){return WR(this._delegate,t._delegate)},t}(),$O=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Us.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new IO(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new IO(this.firestore,void 0===t?tR(this._delegate):tR(this._delegate,t))}catch(t){throw CO(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=zM(t.firestore,oR),r=tR(t),i=uO(t.converter,e);return vO(n,[_R(wR(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,NE.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new IO(e.firestore,t)})},e.prototype.isEqual=function(t){return eR(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?TO.tu(this.firestore,t):null))},e}(PO);function LO(t){return zM(t,JM)}var jO,UO,FO=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(lR.bind.apply(lR,(0,Us.ev)([void 0],t)))}return t.documentId=function(){return new t(ik.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,sd.m9)(t))instanceof lR&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),BO=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new ER("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new SR("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xR("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new TR("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new IR("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),qO={Firestore:SO,GeoPoint:dR,Timestamp:JS,Blob:wO,Transaction:EO,WriteBatch:xO,DocumentReference:IO,DocumentSnapshot:RO,Query:PO,QueryDocumentSnapshot:OO,QuerySnapshot:DO,CollectionReference:$O,FieldPath:FO,FieldValue:BO,setLogLevel:function(t){$S.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new ad.wA("firestore",function(t){return function(t,e){return new SO(t,new oR(t,e),new _O)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},qO)))})(jO=ll.Z),jO.registerVersion("@firebase/firestore","2.3.0"),ll.Z.database.INTERNAL.forceWebSockets(),function(t){if(gl)throw new Error("fbWrapper.configure cannot be called after wrapper was used");vl=function(){return[ll.Z,(UO||(UO=ll.Z.initializeApp(Yc.firebaseConfig)),UO)]}}(),n(25279),n(79233),n(82774),n(33195),n(87973),angular.module("castifyExt.commonConfig",["castifyExt.castifyAuth","w69b.chromeAnalytics","w69b.chromeRuntime","castifyExt.appOptions","cf2.userAccount"]).config(["$compileProvider","$sceDelegateProvider","analyticsProvider","$locationProvider",function(t,e,n,r){n.setTrackingId(Yc.analyticsId),n.setApp("Screencastify"),e.resourceUrlWhitelist(["self","http://localhost:9008/**","blob:**","filesystem:chrome-extension://**","https://**"]);var i=/^\s*(https?|mailto|blob|chrome-extension|filesystem:chrome-extension):/;t.aHrefSanitizationWhitelist(i),t.imgSrcSanitizationWhitelist(i),r.hashPrefix("")}]).run(["$rootScope","analytics","chromeRuntime","appOptions","$injector","userAccount",function(t,e,n,r,i,o){var a=i.has("$transitions")?i.get("$transitions"):null,s=r.loadedPromise.then(u);function u(){return o.getAccount().then(function(t){e.tracker.set("dimension1",t.license.isPaid?"paid":t.license.isTester?"tester":"trial"),e.tracker.set("dimension2",n.getManifest().version),e.tracker.set("dimension5",r.values.hwEncoding),t.user?(e.tracker.set("userId",t.user.analyticsUid),e.tracker.set("dimension4",t.user.analyticsUid),e.setEnabled(r.values.enableAnalytics&&!1!==t.user.analyticsEnabled)):e.setEnabled(r.values.enableAnalytics)})}a&&a.onSuccess({},function(t){var n=t.targetState().state(),r=n.analyticsView||n.pageTitle;r&&s.then(function(){e.tracker.sendAppView(r)})}),t.$on("event:userAccountChanged",u)}]).factory("castifyConfig",function(){return{API_URL:Yc.apiUrl,PROXY_API_URL:Yc.proxyApiUrl,IS_E2E:window.localStorage.e2e}}),angular.module("castifyExt.authConfig",["castifyExt.youtubeAuth","castifyExt.castifyAuth","w69b.chromeRuntime","w69b.googleHttpAuthInterceptor","castifyExt.youtubeAuth"]).config(["$httpProvider","youtubeAuthProvider","googleHttpAuthInterceptorProvider",function(t,e,n){e.setClientId(Yc.youtubeClientId),t.interceptors.push("youtubeHttpAuthInterceptor"),t.interceptors.push("googleHttpAuthInterceptor"),n.enableAuthAutoRetry(!0),n.setAuthProvider("castifyAuth")}]),n(2095),n(18058),angular.module("castifyExt.audioStreamMixer",["castifyExt.audioContextPool"]).factory("audioStreamMixer",["audioContextPool",function(t){return function(){var e=t.acquire(),n=e.createMediaStreamDestination(),r={},i={},o={addStream:function(t,o){var a=e.createMediaStreamSource(o),s=e.createGain();i[t]=a,r[t]=s,a.connect(s),s.connect(n)},replaceStream:function(t,n){var a=i[t];a||o.addStream(t,n),a.disconnect(),e.createMediaStreamSource(n).connect(r[t])},setGain:function(t,e){r[t].gain.value=e}};return o.outStream=n.stream,o.dispose=function(){o.outStream.getTracks().forEach(function(t){t.stop()}),n.disconnect(),angular.forEach(r,function(t){t.disconnect()}),angular.forEach(i,function(t){t.disconnect()}),t.release(e)},o}}]);var VO=function(){function t(t,e,n,r){this.spawn=t,this.optionalPermissions=e,this.chromeCommands=n,this.webrtc=r,this.setShortcuts=this.spawn.wrap(function(t){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.shouldUseCastifyDraw(t)];case 1:return n.sent()?(e=t.draw,[4,this.chromeCommands.getAll()]):[3,3];case 2:e.chromeCommands=n.sent(),n.label=3;case 3:return[2]}})}),this.shouldUseCastifyDraw=this.spawn.wrap(function(t){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this.optionalPermissions.hasTabPermissions(t)];case 1:return e=n.sent(),[2,["tab","desktop","screen","tab_picker"].includes(t.captureSource)&&e&&!!t.draw]}})}),this.setControlWebcam=this.spawn.wrap(function(t){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return e=t.draw,(n=t.audio.mic||t.embedWebcam||"pip"===t.draw.webcamDisplay)?[4,this.webrtc.hasVideoAccess()]:[3,2];case 1:n=r.sent(),r.label=2;case 2:return e.controlWebcam=n,[2]}})})}return t.$inject=["spawn","optionalPermissions","chromeCommands","webrtc"],t.prototype.createFromConfig=function(t){var e;return t.draw?((e=t.draw).controlWebcam=!1,e.embedWebcam=!1,e.webcamDisplay="embed",("tab"===t.captureSource||function(t){return["desktop","screen","tab_picker"].includes(t.captureSource)}(t))&&(e.controlWebcam=!0,e.embedWebcam=t.embedWebcam,e.camSourceId=t.camSourceId),e):null},t.prototype.enablePiP=function(t){t.controlWebcam=!0,t.webcamDisplay="pip",t.pip=!0,t.embedWebcam=!1},t}();ls.module("castifyExt.drawConfig",[]).service("drawConfig",VO);var ZO=["h264","vp8","vp9"],HO=["screen","cam"],zO=["low","medium","high"],GO={cam:{h264:{high:[[0,3],[720,6],[1080,7],[2e3,10]],medium:[[0,2],[720,2.5],[1080,3.5],[2e3,4]],low:[[0,.4],[720,.6],[1080,1],[2e3,1.3]]},vp8:{high:[[0,3],[720,5],[1080,7],[2e3,10]],medium:[[0,1.5],[720,3],[1080,2.5],[2e3,3]],low:[[0,.4],[720,.6],[1080,1],[2e3,1.3]]},vp9:{high:[[0,1.5],[720,2],[1080,3],[2e3,4]],medium:[[0,1],[720,1.75],[1080,2],[2e3,2.5]],low:[[0,.25],[720,.5],[1080,.75],[2e3,1]]}},screen:{h264:{high:[[0,3],[720,6],[1080,7],[2e3,10]],medium:[[0,3],[720,4.5],[1080,2.5],[2e3,2.5]],low:[[0,1.5],[720,1],[1080,.5],[2e3,.3]]},vp8:{high:[[0,3],[720,5],[1080,7],[2e3,10]],medium:[[0,2],[720,3],[1080,2.5],[2e3,2.5]],low:[[0,1.5],[720,1],[1080,.5],[2e3,.3]]},vp9:{high:[[0,1.5],[720,2],[1080,3],[2e3,5]],medium:[[0,1],[720,2.25],[1080,2.5],[2e3,1.6]],low:[[0,.75],[720,.5],[1080,.25],[2e3,.15]]}}};function WO(){return window.navigator.userAgent}function KO(){return!(WO().indexOf("CrOS")>=0||WO().includes("Windows"))||Number((/Chrome\/(\d+)/.exec(WO())||[void 0,0])[1])>=90?"h264":"vp9"}function JO(t,e,n,r){var i={videoTitleNamingScheme:"tabTitle",notifyAudio:!0,notifyFramerate:!1,notifyTabFocus:!0,uploadPrivacy:"public",autoOpen:!0,autoPlay:!0,driveSync:!0,enableDiskSpaceWatcher:!0,notifySyncProgress:!1,notifyEditProgress:!0,enableAnalytics:!0,showEditToolsHint:!0,enableWindowPicker:!0,audioCodec:null,bitRateOption:"medium",hwEncoding:KO(),hideRestartAlert:!1,hideDiscardAlert:!1,featureRolloutRand:null,hasUsedAudioExport:!1,enableAudioExport:!1,hasSilencedTrimConfirm:!1,hasVisitedNewVDP:!1,useVideoExportForAudioExport:!1,enablePersistentDriveCache:!1,showEditorButtonCovidTrial:!1,showEditorButton:!0,autoTrim:!1,videoCodec:KO(),hasSilencedEditorConfirm:!1,lastSavedDomainPermissionList:null,customDefaultVideoPermission:null,customDefaultDomainPermissionList:null,freeUserLimitRollout:!1,hasSilencedYouTubeConfirm:!1},o=!1,a={},s={},u={};function c(t){return r.options.hasOwnProperty(t)}return a.localValues=ls.copy({micGain:1,micAudioProcessing:!0}),a.loadedPromise=n.all({sync:t.sync.getSingle("options"),local:t.local.getSingle("options"),rollout:t.sync.getSingle("rolloutOptions"),managed:r.loadedPromise}).then(function(t){ls.extend(s,t.sync),ls.extend(u,t.rollout),ls.extend(a.localValues,t.local),o=!0}),a.values={},Object.keys(i).forEach(function(t){Object.defineProperty(a.values,t,{enumerable:!0,get:function(){return c(t)?function(t){return r.options[t]}(t):s.hasOwnProperty(t)?s[t]:u.hasOwnProperty(t)?u[t]:i[t]},set:function(e){s[t]=e}})}),a.setRolloutValues=function(e){return t.sync.setSingle("rolloutOptions",u=e)},a.save=function(){return t.sync.setSingle("options",s)},a.saveLocal=function(){return t.local.setSingle("options",a.localValues)},a.isLoaded=function(){return o},a.isSetByEnterprisePolicy=function(t){return c(t)},t.onChanged.addListener(function(t,n){"sync"===n&&t.options&&(ls.extend(s,t.options.newValue),e.$$phase||e.$digest()),"sync"===n&&t.rolloutOptions&&(ls.extend(u,t.rolloutOptions.newValue),e.$$phase||e.$digest()),"local"===n&&t.options&&(ls.extend(a.localValues,t.options.newValue),e.$$phase||e.$digest())}),a}ls.module("castifyExt.chromeVideoRecorder",["w69b.webrtc","w69b.chromeCapture","w69b.chromeTabs","w69b.promiseTool","w69b.spawn","w69b.chromeCommands","castifyExt.ui.audioCountdown","castifyExt.optionalPermissions","castifyExt.resizeTab","castifyExt.audioStreamMixer","castifyExt.webrtcRecorder","castifyExt.recordTool","castifyExt.hdpiTool","castifyExt.deadAudioStreamChecker","w69b.filesHelper","castifyExt.pip","castifyExt.drawConfig","cf2.upgradeHelperService"]).provider("chromeVideoRecorder",function(){this.$get=["$log","webrtc","chromeCapture","$q","cf2BgCastifyDrawService","resizeTab","chromeTabs","audioStreamMixer","$rootScope","promiseTool","optionalPermissions","spawn","hdpiTool","webrtcRecorder","audioCountdown","filesHelper","deadAudioStreamChecker","pip","drawConfig","cf2UpgradeHelperService","cf2SpeechDetectionService",function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g,y,m,b,w){var _,S,k,E,x=[{width:1920,height:1080},{width:1280,height:720},{width:854,height:480},{width:640,height:360},{width:320,height:240},{width:320,height:180}],T={},I=document.createElement("video"),C=null,A={},M=null,R=!1;function O(){t.warn("chromeVideoRecorder: video stream ended while still recording"),u.$broadcast("chromeVideoRecorder:streamEnded")}function P(t){t.getTracks().forEach(function(t){t.stop()})}function N(){return Number((/Chrome\/(\d+)/.exec(window.navigator.userAgent)||[void 0,0])[1])}function D(){w.stopDetecting(),k&&k.dispose(),k=null,T.video&&T.video.removeEventListener("inactive",O),ls.forEach(T,function(t){P(t)}),T={}}function $(t){T.video&&(T.video.removeEventListener("inactive",O),P(T.video)),T.video=t,t.addEventListener("inactive",O)}function L(e){return t.debug("chromeVideoRecorder: capture mic failed",e&&e.name),"NotReadableError"===e.name?(t.error("chromeVideoRecorder: NotReadableError:",e),r.reject("start_error:no_audio_access")):r.reject(e)}function j(t){var n={video:!0};return t.camSourceId&&(n.video={deviceId:t.camSourceId}),e.getUserMedia(n)}var U=h.wrap(function(e){function n(){var t=[],n=x.filter(function(t){return t.height<=i.height});e.resolution&&(n=n.filter(function(t){return t.height!==i.height})).unshift(i),n.forEach(function(e){t.push({minHeight:e.height})});var r={audio:q(e),video:{optional:t,mandatory:{maxWidth:i.width,maxHeight:i.height,maxFrameRate:e.targetFPS}}};return e.camSourceId&&(r.video.mandatory.sourceId=e.camSourceId),g.getUserMedia(r).catch(L)}var i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:(i=e.resolution)||(i={width:4096,height:4096}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n()];case 2:return[2,a.sent()];case 3:return o=a.sent(),t.warn("chromeVideoRecorder: failed to get webcam stream",o),[2,r.reject(o)];case 4:return[2]}})});function F(t){return t||r.reject("stream is null")}var B=h.wrap(function(t){var i,o,a,s,u,c;return(0,Us.Jh)(this,function(l){switch(l.label){case 0:return(i=t.resolution)||(i={width:4096,height:4096}),o=t.audio.system,E&&E.cancelled?[2,r.reject("cancelled")]:["desktop","screen","tab_picker"].includes(t.captureSource)?(a=void 0,a="desktop"===t.captureSource?["screen","window"]:"screen"===t.captureSource?["screen"]:["tab"],N()>=50&&t.audio.system&&a.push("audio"),(C=n.chooseDesktopMedia(a)).promise.finally(function(){C=!1}),[4,C.promise]):[3,2];case 1:return(s=l.sent())?(c={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxWidth:i.width,maxHeight:i.height,maxFrameRate:t.targetFPS}}},a.includes("window")&&(u=f.scaleResolution(f.getScreenCssResolution(),i),c.video.mandatory=(0,Us.pi)((0,Us.pi)({},c.video.mandatory),{maxWidth:u.width,maxHeight:u.height,minWidth:u.width,minHeight:u.height})),o&&(c.audio={mandatory:{chromeMediaSource:N()>=52?"desktop":"system"}}),[2,e.getUserMedia(c).then(F)]):[2,r.reject("cancelled")];case 2:if("tab"===t.captureSource)return c={video:!0,videoConstraints:{mandatory:{maxWidth:i.width,maxHeight:i.height,maxFrameRate:t.targetFPS}},audio:o},o&&(c.audioConstraints={mandatory:{googEchoCancellation:!1,googAutoGainControl:!1,googNoiseSuppression:!1,googHighpassFilter:!1}}),[2,n.tabCapture(c).then(F)];if("cam"===t.captureSource)return[2,U(t).then(F)];throw Error();case 3:return[2]}})});function q(t){if(t.audio.mic){var e={echoCancellation:!1!==t.audio.micAudioProcessing};return t.audio.micSourceId&&(e.sourceId=t.audio.micSourceId),{mandatory:e}}return!1}function V(t){var e=!!t.embedWebcam;return e&&t.camSourceId&&(e={mandatory:{sourceId:t.camSourceId}}),g.getUserMedia({audio:q(t),video:e}).catch(L).catch(function(t){return r.reject(t)})}function Z(){y.close(),i.disposeAll(),D(),S&&(S=null),M=null}function H(t){t.audio.system&&"tab"===t.captureSource&&(I.srcObject=T.video,I.volume=1,I.play().catch(function(){return null}))}function z(t){for(var e=2,n=e,r=1;r<Math.floor(16/f.devicePixelRatio);++r)if((n=Math.round(100*f.devicePixelRatio*r)/100)%2==0){e=n;break}var i=t.width%e,o=t.height%e;return!(!i&&!o||(t.width-=i,t.height-=o,0))}function G(e){return e.startDelay&&!1!==e.audibleCountdown?c.withTimeout(function(){return p.load(e.startDelay).catch(function(e){t.warn("chromeVideoRecorder: loading countdown failed: ",e)})},2e3,function(){return t.warn("chromeVideoRecorder: loading countdown timed out"),!0}):null}function W(){return null}return A.togglePipWebcam=h.wrap(function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return y.isActive?(y.close(),[3,4]):[3,1];case 1:return[4,y.open()];case 2:return e.sent(),t=T,[4,j(_)];case 3:t.pip=e.sent(),y.playVideoStream(T.pip),e.label=4;case 4:return[2]}})}),A.start=function(e){t.debug("chromeVideoRecorder: "+e.captureSource+" recording starting...",e);var n,c=h.wrap(function(){var t,n,r,i;return(0,Us.Jh)(this,function(s){switch(s.label){case 0:return"tab"!==e.captureSource?[2,null]:(r=(n=f).toPhysicalResolution,[4,a.get(e.tabId)]);case 1:return t=r.apply(n,[s.sent()]),e.resolution||(e.resolution=ls.copy(t)),e.resolution=f.scaleResolution(t,e.resolution),z(e.resolution),z(t)?(i=f.toCssResolution(t),[4,o(e.tabId,i.width,i.height,!1)]):[3,3];case 2:s.sent(),s.label=3;case 3:return[2,null]}})}),v=h.wrap(function(){var t;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return e.audio.mic||e.embedWebcam?"cam"!==e.captureSource?[3,1]:(t=n,[3,3]):[3,4];case 1:return[4,V(e)];case 2:t=r.sent(),r.label=3;case 3:return[3,5];case 4:t=null,r.label=5;case 5:return t&&(T.mic=t),[2,t]}})}),g=h.wrap(function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return"tab"!==e.captureSource?[3,2]:[4,l.hasTabPermissions(e)];case 1:if(!t.sent())return[2,r.reject("tab_permissions_denied")];t.label=2;case 2:return[2]}})}),x=h.wrap(function(){var o,l,h,f,d;return(0,Us.Jh)(this,function(b){switch(b.label){case 0:return y.isActive?(o=T,[4,j(e)]):[3,2];case 1:o.pip=b.sent(),y.playVideoStream(T.pip),b.label=2;case 2:return[4,r.all([S.load(),c(),g(),G(e)])];case 3:b.sent(),t.debug("chromeVideoRecorder: getting video stream"),b.label=4;case 4:return b.trys.push([4,6,,7]),[4,B(e)];case 5:return n=b.sent(),[3,7];case 6:throw l=b.sent(),t.warn("chromeVideoRecorder: could not get video stream",_=l),r.reject(_),l;case 7:return y.isActive&&(y.shouldUse(n)?(y.drawConfig=e.draw,m.enablePiP(e.draw),e.embedWebcam=!1):y.close()),[4,v()];case 8:return h=b.sent(),t.debug("chromeVideoRecorder: got video stream"),$(n),[4,"tab"===e.captureSource?a.get(e.tabId).then(function(t){M.originalMainSize={width:t.width,height:t.height}}):null];case 9:return b.sent(),[4,m.shouldUseCastifyDraw(e)];case 10:return b.sent()?[4,m.setShortcuts(e)]:[3,17];case 11:return b.sent(),e.draw.controlWebcam?[4,m.setControlWebcam(e)]:[3,13];case 12:b.sent(),e.embedWebcam=!1,b.label=13;case 13:return b.trys.push([13,15,,16]),[4,i.loadInTab(e.tabId,e.draw)];case 14:return b.sent(),[3,16];case 15:return f=b.sent(),t.warn("chromeVideoRecorder: failed to initialize draw",f),"tab"===e.captureSource&&(e.startDelay=0,M.startDelay=0,p.stop()),[3,16];case 16:return[3,18];case 17:e.draw=null,b.label=18;case 18:return t.debug("chromeVideoRecorder: got all streams"),M.videoTrack=n.getVideoTracks()[0],M.bitRate=function(t,e,n,r){return void 0===e&&(e="high"),zO.includes(e)||(e="high"),function(t,e){var n,r,i=t.getSettings(),o=Math.sqrt(i.width*i.height),a=function(t){var e=t.codec,n=t.content,r=t.quality;if(!ZO.includes(e)||!HO.includes(n)||!zO.includes(r))throw new Error;return GO[n][e][r]}(e),s=-1;try{for(var u=(0,Us.XA)(a),c=u.next();!c.done;c=u.next()){var l=(0,Us.CR)(c.value,2),h=l[1];if(!(o>=l[0]))break;s=h}}catch(MD){n={error:MD}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(s<0)throw new Error("invalid bitrate table?");return 1024*s*1024}(t,{content:"cam"===n?"cam":"screen",quality:e,codec:r})}(M.videoTrack,e.bitRateOption,e.captureSource,d=e.videoCodec||"h264"),M.mimeType=function(t){return'video/webm; codecs="'+t+', opus"'}(d),t.debug("chromeVideoRecorder: bitrate %dk",Math.floor(M.bitRate/1024)),e.audio.system&&!n.getAudioTracks().length&&(e.audio.system=!1,t.warn("chromeVideoRecorder: failed to capture system audio - stream has no audio track."),u.$broadcast("chromeVideoRecorder:systemAudioUnsupported")),e.audio.system&&e.audio.mic?(k=s(),M.audioTrack=k.outStream.getAudioTracks()[0],h&&e.audio.mic&&(k.addStream("mic",h),k.setGain("mic",e.audio.micGain||1)),e.audio.system&&k.addStream("system",n)):e.audio.mic?M.audioTrack=h.getAudioTracks()[0]:e.audio.system&&(M.audioTrack=n.getAudioTracks()[0]),e.embedWebcam&&h&&h.getVideoTracks().length&&(M.camTrack=h.getVideoTracks()[0],M.camPosition=e.camPosition),e.audio.mic&&e.computeTrimHint&&S.getPreciseCurrentTime&&w.startDetecting(h.getAudioTracks()[0],function(){return S.getPreciseCurrentTime()},e.fileId),H(e),t.debug("chromeVideoRecorder: starting encoder..."),[4,S.start(e.filename,M)];case 19:return b.sent(),t.debug("chromeVideoRecorder: "+e.captureSource+" recording started",e),p.start(),[2]}var _})});!function(){if(M={},_=e,e.draw=m.createFromConfig(e),e.targetFPS=e.targetFPS||30,e.draw&&(e.draw.timeLimit=b.getRecordingTimeLimit()),"cam"===e.captureSource&&(e.audio.system=!1,e.embedWebcam=!1,M.videoTrackIsCam=!0),!e.filename)throw new Error("filename required");e.audio||(e.audio={}),e.startDelay&&(M.startDelay=e.startDelay),E={cancelled:!1,cancel:function(){E.cancelled=!0,C&&C.cancel("cancelled")}},(S=d()).onError=function(t){"start_timeout"===t||ls.isString(t)&&t.startsWith("start_timeout:")||(Z(),u.$broadcast("chromeVideoRecorder:error",t))}}();var I=x().catch(function(e){return t.error("chromeVideoRecorder: start error",e),Z(),r.reject(e)});return E.promise=I,I.finally(function(){E=null}),I},A.setAutoStop=function(t){_.nonpersistent.autoStop=t},A.discard=h.wrap(function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return y.stop(),[4,p.stop()];case 1:return e.sent(),i.disposeAll(),[4,S.stop()];case 2:return e.sent(),D(),S=null,M=null,t.debug("chromeVideoRecorder: discarding recording"),[4,v.removeByPath(_.filename)];case 3:return e.sent(),[2]}})}),A.restart=h.wrap(function(e,n){var o,s,u,c,l;return void 0===e&&(e=function(){}),void 0===n&&(n=function(t){return t}),(0,Us.Jh)(this,function(f){switch(f.label){case 0:o=h.wrap(function(e){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return t.debug("chromeVideoRecorder: removing files..."),[4,v.removeByPath(e)];case 1:return[2,n.sent()]}})}),s=h.wrap(function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,p.stop()];case 1:return t.sent(),i.disposeAll(),[4,S.stop()];case 2:return t.sent(),[2]}})}),u=h.wrap(function(t,e){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,G(_)];case 1:return r.sent(),[4,a.getActiveTab()];case 2:return n=r.sent(),_.draw?(_.draw.timeLimit=b.getRecordingTimeLimit(),[4,i.loadInTab(n.id,_.draw).catch(W)]):[3,4];case 3:r.sent(),r.label=4;case 4:return[4,S.start(t,e)];case 5:return r.sent(),[4,p.start()];case 6:return r.sent(),[2]}})}),t.debug("chromeVideoRecorder: restarting..."),c=_.filename,R=!0,f.label=1;case 1:return f.trys.push([1,7,8,9]),[4,s()];case 2:return f.sent(),[4,r.when(e())];case 3:return f.sent(),[4,o(c)];case 4:return f.sent(),[4,r.when(n(Object.assign({},_))).then(function(t){return _=t})];case 5:return f.sent(),[4,u(_.filename,M)];case 6:return f.sent(),[3,9];case 7:throw l=f.sent(),t.error("chromeVideoRecorder: restart error",l),Z(),l;case 8:return R=!1,[7];case 9:return[2]}})}),A.stop=function(){return t.debug("chromeVideoRecorder: "+_.captureSource+" recording stopping..."),y.stop(),p.stop(),i.disposeAll(),S.stop().finally(function(){D(),S=null,M=null,t.debug("chromeVideoRecorder: "+_.captureSource+" recording stopped")})},A.pause=function(){var t=S.pause();return t.then(function(){p.pause()}),t},A.resume=function(){var t=S.resume();return t.then(function(){p.start()}),t},A.setMicGain=function(t){k&&k.setGain("mic",t)},A.getState=function(){return A.getStateObj().state},A.getStateObj=function(){var t;return t=R?{state:"recording",time:0}:S?S.getStateObj():{state:"inactive",time:0},ls.extend({},t,{isDesktopDialogShown:!!C})},A.cancelPendingStart=function(){return!!E&&(E.cancel(),!0)},A.getCurrentTime=function(){return S?S.getCurrentTime():0},A.getRecordingConfig=function(){return _},A.replaceStream=h.wrap(function(e){var n,o,a,s,u,c;return(0,Us.Jh)(this,function(l){switch(l.label){case 0:if(_.tabId===e.tabId)throw new Error("cannot replace stream for same tab");if(n=_.tabId,o=_.audio.system,a=ls.extend({},_,e),!S.replaceTracks)throw new Error("chromeVideoRecorder: replaceTracks not supported by chosen recorder");l.label=1;case 1:return l.trys.push([1,3,,4]),[4,B(a)];case 2:return s=l.sent(),[3,4];case 3:return u=l.sent(),t.warn("chromeVideoRecorder: could not get replacement stream",u),[2,r.reject(u)];case 4:return _=a,c={videoTrack:s.getVideoTracks()[0]},o&&(c.audioTrack=s.getAudioTracks()[0]),a.draw&&(a.draw.timeLimit=b.getRecordingTimeLimit(),i.loadInTab(a.tabId,a.draw).catch(W),i.disposeInTab(n)),[4,S.replaceTracks(c)];case 5:return l.sent(),M.videoTrack=s.getVideoTracks()[0],$(s),H(a),[2]}})}),A}],this.$get.$inject=["$log","webrtc","chromeCapture","$q","cf2BgCastifyDrawService","resizeTab","chromeTabs","audioStreamMixer","$rootScope","promiseTool","optionalPermissions","spawn","hdpiTool","webrtcRecorder","audioCountdown","filesHelper","deadAudioStreamChecker","pip","drawConfig","cf2UpgradeHelperService","cf2SpeechDetectionService"]}),n(66316),JO.$inject=["cf2ChromeStorageService","$rootScope","$q","enterprisePolicy"],ls.module("castifyExt.appOptions",["cf2.chromeStorageService","castifyExt.enterprisePolicy"]).factory("appOptions",JO),n(77999);var YO=n(17008);angular.module("castifyExt.switchTab",["w69b.spawn","w69b.chromeCommands","w69b.chromeNotifications"]).factory("switchTab",["$log","chromeCommands","chromeNotifications","spawn","cf2BgCastifyDrawService",function(t,e,n,r,i){var o={chromeNotify:function(){t.debug("switchTab: draw lost focus"),e.getAll().then(function(t){for(var e=0;e<t.length;++e)if("focus-tab"==t[e].name)return t[e];return null}).then(function(){n.simple.create({priority:2,title:"Recording a background tab",message:"Screencastify is recording a tab in the background. "},"active_tab")})}};return o.loadAdditionalDraw=r.wrap(YO.mark(function e(n,r){return YO.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.debug("switchTab: load new draw"),e.prev=1,e.next=4,i.loadInTab(n,r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t.info("switchTab: failed to load additoinal draw for tab %s",n,e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])})),o}]);var XO=function(){function t(t){this.$log=t,this.isActive=!1,this.OPENING="OPENING",this.CLOSING="CLOSING",this._stopVideo=this._stopVideo.bind(this),this._leavePipListener=this._leavePipListener.bind(this)}return t.$inject=["$log"],t.prototype.isSupported=function(){var t=this._getChromeVersion();return t>=71&&window.navigator.userAgent.includes("Mac OS")||t>=74},t.prototype._getChromeVersion=function(){return Number((/Chrome\/(\d+)/.exec(window.navigator.userAgent)||[void 0,0])[1])},t.prototype.shouldUse=function(t){var e=t.getVideoTracks()[0],n=e.label.includes("window"),r=e.label.includes("screen");return!n&&!!r},t.prototype.open=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this._state===this.OPENING?[2]:(this._state=this.OPENING,this.$log.debug("pip: opening..."),[4,this._video.requestPictureInPicture()]);case 1:return e.sent(),this.isActive=!0,this._video.addEventListener("leavepictureinpicture",this._leavePipListener),[3,3];case 2:return t=e.sent(),this.$log.warn("pip: crashed: ",t.message),[3,3];case 3:return this._state=null,[2]}})})},t.prototype._leavePipListener=function(){try{if(this._state===this.CLOSING)return;this._state=this.CLOSING,this.isActive=!1,this._stopVideo(),this._drawConfig&&(this._drawConfig.pip=!1),this._video.removeEventListener("leavepictureinpicture",this._leavePipListener)}catch(t){this.$log.warn("pip: closing failed: ",t.message)}this._state=null},t.prototype._stopVideo=function(){this._stream&&this._stream.getTracks().filter(function(t){return"video"===t.kind}).forEach(function(t){return t.stop()}),this._stream=null},t.prototype.close=function(){this.isActive&&this._state!==this.CLOSING&&(this.$log.debug("pip: closing..."),document.exitPictureInPicture())},t.prototype.playVideoStream=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this._stream=t,this._video.srcObject=t,[4,this._video.play()];case 1:return n.sent(),this._drawConfig.pip=!0,[3,3];case 2:return e=n.sent(),this.$log.debug("pip: playVideoStream failed",e.message),[3,3];case 3:return[2]}})})},Object.defineProperty(t.prototype,"drawConfig",{set:function(t){this._drawConfig=t},enumerable:!1,configurable:!0}),t.prototype.stop=function(){this.close(),this.drawConfig=null},t.prototype.load=function(){if(!this._video){var t=document.createElement("video");t.muted=!0,t.setAttribute("preload","metadata"),t.src="/assets/videos/black.mp4",this._video=t,document.body.appendChild(this._video),this._state=null}},t}();function QO(t){return new Promise(function(e){var n=new Image;n.crossOrigin="anonymous",n.addEventListener("load",function t(){n.removeEventListener("load",t),e(n)}),n.src=t})}function tP(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,QO(t)];case 1:return e=i.sent(),n=new OffscreenCanvas(e.width,e.height),(r=n.getContext("2d")).drawImage(e,0,0,n.width,n.height),[2,r.getImageData(0,0,n.width,n.height)]}})})}function eP(t){return(0,Us.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return n={},r={},e=38,[4,tP(t)];case 1:return[2,(n.imageData=(r[e]=i.sent(),r),n)]}})})}ls.module("castifyExt.pip",["castifyExt.appOptions"]).service("pip",XO);var nP=function(){function t(t){this.embedWebcam=!1,this.computeTrimHint=!1,Object.assign(this,t)}return t.prototype.isWindowOrScreenCapturing=function(){return"desktop"===this.captureSource||"screen"===this.captureSource},t}();ls.module("castifyExt.bgRecord",["w69b.chromeTabs","w69b.chromeAnalytics","cf2.chromeStorageService","w69b.chromeWindows","w69b.chromeNotifications","w69b.filesHelper","w69b.chromeRuntime","w69b.spawn","castifyExt.switchTab","castifyExt.chromeVideoRecorder","castifyExt.bgFiles","castifyExt.bgUserAccount","castifyExt.appOptions","castifyExt.recordTool","castifyExt.fileNameGenerator","cf2.sentryErrorHandler","castifyEdit.bgEditJobScheduler","castifyExt.ui.countdownIcon","castifyExt.optionalPermissions","castifyExt.bgUserNotifications","castifyExt.pip","cf2.upgradeHelperService","cf2.supportArticlesService","w69b.chromeSystem","cf2.remoteConfigService"]).factory("bgRecordService",["chromeVideoRecorder","$rootScope","$q","$log","chromeRuntime","chromeTabs","$window","analytics","appOptions","recordTool","fileNameGenerator","bgFiles","cf2ChromeStorageService","chromeWindows","sentryErrorHandler","chromeNotifications","filesHelper","spawn","bgEditJobScheduler","countdownIcon","cf2BgUsageStatsService","userAccount","switchTab","optionalPermissions","userNotifications","pip","chromeSystem","cf2SupportArticlesService",function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g,y,m,b,w,_,S,k,E,x,T,I){var C,A,M,R,O,P=[],N=!1,D=n.when(),$="/_recording",L="bgRecord:pendingConfig",j={};function U(t){return z._pathToIconConfig("assets/images/"+t+"38.png")}function F(t){if(N)throw new Error("already blocked");N=!0;var e=n.defer();return D=e.promise,t.finally(function(){N=!1,e.resolve()}),t}function B(t,n){r.error("bgRecord: recorder_fatal_error",n),p.handleError(n&&n.stack?n:new Error("recorder_fatal_error "+n)),r.debug("bgRecord: cleaning up after fatal error stop"),o.onActivated.removeListener(z.onTabActivated),nt(),N=!1,tt(!1),"out_of_disk_space"===n?I.setNotifyHelp(v.simple.createError({priority:1,title:"Out of disk space",message:"Recording was stopped forcefully. Your recording might be corrupted.",buttons:[{title:"Help"}]},"disk_space"),"disk_space"):"add_frame_failed"===n?e.$broadcast("recorder:out_of_memory"):"no_data"===n?I.setNotifyHelp(v.simple.createError({priority:1,title:"Oops, we failed to capture anything",message:"Please try to restart you computer if this problem persists."},"no_audio"),"no_audio"):v.simple.createError({priority:1,title:"Oops, something went wrong",message:"Please try to restart Chrome if this problem persists."},"unknown_fatal")}function q(t,e){P.forEach(function(n){n.postMessage({type:t,data:e})})}var V=y.wrap(function(e){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return e||(e=t.getState()),"paused"!==e?[3,2]:[4,U("icon_paused")];case 1:return n=r.sent(),[3,9];case 2:return"recording"!==e?[3,7]:t.getCurrentTime()<0?[4,b.getIcon(t.getCurrentTime())]:[3,4];case 3:return n=r.sent(),[3,6];case 4:return[4,U("icon_recording")];case 5:n=r.sent(),r.label=6;case 6:return E.hideIconBadge(),[3,9];case 7:return[4,U("icon")];case 8:n=r.sent(),E.showIconBadge(),r.label=9;case 9:return chrome.browserAction.setIcon(n),[2]}})});function Z(e,n){if(void 0===n&&(n=!1),P.length){var r=ls.copy(t.getStateObj());ls.extend(r,e),r.config=t.getRecordingConfig(),r.previewShown=!!A,r.isBlocked=N,!n&&ls.equals(r,j)||(q("stateUpdate",r),j=r)}}var H=y.wrap(function(n,i){var o,a,s,u,c;return(0,Us.Jh)(this,function(l){switch(l.label){case 0:return r.debug("bgRecord: stop finished"),(o=t.getRecordingConfig()).timeLimitReached=!!i,s=(a=o.filename).split("/").slice(-1)[0],u=h.localFilenameToId(s),[4,g.moveFileByPath(a,s)];case 1:return l.sent(),f.local.remove(L),[4,_.getAccount()];case 2:return c=l.sent(),n>0?[4,w.trackNewRecording(n,c&&c.license.isPaid)]:[3,4];case 3:l.sent(),l.label=4;case 4:return h.updateLocalInfo(u,{recordingDuration:n}),e.$broadcast("recorder:stopped",u,o),[2]}})}),z={};function G(n,i,o){var a,u;switch(n){case"stop":a=t.stop(),u=function(){return H(i,o)};break;case"pause":a=t.pause(),u=function(){return r.debug("bgRecord: "+n+" finished")};break;case"resume":a=t.resume(),u=function(){return r.debug("bgRecord: "+n+" finished")};break;case"restart":a=t.restart(function(){e.$broadcast("recorder:canceled",t.getRecordingConfig())},function(t){return l("/_recording/",".webm").then(function(e){t.filename=e;var n=e.split("/");return t.fileId=h.localFilenameToId(n[n.length-1]),t})}),u=function(){r.debug("bgRecord: "+n+" finished"),e.$broadcast("recorder:started",t.getRecordingConfig())}}return r.debug("bgRecord: "+n+" in progress..."),a.then(u),F(a),s.trackEvent("recorder",n,"",i||1),a}function W(){z.stop()}function K(){v.simple.createError({priority:1,title:"Not recording system audio",message:"Capturing system audio is only supported for full-screen or tab recording."},"no_system_audio")}function J(e){N||(r.debug("bgRecord: replacing stream...",e),"inactive"!==t.getState()?(v.clear("active_tab"),F(t.replaceStream(e))):r.error("bgRecord: cannot replace tab while not recording"))}function Y(t){if("recorder"===t.name){q("recorderConnected",{}),P.push(t),Z({},!0),t.onDisconnect.addListener(function(){var e=P.indexOf(t);e>=0&&P.splice(e,1)});var n={start:z.start,stop:z.stop,restart:z.restart,replaceStream:J,pause:z.pause,resume:z.resume,discard:z.discard,togglePipWebcam:z.togglePipWebcam,cancelPendingStart:z.cancelPendingStart,showPreview:function(t){t?rt():nt()},setAutoStop:z.setAutoStop};t.onMessage.addListener(function(t){n.hasOwnProperty(t.type)&&n[t.type](t.data),e.$$phase||e.$digest()})}}function X(e){if(!N){var n=t.getState();"toggle-recording"===e?"recording"===n||"paused"===n?z.stop():z.start(O):"toggle-pause"===e&&("paused"===n?z.resume():"recording"===n&&z.pause())}}z.restart=function(){return N||"inactive"===t.getState()?n.reject():G("restart")},z.stop=function(e){if(N||"inactive"===t.getState())return n.reject();s.trackEvent("recorder","stop"),o.onActivated.removeListener(z.onTabActivated),nt(),v.clear("audio_dropped"),v.clear("active_tab"),v.clear("no_system_audio");var r=t.getCurrentTime();return C.send(),G("stop",Math.round(r),e)},z.togglePipWebcam=function(){t.togglePipWebcam()},z.pause=function(){return N||"recording"!==t.getState()?n.reject():(v.clear("active_tab"),G("pause"))},z.resume=function(){if(!N&&"paused"===t.getState())return o.getActiveTab().then(function(t){z.onTabActivated({tabId:t.id,windowId:t.windowId})}),G("resume")},z.setAutoStop=function(e){t.setAutoStop(e)},z.discard=y.wrap(function(){return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return N||!["paused","recording"].includes(t.getState())?[2]:[4,F(t.discard())];case 1:return e.sent(),s.trackEvent("recorder","discard"),[2]}})}),z.start=y.wrap(function(i){var a,c,d,y;return(0,Us.Jh)(this,function(m){switch(m.label){case 0:return i instanceof nP||(i=new nP(i)),N||"inactive"!==t.getState()?[2,n.reject()]:("desktop"===i.captureSource&&x.isSupported()&&i.embedWebcam&&x.open(),o.onActivated.addListener(z.onTabActivated),C=s.trackTimer("recorder","duration"),i.audio.micGain=u.localValues.micGain,i.audio.micAudioProcessing=u.localValues.micAudioProcessing,i.bitRateOption=u.values.bitRateOption,i.videoCodec=u.values.videoCodec,i.computeTrimHint=u.values.autoTrim,i.resolution=i.limitResolution?i.maxResolution:null,u.values.enableWindowPicker||"desktop"!==i.captureSource||(i.captureSource="screen"),c=(a=r).debug,d=["bgRecord: starting in progress, cpu: %s"],[4,T.cpu.getInfo()]);case 1:return c.apply(a,d.concat([m.sent().modelName])),R={cancelled:!1,cancel:function(){R.cancelled=!0,t.cancelPendingStart()}},F(y=(b=[],b.push(g.getDirByPath($,{create:!0})),b.push(l("/_recording/",".webm").then(function(t){i.filename=t;var e=t.split("/");i.fileId=h.localFilenameToId(e[e.length-1])})),b.push(function(t){return o.getActiveTab().then(function(e){t.tabId=e.id,t.windowId=e.windowId,t.tabTitle=e.title})}(i)),n.all(b)).then(function(){return R.cancelled?n.reject("cancelled"):t.start(i)})),y.finally(function(){R=null}),y.then(function(){r.debug("bgRecord: started recording"),f.local.setSingle(L,i),i.showPreview&&rt(),e.$broadcast("recorder:started",i),q("recordingStarted",{})},function(t){if("cancelled"!==t)return Z({startError:t}),function(t,e){p.handleError(t&&t.stack?t:new Error("start_error "+t)),"tab_permissions_denied"===t?v.simple.createError({priority:1,title:"Tab recording and annotation tools requires additional permissions.",message:"Please use the Screencastify Icon to start recording."},"tab_permissions_denied"):"start_timeout:no_audio"===t?I.setNotifyHelp(v.simple.createError({priority:1,title:"Failed to capture audio",message:"Please try to restart you computer or re-plug your mic."},"no_audio"),"no_audio"):"start_error:no_audio_access"===t?I.setNotifyHelp(v.simple.createError({priority:1,title:"Failed to access your microphone",message:"Please disable it or restart your computer and try again. Click here for help."},"no_audio_access"),"no_audio_access"):"start_timeout:no_cam"===t?I.setNotifyHelp(v.simple.createError({priority:1,title:"Failed to capture your webcam",message:"Please try to restart you computer or re-plug your cam."},"no_cam"),"no_cam"):t&&"NotAllowedError"===t.name?I.setNotifyHelp(v.simple.createError({priority:1,title:"Recording failed",message:"Please allow screen recording in system preferences. Click here for help."},"blocked_permissions_macos"),"blocked_permissions_macos"):I.setNotifyHelp(v.simple.createError({priority:1,title:"Failed to start recording",message:"tab"===e.captureSource?"Please try to re-open the tab you are trying to record.":"Please try to restart your computer if this problem persists",buttons:[{title:"Help"}]},"start_recording"),"start_recording")}(t,i),n.reject(t)}),[2,y]}var b})}),z.onTabActivated=y.wrap(function(e){var n,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return n=t.getRecordingConfig(),[4,k.hasTabPermissions(n)];case 1:return i=o.sent(),"recording"!==t.getState()||("desktop"!==n.captureSource&&"screen"!==n.captureSource||!i?"tab"===n.captureSource&&(e.tabId!==n.tabId&&u.values.notifyTabFocus&&e.windowId===n.windowId?S.chromeNotify(n):(r.debug("bgRecord: recording tab got focus"),v.clear("active_tab"))):S.loadAdditionalDraw(e.tabId,n.draw)),[2]}})});var Q=y.wrap(function(t,e,n){var i,o,a,s,c;return(0,Us.Jh)(this,function(l){switch(l.label){case 0:return[4,u.loadedPromise];case 1:return l.sent(),u.values.instantUpload&&u.values.driveSync?(r.warn("bgRecord: skipping fix job since instantUpload is enabled"),[4,g.moveFileByPath(t,n)]):[3,3];case 2:return l.sent(),[3,10];case 3:return a=(o=g).getMetadata,[4,g.getFileEntryByPath(t)];case 4:return[4,a.apply(o,[l.sent()])];case 5:i=l.sent(),r.debug("bgRecord: adding fix job for incomplete recording",t,i.size),s=m.addJob({type:"fixWebm",inPath:t,fileId:e,outPath:n,meta:{fileId:e}}),l.label=6;case 6:return l.trys.push([6,8,,10]),[4,s.promise];case 7:return l.sent(),r.debug("bgRecord: fixed incomplete recording",t),[3,10];case 8:return c=l.sent(),r.warn("bgRecord: failed to fix incomplete recording",t,c),[4,g.moveFileByPath(t,n)];case 9:return l.sent(),[3,10];case 10:return[2]}})}),tt=y.wrap(function(t){var n,i,o,a,u,c,l,d,p,v,y,m,b,w;return(0,Us.Jh)(this,function(_){switch(_.label){case 0:return[4,g.listByPath($).catch(function(){return null})];case 1:return(n=_.sent())&&n.length?[4,f.local.getSingle(L,void 0)]:[2];case 2:return i=_.sent(),t?(s.trackEvent("recorder","crash"),a=(o=r).warn,u=["bgRecord: potential crash in last session? Config: %o, cpu: %s",i],[4,T.cpu.getInfo()]):[3,4];case 3:a.apply(o,u.concat([_.sent().modelName])),e.$broadcast("recorder:incomplete_recording_found"),_.label=4;case 4:_.trys.push([4,9,10,11]),c=(0,Us.XA)(n),l=c.next(),_.label=5;case 5:return l.done?[3,8]:(p=(d=l.value.fullPath).split("/").slice(-1)[0],v=h.localFilenameToId(p),[4,Q(d,v,p)]);case 6:_.sent(),y={},i&&i.filename!==d&&(y=i),e.$broadcast("recorder:fixedFile",v,y),_.label=7;case 7:return l=c.next(),[3,5];case 8:return[3,11];case 9:return m=_.sent(),b={error:m},[3,11];case 10:try{l&&!l.done&&(w=c.return)&&w.call(c)}finally{if(b)throw b.error}return[7];case 11:return[2]}})});function et(){(N||"inactive"!==t.getState())&&(r.info("bgRecord: Background page dormancy onSuspend() while recorder is active, preventing unloading"),setTimeout(function(){return i.getBackgroundPage()},0))}function nt(){A&&d.remove(A),Z()}function rt(){if(!A){r.debug("bgRecord: opening Webcam live preview window");var t=4;"cam"===z.getConfig().captureSource&&(t=1);var e=Math.ceil(a.screen.width/t),n=Math.ceil(a.screen.height/t);d.create({url:"livepreview.html",type:"panel",width:e,height:n,top:a.screen.height-n,left:a.screen.width-e}).then(function(t){A=t.id,Z(),d.onRemoved.addListener(function e(n){t.id===n&&(d.onRemoved.removeListener(e),r.debug("bgRecord: closed Webcam live preview window"),A=null,Z())})})}}return z.install=function(){var n;M=e.$new(!0),n=!1,M.$watchCollection(t.getStateObj,function(){Z()}),M.$watch(function(){return N},function(t,e){t!==e&&Z()}),M.$watch(function(){return[t.getState(),Math.min(0,t.getCurrentTime())]},function(){return V()},!0),M.$watch(function(){return Math.floor(t.getStateObj().droppedAudioTime)},function(t){if(u.values.notifyAudio&&t){var e={type:"basic",priority:2,title:"Dropping Audio Frames",message:"Screencastify dropped "+t+" seconds audio. Audio will be choppy. Try to restart recording with a lower resolution or frame rate.",iconUrl:"assets/images/icon128.png"};n?v.update("audio_dropped",e):v.simple.createError(e,"audio_dropped"),n=!0}}),M.$watch(function(){return u.localValues.micGain},function(e,n){e!==n&&t.setMicGain(e)}),M.$watch(function(){return Math.floor(t.getCurrentTime()/60)},function(t){var e=z.getConfig();if(e){var n=e.nonpersistent&&e.nonpersistent.autoStop;n&&t>=n&&z.stop()}}),M.$on("chromeVideoRecorder:streamEnded",W),M.$on("chromeVideoRecorder:error",B),M.$on("chromeVideoRecorder:systemAudioUnsupported",K),tt(!0),i.onConnect.addListener(Y),i.onConnectExternal.addListener(Y),i.onSuspend.addListener(et),chrome.commands.onCommand.addListener(X),c.getRecordConfig().then(function(t){return O=t}),f.onChanged.addListener(function(t,e){"local"===e&&t.recordConfig&&c.getRecordConfig().then(function(t){return O=t})}),x.load()},z.uninstall=function(){M.$destroy(),i.onConnect.removeListener(Y),chrome.commands.onCommand.removeListener(X)},z.getRecorderState=function(){return t.getStateObj()},z.cancelPendingStart=function(){return!!R&&(R.cancel(),!0)},z.getConfig=function(){return t.getRecordingConfig()},z.isBlocked=function(){return N},z.waitWhileBlocked=function(){return D},z._pathToIconConfig=eP,z}]),n(68268),n(93636),angular.module("castifyExt.upload.uploadBase",["castifyExt.bgFiles","w69b.filesHelper"]).factory("UploadBase",["$q","$log","bgFiles","filesHelper",function(t,e,n,r){function i(t){this.config=t,this.minStartTime=0,this.numErrors=0}i.uploaderClasses_={},i.register_=function(t,e){i.uploaderClasses_[t]=e},i.create=function(t){t.uploader=t.uploader||t.target;var e=i.uploaderClasses_[t.uploader];if(!e)throw new Error("unknown uploader type"+t.uploader);return new e(t)},i.CancelledError={reason:"cancelled",isCancelled:!0};var o=i.prototype;return i.unserialize=function(t){var e=t[0],n=t[1],r=i.uploaderClasses_[e];if(!r)throw new Error("unknown uploader type "+e);return r.fromObject(n)},o.serialize=function(){return[this.config.uploader,this.toObject()]},o.fromObject=function(){throw new Error},o.toObject=function(){throw new Error},o.start=function(){},o.cancel=function(){return!1},o.pause=function(){return this.cancel()},o.onProgress=function(){},o.onComplete=function(){},o.onError=function(){},o.handleComplete_=function(t){e.debug("uploadBase: upload complete",t),this.responseData=t},o.handleError_=function(e){return t.reject(e)},o.handleProgress_=function(t){return t},o.loadFile_=function(){var e=this.config,o=r.getFileByPath(n.idToLocalFilename(e.fileId));return t.all({file:o,fileDesc:n.getFileDescriptor(e.fileId)}).catch(function(n){return t.reject(e.isSyncUpload?i.CancelledError:n)})},o.toString=function(){var t=this.config;return"Upload of file "+t.fileId+" to "+t.uploader},i}]),n(60804),n(57386),n(49372),n(29597),n(78571),n(14655),n(85237);var rP=n(17008);angular.module("castifyExt.upload.googleUpload",["castifyExt.upload.uploadBase","castifyExt.driveUtils","cf2.umbrellaService","w69b.googledrive","w69b.googleUploader","castifyExt.bgFiles","w69b.spawn","w69b.chromeAnalytics"]).run(["UploadBase","driveUtils","cf2UmbrellaService","googledrive","googleUploader","bgFiles","$q","$log","spawn","analytics",function(t,e,n,r,i,o,a,s,u,c){function l(t){if(angular.isObject(t)&&angular.isNumber(t.status)){var e=t.status;if(e<=0||e>=500&&e<600||t.config&&!1===t.config.authAutoRetry&&401===e)return!0;var n=h.getErrorReason(t);if(["userRateLimitExceeded"].includes(n))return!0}return!1}function h(e,n){t.call(this,e),this.uploadUrl=n,this.cancelled=!1}(h.prototype=Object.create(t.prototype)).constructor=t;var f=h.prototype;function d(){h.apply(this,arguments)}f.handleProgress_=function(t){t.uploadUrl?this.uploadUrl=t.uploadUrl:(this.loadedBytes_=t.loaded,this.progress=t.loaded/t.total)},f.handleError_=function(e){return e===t.CancelledError||this.cancelled?a.reject(t.CancelledError):(s.debug("googleUploader: handling error",e),a.reject({isTransient:l(e),reason:h.getErrorReason(e)}))},f.resumeUpload_=function(t){return this.uploader_=i.resumeUpload(t,this.uploadUrl),this.uploader_.promise},f.start=function(){this.cancelled=!1;var e=this;this.loadFile_().then(function(n){return e.totalBytes_=n.file.size,e.cancelled?a.reject(t.CancelledError):e.uploadUrl?e.resumeUpload_(n.file,n.fileDesc):e.startUpload_(n.file,n.fileDesc)}).then(this.handleComplete_.bind(this),this.handleError_.bind(this),this.handleProgress_.bind(this)).then(function(t){e.onComplete(t)},function(t){e.onError(t)},function(t){e.onProgress(t)})},h.getErrorReason=function(t){return angular.isString(t)?t:t&&t.message?t.message:t&&t.data&&t.data.error&&t.data.error.errors&&t.data.error.errors[0]&&t.data.error.errors[0].reason?t.data.error.errors[0].reason:"unknown"},f.toObject=function(){return{config:this.config,uploadUrl:this.uploadUrl}},f.cancel=function(){return!!this.cancelled||(this.loadedBytes_&&this.totalBytes_-this.loadedBytes_<512e3?(s.debug("googleUploader: refusing to cancel almost complete upload"),!1):(this.cancelled=!0,this.uploader_&&this.uploader_.cancel(),!0))},(d.prototype=Object.create(h.prototype)).constructor=h,t.register_("drive",d),(f=d.prototype).trackAnalytics_=function(){if(this.startTime){var t=Date.now()-this.startTime,e=t/1e3;c.tracker.sendTiming("drive_upload","speed_seconds_per_second",Math.round(this.fileDuration/e*1e3)),c.tracker.sendTiming("drive_upload","duration_second",Math.round(t)),c.tracker.sendTiming("drive_upload","speed_bytes_per_second",Math.round(this.fileSize/e*1e3))}},f.handleComplete_=u.wrap(rP.mark(function t(e){return rP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h.prototype.handleComplete_.call(this,e),this.trackAnalytics_(),this.openLink=e.alternateLink,t.next=5,this.setDrivePrivacy(this.config.privacy,!0);case 5:return t.next=7,o.updateLocalInfo(this.config.fileId,{driveInfo:e});case 7:return t.abrupt("return");case 8:case"end":return t.stop()}},t,this)})),d.doesFileExistInParent=function(t,e){return r.getFile(t).then(function(t){return t.parents&&t.parents.some(function(t){return t.id===e})&&(!t.labels||!t.labels.trashed)},function(t){return 404!=t.status&&a.reject(t)})},f.getDriveFileId_=u.wrap(rP.mark(function t(e){var r,o,a;return rP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getVideoFromExtensionId(e);case 2:if((o=t.sent)&&s.debug("getDriveFileId_ was called with existing extensionVmpId: ".concat(e," and registry entry:"),o),!1!==(null==o?void 0:o.draft)){t.next=8;break}throw this.cancelled=!0,this.log.err("this video has already been uploaded",o),new Error("video registry entry is already created and uploaded");case 8:if(a=null==o||null===(r=o.videoRef)||void 0===r?void 0:r.driveFileId){t.next=13;break}return t.next=12,i.generateId();case 12:a=t.sent;case 13:return t.abrupt("return",a);case 14:case"end":return t.stop()}},t,this)})),f.startUpload_=function(s,u){var c,l=this.config,h=this,f=l.title||u.title||"Untitled";/\.webm$/i.test(f)||(f+=".webm");var p={duration:u.duration,width:u.width,height:u.height,uuid:u.id,recordingDate:u.createdAt.getTime(),isScreencastifySyncFile:!0};function v(){if(h.cancelled)return a.reject(t.CancelledError);h.startTime=Date.now(),h.fileDuration=1e3*u.duration,h.fileSize=u.size;var e={duration:u.duration,thumbnailUrl:u.thumbnailUrl,extensionVmpId:u.id,creationTime:u.createdAt.getTime()};return h.getDriveFileId_(u.id).then(function(t){n.getRegistryId({driveFileId:t,driveInfo:!1},e);var r={id:t,title:f,description:l.description||"",mimeType:"video/webm",properties:d.toDrivePropertyList_(p),parents:[{id:c}]};return o.updateLocalInfo(u.id,{driveFileId:t,tmpDrivePrivacy:"private"}),h.uploader_=i.driveUpload(s,r),h.uploader_.promise})}return e.getDriveUploadParentId().then(function(e){if(h.cancelled)return a.reject(t.CancelledError);if(c=e,u.driveInfo&&u.driveInfo.id){var n=u.driveInfo.id;return d.doesFileExistInParent(n,c).then(function(e){return e?function(e){return h.cancelled?a.reject(t.CancelledError):r.patchFile(e,{properties:d.toDrivePropertyList_(p)})}(n):v()})}return v()})},f.setDrivePrivacy=function(n,r){var i=this;if(this.cancelled)return a.reject(t.CancelledError);var u=o.getFileDescriptor(this.config.fileId).catch(function(){return null}).then(function(t){if(t)return r?"private"===n?a.when(null):e.setSimplePrivacy(t.driveFileId,n,i.config.domain).catch(function(t){s.error("googleUploader: Failed to update privacy after upload",t)}):(i.config.privacy=n,void o.updateLocalInfo(i.config.fileId,{tmpDrivePrivacy:n}))});return a.when(u)},d.toDrivePropertyList_=function(t){var e=[];return angular.forEach(t,function(t,n){e.push({key:n,value:t,visibility:"PRIVATE"})}),e},f.toObject=function(){return{config:this.config,uploadUrl:this.uploadUrl}},d.fromObject=function(t){return new d(t.config,t.uploadUrl)}}]),n(69497),n(92971),n(34149),n(41231),n(35654),n(71026),n(73270),n(88717),n(90962);var iP=[Tm];angular.module("castifyExt.bgUpload",["cf2.chromeStorageService","w69b.chromeAnalytics","w69b.chromeRuntime","castifyExt.upload.uploadBase","castifyExt.upload.googleUpload","w69b.throttle","castifyExt.offline","castifyExt.syncAuthTool","cf2.sentryErrorHandler"]).factory("bgUploadService",["analytics","cf2ChromeStorageService","chromeRuntime","$log","$rootScope","UploadBase","throttle","onlineState","syncAuthTool","$timeout","sentryErrorHandler",function(t,e,n,r,i,o,a,s,c,l,h){var f,d,p="uploadsPending",v="quotaExceeded",g=[],y=[],m=[],b=[],w=0,_={};function S(t){if("uploader"==t.name){b.push(t),T(),t.onDisconnect.addListener(function(){var e=b.indexOf(t);e>=0&&b.splice(e,1)});var e={upload:_.upload,cancel:_.cancel,setDrivePrivacy:_.setDrivePrivacy};t.onMessage.addListener(function(t){e.hasOwnProperty(t.type)&&e[t.type](t.data)})}}function k(){y.length&&(r.info("bgUpload: Background page dormancy onSuspend() while upload queue is not empty, preventing unloading"),setTimeout(function(){return n.getBackgroundPage()},0)),x.flush()}function E(t,e){b.forEach(function(n){n.postMessage({type:t,data:e})})}var x=a(function(){var t=g.concat(y).map(function(t){return t.serialize()});e.local.setSingle(p,{queued:t,recentErrors:m})},2e3,!1),T=a(function(){if(b.length){var t={};m.forEach(function(t){e(t.config,{state:"error",error:t.error,config:t.config})}),y.forEach(function(t){e(t.config,{state:"queued",config:t.config})}),g.forEach(function(t){e(t.config,{state:"uploading",progress:t.progress})}),E("stateUpdate",t)}function e(e,n){var r=e.fileId,i=e.target;n.fileId=r,n.target=i,n.isSyncUpload=e.isSyncUpload,t[r]=t[r]||{},t[r][i]=n}},300,!1);function I(){x(),T(),w++}function C(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(delete t.onProgress,delete t.onComplete,delete t.onError,e){var n=g.indexOf(t);g.splice(n,1),F(),I()}}function A(t){var e=y.indexOf(t);y.splice(e,1)}function M(t,e){m=m.filter(function(n){return n.config.target!==e||n.config.fileId!==t})}function R(t,e){for(M(t.fileId,t.target),m.push({config:t,error:e});m.length>5;)m.shift()}function O(t){r.debug("bgUpload: upload complete",t.toString()),C(t),i.$broadcast("uploader:complete",{config:t.config,data:t.responseData,link:t.openLink})}function P(e,n){if(C(e),n===o.CancelledError)r.debug("bgUpload: upload was cancelled",e.toString());else if(n.isTransient)r.warn("bgUpload: upload transient error",n),function(t){t.numErrors++;var e=Math.min(12e4,2e3*Math.pow(2,t.numErrors-1));t.minStartTime=Date.now()+e+1e3*Math.random(),r.debug("bgUpload: transient upload error, re-queuing in %s: %s",e,t.toString()),B(t)}(e),s.check();else{r.error("bgUpload: upload error",n),c.broadcastIfSyncError(n).catch(function(){return null});var a=e.config;i.$broadcast("uploader:failed",{config:a,error:n}),R(a,n),E("uploadFailed",{target:a.target,fileId:a.fileId,error:n,channelId:a.channelId}),t.trackEvent("bg_upload","error: ".concat((u=n).reason?u.reason:u.message)),u.reason&&!iP.includes(u.reason)&&h.handleError(new Error(u.reason))}var u;I()}function N(){I()}function D(t){t.onComplete=O.bind(null,t),t.onError=P.bind(null,t),t.onProgress=N.bind(null,t)}function $(t){return y.filter(function(e){return e.config.fileId===t.fileId&&e.config.target===t.target})[0]}function L(t){return g.filter(function(e){return e.config.fileId===t.fileId&&e.config.target===t.target})[0]}function j(t){return $(t)||L(t)}function U(t){return t.isSyncUpload&&_.hasRecentlyRanOutOfDriveSpace()}function F(){function t(){if(!(g.length<5&&y.length))return!1;var t=y[0];return t.minStartTime<=Date.now()&&(!t.config.isSyncUpload||g.length<2)}if(y.sort(function(t,e){var n=t.minStartTime-e.minStartTime;if(0===n){if(t.config.isSyncUpload&&!e.config.isSyncUpload)return 1;if(e.config.isSyncUpload&&!t.config.isSyncUpload)return-1}return n}),d&&(l.cancel(d),d=null),s.isOnline()&&y.length)if(y[0].minStartTime<=Date.now()){for(;t();){var e=y.shift();U(e.config)?r.debug("bgUpload: discarding sync upload while out of space",e.toString()):(r.debug("bgUpload: starting queued upload",e.toString(),m),D(e),g.push(e),e.start())}I()}else{var n=y[0].minStartTime-Date.now();r.debug("bgUpload: scheduling upload queue start in "+n),d=l(F,n)}}function B(t){r.debug("bgUpload: queuing upload",t.toString()),y.push(t),I(),F()}function q(){var t,e=u(y);try{for(e.s();!(t=e.n()).done;)t.value.minStartTime=0}catch(n){e.e(n)}finally{e.f()}}function V(t,e){if(r.debug("bgUpload: online state changed to ",e),e)r.debug("bg-upload: resuming..."),q(),F();else{for(var n=g.concat([]);n.length;){var i=n.pop();i.pause()&&(C(i),B(o.unserialize(i.serialize())))}q(),I()}}function Z(){_.cancelAllUploads()}return _.cancelAllUploads=function(t){var e=y.filter(function(e){return!t||e.config.isSyncUpload}),n=e.length;e.forEach(function(t){r.debug("bgUpload: cancelling queued sync upload",t.toString()),A(t)}),g=g.filter(function(e){return!((!t||e.config.isSyncUpload)&&(r.debug("bgUpload: cancelling active sync upload",e.toString()),e.cancel())&&(C(e,!1),++n,1))}),n&&(r.debug("bgUpload: cancelled %s sync uploads",n),I())},_.upload=function(t){if(U(t))return r.debug("bgUpload: discarding new sync upload while out of space",t),void R(t,{reason:v});var e=t.fileId,n=j(t);if(n)return r.info("bgUpload: upload already pending "+e),void(n.config.isSyncUpload&&!t.isSyncUpload&&(r.info("bgUpload: marking upload as non-sync "+e),n.config.isSyncUpload=!1,I(),F()));M(t.fileId,t.target),B(o.create(t))},_.setDrivePrivacy=function(t){var e=j(rh(rh({},t),{},{target:"drive"}));e&&e.setDrivePrivacy(t.privacy)},_.cancel=function(t){if(!t.fileId||!t.target)throw new Error;var e=$(t);e?A(e):(e=L(t))&&e.cancel()&&C(e),e?(r.debug("bgUpload: cancelled upload",e.toString()),I()):r.debug("bgUpload: no queued or active upload found to cancel",t)},_.getTargetFileState=function(t,e){function n(n){return n.config.fileId===t&&n.config.target===e}var r=g.find(n);if(r)return{state:"uploading",config:r.config,progress:r.progress};var i=y.find(n);return i?{state:"queued",config:i.config}:null},_.isOnline=function(){return s.isOnline()},_.clearOutOfSpaceErrors=function(){m=m.filter(function(t){return!(t.config.isSyncUpload&&t.error&&t.error.reason===v)}),I()},_.hasRecentlyRanOutOfDriveSpace=function(){return m.some(function(t){return t.config.isSyncUpload&&t.error&&t.error.reason===v})},_.getWatcherStateId=function(){return w},_.install=function(){return f=i.$new(!0),e.local.getSingle(p).then(function(t){t&&(m=t.recentErrors||[],y=(t.queued||[]).filter(function(t){return"firebase"!==t[0]}).map(function(t){return o.unserialize(t)}))}).then(function(){F(),n.onConnect.addListener(S),n.onSuspend.addListener(k),f.$on("onlineState:changed",V),i.$on("event:signInChanged",Z)})},_.uninstall=function(){n.onConnect.removeListener(S),n.onSuspend.removeListener(k),f.$destroy()},_.STORAGE_KEY=p,_}]),n(60968);var oP=n(50013).default;function aP(t,e,n,r,i,o,a){var s={},u="recordConfig",c=null;function l(){return e.navigator.userAgent}function h(){return Number((/Chrome\/(\d+)/.exec(window.navigator.userAgent)||[void 0,0])[1])}function f(){return l().indexOf("CrOS")>=0}function d(){return l().includes("Windows")}function p(t){return n.getSources().then(function(e){function n(t,n){return e.some(function(e){return e.kind===t&&e.label&&(!n||n===e.id)})}if(t.audio.mic&&(n("audio")?t.audio.micSourceId&&!n("audio",t.audio.micSourceId)&&delete t.audio.micSourceId:t.audio.mic=!1),n("video")?t.camSourceId&&!n("video",t.camSourceId)&&delete t.camSourceId:("cam"===t.captureSource&&(t.captureSource="tab"),t.embedWebcam&&(t.embedWebcam=!1)),n("video")&&!t.camSourceId){var r=e.find(function(t){return"video"===t.kind});t.camSourceId=r.id}return t})}s.toResolution=function(t){return{width:t.width,height:t.height}},s.getResolutionLimit=function(t,e){return t.limitResolution?"tab"===t.captureSource?r.scaleResolution(r.toPhysicalResolution(e),t.maxResolution):t.maxResolution:null};var v=i.wrap(function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return c?[3,2]:[4,o.cpu.getInfo()];case 1:c=t.sent().numOfProcessors,t.label=2;case 2:return[2,c]}})}),g=i.wrap(function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,v()];case 1:return t.sent()>=4?[2,{width:1920,height:1080}]:[2,{width:1280,height:720}]}})});return s.canCaptureSystemAudio=function(){return d()||f()&&h()>=46},s.setRecordConfig=function(e){return t.local.setSingle(u,e)},s.isInjectable=function(t){return t&&(t.startsWith("https://")||t.startsWith("http://")||t.startsWith("file://"))&&!t.startsWith("https://chrome.google.com/webstore/")},s.getRecordConfigDefaults=function(){return{audio:{mic:!0,system:!1},draw:{showToolbox:!0,tool:"pointer"},embedWebcam:!1,captureSource:"desktop",targetFPS:f()||d()&&h()<90?10:30,exportFormat:"webm",startDelay:a.IS_E2E?0:3,visualCountdown:!0}},s.setValue=function(e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return[4,t.local.getSingle(u,{})];case 1:return(r=i.sent())[e]=n,[4,s.setRecordConfig(r)];case 2:return i.sent(),[2]}})})},s.getRecordConfig=i.wrap(function(){var e,n,r,i;return(0,Us.Jh)(this,function(o){switch(o.label){case 0:return e=s.getRecordConfigDefaults(),[4,t.local.getSingle(u,{})];case 1:return(n=o.sent()).limitResolution=!ls.isDefined(n.limitResolution)||n.limitResolution,r=n,n.maxResolution?(i=n.maxResolution,[3,4]):[3,2];case 2:return[4,g()];case 3:i=o.sent(),o.label=4;case 4:return r.maxResolution=i,n.audio=ls.isObject(n.audio)?n.audio:e.audio,n.draw=n.draw||e.draw,n.embedWebcam=n.embedWebcam||e.embedWebcam,n.captureSource=n.captureSource||e.captureSource,n.targetFPS=n.targetFPS||e.targetFPS,n.exportFormat=n.exportFormat||e.exportFormat,n.startDelay=ls.isDefined(n.startDelay)?n.startDelay:e.startDelay,n.visualCountdown=ls.isDefined(n.visualCountdown)?n.visualCountdown:e.visualCountdown,"desktop"!==n.captureSource&&"screen"!==n.captureSource||s.canCaptureSystemAudio()||(n.audio.system=!1),n.showPreview=!1,n.nonpersistent={},[4,p(n)];case 5:return[2,n=o.sent()]}})}),s}angular.module("castifyExt.localFileDb",["cf2.chromeStorageService","w69b.filesHelper","w69b.promiseTool"]).factory("localFileDb",["$q","cf2ChromeStorageService","filesHelper","promiseTool","$log",function(t,e,n,r,i){var o={},a=e.local;function s(t){return"filedb_"+t}function u(t){var e=s(t);return a.getSingle(e,{})}function c(t){angular.extend(this,t)}var l=c.prototype;c.createFromIdOrFileEntry=function(e){var r,i;return(angular.isString(e)?n.getFileEntryByPath(o.idToFilename(e)):t.when(e)).then(function(e){return r=e,i=o.filenameToId(e.name),t.all({metadata:n.getMetadata(r),info:u(i)}).then(function(t){var e=r.toURL(),n={id:i,uuid:i,url:e,mimeType:"video/webm",createdAt:t.metadata.modificationTime,title:t.info.title,size:t.metadata.size};if(t.info.videoInfo){var o=t.info.videoInfo;angular.extend(n,{duration:o.duration,width:o.size.width,height:o.size.height})}if(t.info.previewImages&&(n.thumbnailUrl=t.info.previewImages[0].url),t.info.driveInfo&&(n.driveInfo=t.info.driveInfo),t.info.youtubeInfo){var a=t.info.youtubeInfo;n.youtubeInfo={id:a.id,channelId:a.channelId}}return t.info.driveFileId&&(n.driveFileId=t.info.driveFileId),t.info.tmpDrivePrivacy&&(n.tmpDrivePrivacy=t.info.tmpDrivePrivacy),t.info.trimHint&&(n.trimHint=t.info.trimHint),new c(n)})})},l.rename=function(t){return o.updateInfo(this.id,{title:t})},l.remove=function(){var e=this.id;return t.all({result:n.removeByPath(o.idToFilename(e)),info:u(e)}).then(function(e){if(e.info.previewImages)return t.all(e.info.previewImages.map(function(t){return n.removeByPath(t.path)}))}).then(function(){return a.remove(s(e))})},l.updateYoutubeInfo=function(t){return o.updateInfo(this.id,{youtubeInfo:t})},o.listFiles=function(){return n.listByPath("/").then(function(e){var n=[];return e.forEach(function(t){t.isFile&&"."!==t.name[0]&&n.push(c.createFromIdOrFileEntry(t))}),t.all(n).then(function(t){var e={};return t.forEach(function(t){e[t.id]=t}),e})})},o.filenameToId=function(t){if(/\.webm/i.test(t))return t.slice(0,-5);throw new Error("invalid filename: "+t)},o.idToFilename=function(t){return t+".webm"},o.getFileDescriptor=function(t){return c.createFromIdOrFileEntry(t)};var h=r.serializer();return o.updateInfo=h.wrap(function(e,n,r){var o=s(e);return(r?t.when(n):a.get(o).then(function(t){return function(t,e){var n=!!t.driveInfo,r=e||{},o=r.videoInfo,a=r.debugged,s=r.recordingDuration,u=o&&o.duration;u&&s&&Math.abs(u-s)>4&&n&&!a&&(t.debugged=!0,i.error("localFileDb: mismatch file length",oP(oP({},t),e)))}(n,t[o]),angular.extend(t[o]||{},n)})).then(function(t){var e={};return e[o]=t,a.set(e),t})}),o}]),aP.$inject=["cf2ChromeStorageService","$window","webrtc","hdpiTool","spawn","chromeSystem","castifyConfig"],ls.module("castifyExt.recordTool",["castifyExt.hdpiTool","castifyExt.appOptions","w69b.webrtc","cf2.chromeStorageService","w69b.chromeWindows","w69b.spawn","w69b.chromeSystem"]).factory("recordTool",aP),n(31107),n(30578),n(95459);var sP=n(17008);angular.module("castifyExt.recordingHooks",["castifyExt.videoPreviewRenderer","castifyExt.appOptions","cf2.inAppTabService","castifyExt.bgFiles","w69b.spawn","w69b.clipboard","w69b.chromeRuntime","w69b.chromeTabs","w69b.filesHelper","castifyExt.recordTool"]).factory("recordingHooks",["$rootScope","$filter","videoPreviewRenderer","chromeTabs","appOptions","bgFiles","clipboard","cf2InAppTabService","$q","$log","$timeout","filesHelper","spawn",function(t,e,n,r,i,o,a,s,u,c,l,h,f){var d=[],p={},v="upload:";function g(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";n=e?"app.html#/files/".concat(encodeURIComponent(t),"?autostopped"):"app.html#/files/".concat(encodeURIComponent(t)),l(function(){s.create(n)},500)}function y(t){if(0===t.lastIndexOf(v,0)){var e=t.substr(v.length);r.create({url:e}),chrome.notifications.clear(t)}}function m(t){var n;return"tab"===t.captureSource&&"tabTitle"===i.values.videoTitleNamingScheme&&t.tabTitle?"".concat(t.tabTitle):"Untitled: ".concat((n=Date.now(),e("date")(n,"MMM d, y h:mm a")))}function b(t,e){if(!e.config.isSyncUpload){var n=e.config,r=e.link;if(/https?:\/\//.test(r)){var i='Your screencast "'+n.title+'" has been uploaded. Click here to open it.';n.copyLinkToClipboard&&(a.copy(r),i+=" The link was copied to your clipboard."),n.showNotification&&chrome.notifications.create(v+r,{type:"basic",priority:0,title:"Upload complete",message:i,iconUrl:"assets/images/icon128.png"},angular.noop)}}}function w(t){return n.renderPreview(t).catch(function(e){c.warn("recordingHooks: rendering preview image failed",t);var n=o.idToLocalFilename(t);return function(t){return h.getFileEntryByPath(t).then(function(t){return h.getMetadata(t)}).then(function(t){return t.size})}(n).then(function(t){return t<1e4?(c.warn("recordingHooks: file is empty, removing it"),h.removeByPath(n),u.reject(e)):null})})}function _(t,e,n){return f(sP.mark(function r(){var a;return sP.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w(e);case 2:return a=m(n),r.next=5,o.registerLocalFile(e,a);case 5:i.values.autoOpen&&"recorder:fixedFile"!==t.name&&g(e,n.timeLimitReached),c.debug("recordingHooks: recording hooks completed for",e);case 7:case"end":return r.stop()}},r)})).catch(function(t){c.debug("recordingHooks: recordingHooks:onStopped cancelled",t)})}return p.install=function(){d=[t.$on("recorder:stopped",_),t.$on("recorder:fixedFile",_),t.$on("uploader:complete",b)],chrome.notifications.onClicked.addListener(y)},p.uninstall=function(){d.forEach(function(t){t()}),d=[],chrome.notifications.onClicked.removeListener(y)},p}]),n(69116),n(28848),n(50152),n(46233),n(99317),n(57390),n(83970),n(53758),n(83533),n(54361),n(47310),n(28877),n(82854),n(83717),n(25588),n(84372),n(76982),n(98882),n(96599),n(19183),n(20534),n(2857),n(52301),n(27180),n(3951),n(20679);var uP=n(17008),cP=n(65963).default;function lP(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function hP(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){lP(o,r,i,a,s,"next",t)}function s(t){lP(o,r,i,a,s,"throw",t)}a(void 0)})}}angular.module("castifyExt.videoPreviewRenderer",["castifyExt.bgFiles","w69b.filesHelper","w69b.promiseTool","w69b.spawn"]).factory("videoPreviewRenderer",["bgFiles","filesHelper","$q","promiseTool","spawn",function(t,e,n,r,i){var o="_previewImages",a={width:640,height:360},s={};function u(t){return c.apply(this,arguments)}function c(){return(c=cP(uP.mark(function t(e){var n;return uP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=document.createElement("video")).src=e,n.crossOrigin="anonymous",t.next=5,new Promise(function(t,e){function r(){o(),t(n)}function i(){o(),e(new Error("failed to load video"))}function o(){n.removeEventListener("canplay",r),n.removeEventListener("error",i)}n.addEventListener("canplay",r),n.addEventListener("error",i)});case 5:return t.next=7,new Promise(function(t){n.addEventListener("seeked",t),n.currentTime=.01});case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}},t)}))).apply(this,arguments)}function l(t,e){var r=document.createElement("canvas");r.width=e.width,r.height=e.height;var i=r.getContext("2d");return i.drawImage(t,0,0,e.width,e.height),i.fillStyle="red",i.fillText("hello",10,10),function(t){var e=t.toDataURL(),r="data:image/png;base64,";if(0!==e.lastIndexOf(r,0))throw Error();var i=e.substring(r.length);return i=new Uint8Array(function(t){for(var e=window.atob(t),n=new Uint8Array(new ArrayBuffer(e.length)),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(i)),n.when(new Blob([i],{type:"image/png"}))}(r)}return s.renderPreview=function(n){return r.withTimeout(i.wrap(uP.mark(function r(){var i,s,c,h,f,d,p,v,g,y;return uP.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=n+".png",c={},r.next=4,e.getFileEntryByPath(t.idToLocalFilename(n));case 4:return h=r.sent,r.next=7,u(h.toURL());case 7:return c.size=d={width:(f=r.sent).videoWidth,height:f.videoHeight},c.duration=f.duration,m=d,b=a,w=Math.max(b.width/m.width,b.height/m.height),s={width:m.width*w,height:m.height*w},r.next=14,l(f,s);case 14:return p=r.sent,r.next=17,e.getFileEntryByPath(o+"/"+i,{create:!0},{create:!0});case 17:return v=r.sent,r.next=20,e.createWriter(v);case 20:return g=r.sent,r.next=23,e.writeFile(g,p);case 23:return y={path:o+"/"+i,size:s,url:v.toURL()},r.next=26,t.updateLocalInfo(n,{previewImages:[y],videoInfo:c});case 26:return r.abrupt("return",v);case 27:case"end":return r.stop()}var m,b,w},r)})),3e3)},s}]);var fP=n(17008),dP=n.n(fP);angular.module("castifyExt.updateMigrationService",["w69b.chromeRuntime","castifyExt.hdpiTool","castifyExt.appOptions","cf2.chromeStorageService"]).factory("updateMigrationService",["chromeRuntime","$log","appOptions","cf2ChromeStorageService",function(t,e,n,r){var i={};function o(){return(o=hP(dP().mark(function t(r,i){return dP().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r!==i){t.next=2;break}return t.abrupt("return");case 2:if(e.info("updateMigrationService: updating from "+r+" to "+i),!rd.isLess(r,"2.27.1")){t.next=7;break}return t.next=6,n.loadedPromise;case 6:n.values.bitRateOption||(n.values.bitRateOption="high",n.save());case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}function a(n){e.debug("updateMigrationService: installed",n);var i=t.getManifest().version;"update"===n.reason&&function(t,e){o.apply(this,arguments)}(n.previousVersion,i),"install"===n.reason&&r.local.setSingle("tos_confirmed",!0)}return i.install=function(){t.onInstalled.addListener(a)},i}]),angular.module("castifyExt.diskSpaceWatcher",["castifyExt.bgRecord","w69b.filesHelper","w69b.ui.bytesFilter","castifyExt.appOptions","w69b.chromeNotifications","cf2.supportArticlesService"]).factory("diskSpaceWatcher",["bgRecordService","$timeout","filesHelper","$rootScope","$filter","appOptions","chromeNotifications","$log","analytics","cf2SupportArticlesService",function(t,e,n,r,i,o,a,s,u,c){var l,h=0,f=104857600;function d(){return h}function p(){v(),o.values.enableDiskSpaceWatcher&&n.getPersistentQuota().then(function(t){return t.quota-t.usage}).then(function(n){var r;n<=d()?(r={priority:2,title:"Critically low disk space",message:"You have less than 1GB left. Recording was paused automatically.",buttons:[{title:"Help"}]},a.clear("disk_space_critical").finally(function(){c.setNotifyHelp(a.simple.createError(r,"disk_space_critical"),"disk_space")}),s.info("diskSpaceWatcher: auto-pausing on critical low space"),t.pause()):n<=f&&function(t){t+=1073741824;var e={priority:2,title:"Low disk space",message:"You have only "+i("bytes")(t)+" left. Recording will be paused automatically soon.",buttons:[{title:"Help"}]};c.setNotifyHelp(a.simple.createError(e,"disk_space_low"),"disk_space")}(n),n>d()&&(l=e(p,1e4))})}function v(){l&&(e.cancel(l),l=null)}return{install:function(){r.$watch(function(){return"recording"===t.getRecorderState().state&&!t.isBlocked()},function(t,e){t!==e&&(t?p():v())}),r.$on("recorder:stopped",function(){a.clear("disk_space_critical"),a.clear("disk_space_low")})},setThresholds:function(t,e){h=e,f=t}}}]),n(57431),angular.module("castifyExt.ui.audioCountdown",[]).factory("audioCountdown",["$q","$timeout",function(t,e){var n,r,i=0,o=0,a=!1,s={load:function(e){a=!0,n||(n=new Audio("/assets/other/audio-countdown.dat"));var r=t.defer();return n.addEventListener("canplay",function t(){n.removeEventListener("canplay",t),r.resolve()}),n.error?(a=!1,r.reject("failed to load audio countdown: "+(n.error&&n.error.code))):n.addEventListener("error",function t(){a=!1,n.removeEventListener("error",t),r.reject("failed to load audio countdown: "+(n.error&&n.error.code))}),n.currentTime=Math.max(9.8-e,0),i=1e3*Math.max(e-9.8,0),r.promise},pause:function(){n&&a&&(r?(e.cancel(r),r=null,i-=Date.now()-o):n.pause())},start:function(){n&&a&&!n.ended&&(o=Date.now(),i?r=e(function(){r=null,n.play()},i):n.play())},stop:function(){s.pause(),a=!1}};return s}]),n(64947),n(68903);var pP=n(17008);angular.module("castifyExt.ui.countdownIcon",["w69b.spawn"]).factory("countdownIcon",["spawn","$q",function(t,e){var n={},r=new Map,i={path:{19:"assets/images/icon_countdown19.png",38:"assets/images/icon_countdown38.png"}};function o(t){var n=r.get(t);if(n)return n;var i="assets/images/icon".concat(t,".png"),o=e.defer(),a=new Image;return a.crossOrigin="anonymous",a.addEventListener("load",function t(){a.removeEventListener("load",t),o.resolve(a)}),a.src=i,r.set(t,o.promise),o.promise}var a=t.wrap(pP.mark(function t(e,n){var r,i,a,s;return pP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=document.createElement("canvas")).width=e,r.height=e,(i=r.getContext("2d")).scale(s=e/(a=38),s),t.t0=i,t.next=10,o(a);case 10:return t.t1=t.sent,t.t0.drawImage.call(t.t0,t.t1,0,0),i.font="bold 35px sans-serif",i.textBaseline="middle",i.textAlign="center",i.fillStyle="red",i.fillText(n,a/2,a/2),t.abrupt("return",i.getImageData(0,0,r.width,r.height));case 18:case"end":return t.stop()}},t)}));return n.getIcon=t.wrap(pP.mark(function t(n){return pP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=Math.ceil(-n))>=10)){t.next=3;break}return t.abrupt("return",e.when(i));case 3:return t.next=5,a(38,n);case 5:return t.t0=t.sent,t.t1={38:t.t0},t.abrupt("return",{imageData:t.t1});case 8:case"end":return t.stop()}},t)})),n}]),n(16013),hs().module("castifyExt.driveFileDb",["cf2.chromeStorageService","w69b.spawn","castifyExt.driveUtils","castifyExt.offline","castifyExt.castifyAuth","castifyExt.appOptions"]).factory("driveFileDb",["googledrive","$q","$log","onlineState","cf2ChromeStorageService","appOptions","spawn",function(t,e,n,r,i,o,a){var s="drive_files",u={};function c(t,e){if(t){var n=t.match(/(.*)=s\d+$/);if(n)return n[1]+"=s"+e}return t}function l(t){var e={};return t.forEach(function(t){if("PRIVATE"===t.visibility){if(t.key.indexOf("_")>0){var n=t.key.split("_",2),r=n[0],i=n[1];e[r]||(e[r]={}),e[r][i]=t.value}e[t.key]=t.value}}),e}function h(t){this.updateFromDriveResource_(t)}var f=h.prototype;function d(){return e.when(i.local.getSingle(s,null))}f.updateFromDriveResource_=function(t){var e,r=l(t.properties),i={id:r.uuid,driveId:t.id,thumbnailUrl:c(t.thumbnailLink,400),createdAt:new Date(r.recordingDate?Number(r.recordingDate):t.createdDate),url:(e=t.downloadUrl,e.indexOf("?")>=0?e+="&":e+="?",e+"cache_buster="+Math.floor(1e10*Math.random()).toString().padStart(10,"0").toString().padStart(10,"0")),urlRequiresAccessToken:!0,mimeType:t.mimeType,size:Number(t.fileSize),duration:Number(r.duration),width:Number(r.width),height:Number(r.height),driveInfo:t},o="."+t.fileExtension;void 0===t.title?(n.warn("driveFileDb: file title is undefined, resource is",t),i.title=""):i.title=t.fileExtension&&-1!==t.title.indexOf(o,t.title.length-o.length)?t.title.slice(0,-o.length):t.title,r.youtubeInfo&&(i.youtubeInfo=r.youtubeInfo),hs().extend(this,i)},f.remove=function(){return t.trashFile(this.driveId)},f.rename=function(e){var n=this.driveInfo.fileExtension;return n&&e.indexOf(n="."+n,e.length-n.length)<0&&(e+=n),t.patchFile(this.driveId,{title:e}).then(this.updateFromDriveResource_.bind(this))},f.updateYoutubeInfo=function(e){return l(this.driveInfo.properties).youtubeInfo=e,t.patchFile(this.driveId,{properties:(n={youtubeInfo:e},r=[],hs().forEach(n,function(t,e){hs().isObject(t)?hs().forEach(t,function(t,n){r.push({key:e+"_"+n,value:t,visibility:"PRIVATE"})}):r.push({key:e,value:t,visibility:"PRIVATE"})}),r)});var n,r},u.getFileDescriptor=function(n){return t.listFiles({maxResults:1,q:"trashed = false and properties has { key='uuid' and value='"+n+"' and visibility='PRIVATE' }"}).then(function(t){return t.length?t[0]:e.reject()}).then(function(t){return new h(t)})};var p=a.wrap(function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return(t=e.sent())&&t.fetchDate?[2,t.list]:t&&t.length?[2,t]:[2,[]]}})});return u.listFiles=function(){return a(function(){var e,n,a,u;return(0,Us.Jh)(this,function(c){switch(c.label){case 0:return r.isOnline()?[4,d()]:[3,10];case 1:return n=c.sent(),[4,o.loadedPromise];case 2:return c.sent(),o.values.enablePersistentDriveCache&&n&&n.fetchDate&&Date.now()<=n.fetchDate+12e5?(e=n.list,[3,9]):[3,3];case 3:return c.trys.push([3,5,,9]),[4,t.listFiles({maxResults:1e3,q:"trashed = false and 'me' in owners and properties has { key='isScreencastifySyncFile' and value='true' and visibility='PRIVATE' }"})];case 4:return function(t){var e={list:t,fetchDate:Date.now()};i.local.setSingle(s,e)}(e=c.sent()),[3,9];case 5:return(a=c.sent())&&(a.status<=0||a.status>=500)?[4,p()]:[3,7];case 6:return e=c.sent(),[3,8];case 7:throw a;case 8:return[3,9];case 9:return[3,12];case 10:return[4,p()];case 11:e=c.sent(),c.label=12;case 12:return u={},e&&e.forEach(function(t){var e=new h(t);u[e.id]=e}),[2,u]}})})},u.clearCache=function(){return i.local.setSingle(s,null)},u}]),n(99198),n(32592);var vP=n(65963).default,gP=n(17008),yP=9e5;angular.module("castifyExt.bgFiles",["castifyExt.localFileDb","castifyExt.driveFileDb","w69b.chromeRuntime","castifyExt.appOptions","castifyExt.syncAuthTool","castifyExt.offline","w69b.spawn","cf2.bgUsageStatsService","cf2.umbrellaService"]).factory("bgFiles",["localFileDb","driveFileDb","cf2UmbrellaService","$q","$rootScope","chromeRuntime","appOptions","$log","syncAuthTool","spawn","$timeout",function(t,e,n,r,i,o,a,s,u,c,l){var h,f={},d={},p=[],v=0,g=0,y=["id","size","width","height","duration","title","thumbnailUrl","createdAt","url","driveInfo","youtubeInfo","urlRequiresAccessToken","mimeType"],m=y.concat(["isSynced","isLocal","driveFileId","tmpDrivePrivacy","trimHint"]);function b(t,e){this.$localDesc=t,this.$driveDesc=e,this.ownProperties_={}}var w=b.prototype;function _(t){this.port=t}function S(t){return u.broadcastIfSyncError(t)}function k(){return a.values.driveSync}function E(t){var e={};return m.forEach(function(n){var r=t[n];angular.isDefined(r)&&(r instanceof Date&&(r=r.getTime()),e[n]=r)}),e}function x(t){var e={};return angular.forEach(t,function(t,n){e[n]=E(t)}),e}function T(){v++,d.listFiles().then(function(t){I("filesUpdate",{full:x(t)})})}function I(t,e){p.forEach(function(n){n.subscribed&&n.postMessage(t,e)})}function C(t){v++;var e=f[t],n={};e?(n.add={},n.add[t]=E(e)):n.remove=[t],I("filesUpdate",n)}function A(t){if("files"==t.name){var e=new _(t);p.push(e),t.onDisconnect.addListener(function(){var t=p.indexOf(e);t>=0&&p.splice(t,1)});var n={remove:d.remove,reload:function(t){d.reload(t).then(function(){e.postMessage("reloadSuccess",t)},function(){e.postMessage("reloadError",t)})},refreshAll:d.refreshAll,rename:function(t){d.rename(t.id,t.title)},removeAll:d.removeAll,subscribe:function(){e.subscribed=!0,e.postFiles()}};t.onMessage.addListener(function(t){n.hasOwnProperty(t.type)&&n[t.type](t.data)})}}w.preferDriveDelegate_=function(){return this.$driveDesc?this.$driveDesc:this.$localDesc},w.preferLocalDelegate_=function(){return this.$localDesc?this.$localDesc:this.$driveDesc},w.getDelegate_=function(t){return this.ownProperties_.hasOwnProperty(t)?this.ownProperties_:"thumbnailUrl"===t?this.preferLocalDelegate_():this.preferDriveDelegate_()},w.callOnBoth_=function(t,e){e=Array.prototype.slice.call(arguments,1);var n=this;return(n.$driveDesc?n.$driveDesc[t].apply(n.$driveDesc,e).catch(S):r.when()).then(function(){if(n.$localDesc)return n.$localDesc[t].apply(n.$localDesc,e)})},w.reload=function(){var n=[],i=this;i.$driveDesc&&n.push(e.getFileDescriptor(i.id).then(function(t){i.$driveDesc=t})),i.$localDesc&&n.push(t.getFileDescriptor(i.id).then(function(t){i.$localDesc=t}));var o=r.all(n).then(function(){i.ownProperties_={}});return o.finally(function(){C(i.id)}),o},w.rename=function(t){var e=this,n=e.title;e.title=t;var r=e.callOnBoth_("rename",t);return r.catch(function(){e.title=n}),r.finally(function(){C(e.id)}),r},w.remove=function(){var t=this;return t.callOnBoth_("remove").then(function(){return delete f[t.id],i.$broadcast("bgFiles:fileRemoved",t.id),t}).finally(function(){C(t.id)})},w.updateYoutubeInfo=function(t){var e=this,n=e.youtubeInfo;e.youtubeInfo=t;var r=e.callOnBoth_("updateYoutubeInfo",t);r.catch(function(){e.youtubeInfo=n}),r.finally(function(){C(e.id)})},y.forEach(function(t){Object.defineProperty(w,t,{get:function(){var e=this.getDelegate_(t);return e?e[t]:null},set:function(e){this.ownProperties_[t]=e}})}),Object.defineProperty(w,"isSynced",{get:function(){return!!this.$driveDesc}}),Object.defineProperty(w,"isLocal",{get:function(){return!!this.$localDesc}}),Object.defineProperty(w,"driveFileId",{get:function(){return this.$driveDesc&&this.$driveDesc.driveInfo&&this.$driveDesc.driveInfo.id||this.$localDesc&&this.$localDesc.driveFileId}}),Object.defineProperty(w,"tmpDrivePrivacy",{get:function(){return this.$localDesc&&this.$localDesc.tmpDrivePrivacy||"private"}}),Object.defineProperty(w,"trimHint",{get:function(){return this.$localDesc&&this.$localDesc.trimHint}}),(w=_.prototype).postMessage=function(t,e){p.indexOf(this)<0||this.port.postMessage({type:t,data:e})},w.postFiles=function(){var t=this;d.listFiles().then(function(e){t.postMessage("filesUpdate",{full:x(e)})},function(e){s.warn("bgFiles: initial MessageClient subscribe postFiles failed",e),t.postMessage("filesUpdate",{error:!0})})},d.getFileDescriptor=function(t){return f[t]?r.when(f[t]):d.listFiles().then(function(e){return e[t]?e[t]:r.reject(new Error("file does not exist: "+t))})},d.listFiles=function(){if(!h){var n=a.loadedPromise.then(function(){return k()?e.listFiles():r.when({})});(h=r.all({local:t.listFiles(),drive:n}).then(function(t){return g=Date.now(),Object.keys(t.local).concat(Object.keys(t.drive)).forEach(function(e){var n=new b(t.local[e],t.drive[e]);f[n.id]=n}),f})).catch(S),h.catch(function(){h=null})}return h},d.removeAll=c.wrap(gP.mark(function t(){var e,n;return gP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.listFiles();case 2:return e=Object.keys(t.sent),(n=k()?M(e):R(e)).catch(T),t.abrupt("return",n);case 7:case"end":return t.stop()}},t)}));var M=c.wrap(gP.mark(function t(e){var n,i,o,a;return gP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=7,i=1e3,o=[],a=0;case 4:if(!(a<e.length)){t.next=12;break}if(o.push(R(e.slice(a,a+n))),!(a+n<e.length)){t.next=9;break}return t.next=9,l(i);case 9:a+=n,t.next=4;break;case 12:return t.abrupt("return",r.all(o));case 13:case"end":return t.stop()}},t)}));function R(t){return r.all(t.map(function(t){return d.remove(t)}))}function O(t){if(404===t.status)return s.warn("bgFiles: tried to remove non-existent file, refreshing all files"),d.refreshAll(!0);throw t}function P(){return null}function N(t){t&&d.refreshAll()}return d.remove=function(t){return d.getFileDescriptor(t).then(function(t){return t.remove()}).then(function(t){return n.deleteRegistry(t)}).catch(O)},d.rename=function(t,e){return d.getFileDescriptor(t).then(function(t){return t.rename(e)})},d.reload=function(t){return d.getFileDescriptor(t).then(function(t){return t.reload()})},d.clearCache=c.wrap(gP.mark(function t(){return gP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return v++,h=null,t.next=4,e.clearCache();case 4:angular.copy({},f);case 5:case"end":return t.stop()}},t)})),d.idToLocalFilename=function(e){return t.idToFilename(e)},d.getFile=function(e){return t.getFile(e)},d.localFilenameToId=function(e){return t.filenameToId(e)},d.updateLocalInfo=function(e,n){return t.updateInfo(e,n).then(function(){d.reload(e).then(function(){C(e)}).catch(function(){return null})})},d.updateYoutubeInfo=function(t,e){return d.getFileDescriptor(t).then(function(t){return t.updateYoutubeInfo(e)})},d.getListVersionId=function(){return v},d.isSyncEnabled=k,d.registerLocalFile=function(e,n){return c(gP.mark(function r(){var o,a;return gP.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getFileDescriptor(e);case 2:return o=r.sent,r.next=5,d.getFileDescriptor(e).catch(function(){return new b(o,null)});case 5:if(a=r.sent,!n){r.next=9;break}return r.next=9,a.rename(n);case 9:f[a.id]=a,C(e),i.$broadcast("bgFiles:localFileCreated",e);case 12:case"end":return r.stop()}},r)}))},d.refresh=function(n){if(!/^[0-9a-zA-Z-]*$/.test(n))throw new Error("invalid file id");return r.all({proxy:d.getFileDescriptor(n).catch(P),drive:e.getFileDescriptor(n).catch(P),local:t.getFileDescriptor(n).catch(P)}).then(function(t){var e=t.proxy;if(!e){if(!t.drive&&!t.local)return r.reject();e=new b(t.local,t.drive),f[e.id]=e}e.$driveDesc=t.drive,e.$localDesc=t.local,e.$driveDesc||e.$localDesc||(e.deleted=!0,delete f[n]),C(n)})},d.refreshAll=vP(gP.mark(function t(){var e=arguments;return gP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0&&void 0!==e[0]&&e[0]||Date.now()-g>yP)){t.next=5;break}return t.next=4,d.clearCache();case 4:T();case 5:case"end":return t.stop()}},t)})),d.install=function(){i.$on("onlineState:changed",N),i.$on("event:userAccountChanged",function(){return d.refreshAll(!0)}),a.loadedPromise.then(function(){i.$watch(k,function(t,e){var n;e!==t&&(s.debug("bgFiles: sync setting changed to "+(n=t)+" clearing cache"),d.clearCache(),p.length&&T(),i.$broadcast("bgFiles:syncSettingChanged",n))})}),o.onConnect.addListener(A)},d}]),n(42608),angular.module("castifyExt.licenseEnforcer",["castifyExt.bgRecord","cf2.upgradeHelperService"]).factory("licenseEnforcer",["bgRecordService","$rootScope","$log","cf2BgCastifyDrawService","cf2UpgradeHelperService",function(t,e,n,r,i){var o={install:function(){var o=Number.MAX_VALUE;function a(){i.getRecordingTimeLimitAsync().then(function(t){return o=t})}e.$on("event:userAccountChanged",a),a(),e.$watch(function(){return t.getRecorderState().time>=o},function(e){e&&(n.debug("licenseEnforcer: recordLimitReached"),chrome.notifications.clear("recordLimitInfo",angular.noop),chrome.notifications.clear("recordLimitReached",angular.noop),t.stop(!0))}),e.$watch(function(){return o-Math.ceil(t.getRecorderState().time)},function(t){t>0&&t<=30&&function(t){n.debug("licenseEnforcer: recordLimitApproaching");var e={type:"basic",priority:2,title:"Approaching free recording limit",message:"Recording will be stopped automatically in "+t+" seconds. Please upgrade Screencastify to record longer screencasts.",iconUrl:"assets/images/icon128.png"};r.isActiveTabInjected()||chrome.notifications.create("recordLimitInfo",e,angular.noop)}(t)}),e.$on("recorder:stopped",function(){chrome.notifications.clear("recordLimitInfo",angular.noop)})}};return chrome.notifications.onClicked.addListener(function(t){"recordLimitReached"!==t&&"recordLimitInfo"!==t||(i.openBuy("extension","time_limit"),chrome.notifications.clear(t,angular.noop))}),o}]),angular.module("castifyExt.chromeEventPublisher",[]).run(["chromeRuntime","$rootScope",function(t,e){t.onMessage.addListener(function(t){angular.isObject(t)&&angular.isString(t.type)&&0===t.type.lastIndexOf("event:",0)&&e.$broadcast(t.type,t.data),e.$$phase||e.$digest()})}]),n(10323);var mP=n(17008);angular.module("castifyExt.driveUtils",["w69b.googledrive","castifyExt.castifyAuth","w69b.spawn","cf2.chromeStorageService","cf2.userAccount"]).factory("driveUtils",["googledrive","$q","spawn","$log","cf2ChromeStorageService","$rootScope","$timeout","userAccount",function(t,e,n,r,i,o,a,s){var u,c,l={},h="DRIVE_FOLDER_ID";function f(t){if(t&&t.data){var e,n=t.data;if(n.error&&n.error.errors&&n.error.errors.length&&(e=n.error.errors[0]),e)return e.reason}else if(t&&t.message)return t.message;return null}function d(n){return t.getFile(n).then(function(t){return!t.labels.trashed},function(t){return 404!==t.status&&(r.warn("driveUtils: checkIfExists failed",t),e.reject(t))})}function p(t,e){var n=t.filter(function(t){return t.type===e});return n.length?n[0]:null}function v(t){return p(t,"anyone")}function g(t){return p(t,"domain")}function y(t){var e=v(t),n=g(t);return e?e.withLink?"unlisted":"public":n?n.withLink?"domain_unlisted":"domain_public":"private"}l.getDriveUploadParentId=function(e){return u&&!e||(u=n(mP.mark(function e(){var n,o,a;return mP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.sync.getSingle(h);case 2:if(e.t0=n=e.sent,!e.t0){e.next=8;break}return e.next=7,d(n);case 7:e.t0=e.sent;case 8:if(!e.t0){e.next=11;break}return r.debug("driveUtil: using cached parent Id",n),e.abrupt("return",n);case 11:return e.next=13,t.listFiles({q:"mimeType = 'application/vnd.google-apps.folder' and trashed = false and 'me' in owners and properties has { key='isScreencastifyUploadFolder' and value='true' and visibility='PRIVATE' }",maxResults:1}).then(function(t){return r.debug("driveUtils: findFolder items #",t.length),t.length?t[0]:null});case 13:if(o=e.sent){e.next=18;break}return e.next=17,r.debug("driveUtils: creating Drive folder"),t.postFile({title:"Screencastify",mimeType:"application/vnd.google-apps.folder",description:"Screencastify uses this folder to store Screencasts that you upload. You may rename or move it, it will upload to this folder.",properties:[{key:"isScreencastifyUploadFolder",value:!0,visibility:"PRIVATE"}]});case 17:o=e.sent;case 18:return a=o.id,e.next=21,i.sync.setSingle(h,a);case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}},e)}))).catch(function(t){l.isRateLimitError(t)?(c&&a.cancel(c),c=a(function(){u=null,c=null},1e4)):u=null}),u},l.getSimplePrivacy=function(e){return t.listPermissions(e).then(y)},l.getLink=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"view",r="https://drive.google.com/file/d/".concat(t,"/").concat(n);return e&&(r+="?resourcekey=".concat(e)),r};var m=function(t){return n(mP.mark(function e(){var n,r;return mP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,s.getAccount();case 4:if(r=(n=e.sent).user&&n.user.me?n.user.me.domain:null){e.next=8;break}throw new Error("no domain found");case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e)}))};return l.setSimplePrivacy=function(r,i,o){return n(mP.mark(function n(){var a,s,u,c,l;return mP.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.listPermissions(r);case 2:if(s=v(a=n.sent),u=g(a),y(a)!==i){n.next=9;break}return n.abrupt("return",e.when(null));case 9:if("private"!==i){n.next=18;break}if(!s){n.next=13;break}return n.next=13,t.removePermission(r,s.id);case 13:if(!u){n.next=16;break}return n.next=16,t.removePermission(r,u.id);case 16:n.next=31;break;case 18:if(!s){n.next=21;break}return n.next=21,t.removePermission(r,s.id);case 21:if(!u){n.next=24;break}return n.next=24,t.removePermission(r,u.id);case 24:if(c=i.startsWith("domain_"),l={role:"reader",type:c?"domain":"anyone",withLink:"unlisted"===i||"domain_unlisted"===i},!c){n.next=30;break}return n.next=29,m(o);case 29:l.value=n.sent;case 30:return n.abrupt("return",t.insertPermission(r,l));case 31:case"end":return n.stop()}},n)}))},l.isGoogleAppsForbiddenError=function(t){return t&&403==t.status&&"domainPolicy"===f(t)},l.isRateLimitError=function(t){return t&&403==t.status&&"rateLimitExceeded"===f(t)},l.findCommentPermissions=function(t){return t?t.filter(function(t){return"reader"===t.role&&t.additionalRoles&&t.additionalRoles.includes("commenter")}):[]},l.findReadOnlyPermissions=function(t){return t?t.filter(function(t){return!("reader"!==t.role||t.additionalRoles&&t.additionalRoles.includes("commenter"))}):[]},o.$on("event:signInChanged",function(){u=null,i.sync.remove(h)}),l}]),n(40328),n(75679);var bP=n(2153).default,wP=n(17008);angular.module("castifyExt.bgSyncManager",["castifyExt.appOptions","castifyExt.bgUpload","w69b.chromeRuntime","w69b.googledrive","castifyExt.localFileDb","castifyExt.chromeEventPublisher","castifyExt.bgFiles","w69b.spawn","castifyExt.bgSyncDownloader","cf2.umbrellaService"]).factory("bgSyncManager",["$rootScope","appOptions","bgUploadService","localFileDb","googledrive","$q","$log","bgFiles","spawn","bgSyncDownloader","cf2UmbrellaService",function(t,e,n,r,i,o,a,s,u,c,l){var h={},f=new Map,d=new Set;function p(t){return a.debug("bgSyncManager: starting sync upload",t.id),n.upload({fileId:t.id,target:"drive",privacy:"private",title:t.title,isSyncUpload:!0,uploader:"drive"})}function v(t,e){if(e.config.isSyncUpload){var n=e.config,u=e.data.id;a.debug("bgSyncManager: sync upload of file %s complete, driveId %s",n.fileId,u),r.getFileDescriptor(n.fileId).then(function(t){if(t.title!==n.title){var e=t.title;return a.debug("bgSyncManager: title changed, applying post-upload changes"),/\.webm/i.test(e)||(e+=".webm"),i.patchFile(u,{title:e})}return o.when()}).then(function(){a.debug("bgSyncManager: publishing video draft entry"),l.getDraftRegistryEntryByDriveId(u).catch(function(t){return a.debug("bgSyncManager: This is expected and handled",t)})}).catch(function(t){a.warn("bgSyncManager: sync upload hook failed",t)}).then(function(){s.refresh(n.fileId)})}}function g(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return r.getFileDescriptor(t).then(function(t){return t.remove().then(function(){if(a.debug("bgSyncManager: removed local file",t.id),e)return s.refresh(t.id)})},angular.identity)}function y(t){var e=f.get(t.id);if(e&&!e.downloadPending){var n=c.startDownload(t.id);e.downloadPending=!0,n.done.then(e.deferred.resolve.bind(e.deferred),e.deferred.reject.bind(e.deferred)),n.done.finally(function(){e.downloadPending=!1,e.timestamp=Date.now()})}}function m(t,e){S(e)}function b(){return e.values.driveSync}function w(t){var e=f.get(t.id),n=t.isSynced&&!!t.driveInfo.thumbnailLink,r=t.isSynced&&new Date(t.driveInfo.createdDate)<Date.now()-72e5,i=e&&(e.downloadPending||e.timestamp+18e5>=Date.now());return t.isLocal&&(n||r)&&!i}function _(){return u(wP.mark(function t(){var e,n,i;return wP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,t.t0=Object,t.next=4,r.listFiles();case 4:t.t1=t.sent,n=t.t0.keys.call(t.t0,t.t1);case 6:if(!(e<n.length)){t.next=16;break}return i=n[e],t.next=10,s.getFileDescriptor(i);case 10:if(t.sent.isSynced){t.next=13;break}return t.abrupt("return",!1);case 13:e++,t.next=6;break;case 16:return t.abrupt("return",!0);case 17:case"end":return t.stop()}},t)}))}function S(t){u(wP.mark(function e(){var n,r;return wP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getFileDescriptor(t);case 2:if(n=e.sent,!b()){e.next=15;break}if(n.isSynced||p(n),!w(n)){e.next=13;break}return e.next=8,_();case 8:if(!e.sent){e.next=12;break}g(n.id),e.next=13;break;case 12:d.add(n.id);case 13:(r=f.get(n.id))&&!r.isDone&&(n.isLocal?r.deferred.resolve():y(n));case 15:case"end":return e.stop()}},e)})).catch(function(e){a.error("bgSyncManager: syncFile(".concat(t,") failed : "),e)})}function k(t,e){e||n.cancelAllUploads(!0),h.syncFiles()}function E(){var t,e=bP(d);try{for(e.s();!(t=e.n()).done;)S(t.value)}catch(n){e.e(n)}finally{e.f()}}h.syncFiles=function(){u(wP.mark(function t(){var e,n,i,o,a,s,u;return wP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Set,n=0,t.t0=Object,t.next=5,r.listFiles();case 5:t.t1=t.sent,i=t.t0.keys.call(t.t0,t.t1);case 7:if(!(n<i.length)){t.next=13;break}e.add(i[n]);case 10:n++,t.next=7;break;case 13:o=bP(f.keys());try{for(o.s();!(a=o.n()).done;)e.add(a.value)}catch(c){o.e(c)}finally{o.f()}s=bP(e);try{for(s.s();!(u=s.n()).done;)S(u.value)}catch(c){s.e(c)}finally{s.f()}case 17:case"end":return t.stop()}},t)}))};var x=u.wrap(wP.mark(function t(){var e;return wP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b()){t.next=2;break}return t.abrupt("return");case 2:return a.info("bgSyncManager: removing synced files before account change."),e=[],t.t0=angular,t.next=7,r.listFiles();case 7:return t.t1=t.sent,t.t2=function(t){t.driveInfo&&e.push(g(t.id))},t.t0.forEach.call(t.t0,t.t1,t.t2),t.next=12,o.all(e);case 12:case"end":return t.stop()}},t)}));function T(){d.clear(),x().finally(function(){h.syncFiles()})}function I(t,r){e.values.driveSync&&n.cancel({target:"drive",fileId:r})}return h.requestSyncLocal=function(t){if(!b())return o.when();var e=f.get(t)||function(t,e){t={id:e,deferred:o.defer(),isDone:!1},f.set(e,t);var n=t.deferred.promise;return n.then(function(){t.isDone=!0}),n.catch(function(){f.delete(e)}),t}(e,t);return e.timestamp=Date.now(),S(t),e.deferred.promise},h.syncFile=S,h.areAllLocalFilesSynced=_,h.install=u.wrap(wP.mark(function n(){return wP.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.$on("uploader:complete",v),t.$on("bgFiles:localFileCreated",m),t.$on("bgFiles:fileRemoved",I),t.$on("bgFiles:syncSettingChanged",k),t.$on("bgSyncStatus:syncComplete",E),t.$on("event:signInChanged",T),n.next=8,e.loadedPromise;case 8:h.syncFiles();case 9:case"end":return n.stop()}},n)})),h}]);var _P=n(2153).default,SP=n(17008);angular.module("castifyExt.bgSyncDownloader",["castifyExt.bgFiles","w69b.filesHelper","w69b.chromeRuntime","castifyExt.simplePortService","w69b.spawn"]).factory("fetchTool",["spawn","castifyAuth","filesHelper","$q",function(t,e,n,r){function i(t){return e.getAuthToken({interactive:!1}).then(function(e){t.headers.append("Authorization","Bearer "+e)})}function o(t,e){return new Promise(function(n,r){t.onwriteend=n,t.onerror=r,t.write(e)})}return{downloadUrlToFile:function(e,a){var s,u={},c=!1;return u.path=a,u.cancel=function(){s&&s.cancel(),c=!0},u.done=r.when(t(SP.mark(function t(){var r,l,h,f,d,p;return SP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Request(e),t.next=3,i(r);case 3:return t.next=5,n.getFileEntryByPath(a,{create:!0});case 5:return l=t.sent,t.next=8,n.getMetadata(l);case 8:return r.headers.append("range","bytes = ".concat((h=t.sent).size," -")),t.next=12,fetch(r,{mode:"cors"});case 12:if((f=t.sent).ok){t.next=15;break}throw new Error("fetch failed");case 15:if(!c){t.next=17;break}return t.abrupt("return");case 17:return s=f.body.getReader(),t.next=20,s.read();case 20:return d=t.sent,t.prev=21,u.bytesLoaded=h.size,t.next=25,n.createWriter(l);case 25:p=t.sent;case 26:if(d.done){t.next=35;break}return t.next=29,o(p,new Blob([d.value]));case 29:return u.bytesLoaded+=d.value.length,t.next=32,s.read();case 32:d=t.sent,t.next=26;break;case 35:t.next=41;break;case 37:throw t.prev=37,t.t0=t.catch(21),s.cancel(),t.t0;case 41:case"end":return t.stop()}},t,null,[[21,37]])}),!0)),u}}}]).factory("bgSyncDownloader",["bgFiles","spawn","castifyAuth","$window","filesHelper","fetchTool","$log","$q","simplePortService",function(t,e,n,r,i,o,a,s,u){var c,l={},h=new Map,f=u("syncDownloader");function d(){var t,e={},n=_P(h.entries());try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r[0]]={progress:r[1].progress}}}catch(i){n.e(i)}finally{n.f()}f.postMessage("downloads",e)}return l.getDownload=function(t){return h.get(t)},l.startDownload=function(n){var r=h.get(n);return r||(a.debug("bgSyncDownloader.startDownload(".concat(n,")")),r=function(n){var r,s,u=!1,l={get bytesLoaded(){return r?r.bytesLoaded:0},get progress(){return s&&s.size?l.bytesLoaded/s.size:0},cancel:function(){r&&r.cancel(),u=!0}};return l.done=e(SP.mark(function e(){var a;return SP.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:return e.next=4,t.getFileDescriptor(n);case 4:if(s=e.sent,!u){e.next=7;break}return e.abrupt("return");case 7:return r=o.downloadUrlToFile(s.url,a="_dl/"+s.id),e.next=11,r.done;case 11:return e.next=13,i.moveFileByPath(a,t.idToLocalFilename(s.id));case 13:return e.next=15,t.registerLocalFile(s.id);case 15:case"end":return e.stop()}},e)})),l.done.catch(function(t){a.warn("bgSyncDownloader: download failed",t)}),l}(n),h.set(n,r),d(),r.done.finally(function(){h.delete(n),d()})),r},l.install=function(){c=e(SP.mark(function t(){var e,n,r;return SP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getDirByPath("_dl",{create:!0});case 2:return t.next=4,i.listByPath("_dl");case 4:e=[],n=_P(t.sent);try{for(n.s();!(r=n.n()).done;)e.push(i.remove(r.value))}catch(o){n.e(o)}finally{n.f()}return t.next=10,s.all(e);case 10:case"end":return t.stop()}},t)})).catch(function(t){a.error("bgSyncDownloader.cleanup failed",t)}),f.install()},f.handlers.update=function(){d()},l}]);var kP=n(7107),EP=kP.BehaviorSubject,xP=kP.Subject;angular.module("castifyExt.offline",[]).factory("onlineState",["$rootScope","$window","$http","$timeout","$log",function(t,e,n,r,i){var o={},a=null,s=!0,u=null,c=!1,l=new xP;function h(){if(a)return a;var t=Math.random().toString(36).substr(2,36);return(a=n.get("https://api.screencastify.com/images/cleardot.gif?"+t,{responseType:"arraybuffer",timeout:1e4}).then(function(){return a=null,i.debug("checkNetwork result is online"),!0},function(){return i.debug("checkNetwork result is offline"),a=null,!1})).then(f),a}function f(e){l.next(e),s!==e&&(i.debug("verified network state is ",e),s=e,t.$broadcast("onlineState:changed",e)),!e&&o.isNavigatorOnline()&&function(t){function e(){return(u=r(angular.noop,1e4)).then(n)}function n(){return h().then(function(t){if(!t&&o.isNavigatorOnline()&&c)return e()})}c||(c=!0,e().finally(function(){c=!1}))}()}return o.check=function(){return h()},o.isOnline=function(){return s},o.onIsOnline=function(){return l.asObservable()},o.isNavigatorOnline=function(){return!1!==e.navigator.onLine},o.isOnline$=new EP(o.isNavigatorOnline()),e.addEventListener("online",function(){o.check(),o.isOnline$.next(!0)}),e.addEventListener("offline",function(){f(!1),r.cancel(u),c=!1,o.isOnline$.next(!1)}),o}]);var TP=n(17008);angular.module("castifyExt.syncAuthTool",["castifyExt.castifyAuth","w69b.chromeRuntime","castifyExt.appOptions","castifyExt.driveUtils","w69b.spawn"]).factory("syncAuthTool",["castifyAuth","spawn","$q","$log","appOptions","chromeRuntime","$rootScope","driveUtils",function(t,e,n,r,i,o,a,s){var u={};return u.broadcastIfSyncError=e.wrap(TP.mark(function t(e){return TP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("not_signed_in"!==e){t.next=5;break}return r.debug("syncAuthTool: sync enabled but not signed in"),a.$broadcast("event:syncAuthError"),o.sendMessage({type:"event:syncAuthError"}).catch(angular.identity),t.abrupt("return",n.reject(e));case 5:return i.values.driveSync&&u.checkSetup().catch(function(t){switch(t){case"token":r.debug("syncAuthTool: sync enabled but we do not have a valid token"),a.$broadcast("event:syncAuthError"),o.sendMessage({type:"event:syncAuthError"}).catch(angular.identity);break;case"forbidden":r.debug("syncAuthTool: detected drive-forbidden error",e),a.$broadcast("event:syncForbiddenError");break;default:r.warn("syncAuthTool: unhandled sync error detected",e)}}),t.abrupt("return",n.reject(e));case 7:case"end":return t.stop()}},t)})),u.hasValidAuthToken=function(){return t.getAuthToken({interactive:!1,validate:!0})},u.isRateLimitError=function(t){return s.isRateLimitError(t)},u.checkSetup=function(){return u.hasValidAuthToken().catch(function(){return n.reject("token")}).then(function(){return s.getDriveUploadParentId().catch(function(t){return s.isGoogleAppsForbiddenError(t)?n.reject("forbidden"):n.reject("unknown")})}).then(function(){return!0})},u}]),angular.module("castifyExt.bgSyncStatus",["castifyExt.bgFiles","castifyExt.bgUpload","castifyExt.syncAuthTool","castifyExt.bgSyncManager","w69b.throttle","w69b.chromeRuntime","w69b.spawn"]).factory("bgSyncStatus",["bgFiles","bgUploadService","$rootScope","$log","throttle","syncAuthTool","chromeRuntime","bgSyncManager","spawn",function(t,e,n,r,i,o,a,s,c){var l={},h=null,f={type:"unknown"},d={},p=new Map,v=[];function g(t){if("syncStatus"==t.name){v.push(t),y(),t.onDisconnect.addListener(function(){var e=v.indexOf(t);e>=0&&v.splice(e,1)});var e={retry:l.retry};t.onMessage.addListener(function(t){e.hasOwnProperty(t.type)&&e[t.type](t.data)})}}function y(){var t;t=f,v.forEach(function(e){e.postMessage({type:"stateUpdate",data:t})})}function m(t){b({type:"synced",numTotalFiles:t}),y()}function b(t){t.type!==f.type&&(r.debug("syncStatus: changing state to",{type:t.type,numTotalFilesToSync:t.numTotalFiles}),"synced"===t.type&&"unknown"!==f.type&&n.$broadcast("bgSyncStatus:syncComplete")),f=t,"uploading"!==t.type&&(d={})}function w(t){"offline"!==f.type&&b({type:"offline"}),f.numTotalFiles=t,y()}function _(){s.areAllLocalFilesSynced().catch(function(){return!1}).then(function(t){t?(r.debug("syncStatus: treating auth error with no local files as synced"),m(0)):(b({type:"error",errorReason:"token"}),y())})}function S(){b({type:"error",errorReason:"forbidden"}),y()}function k(){var t,e=null,n=u(p.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;r&&(e=r)}}catch(i){n.e(i)}finally{n.f()}b({type:"error",numTotalFiles:p.size,errorReason:e}),y()}function E(t){var n=0,r=0;angular.forEach(t,function(t,e){d[e]=t&&t.progress||d[e]||0,t?"uploading"===t.state?++n:"queued"===t.state&&++r:r++}),n?function(){"uploading"!==f.type&&b({type:"uploading"});var t=0,e=0,n=0;angular.forEach(d,function(r){t+=r,++e,r>=1&&++n}),f.progress=t/e,f.numTotalFiles=e,f.numCompleteFiles=n,y()}():r&&(e.hasRecentlyRanOutOfDriveSpace()?(b({type:"error",errorReason:"quotaExceeded"}),y()):e.isOnline()?function(t){"waiting"!==f.type&&b({type:"waiting"}),f.numTotalFiles=t,y()}(r):w(r))}function x(){e.isOnline()?o.checkSetup().then(k,function(t){"token"===t?_():"forbidden"===t?S():k()}):w(0)}var T=c.wrap(dP().mark(function n(){return dP().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(p.size>0)){n.next=3;break}return x(),n.abrupt("return");case 3:return n.next=5,s.areAllLocalFilesSynced().catch(function(){return!1});case 5:if(!n.sent){n.next=8;break}return m(0),n.abrupt("return");case 8:t.listFiles().then(function(t){if(h){var n={},r=!1,i=0;angular.forEach(t,function(t){var o;t.isSynced?d.hasOwnProperty(t.id)&&(d[t.id]=1):(n[t.id]=(o=e.getTargetFileState(t.id,"drive"))&&o.config.isSyncUpload?o:null,r=!0),++i}),angular.forEach(d,function(e,n){t[n]||delete d[n]}),r?E(n):m(i)}},function(t){r.debug("syncStatus list err",t),o.isRateLimitError(t)||x()});case 9:case"end":return n.stop()}},n)}));function I(t,e){var n=e.config,i=e.error;n.isSyncUpload&&(r.error("syncStatus: sync error detected",i),p.has(n.fileId)&&p.delete(n.fileId),p.set(n.fileId,i&&i.reason),T())}function C(){return"error"==f.type}function A(){C()||_()}function M(){C()||S()}function R(){p.clear(),T()}return l.retry=function(){e.clearOutOfSpaceErrors(),p.clear(),s.syncFiles()},l.getState=function(){return f},l.install=function(){n.$watch(t.isSyncEnabled,function(r){r?function(){b({type:"unknown"}),y(),h=n.$new(!0);var r=i(T,300,!0);h.$watchGroup([t.getListVersionId,e.getWatcherStateId,e.isOnline],function(){r()}),h.$on("uploader:failed",I),h.$on("event:syncAuthError",A),h.$on("event:syncForbiddenError",M),h.$on("event:userAccountChanged",R)}():(h&&h.$destroy(),h=null,b({type:"disabled"}),y())}),a.onConnect.addListener(g)},l}]);var IP=n(17008);angular.module("castifyExt.bgRecordingErrorHandler",["castifyExt.appOptions","castifyExt.recordTool","cf2.chromeStorageService","w69b.spawn"]).factory("bgRecordingErrorHandler",["$rootScope","appOptions","recordTool","$log","cf2ChromeStorageService","chromeNotifications","spawn",function(t,e,n,r,i,o,a){var s={},u=a.wrap(IP.mark(function t(){var o;return IP.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getRecordConfig();case 2:o=t.sent,("vp9"!=e.values.videoCodec||o.targetFPS>10)&&(r.info("bgRecordingErrorHandler: disabling mediarecorder after a incomplete recording"),e.values.videoCodec="vp9",e.values.bitRateOption="medium",e.save(),n.setValue("targetFPS",10),i.local.setSingle("settingsChangedNotifier","hw_encoding_disabled"));case 4:case"end":return t.stop()}},t)}));return s.install=function(){t.$on("recorder:incomplete_recording_found",u)},s}]),angular.module("castifyExt.syncNotifications",["castifyExt.bgSyncStatus","w69b.throttle","w69b.chromeNotifications","cf2.inAppTabService","castifyExt.appOptions","w69b.promiseTool","cf2.supportArticlesService"]).factory("syncNotifications",["$rootScope","bgSyncStatus","throttle","chromeNotifications","$q","cf2InAppTabService","appOptions","promiseTool","cf2SupportArticlesService",function(t,e,n,r,i,o,a,s,u){var c={},l="sync_state_",h=null,f=s.serializer();function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.isError;f(function(){t=l+t;var n,a=!h;return h&&h!==t?(n=r.clear(h),a=!0):n=i.when(),e=angular.extend({type:"basic",priority:0,eventTime:Date.now(),isClickable:!1,title:"Saving on Drive",iconUrl:"assets/images/icon128.png"},e),h=t,n.then(a?function(){return o?r.simple.createError(e,t):r.simple.create(e,t)}:function(){return r.update(t,e)})})}function p(){f(function(){if(h){var t=r.clear(h);return h=null,t}})}var v={uploading:function(t){a.values.notifySyncProgress&&d("progress",{type:"progress",priority:0,message:"Your recording(s) are being saved "+t.numCompleteFiles+" / "+t.numTotalFiles,progress:Math.floor(100*t.progress)})},waiting:function(t){a.values.notifySyncProgress&&d("waiting",{priority:0,message:t.numTotalFiles+" recording(s) are waiting to get saved on Drive."})},offline:function(t){d("offline",{title:"You are offline",priority:1,message:t.numTotalFiles+" recording(s) are not saved on Drive yet."})},error:function(t){"token"===t.errorReason?d("auth",{priority:2,title:"Not signed In",message:"Screencastify cannot save to Drive.",buttons:[{title:"Sign In"}]},{isError:!0}):"forbidden"===t.errorReason?d("forbidden",{priority:2,title:"G Suite setup required",message:"Drive API/Apps are disabled for your domain.",buttons:[{title:"Help"}]},{isError:!0}):"quotaExceeded"===t.errorReason?d("quota_exceeded",{priority:2,title:"Out of Drive storage space",message:"You have reached your storage limit on Drive. Screencastify cannot store save to Drive anymore.",buttons:[{title:"Help"}]},{isError:!0}):d("error",{priority:2,title:"Failed to save recordings on Drive.",message:"We failed to save "+t.numTotalFiles>0?t.numTotalFiles:"some recording(s) on Drive. Please contact support if this problem persists.",buttons:[{title:"Retry"}]},{isError:!0})},synced:p,disabled:p};function g(t,n){function r(e,r){return t===l+e&&n===(r||0)}r("error")?e.retry():r("auth")?o.create("#/setup"):r("forbidden")?u.openArticle("drive_apps"):r("quotaExceeded")&&u.openArticle("quotaExceeded")}function y(){var t=e.getState(),n=v[t.type];n&&n(t)}return c.install=function(){e.install();var i=n(y,1e3,!1);t.$watchCollection(e.getState,function(){i()}),r.onButtonClicked.addListener(g)},c}]),n(44595),angular.module("castifyExt.youtubeAuth",["w69b.uritool","castifyExt.castifyAuth","w69b.promiseTool"]).factory("authFlowHack",["promiseTool","$interval","chromeRuntime","uritool","$q","$log","$window",function(t,e,n,r,i,o,a){return{launchWebAuthFlow:function(a){return function(a,s){var u=Zf(a),c=!1,l=function(t){var e=i.defer(),o=function(n){if("oauth2AuthResult"===n.type){var i=r.parseUrl(n.data),o=r.parseQuery((i.hash||i.query).substring(1));if(!o||o.state!==t)return;o.error?e.reject({error:o.error||"immediate_failed"}):e.resolve(o)}};return n.onMessageExternal.addListener(o),e.promise.finally(function(){n.onMessageExternal.removeListener(o)}),e}(s);l.promise.then(function(){c=!0});var h=e(function(){u.closed&&!c&&(o.debug("youtubeAuth: user closed oauth window"),l.reject("auth_window_closed"))},200),f=t.withTimeout(function(){return l.promise},9e4);return f.finally(function(){e.cancel(h)}),f}(a.url,a.state)}}}]).provider("youtubeAuth",function(){var t,e=["https://www.googleapis.com/auth/youtube"];this.setScopes=function(t){e=t},this.setClientId=function(e){t=e},this.$get=["castifyAuth","$log","uritool","$q","$http","castifyConfig","authFlowHack",function(n,r,i,o,a,s,u){var c=s.API_URL+"/youtube/",l=c+"channels",h=c+"tokens",f={},d=0,p={};function v(t){return t.data}function g(){var n,a=(n={redirect_uri:Yc.redirectUri,scope:e.join(" "),response_type:"code",client_id:t,access_type:"offline",include_granted_scopes:!1,prompt:"select_account consent"},"https://accounts.google.com/o/oauth2/auth?"+i.encodeQuery(n));return u.launchWebAuthFlow({url:a,interactive:!0}).then(function(t){return t.code?(r.debug("youtubeAuth: Obtained code"),t.code):o.reject("youtube_flow_returned_no_code")})}function y(t){return a.post(l,{code:t,version:2},{googleAuth:!0}).then(v,function(t){return r.warn("youtubeAuth: adding youtube code failed",t),o.reject(400===t.status&&"youtube"===t.data.error?"youtube_no_channels":"youtube_add_code_failed")})}return p.addChannel=function(){return n.getAuthToken({interactive:!0}).then(g).then(y)},p.listChannels=function(){return a.get(l,{googleAuth:!0}).then(v)},p.removeChannel=function(t){return a.delete(l+"/"+t,{googleAuth:!0}).then(v)},p.getAuthToken=function(t){if(!t.channelId)throw new Error;var e,n=t.channelId,r=Math.floor(Date.now()-d)+12e4,i=f[n];return i&&i.expiresAt>r?e=o.when(i):(e=function(t){return a.get(h+"/"+t,{googleAuth:!0}).then(v).then(function(t){return t.expiresAt=Number(new Date(t.expiresAt)),t.issuedAt=Number(new Date(t.issuedAt)),t})}(n)).then(function(t){f[n]=t,t.issuedAt&&(d=Date.now()-Number(t.issuedAt))}),e.then(function(t){return t.accessToken})},p}]}).factory("youtubeHttpAuthInterceptor",["$q","$injector","$log",function(t,e,n){var r;return{request:function(i){return i.youtubeAuth?(i.googleAuth&&delete i.googleAuth,(o=i.youtubeAuth,a={channelId:o},(r||(r=e.get("youtubeAuth")),r).getAuthToken(a)).then(function(t){return i.headers=angular.extend(i.headers||{},function(t){return{Authorization:"Bearer "+t}}(t)),i},function(e){return n.warn("youtubeAuth failed",e),t.reject("youtubeAuth failed")})):i;var o,a}}}]),angular.module("castifyExt.enterprisePolicy",["cf2.chromeStorageService"]).provider("enterprisePolicy",function(){var t={};this.setOverride=function(e){t=e},this.$get=["cf2ChromeStorageService","$rootScope",function(e,n){var r={},i=!1,o={options:{}};angular.extend(o,t);var a=["disableSharing","disableSaveToDisk","options"];return a.forEach(function(t){Object.defineProperty(r,t,{get:function(){return o[t]}})}),r.loadedPromise=e.managed.get(a).then(function(e){angular.extend(o,e,t),i=!0}),r.isLoaded=function(){return i},r.has=function(t){return o.hasOwnProperty(t)},r.get=function(t){return o[t]},e.onChanged.addListener(function(t,e){"managed"===e&&(angular.forEach(t,function(t,e){o[e]=t.newValue}),n.$$phase||n.$digest())}),r}]}),angular.module("castifyExt.oauthTokenCache",["cf2.chromeStorageService"]).factory("oauthTokenCache",["cf2ChromeStorageService","$q",function(t,e){return function(n){var r=0,i={};function o(){return t.local.getSingle(n).then(function(t){return t||{}})}function a(){return Math.floor(Date.now()-r)+12e4}return i.get=function(t){return o().then(function(n){var r=n[t];return r&&r.expiresAt>a()?e.when(r):e.reject()})},i.put=function(e,i){return o().then(function(o){return o[e]=i,i.issuedAt&&(r=Date.now()-Number(i.issuedAt)),function(t){var e=a();angular.forEach(t,function(n,r){(!r.expiresAt||r.expiresAt<=e)&&delete t[n]})}(o),t.local.setSingle(n,o)})},i.removeByToken=function(e){return o().then(function(r){return angular.forEach(r,function(t,n){t.accessToken===e&&delete r[n]}),t.local.setSingle(n,r)})},i.remove=function(e){return o().then(function(r){return delete r[e],t.local.setSingle(n,r)})},i.clear=function(){return t.local.remove(n)},i.withCache=function(t,e){return i.get(t).catch(function(){return e().then(function(e){return i.put(t,e).then(function(){return e})})})},i}}]);var CP="firebasestorage.googleapis.com",AP=function(t){function e(n,r){var i=t.call(this,MP(n),"Firebase Storage: "+r+" ("+MP(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,Us.ZT)(e,t),e.prototype._codeEquals=function(t){return MP(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(sd.ZR);function MP(t){return"storage/"+t}function RP(){return new AP("unknown","An unknown error occurred, please check the error payload for server response.")}function OP(){return new AP("canceled","User canceled the upload/download.")}function PP(){return new AP("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function NP(t){return new AP("invalid-argument",t)}function DP(){return new AP("app-deleted","The Firebase app was deleted.")}function $P(t){return new AP("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function LP(t,e){return new AP("invalid-format","String does not match format '"+t+"': "+e)}function jP(t){throw new AP("internal-error","Internal error: "+t)}var UP={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},FP=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function BP(t,e){switch(t){case UP.RAW:return new FP(qP(e));case UP.BASE64:case UP.BASE64URL:return new FP(VP(t,e));case UP.DATA_URL:return new FP((n=new ZP(e)).base64?VP(UP.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(jO){throw LP(UP.DATA_URL,"Malformed data URL.")}return qP(e)}(n.rest),new ZP(e).contentType)}var n;throw RP()}function qP(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function VP(t,e){switch(t){case UP.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw LP(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case UP.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw LP(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(jO){throw LP(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var ZP=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw LP(UP.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),HP={STATE_CHANGED:"state_changed"},zP={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function GP(t){switch(t){case"running":case"pausing":case"canceling":return zP.RUNNING;case"paused":return zP.PAUSED;case"success":return zP.SUCCESS;case"canceled":return zP.CANCELED;case"error":default:return zP.ERROR}}var WP=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),KP=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=WP.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=WP.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=WP.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw jP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw jP("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw jP("cannot .getStatus() before sending");try{return this.xhr_.status}catch(jO){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw jP("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),JP=function(){function t(){}return t.prototype.createXhrIo=function(){return new KP},t}(),YP=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(jO){return new t(e,"")}if(""===r.path)return r;throw new AP("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===CP?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.path];f||(f=""),r=new t(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(t){return new AP("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),XP=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function QP(t){return"string"==typeof t||t instanceof String}function tN(t){return eN()&&t instanceof Blob}function eN(){return"undefined"!=typeof Blob}function nN(t,e,n,r){if(r<e)throw NP("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw NP("Invalid value for '"+t+"'. Expected "+n+" or less.")}function rN(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function iN(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var oN=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());!function(t){return void 0!==t}(s)?i():i(s)}catch(jO){o(jO)}else null!==a?((r=RP()).serverResponse=a.getResponseText(),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?DP():OP():new AP("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new aN(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new aN(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===WP.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new aN(a,n))}else{var s=n.getErrorCode()===WP.ABORT;e(!1,new aN(!1,null,s))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,(0,Us.ev)([null,t],e));else{var r;u()||a?l.call.apply(l,(0,Us.ev)([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout(function(){a=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),aN=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function sN(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function uN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=sN();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(eN())return new Blob(t);throw new AP("unsupported-environment","This browser doesn't seem to support creating Blobs")}var cN=function(){function t(t,e){var n=0,r="";tN(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(tN(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(eN()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(uN.apply(null,r))}var i=e.map(function(t){return QP(t)?BP(UP.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var a=new Uint8Array(o),s=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]}),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function lN(t){var e;try{e=JSON.parse(t)}catch(jO){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function hN(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function fN(t,e){return e}var dN=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||fN}}(),pN=null;function vN(){if(pN)return pN;var t=[];t.push(new dN("bucket")),t.push(new dN("generation")),t.push(new dN("metageneration")),t.push(new dN("name","fullPath",!0));var e=new dN("name");e.xform=function(t,e){return function(t){return!QP(t)||t.length<2?t:hN(t)}(e)},t.push(e);var n=new dN("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new dN("timeCreated")),t.push(new dN("updated")),t.push(new dN("md5Hash",null,!0)),t.push(new dN("cacheControl",null,!0)),t.push(new dN("contentDisposition",null,!0)),t.push(new dN("contentEncoding",null,!0)),t.push(new dN("contentLanguage",null,!0)),t.push(new dN("contentType",null,!0)),t.push(new dN("metadata","customMetadata",!0)),pN=t}function gN(t,e,n){var r=lN(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new YP(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function yN(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var mN=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function bN(t){if(!t)throw RP()}function wN(t,e){return function(n,r){var i=gN(t,r,e);return bN(null!==i),i}}function _N(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new AP("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new AP("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new AP("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new AP("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function SN(t){var e=_N(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new AP("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function kN(t,e,n){var r=rN(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new mN(r,"GET",wN(t,n),i);return o.errorHandler=SN(e),o}function EN(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var xN=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function TN(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(jO){bN(!1)}return bN(!!n&&-1!==(e||["active"]).indexOf(n)),n}var IN=262144,CN=function(){return function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function AN(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var MN=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=vN(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=EN(e,r,i),s={name:a.fullPath},u=rN(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=yN(a,n),h=new mN(u,"POST",function(t){var e;TN(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(jO){bN(!1)}return bN(QP(e)),e},t.maxUploadRetryTime);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=_N(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new mN(n,"POST",function(t){var e=TN(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(jO){bN(!1)}n||bN(!1);var i=Number(n);return bN(!isNaN(i)),new xN(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=_N(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=IN*this._chunkMultiplier,n=new xN(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var a;try{a=function(t,e,n,r,i,o,a,s){var u=new xN(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new AP("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw PP();var p=new mN(n,"POST",function(t,n){var i,a=TN(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?wN(e,o)(t,n):null,new xN(s,c,"final"===a,i)},e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=s||null,p.errorHandler=_N(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(jO){return t._error=jO,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){IN*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=kN(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=EN(e,r,i),c=yN(u,n),l=cN.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===l)throw PP();var h={name:u.fullPath},f=rN(o,t.host),d=t.maxUploadRetryTime,p=new mN(f,"POST",wN(t,n),d);return p.urlParams=h,p.headers=a,p.body=l.uploadData(),p.errorHandler=_N(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=OP(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=GP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new CN(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(GP(this._state)){case zP.SUCCESS:AN(this._resolve.bind(null,this.snapshot))();break;case zP.CANCELED:case zP.ERROR:AN(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(GP(this._state)){case zP.RUNNING:case zP.PAUSED:t.next&&AN(t.next.bind(t,this.snapshot))();break;case zP.SUCCESS:t.complete&&AN(t.complete.bind(t))();break;case zP.CANCELED:case zP.ERROR:t.error&&AN(t.error.bind(t,this._error))();break;default:t.error&&AN(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),RN=function(){function t(t,e){this._service=t,this._location=e instanceof YP?e:YP.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new YP(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return hN(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new YP(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw $P(t)},t}();function ON(t){var e={prefixes:[],items:[]};return PN(t,e).then(function(){return e})}function PN(t,e,n){return(0,Us.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Us.Jh)(this,function(a){switch(a.label){case 0:return[4,NN(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,PN(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function NN(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&nN("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=rN(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new mN(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=lN(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new YP(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)s=t._makeStorageReference(new YP(e,c[u].name)),r.items.push(s);return r}(t,e,r)}(t,e,r);return bN(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=_N(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function DN(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new YP(t._location.bucket,n);return new RN(t.storage,r)}function $N(t){return/^[A-Za-z]+:\/\//.test(t)}function LN(t,e){if(t instanceof FN){var n=t;if(null==n._bucket)throw new AP("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new RN(n,n._bucket);return null!=e?LN(r,e):r}if(void 0!==e){if(e.includes(".."))throw NP('`path` param cannot contain ".."');return DN(t,e)}return t}function jN(t,e){if(e&&$N(e)){if(t instanceof FN)return new RN(t,e);throw NP("To use ref(service, url), the first argument must be a Storage instance.")}return LN(t,e)}function UN(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:YP.makeFromBucketSpec(n,t)}var FN=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=CP,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?YP.makeFromBucketSpec(i,this._host):UN(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?YP.makeFromBucketSpec(this._url,t):UN(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){nN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){nN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new RN(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new XP(DP());var i=function(t,e,n,r,i,o){var a=iN(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new oN(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function BN(t,e){return jN(t=(0,sd.m9)(t),e)}var qN=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),VN=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new qN(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new qN(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new qN(t,i,i._ref))}:{next:e.next?function(t){return e.next(new qN(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),ZN=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new HN(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new HN(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),HN=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return DN(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new VN(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new MN(t,new cN(e),n)}(t=(0,sd.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=UP.RAW),this._throwIfRoot("putString");var r=BP(e,t),i=(0,Us.pi)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new VN(new MN(this._delegate,new cN(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return ON(t=(0,sd.m9)(t))}(this._delegate).then(function(e){return new ZN(e,t.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return NN(t=(0,sd.m9)(t),e)}(this._delegate,t||void 0).then(function(t){return new ZN(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=kN(t.storage,t._location,vN()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,sd.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,Us.mG)(this,void 0,void 0,function(){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=rN(e.fullServerUrl(),t.host),o=yN(n,r),a=t.maxOperationRetryTime,s=new mN(i,"PATCH",wN(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=SN(e),s}(t.storage,t._location,e,vN()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=(0,sd.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=rN(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new mN(r,"GET",function(t,e){return function(n,r){var i=gN(t,r,e);return bN(null!==i),function(t,e,n){var r=lN(e);if(null===r)return null;if(!QP(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return rN("/b/"+o(t.bucket)+"/o/"+o(r),n)+iN({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=SN(e),o}(t.storage,t._location,vN()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new AP("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=(0,sd.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,Us.mG)(this,void 0,void 0,function(){var e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=rN(e.fullServerUrl(),t.host),r=new mN(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=SN(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=(0,sd.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw $P(t)},t}(),zN=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if($N(t))throw NP("ref() expected a child path but got a URL, use refFromURL instead.");return new HN(BN(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!$N(t))throw NP("refFromURL() expected a full URL but got a child path, use ref() instead.");try{YP.makeFromUrl(t,this._delegate.host)}catch(jO){throw NP("refFromUrl() expected a valid full URL but got an invalid one.")}return new HN(BN(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function GN(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new zN(r,new FN(r,i,o,new JP,n,ll.Z.SDK_VERSION))}!function(t){var e={TaskState:zP,TaskEvent:HP,StringFormat:UP,Storage:FN,Reference:HN};t.INTERNAL.registerComponent(new ad.wA("storage",GN,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.2")}(ll.Z),angular.module("castifyExt.firebase",[]).factory("firebase",function(){return ll.Z});var WN=n(83831).default;angular.module("castifyExt.simpleBgServicePublisher",["w69b.chromeRuntime"]).factory("simpleBgServicePublisher",["chromeRuntime","$q","$log",function(t,e,n){return function(r,i,o){var a={};function s(t,o,s){var u=function(t){try{s(t)}catch(e){}};return!(!t||"simpleService"!==t.type||t.service!==r||!i.hasOwnProperty(t.fn)||a[t.fn]||(e.when(i[t.fn].apply(i,WN(t.data))).then(function(t){u({data:t})},function(e){n.debug("simpleService(".concat(r,").").concat(t.fn," failed : "),e),u({error:e})}),0))}return(o||[]).forEach(function(t){a[t]=!0}),t.onMessage.addListener(s),function(){t.onMessage.removeListener(s)}}}]),angular.module("castifyExt.simpleBgServiceConsumer",["w69b.chromeRuntime"]).factory("simpleBgServiceConsumer",["chromeRuntime","$q",function(t,e){return function(n,r){var i={};function o(t){return t.error?e.reject(t.error):t.data}return r.forEach(function(e){i[e]=function(e){return function(){return t.sendMessage({type:"simpleService",fn:e,service:n,data:Array.prototype.concat.apply([],arguments)}).then(o)}}(e)}),i}}]);var KN=n(2153).default;angular.module("castifyExt.simplePortService",["w69b.chromeRuntime"]).factory("simplePortService",["chromeRuntime",function(t){return function(e){var n=new Set,r={handlers:{}};function i(t){t.name===e&&(n.add(t),t.onDisconnect.addListener(function(){n.delete(t)}),t.onMessage.addListener(function(t){r.handlers.hasOwnProperty(t.type)&&r.handlers[t.type](t.data)}))}return r.postMessage=function(t,e){var r,i=KN(n);try{for(i.s();!(r=i.n()).done;)r.value.postMessage({type:t,data:e})}catch(o){i.e(o)}finally{i.f()}},r.install=function(){t.onConnect.addListener(i)},r}}]),n(17490),n(96848);var JN=n(17008);angular.module("castifyExt.webrtcRecorder",["w69b.spawn","w69b.filesHelper","w69b.asyncResponse","castifyExt.pausableTimer"]).factory("webrtcRecorder",["$log","filesHelper","spawn","asyncResponse","PausableTriggeringTimer","$rootScope","$q","PausableTimeout",function(t,e,n,r,i,o,a,s){var u=window.MediaRecorder,c=window.webkitMediaStream||window.MediaStream,l='video/webm; codecs="vp9, opus"';function h(){var h,f,d,p={},v=["start","stop","pause","resume","error"];x();var g,y,m,b=Promise.resolve(),w=[],_=0,S=0,k=new i(function(){d.time=k.time,A(),M(),p.onTimeChanged&&p.onTimeChanged(d.time),o.$$phase||o.$apply()},500),E=!1;function x(){d={state:"inactive",time:0}}function T(e){return b=b.then(function(){if(e||_>65536){var t=new Blob(w);return w.length=0,_=0,g.sendWithResponse("write",t)}}).catch(function(e){t.error("webrtcRecoder: flushQueue failed",e)})}function I(t){var e;w.push(e=t.data),_+=e.size,S+=e.size,T()}function C(){var e=h?h.state:"inactive";if(t.debug("webrtcEncoder: state change",e),m||d.state!=e){if(m)d.state=m.paused?"paused":"recording";else switch(d.state=e,e){case"paused":k.pause();break;case"recording":k.paused?k.resume():k.started||k.start()}p.onStateChanged&&p.onStateChanged(d.state)}}var A=n.wrap(JN.mark(function t(){return JN.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!g){t.next=4;break}return t.next=3,g.sendWithResponse("getFps");case 3:d.fps=t.sent;case 4:case"end":return t.stop()}},t)})),M=n.wrap(JN.mark(function e(){return JN.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g&&d.time>=7&&(S||(n="no_data",E||(E=!0,t.error("webrtcEncoder: fatal error: ",n),function(){if(x(),m&&(m.dispose(),m=null),h){h.removeEventListener("dataavailable",I);try{h.stop()}catch(t){}h=null,w.length=0,_=0}y&&(y.terminate(),y=null,g=null),k.reset()}(),p.onError&&p.onError(n))));case 1:case"end":return e.stop()}var n},e)}));function R(t,e){h.addEventListener(t,function n(){h.removeEventListener(t,n),e.apply(this,arguments)})}return p.onStateChanged=null,p.onTimeChanged=null,p.start=n.wrap(JN.mark(function n(i,o){var d;return JN.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:d=function(){return m=null,a.when(new Promise(function(e){R("start",function(){t.debug("webrtcEncoder: onStart"),e()}),v.forEach(function(t){h.addEventListener(t,C)}),h.addEventListener("error",function(e){return t.warn("webrtcEncoder: error event ",e)}),h.start(500)}))},t.debug("webrtcEncoder: onStart",i,o),(f=new c).addTrack(o.videoTrack),o.audioTrack&&f.addTrack(o.audioTrack),n.prev=5,h=new u(f,{audioBitsPerSecond:112e3,mimeType:o.mimeType||l,videoBitsPerSecond:o.bitRate}),n.next=13;break;case 9:throw n.prev=9,n.t0=n.catch(5),t.error("webrtcEncoder: failed to create MediaRecorder",n.t0),n.t0;case 13:if(!e.isSupported()){n.next=16;break}return n.next=16,e.removeByPath(i).catch(function(){return null});case 16:if(y=new Worker("/assets/other/castifyMediawriter/mediawriter.worker.min.js"),g=r.createSender(function(t){return y.postMessage(t)}),y.addEventListener("message",function(t){return g.handleResult(t.data)}),g.send("init",{path:i,fsType:"PERSISTENT"}),h.addEventListener("dataavailable",I),!o.startDelay){n.next=31;break}return k.setStartTime(-o.startDelay),k.start(),(m=new s(o.startDelay)).start(),m.promise.then(d),C(),n.abrupt("return",a.when());case 31:return n.abrupt("return",d());case 32:case"end":return n.stop()}},n,null,[[5,9]])})),p.pause=function(){return m?(m.pause(),k.pause()):h.pause(),C(),a.when()},p.resume=function(){return m?(m.resume(),k.resume()):h.resume(),C(),a.when()},p.getStateObj=function(){return d},p.load=function(){return a.when()},p.getCurrentTime=function(){return d.time},p.getPreciseCurrentTime=function(){return k.time},p.stop=n.wrap(JN.mark(function t(){var e,n;return JN.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!m){t.next=7;break}m.dispose(),m=null,k.reset(),C(),t.next=15;break;case 7:return e=new Promise(function(t){R("stop",function(){t()})}),h.stop(),t.next=11,e;case 11:return k.pause(),h=null,t.next=15,T(!0);case 15:return t.next=17,g.sendWithResponse("end");case 17:return n=t.sent,y.terminate(),y=null,g=null,k.reset(),t.abrupt("return",n);case 23:case"end":return t.stop()}},t)})),p}return h.isSupported=function(t){return void 0!==u&&(u.isTypeSupported&&u.isTypeSupported(t||l)||function(){var t=navigator.userAgent,e=t.match(/Firefox\/(\d+)/);return e&&e[1]>=44&&t.indexOf("Android")<0}())&&!function(){var t=/Chrome\/(\d+)/.exec(window.navigator.userAgent);return t&&t[1]<51}()},h}]);var YN,XN,QN,tD=n(50931).default,eD=n(57902).default,nD=n(92066).default,rD=n(80015).default,iD=n(12693).default,oD=n(71459).default;function aD(t){return function(e){return e.lift(new sD(t))}}XN=function(t){nD(n,t);var e=rD(n);function n(t,r){var i;return iD(this,n),(i=e.call(this))._interval=r,i._listener=t,i._startTime=0,i}return oD(n,[{key:"setStartTime",value:function(t){this._startTime=t}},{key:"time",get:function(){return tD(eD(n.prototype),"time",this)+this._startTime}},{key:"_fireChange",value:function(){this._listener&&this._listener(this.time)}},{key:"_startInterval",value:function(){this._listener&&this._interval&&(this._intervalId=setInterval(this._fireChange.bind(this),this._interval))}},{key:"_stopInterval",value:function(){this._intervalId&&clearInterval(this._intervalId),this._intervalId=0,this._fireChange()}},{key:"reset",value:function(){tD(eD(n.prototype),"reset",this).call(this),this._stopInterval()}},{key:"start",value:function(){tD(eD(n.prototype),"start",this).call(this),this._startInterval()}},{key:"pause",value:function(){tD(eD(n.prototype),"pause",this).call(this),this._stopInterval()}},{key:"resume",value:function(){tD(eD(n.prototype),"resume",this).call(this),this._startInterval()}}]),n}(YN=function(){function t(){iD(this,t),this.reset()}return oD(t,[{key:"time",get:function(){return this.started?this.paused?this._pausedAtTimestamp-this._firstTimestamp+this._offset:this._now()-this._firstTimestamp+this._offset:0}},{key:"started",get:function(){return this._firstTimestamp>=0}},{key:"paused",get:function(){return this._pausedAtTimestamp>=0}},{key:"_now",value:function(){return Date.now()/1e3}},{key:"start",value:function(){this.reset(),this._firstTimestamp=this._now()}},{key:"reset",value:function(){this._firstTimestamp=-1,this._pausedAtTimestamp=-1,this._offset=0}},{key:"pause",value:function(){this.paused||(this._pausedAtTimestamp=this._now())}},{key:"resume",value:function(){if(!this.paused)throw new Error;this._offset-=this._now()-this._pausedAtTimestamp,this._pausedAtTimestamp=-1}}]),t}()),QN=function(t){nD(n,t);var e=rD(n);function n(t){var r;return iD(this,n),(r=e.call(this))._timeout=t,r.promise=new Promise(function(t){return r._resolve=t}),r}return oD(n,[{key:"remaining",get:function(){return this._timeout-this.time}},{key:"_startInterval",value:function(){this._timerId=setTimeout(this._onTimer.bind(this),1e3*this.remaining)}},{key:"_onTimer",value:function(){this._timerId=null,this._resolve(),this.dispose()}},{key:"_stopInterval",value:function(){this._timerId&&clearTimeout(this._timerId)}},{key:"start",value:function(){tD(eD(n.prototype),"start",this).call(this),this._startInterval()}},{key:"pause",value:function(){tD(eD(n.prototype),"pause",this).call(this),this._stopInterval()}},{key:"resume",value:function(){tD(eD(n.prototype),"resume",this).call(this),this._startInterval()}},{key:"dispose",value:function(){this._stopInterval(),this._resolve=null,this.promise=null}}]),n}(YN),angular.module("castifyExt.pausableTimer",[]).value("PausableTimer",YN).value("PausableTimeout",QN).value("PausableTriggeringTimer",XN),n(33268),n(30863);var sD=function(){function t(e){(0,i.Z)(this,t),this.total=e}return(0,r.Z)(t,[{key:"call",value:function(t,e){return e.subscribe(new uD(t,this.total))}}]),t}(),uD=function(t){(0,o.Z)(n,t);var e=(0,a.Z)(n);function n(t,r){var o;return(0,i.Z)(this,n),(o=e.call(this,t)).total=r,o.count=0,o}return(0,r.Z)(n,[{key:"_next",value:function(t){++this.count>this.total&&this.destination.next(t)}}]),n}(nl.L);hs().module("castifyExt.bgUserAccount",["castifyExt.chromeEventPublisher","castifyExt.simpleBgServicePublisher","castifyExt.castifyAuth","w69b.chromeRuntime","cf2.chromeStorageService","w69b.promiseTool","w69b.spawn","cf2.remoteConfigService"]).factory("bgUserAccount",["$http","castifyAuth","$rootScope","castifyConfig","spawn","promiseTool","simpleBgServicePublisher","$log","cf2ChromeStorageService","chromeRuntime","$q","cf2BgUsageStatsService","cf2RemoteConfigService",function(t,e,n,r,i,o,a,s,u,c,l,h,f){var d={},p=r.API_URL+"/account",v=r.PROXY_API_URL+"/account",g="userAccount",y=o.serializer(),m=null;function b(t){return t.data}var w=i.wrap(function(){var n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return[4,e.isSignedIn()];case 1:return r.sent()?(n=f.isFeatureEnabled("useApiProxyWithMinVersion"),[2,t.get(n?v:p,{params:{license:"1"},googleAuth:!0}).then(b)]):[2,null]}})});function _(e){return t.post(p,e,{googleAuth:!0}).then(b)}var S=i.wrap(function(t){var e,n,r;return(0,Us.Jh)(this,function(i){switch(i.label){case 0:return t?(n=t,[3,3]):[3,1];case 1:return[4,w().catch(function(){return null})];case 2:n=i.sent(),i.label=3;case 3:return r={isTester:!1,isPaid:!1,type:"trial"},(e=n)&&(r=e.license,delete e.license),[2,{license:r,user:e}]}})});function k(t){return m=t,u.local.setSingle(g,t)}function E(t){return!t.license||!t.license.validTill||t.license.validTill<Date.now()}var x=o.serializer().wrap(i.wrap(function(t){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return m?[2,{account:m,updated:!1}]:(e=t,n=!1,t&&E(t)&&(t=null),[4,S(t)]);case 1:return t=r.sent(),s.debug("userAccount: fetched",t),!t.user&&e&&e.user?(s.debug("userAccount: using expired, but signed-in account",e),t=e):(n=!0,k(t),s.debug("userAccount: updated cache")),m=t,[2,{account:t,updated:n}]}})})),T=y.wrap(i.wrap(function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return m?[2,m]:[4,u.local.getSingle(g,null)];case 1:return(t=e.sent())&&t.license?[3,3]:[4,x(t)];case 2:return[2,e.sent().account];case 3:return t&&E(t)?(y(function(){return x(t)}).then(function(t){t.updated&&C()}),[2,t]):[2,t];case 4:return[2]}})})),I=y.wrap(function(){return s.debug("userAccount: clearing cache"),m=null,k(null)});function C(){n.$broadcast("event:userAccountChanged"),c.sendMessage({type:"event:userAccountChanged"}).catch(hs().identity),s.debug("userAccount: firing accountChanged")}function A(){return s.debug("userAccount: refreshing account"),I(),T().finally(function(){C()})}var M=i.wrap(function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,T()];case 1:return t=e.sent(),[4,R(t)];case 2:return e.sent(),[4,k(t)];case 3:return e.sent(),s.debug("userAccount: redecorate account"),c.sendMessage({type:"event:userAccountRedecorated"}).catch(hs().identity),[2]}})}),R=i.wrap(function(t){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return e=t,[4,h.getFreeCount()];case 1:return e.freeRecordingsCount=r.sent(),n=t,[4,h.getPaidCount()];case 2:return n.paidRecordingsCount=r.sent(),[2,t]}})});return d.signIn=function(t){return void 0===t&&(t=!1),(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getAuthToken({interactive:!t||"select_account"})];case 1:return n.sent(),A(),[2]}})})},d.signOut=i.wrap(function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return s.debug("userAccount: signOut"),[4,l.all([e.signOut(),I()])];case 1:return t.sent(),A(),[2]}})}),d.getAccount=i.wrap(function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return t=R,[4,T()];case 1:return[2,t.apply(void 0,[e.sent()])]}})}),d.update=function(){return A()},d.postUpdate=i.wrap(function(t){var e,n;return(0,Us.Jh)(this,function(r){switch(r.label){case 0:return n=S,[4,_(t)];case 1:return[4,n.apply(void 0,[r.sent()])];case 2:return[4,k(e=r.sent())];case 3:return r.sent(),C(),[2,R(e)]}})}),d.$testClearMemoryCache=function(){m=null},d.onAccount=function(){return zp(n,"event:userAccountChanged").pipe(rv(null),Ys(function(){return d.getAccount()}))},d.install=function(){a("userAccount",d,["install"]),n.$on("event:redecorateAccount",M),e.onFbAuthToken().pipe(aD(1)).subscribe(function(){return A()}),d.onAccount().pipe((0,Ks.U)(function(t){return t.user&&t.user.email}),pl(),aD(1)).subscribe(function(){return n.$broadcast("event:signInChanged"),void c.sendMessage({type:"event:signInChanged"}).catch(hs().identity)})},d}]).factory("userAccount",["bgUserAccount",function(t){return t}]),hs().module("cf2.userAccount",[]),angular.module("castifyExt.bgUserNotifications",["castifyExt.simpleBgServicePublisher","castifyExt.chromeEventPublisher","castifyExt.bgUserAccount","w69b.chromeAnalytics","w69b.chromeRuntime","w69b.chromeAlarms","w69b.throttle","w69b.spawn"]).factory("bgUserNotifications",["$http","$window","spawn","simpleBgServicePublisher","userAccount","$log","$rootScope","chromeAlarms",function(t,e,n,r,i,o,a,s){var u="uNotifications",c=u,l=Yc.notificationUri,h=36e5,f={};function d(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.debug.apply(o,["userNotifications: ".concat(t)].concat(n))}function p(){return JSON.parse(e.localStorage.getItem(u))}function v(t,e){var n=Object.keys(e)[0],r=p();r.userNotifications.forEach(function(r){r.id===t&&(r[n]=e[n])}),f._storeInBrowser(r)}f._storeInBrowser=function(t){e.localStorage.setItem(u,JSON.stringify(t))};var g=n.wrap(dP().mark(function e(n,r){return dP().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d("updating ".concat(n," in firestore..."),r),e.next=3,t.put("".concat(l).concat(n),r,{googleAuth:!0});case 3:v(n,r);case 4:case"end":return e.stop()}},e)}));function y(t){t.name===c&&f.loadOrFetch()}function m(){s.create(c,{periodInMinutes:4320})}return f.hideIconBadge=function(){chrome.browserAction.setBadgeText({text:""})},f.showIconBadge=function(){var t=(p()||{}).userNotifications,e=0,n="";t&&t.length&&t.forEach(function(t){t.seen||e++}),e?(n=e.toString(),chrome.browserAction.setBadgeText({text:n})):f.hideIconBadge()},f.loadOrFetch=n.wrap(dP().mark(function e(){var n,r,o,a,s,u;return dP().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=p()||{},r=n.lastFetched,o=n.userNotifications,a=n.email,e.next=3,i.getAccount();case 3:if(u=function(){return!r||Date.now()-r>h||a!==s.user.email},(s=e.sent).user){e.next=11;break}o=[],a=null,r=1,e.next=25;break;case 11:if(!u()){e.next=25;break}return e.prev=12,e.next=15,t.get(l,{googleAuth:!0});case 15:o=e.sent.data,a=s.user.email,r=Date.now(),m(),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(12),d("failed to fetch uNotifications",e.t0);case 25:return f._storeInBrowser({userNotifications:o,email:a,lastFetched:r}),f.showIconBadge(),e.abrupt("return",o);case 28:case"end":return e.stop()}},e,null,[[12,22]])})),f.seen=n.wrap(dP().mark(function t(){var e,n;return dP().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=p(),n=[],e&&e.userNotifications.forEach(function(t){t.seen||n.push(g(t.id,{seen:!0}))}),t.next=5,Promise.all(n);case 5:f.hideIconBadge();case 6:case"end":return t.stop()}},t)})),f.clicked=n.wrap(dP().mark(function t(e){return dP().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:d("".concat(e," clicked")),p().userNotifications.forEach(function(t){t.id!==e||t.clicked||g(e,{clicked:!0})});case 3:case"end":return t.stop()}},t)})),f._getFetchIntervals=function(){return{MIN_FETCH_INTERVAL:h,MAX_FETCH_INTERVAL_MINUTES:4320}},f.install=function(){r("userNotifications",f,["install"]),a.$on("event:userAccountChanged",f.loadOrFetch),m(),f.loadOrFetch(),s.onAlarm.addListener(y)},f}]).factory("userNotifications",["bgUserNotifications",function(t){return t}]);var cD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e}(Yl),lD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),Object.defineProperty(e,"root",{get:function(){return this._getRoot("/audioExportTasks")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"taskQueueName",{get:function(){return"task-FisAudioExportTask"},enumerable:!1,configurable:!0}),e.Collection=cD,(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"userId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"driveFileId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"fileName",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"driveFolderId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"driveInfo",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"traceContext",void 0),e}(fh),hD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e}(Yl),fD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),Object.defineProperty(e,"root",{get:function(){return this._getRoot("/trimTasks")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"taskQueueName",{get:function(){return"task-FisTrimTask"},enumerable:!1,configurable:!0}),e.Collection=hD,e.taskType="FisTrimTask",(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"userId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"driveFileId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"driveInfo",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"traceContext",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Number)],e.prototype,"trimStart",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Number)],e.prototype,"trimEnd",void 0),e}(fh),dD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),e}(Yl),pD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Us.ZT)(e,t),Object.defineProperty(e,"root",{get:function(){return this._getRoot("/videoExportTasks")},enumerable:!1,configurable:!0}),Object.defineProperty(e,"queueTopicSuffix",{get:function(){return"simpleTask2"},enumerable:!1,configurable:!0}),e.Collection=dD,e.taskType="FisVideoExportTask",(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"userId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"driveFileId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",Object)],e.prototype,"exportOptions",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"fileName",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"driveFolderId",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"signedUrl",void 0),(0,Us.gn)([Al(),(0,Us.w6)("design:type",String)],e.prototype,"traceContext",void 0),e}(fh);mD.$inject=["bgFiles","startFixWebmJob","$q","ExportClientService","castifyAuth"],bD.$inject=["simplePortService","$rootScope","ScheduledEditJob","$log","chromeRuntime","sentryErrorHandler","bgFiles","spawn","promiseTool","$q"];var vD=function(){function t(t,e){var n=this;this._auth=e,this.promise=(0,Js.D)(lD.root.getById(t)).pipe(Wl(function(t){return n._task=t}),Ys(function(t){return t.onProgressNum()}),Wl(function(t){return n._progress=t}),lv(),Ys(function(){return n._getResult()})).toPromise()}return t.prototype._getResult=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t,e;return(0,Us.Jh)(this,function(n){switch(n.label){case 0:return[4,this._task.load()];case 1:return n.sent(),[4,this._auth.onGoogleAuthToken().pipe(Hl()).toPromise()];case 2:return t=n.sent(),e=this._task.driveInfo,[2,{url:"/driveProxy/"+encodeURIComponent(e.name)+"?fileId="+e.id+"&access_token="+t,successMessage:"Audio file has been saved to your Google Drive.",isExport:!0,isDriveExport:!0,driveViewUrl:e.webViewLink,saveFileName:e.name}]}})})},t.prototype.getProgress=function(){return this._progress},t}(),gD=function(){function t(t,e){var n=this;this.promise=(0,Js.D)(fD.root.getById(t)).pipe(Wl(function(t){return n._task=t}),Ys(function(t){return t.onProgressNum()}),Wl(function(t){return n._progress=t}),lv(),Ys(e),Ys(function(){return n._getResult()})).toPromise()}return t.prototype._getResult=function(){return(0,Us.mG)(this,void 0,void 0,function(){var t;return(0,Us.Jh)(this,function(e){switch(e.label){case 0:return[4,this._task.load()];case 1:return e.sent(),[2,{url:(t=this._task.driveInfo).webContentLink,successMessage:"Trim job done.",isExport:!1,isDriveExport:!1,driveViewUrl:t.webViewLink}]}})})},t.prototype.getProgress=function(){return this._progress},t}(),yD=function(){function t(t){var e=this;this.promise=(0,Js.D)(pD.root.getById(t)).pipe(Wl(function(t){return e._task=t}),Ys(function(t){return t.onProgressNum()}),Wl(function(t){return e._progress=t}),lv(),Ys(function(){return e._getResult()})).toPromise()}return t.prototype._getResult=function(){return(0,Us.mG)(this,void 0,void 0,function(){return(0,Us.Jh)(this,function(t){switch(t.label){case 0:return[4,this._task.load()];case 1:return t.sent(),[2,{taskId:this._task.id,url:this._task.signedUrl,saveFileName:this._task.fileName,successMessage:"Video export job completed",isExport:!0,isDriveExport:!1}]}})})},t.prototype.getProgress=function(){return this._progress},t}();function mD(t,e,n,r,i){var o=1;return function(){function a(e){var r=this;this.config=e,this.dismissed=!1,this.state="queued",this._doneDeferred=n.defer(),this.promise=this._doneDeferred.promise,this.id=""+o++,this.promise.catch(function(){return null}),e.meta&&e.meta.fileId&&t.getFileDescriptor(e.meta.fileId).catch(function(){return null}).then(function(t){r.fileDesc=t})}return a.prototype.start=function(){var n,o=this;switch(o.state="running",this.config.type){case"fixWebm":n=e(o.config);break;case"audioExport":n=t.getFileDescriptor(o.config.meta.fileId).then(function(t){return r.exportAudio({driveFileId:t.driveInfo.id,driveFolderId:o.config.driveFolderId,fileName:o.config.fileName})}).then(function(t){return new vD(t.taskId,i)});break;case"trim":var a=function(){return t.reload(o.config.meta.fileId)};n=t.getFileDescriptor(o.config.meta.fileId).then(function(t){return r.trim({driveFileId:t.driveInfo.id,trimStart:o.config.trim.trimStart,trimEnd:o.config.trim.trimEnd})}).then(function(t){return new gD(t.taskId,a)});break;case"videoExport":n=t.getFileDescriptor(o.config.meta.fileId).then(function(t){var e={driveFileId:t.driveInfo.id,fileName:o.config.fileName};return o.config.outFormat.includes("gif")?e.gif={size:o.config.scale}:o.config.outFormat.includes("mp4")?e.mp4={fps:o.config.fps}:o.config.outFormat.includes("mp3")&&(e.mp3=!0),r.exportVideo(e)}).then(function(t){return new yD(t.taskId)})}var s=n.then(function(t){return o.editJob=t,t.promise});return s.then(o.onComplete_.bind(o),o.onError_.bind(o)),s.then(this._doneDeferred.resolve.bind(this._doneDeferred),this._doneDeferred.reject.bind(this._doneDeferred)),s},a.prototype.getProgress=function(){return"done"===this.state?1:"running"===this.state&&this.editJob?this.editJob.getProgress():0},a.prototype.onComplete_=function(t){this.result=t,this.state="done"},a.prototype.onError_=function(){this.state="error"},a.prototype.cancel=function(){return!(!this.editJob||!this.editJob.cancel||(this.editJob.cancel(),this.state="cancelled",0))},a.prototype.dismiss=function(){this.dismissed=!0},a.prototype.toJSON=function(){var t={id:this.id,type:this.config.type,result:this.result,state:this.state,outFormat:this.config.outFormat,progress:this.getProgress(),cancelDanger:"fixWebm"===this.config.type,cancelable:!(!this.editJob||!this.editJob.cancel),dismissed:this.dismissed};return this.config.meta&&this.config.meta.fileId&&(t.fileId=this.config.meta.fileId),this.fileDesc?t.fileTitle=this.fileDesc.title:this.config.fileName&&(t.fileTitle=this.config.fileName),t},a}()}function bD(t,e,n,r,i,o,a,s,u,c){var l={},h=[];function f(t){return h.filter(function(e){return e.state===t})}function d(t){return h.find(function(e){return e.id===t})}function p(){return f("queued")}var v,g=u.serializer().wrap(s.wrap(function(){var t,n,i,o,s,u,l;return(0,Us.Jh)(this,function(h){switch(h.label){case 0:return[4,c.all(p().map(function(t){return t&&!t.config.meta.newVideoDetails?t:a.refresh(t.config.meta.fileId).then(function(){return a.getFileDescriptor(t.config.meta.fileId)}).catch(function(){return null}).then(function(e){return e.driveInfo?t:null})})).then(function(t){return t.filter(function(t){return!!t})})];case 1:t=h.sent();try{for(n=(0,Us.XA)(t),i=n.next();!i.done;i=n.next())r.debug("bgEditJobScheduler: starting scheduled edit",o=i.value),s=o.start(),e.$broadcast("editJob:started",o.id),s.then(m.bind(null,o),y.bind(null,o))}catch(MD){u={error:MD}}finally{try{i&&!i.done&&(l=n.return)&&l.call(n)}finally{if(u)throw u.error}}return[2]}})}));function y(t,n){r.warn("bgEditJobScheduler: scheduled edit job failed",t,n),g(),e.$broadcast("editJob:failed",t.id,n),"trim"===t.config.type&&l.dismiss(t.id),o.handleError(n)}function m(t,n){r.debug("bgEditJobScheduler: scheduled edit job completed",t,n),g(),e.$broadcast("editJob:completed",t.id,n)}function b(){(p().length||f("running").length)&&(r.info("bgEditJobScheduler: Background page dormancy onSuspend() while editing is active, preventing unloading"),setTimeout(function(){return i.getBackgroundPage()},0))}return e.$on("uploader:complete",g),l.addJob=function(t){r.debug("bgEditJobScheduler: adding edit job",t);var i=new n(t);return h.push(i),g(),e.$broadcast("editJob:added",i.id),i},l.cancel=function(t){r.debug("bgEditJobScheduler: canceling edit job",t);var n=d(t);n&&n.cancel()&&e.$broadcast("editJob:cancelled",n.id)},l.dismiss=function(t){var n=d(t);r.debug("bgEditJobScheduler: dismissing edit job",t),n.dismiss(),e.$broadcast("editJob:dismissed",n.id)},l.getJob=function(t){return d(t)},l.getJobs=function(){return h},l.clearComplete=function(t){h=h.filter(function(e){return"done"!==e.state||t&&e.id!==t}),v&&v.postJobs()},l.install=function(){v=function(){var n=t("editor");function r(){n.postMessage("jobsList",l.getJobs())}return n.handlers={addJob:l.addJob,cancel:l.cancel,dismiss:l.dismiss,getJobs:r,clearComplete:l.clearComplete},e.$on("editJob:completed",r),e.$on("editJob:started",r),e.$on("editJob:cancelled",r),e.$on("editJob:dismissed",r),e.$on("editJob:added",function(t,e){r(),n.postMessage("jobAdded",l.getJob(e))}),n.install(),{postJobs:r}}(),i.onSuspend.addListener(b)},l}ls.module("castifyEdit.bgEditJobScheduler",["castifyEdit.fixWebmJob","castifyExt.bgFiles","castifyExt.simplePortService","cf2.sentryErrorHandler","w69b.spawn","w69b.promiseTool"]).factory("ScheduledEditJob",mD).factory("bgEditJobScheduler",bD);var wD=n(17008);angular.module("castifyEdit.fixWebmJob",["w69b.asyncResponse","w69b.spawn","w69b.filesHelper"]).factory("startFixWebmJob",["asyncResponse","spawn","filesHelper","$q",function(t,e,n,r){var i,o="_tmp/edited.webm";function a(t){this.config=t,this.progress=0}var s=a.prototype;return s.start=function(){return this.promise=this._doStart(),this.promise},s._doStart=e.wrap(wD.mark(function e(){var a,s,u,c;return wD.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.config,i=new Worker("/assets/other/castifyMediawriter/mediawriter.worker.min.js"),this._cancelDeferred=r.defer(),e.next=5,n.getDirByPath("_tmp",{create:!0});case 5:return s=t.createSender(function(t){return i.postMessage(t)}),i.addEventListener("message",(function(t){var e=t.data;s.handleResult(e)||"progress"===e.type&&(this.progress=e.data)}).bind(this)),s.send("init",{path:o,fsType:"PERSISTENT"}),u=!1,c=s.sendWithResponse("readChromeFile",{path:a.inPath,fsType:"PERSISTENT"}),e.next=12,r.race([this._cancelDeferred.promise.then(function(){return u=!0}),c]);case 12:if(i.terminate(),i=null,this._cancelDeferred=null,u){e.next=20;break}return e.next=18,n.moveFileByPath(o,a.outPath);case 18:return e.next=20,n.removeByPath(a.inPath);case 20:return e.abrupt("return",{fileId:this.config.fileId,isFixJob:!0});case 21:case"end":return e.stop()}},e,this)})),s.cancel=e.wrap(wD.mark(function t(){var e;return wD.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i&&this._cancelDeferred){t.next=2;break}return t.abrupt("return",!1);case 2:return i.terminate(),e=this.config,t.next=6,n.removeByPath(o).catch(function(){return null});case 6:return t.next=8,n.moveFileByPath(e.inPath,e.outPath);case 8:return this._cancelDeferred.resolve(),t.abrupt("return",!0);case 10:case"end":return t.stop()}},t,this)})),s.getProgress=function(){return this.progress},function(t){var e=new a(t);return e.start(),Promise.resolve(e)}}]);var _D=n(17008),SD=n(65963).default;angular.module("castifyExt.deadAudioStreamChecker",["castifyExt.audioContextPool","w69b.webrtc"]).factory("deadAudioStreamChecker",["audioContextPool","$timeout","$q","webrtc","$log",function(t,e,n,r,i){var o={};function a(t){t.getTracks().forEach(function(t){t.stop()})}return o.getUserMedia=function(){var t=SD(_D.mark(function t(e){var n,s;return _D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getUserMedia(e);case 2:if(n=t.sent,!(e.audio&&e.audio.mandatory&&e.audio.mandatory.sourceId)){t.next=14;break}return t.next=6,o.hasAudioData(n);case 6:if(i.debug("deadAudioStreamChecker: stream hasAudio=",s=t.sent),s){t.next=14;break}return a(n),i.debug("deadAudioStreamChecker: re-requesting stream"),t.next=13,r.getUserMedia(e);case 13:n=t.sent;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),o.hasAudioData=function(){var r=SD(_D.mark(function r(i){var o,a,s,u,c,l,h=arguments;return _D.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=h.length>1&&void 0!==h[1]?h[1]:1e3,a=t.acquire(),s=a.createScriptProcessor(2048,2,1),u=a.createMediaStreamSource(i),c=new Promise(function(t){s.onaudioprocess=function(e){e.inputBuffer.getChannelData(0).some(function(t){return 0!==t})&&t(!0)}}),u.connect(s),s.connect(a.destination),r.prev=7,l=e(o).then(function(){return!1}),r.next=11,n.race([c,l]);case 11:return r.abrupt("return",r.sent);case 13:return r.prev=13,u.disconnect(),s.disconnect(),t.release(a),r.finish(13);case 18:case"end":return r.stop()}},r,null,[[7,,13,18]])}));return function(t){return r.apply(this,arguments)}}(),o}]),angular.module("w69b.filereader",[]).factory("filereader",["$q",function(t){return{readAsArrayBuffer:function(e,n,r){var i=t.defer(),o=e;(n||r)&&(o=e.slice(n,r));var a=new FileReader;return a.onloadend=function(){a.onloadend=null,a.error?i.reject(a.error):i.resolve(a.result)},a.readAsArrayBuffer(o),i.promise},readAsText:function(e){var n=t.defer(),r=new FileReader;return r.onload=function(){r.error?n.reject(r.error):n.resolve(r.result)},r.readAsText(e),n.promise}}}]);var kD=n(88144),ED=n.n(kD);n(40462),n(79623),n(80715),n(23522),n(11570),n(63376),n(16902),n(3228),(function(){var t,e=e||{},n=window,r=function(t){return void 0!==t},i=function(){},o=function(t){var e=ED()(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},a=function(t){return"array"==o(t)},s=function(t){var e=o(t);return"array"==e||"object"==e&&"number"==typeof t.length},u=function(t){return"string"==typeof t},c=function(t){return"number"==typeof t},l=function(t){return"function"==o(t)},h=function(t){var e=ED()(t);return"object"==e&&null!=t||"function"==e},f=function(t,e,n){return t.call.apply(t.bind,arguments)},d=function(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}},p=function(t,e,n){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:d).apply(null,arguments)},v=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}},g=Date.now||function(){return+new Date},y=function(t,e){var i,o=t.split("."),a=n;o[0]in a||!a.execScript||a.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)!o.length&&r(e)?a[i]=e:a=a[i]?a[i]:a[i]={}},m=function(t,e){function n(){}n.prototype=e.prototype,t.P=e.prototype,t.prototype=new n,t.ie=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}};Function.prototype.bind=Function.prototype.bind||function(t,e){if(1<arguments.length){var n=Array.prototype.slice.call(arguments,1);return n.unshift(this,t),p.apply(null,n)}return p(this,t)};var b=function t(e){if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=Error().stack;n&&(this.stack=n)}e&&(this.message=String(e))};m(b,Error),b.prototype.name="CustomError";var w=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},_=function(t,e){return t<e?-1:t>e?1:0},S=Array.prototype,k=S.indexOf?function(t,e,n){return S.indexOf.call(t,e,n)}:function(t,e,n){if(n=null==n?0:0>n?Math.max(0,t.length+n):n,u(t))return u(e)&&1==e.length?t.indexOf(e,n):-1;for(;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=S.forEach?function(t,e,n){S.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=u(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},x=S.some?function(t,e,n){return S.some.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=u(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&e.call(n,i[o],o,t))return!0;return!1},T=S.every?function(t,e,n){return S.every.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=u(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&!e.call(n,i[o],o,t))return!1;return!0},I=function(t,e){var n,r=k(t,e);return(n=0<=r)&&S.splice.call(t,r,1),n},C=function(t){return S.concat.apply(S,arguments)},A=function(t,e,n){return 2>=arguments.length?S.slice.call(t,e):S.slice.call(t,e,n)},M="StopIteration"in n?n.StopIteration:Error("StopIteration"),R=function(){};R.prototype.next=function(){throw M},R.prototype.Sb=function(){return this};var O=function(t,e,n){for(var r in t)e.call(n,t[r],r,t)},P=function(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n},N=function(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n},D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),$=function(t,e){this.p={},this.b=[],this.Ja=this.j=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.ha(t)};$.prototype.t=function(){L(this);for(var t=[],e=0;e<this.b.length;e++)t.push(this.p[this.b[e]]);return t},$.prototype.H=function(){return L(this),this.b.concat()},$.prototype.T=function(t){return F(this.p,t)},$.prototype.remove=function(t){return!!F(this.p,t)&&(delete this.p[t],this.j--,this.Ja++,this.b.length>2*this.j&&L(this),!0)};var L=function(t){if(t.j!=t.b.length){for(var e=0,n=0;e<t.b.length;){var r=t.b[e];F(t.p,r)&&(t.b[n++]=r),e++}t.b.length=n}if(t.j!=t.b.length){var i={};for(n=e=0;e<t.b.length;)F(i,r=t.b[e])||(t.b[n++]=r,i[r]=1),e++;t.b.length=n}};(t=$.prototype).get=function(t,e){return F(this.p,t)?this.p[t]:e},t.set=function(t,e){F(this.p,t)||(this.j++,this.b.push(t),this.Ja++),this.p[t]=e},t.ha=function(t){var e;t instanceof $?(e=t.H(),t=t.t()):(e=N(t),t=P(t));for(var n=0;n<e.length;n++)this.set(e[n],t[n])},t.forEach=function(t,e){for(var n=this.H(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}},t.clone=function(){return new $(this)},t.Nb=function(){L(this);for(var t={},e=0;e<this.b.length;e++){var n=this.b[e];t[n]=this.p[n]}return t},t.Sb=function(t){L(this);var e=0,n=this.b,r=this.p,i=this.Ja,o=this,a=new R;return a.next=function(){for(;;){if(i!=o.Ja)throw Error("The map has changed since the iterator was created");if(e>=n.length)throw M;var a=n[e++];return t?a:r[a]}},a};var j,U,F=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},B={id:"hitType",name:"t",valueType:"text",maxLength:void 0,defaultValue:void 0},q={id:"sessionControl",name:"sc",valueType:"text",maxLength:void 0,defaultValue:void 0},V={id:"description",name:"cd",valueType:"text",maxLength:2048,defaultValue:void 0},Z={id:"eventCategory",name:"ec",valueType:"text",maxLength:150,defaultValue:void 0},H={id:"eventAction",name:"ea",valueType:"text",maxLength:500,defaultValue:void 0},z={id:"eventLabel",name:"el",valueType:"text",maxLength:500,defaultValue:void 0},G={id:"eventValue",name:"ev",valueType:"integer",maxLength:void 0,defaultValue:void 0},W={zd:B,$c:{id:"anonymizeIp",name:"aip",valueType:"boolean",maxLength:void 0,defaultValue:void 0},Kd:{id:"queueTime",name:"qt",valueType:"integer",maxLength:void 0,defaultValue:void 0},fd:{id:"cacheBuster",name:"z",valueType:"text",maxLength:void 0,defaultValue:void 0},Qd:q,Rd:{id:"sessionGroup",name:"sg",valueType:"text",maxLength:void 0,defaultValue:void 0},ge:{id:"userId",name:"uid",valueType:"text",maxLength:void 0,defaultValue:void 0},Hd:{id:"nonInteraction",name:"ni",valueType:"boolean",maxLength:void 0,defaultValue:void 0},qd:V,$d:{id:"title",name:"dt",valueType:"text",maxLength:1500,defaultValue:void 0},bd:{id:"appId",name:"aid",valueType:"text",maxLength:150,defaultValue:void 0},cd:{id:"appInstallerId",name:"aiid",valueType:"text",maxLength:150,defaultValue:void 0},td:Z,sd:H,ud:z,vd:G,Td:{id:"socialNetwork",name:"sn",valueType:"text",maxLength:50,defaultValue:void 0},Sd:{id:"socialAction",name:"sa",valueType:"text",maxLength:50,defaultValue:void 0},Ud:{id:"socialTarget",name:"st",valueType:"text",maxLength:2048,defaultValue:void 0},ce:{id:"transactionId",name:"ti",valueType:"text",maxLength:500,defaultValue:void 0},be:{id:"transactionAffiliation",name:"ta",valueType:"text",maxLength:500,defaultValue:void 0},de:{id:"transactionRevenue",name:"tr",valueType:"currency",maxLength:void 0,defaultValue:void 0},ee:{id:"transactionShipping",name:"ts",valueType:"currency",maxLength:void 0,defaultValue:void 0},fe:{id:"transactionTax",name:"tt",valueType:"currency",maxLength:void 0,defaultValue:void 0},od:{id:"currencyCode",name:"cu",valueType:"text",maxLength:10,defaultValue:void 0},Dd:{id:"itemPrice",name:"ip",valueType:"currency",maxLength:void 0,defaultValue:void 0},Ed:{id:"itemQuantity",name:"iq",valueType:"integer",maxLength:void 0,defaultValue:void 0},Bd:{id:"itemCode",name:"ic",valueType:"text",maxLength:500,defaultValue:void 0},Cd:{id:"itemName",name:"in",valueType:"text",maxLength:500,defaultValue:void 0},Ad:{id:"itemCategory",name:"iv",valueType:"text",maxLength:500,defaultValue:void 0},md:{id:"campaignSource",name:"cs",valueType:"text",maxLength:100,defaultValue:void 0},kd:{id:"campaignMedium",name:"cm",valueType:"text",maxLength:50,defaultValue:void 0},ld:{id:"campaignName",name:"cn",valueType:"text",maxLength:100,defaultValue:void 0},jd:{id:"campaignKeyword",name:"ck",valueType:"text",maxLength:500,defaultValue:void 0},gd:{id:"campaignContent",name:"cc",valueType:"text",maxLength:500,defaultValue:void 0},hd:{id:"campaignId",name:"ci",valueType:"text",maxLength:100,defaultValue:void 0},yd:{id:"gclid",name:"gclid",valueType:"text",maxLength:void 0,defaultValue:void 0},pd:{id:"dclid",name:"dclid",valueType:"text",maxLength:void 0,defaultValue:void 0},Jd:{id:"pageLoadTime",name:"plt",valueType:"integer",maxLength:void 0,defaultValue:void 0},rd:{id:"dnsTime",name:"dns",valueType:"integer",maxLength:void 0,defaultValue:void 0},Vd:{id:"tcpConnectTime",name:"tcp",valueType:"integer",maxLength:void 0,defaultValue:void 0},Pd:{id:"serverResponseTime",name:"srt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Id:{id:"pageDownloadTime",name:"pdt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Ld:{id:"redirectResponseTime",name:"rrt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Wd:{id:"timingCategory",name:"utc",valueType:"text",maxLength:150,defaultValue:void 0},Zd:{id:"timingVar",name:"utv",valueType:"text",maxLength:500,defaultValue:void 0},Yd:{id:"timingValue",name:"utt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Xd:{id:"timingLabel",name:"utl",valueType:"text",maxLength:500,defaultValue:void 0},wd:{id:"exDescription",name:"exd",valueType:"text",maxLength:150,defaultValue:void 0},xd:{id:"exFatal",name:"exf",valueType:"boolean",maxLength:void 0,defaultValue:"1"}},K=function(t){if(1>t||200<t)throw Error("Expected dimension index range 1-200, but was : "+t);return{id:"dimension"+t,name:"cd"+t,valueType:"text",maxLength:150,defaultValue:void 0}},J=function(t){if(1>t||200<t)throw Error("Expected metric index range 1-200, but was : "+t);return{id:"metric"+t,name:"cm"+t,valueType:"integer",maxLength:void 0,defaultValue:void 0}},Y=function(t){return 1>t?"0":3>t?"1-2":(t=Math.floor(Math.log(t-1)/Math.log(2)),Math.pow(2,t)+1+"-"+Math.pow(2,t+1))},X=function(t,e){for(var n=0,r=t.length-1,i=0;n<=r;){var o=Math.floor((n+r)/2);if(e<=(i=t[o])){if(e>(r=0==o?0:t[o-1]))return(r+1).toString()+"-"+i.toString();r=o-1}else if(e>i){if(o>=t.length-1)return(t[t.length-1]+1).toString()+"+";n=o+1}}return"<= 0"},Q=function(){this.gb=[]},tt=function(){return new Q};(t=Q.prototype).when=function(t){return this.gb.push(t),this},t.Rb=function(t){var e=arguments;return this.when(function(t){return 0<=k(e,t.ub())}),this},t.Yc=function(t,e){var n=A(arguments,1);return this.when(function(e){return e=e.V().get(t),0<=k(n,e)}),this},t.mb=function(t,e){if(h(this.e))throw Error("Filter has already been set.");return this.e=h(e)?p(t,e):t,this},t.ia=function(){if(0==this.gb.length)throw Error("Must specify at least one predicate using #when or a helper method.");if(!h(this.e))throw Error("Must specify a delegate filter using #applyFilter.");return p(function(t){T(this.gb,function(e){return e(t)})&&this.e(t)},this)};var et=function(){this.lb=!1,this.zb="",this.Kb=!1,this.ya=null};et.prototype.Wb=function(t){return this.lb=!0,this.zb=t||" - ",this},et.prototype.Sc=function(){return this.Kb=!0,this},et.prototype.Dc=function(){return nt(this,Y)},et.prototype.Ec=function(t){return nt(this,v(X,t))};var nt=function(t,e){if(null!=t.ya)throw Error("LabelerBuilder: Only one labeling strategy may be used.");return t.ya=p(function(t){var n=t.V().get(G),r=t.V().get(z);c(n)&&(n=e(n),null!=r&&this.lb&&(n=r+this.zb+n),t.V().set(z,n))},t),t};et.prototype.ia=function(){if(null==this.ya)throw Error("LabelerBuilder: a labeling strategy must be specified prior to calling build().");return tt().Rb("event").mb(p(function(t){this.ya(t),this.Kb&&t.V().remove(G)},this)).ia()};var rt=function(t,e){var n=Array.prototype.slice.call(arguments),r=n.shift();if(void 0===r)throw Error("[goog.string.format] Template required");return r.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(t,e,r,i,o,a,s,u){if("%"==a)return"%";var c=n.shift();if(void 0===c)throw Error("[goog.string.format] Not enough arguments");return arguments[0]=c,it[a].apply(null,arguments)})},it={s:function(t,e,n){return isNaN(n)||""==n||t.length>=n?t:t=-1<e.indexOf("-",0)?t+Array(n-t.length+1).join(" "):Array(n-t.length+1).join(" ")+t},f:function(t,e,n,r,i){var o;return r=t.toString(),isNaN(i)||""==i||(r=parseFloat(t).toFixed(i)),o=0>t?"-":0<=e.indexOf("+")?"+":0<=e.indexOf(" ")?" ":"",0<=t&&(r=o+r),isNaN(n)||r.length>=n?r:(t=n-(r=isNaN(i)?Math.abs(t).toString():Math.abs(t).toFixed(i)).length-o.length,0<=e.indexOf("-",0)?o+r+Array(t+1).join(" "):o+Array(t+1).join(0<=e.indexOf("0",0)?"0":" ")+r)},d:function(t,e,n,r,i,o,a,s){return it.f(parseInt(t,10),e,n,r,0,o,a,s)}};it.i=it.d,it.u=it.d;var ot=function(t){if(this.w=new $,0<arguments.length%2)throw Error("Uneven number of arguments to ParameterMap constructor.");for(var e=arguments,n=0;n<e.length;n+=2)this.set(e[n],e[n+1])};ot.prototype.set=function(t,e){if(null==e)throw Error("undefined-or-null value for key: "+t.name);this.w.set(t.name,{key:t,value:e})},ot.prototype.remove=function(t){this.w.remove(t.name)},ot.prototype.get=function(t){return null===(t=this.w.get(t.name,null))?null:t.value},ot.prototype.ha=function(t){this.w.ha(t.w)};var at=function(t,e){E(t.w.t(),function(t){e(t.key,t.value)})};ot.prototype.Nb=function(){var t={};return at(this,function(e,n){t[e.id]=n}),t},ot.prototype.clone=function(){var t=new ot;return t.w=this.w.clone(),t},ot.prototype.toString=function(){var t={};return at(this,function(e,n){t[e.id]=n}),JSON.stringify(t)};var st=function(t){this.e=t};(t=st.prototype).Yb=function(t){var e=new st(p(this.M,this));return e.I=Z,e.Q=t,e},t.action=function(t){var e=new st(p(this.M,this));return e.I=H,e.Q=t,e},t.label=function(t){var e=new st(p(this.M,this));return e.I=z,e.Q=t,e},t.value=function(t){var e=new st(p(this.M,this));return e.I=G,e.Q=t,e},t.fc=function(t){var e=new st(p(this.M,this));return e.I=K(t.index),e.Q=t.value,e},t.vc=function(t){var e=new st(p(this.M,this));return e.I=J(t.index),e.Q=t.value,e},t.send=function(t){var e=new ot;return this.M(e),t.send("event",e)},t.M=function(t){null!=this.I&&null!=this.Q&&!t.w.T(this.I.name)&&t.set(this.I,this.Q),h(this.e)&&this.e(t)};var ut=new st(i),ct=function(){this.aa=this.aa,this.Ca=this.Ca};ct.prototype.aa=!1,ct.prototype.ma=function(){this.aa||(this.aa=!0,this.o())},ct.prototype.o=function(){if(this.Ca)for(;this.Ca.length;)this.Ca.shift()()};var lt=function(t,e){this.type=t,this.currentTarget=this.target=e,this.defaultPrevented=this.X=!1,this.Hb=!0};lt.prototype.preventDefault=function(){this.defaultPrevented=!0,this.Hb=!1};var ht,ft=function t(e){return t[" "](e),e};ft[" "]=i;t:{var dt=n.navigator;if(dt){var pt=dt.userAgent;if(pt){ht=pt;break t}}ht=""}var vt=function(){return-1!=ht.indexOf("Edge")||-1!=ht.indexOf("Trident")||-1!=ht.indexOf("MSIE")},gt=function(){return-1!=ht.indexOf("Edge")},yt=-1!=ht.indexOf("Opera")||-1!=ht.indexOf("OPR"),mt=vt(),bt=!(-1==ht.indexOf("Gecko")||-1!=ht.toLowerCase().indexOf("webkit")&&!gt()||-1!=ht.indexOf("Trident")||-1!=ht.indexOf("MSIE")||gt()),wt=-1!=ht.toLowerCase().indexOf("webkit")&&!gt(),_t=function(){var t=n.document;return t?t.documentMode:void 0},St=function(){if(yt&&n.opera)return l(t=n.opera.version)?t():t;var t="",e=function(){var t=ht;return bt?/rv\:([^\);]+)(\)|;)/.exec(t):mt&&gt()?/Edge\/([\d\.]+)/.exec(t):mt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):wt?/WebKit\/(\S+)/.exec(t):void 0}();return e&&(t=e?e[1]:""),mt&&!gt()&&(e=_t())>parseFloat(t)?String(e):t}(),kt={},Et=function(t){var e;if(!(e=kt[t])){e=0;for(var n=w(String(St)).split("."),r=w(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"",u=/(\d*)(\D*)/g,c=/(\d*)(\D*)/g;do{var l=u.exec(a)||["","",""],h=c.exec(s)||["","",""];if(0==l[0].length&&0==h[0].length)break;e=_(0==l[1].length?0:parseInt(l[1],10),0==h[1].length?0:parseInt(h[1],10))||_(0==l[2].length,0==h[2].length)||_(l[2],h[2])}while(0==e)}e=kt[t]=0<=e}return e},xt=n.document,Tt=_t(),It=!xt||!mt||!Tt&&gt()?void 0:Tt||("CSS1Compat"==xt.compatMode?parseInt(St,10):5),Ct=!mt||mt&&(gt()||9<=It),At=mt&&!Et("9"),Mt=!wt||Et("528"),Rt=bt&&Et("1.9b")||mt&&Et("8")||yt&&Et("9.5")||wt&&Et("528"),Ot=bt&&!Et("8")||mt&&!Et("9"),Pt=function(t,e){if(lt.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.sb=this.state=null,t){var n=this.type=t.type;this.target=t.target||t.srcElement,this.currentTarget=e;var r=t.relatedTarget;if(r){if(bt){var i;t:{try{ft(r.nodeName),i=!0;break t}catch(o){}i=!1}i||(r=null)}}else"mouseover"==n?r=t.fromElement:"mouseout"==n&&(r=t.toElement);this.relatedTarget=r,this.offsetX=wt||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=wt||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0,this.button=t.button,this.keyCode=t.keyCode||0,this.charCode=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.state=t.state,this.sb=t,t.defaultPrevented&&this.preventDefault()}};m(Pt,lt),Pt.prototype.preventDefault=function(){Pt.P.preventDefault.call(this);var t=this.sb;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,At)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Nt="closure_listenable_"+(1e6*Math.random()|0),Dt=function(t){return!(!t||!t[Nt])},$t=0,Lt=function(t,e,n,r,i){this.O=t,this.proxy=null,this.src=e,this.type=n,this.ka=!!r,this.sa=i,this.key=++$t,this.removed=this.ja=!1},jt=function(t){t.removed=!0,t.O=null,t.proxy=null,t.src=null,t.sa=null},Ut=function(t){this.src=t,this.k={},this.fa=0};Ut.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.k[o])||(t=this.k[o]=[],this.fa++);var a=Bt(t,e,r,i);return-1<a?(e=t[a],n||(e.ja=!1)):((e=new Lt(e,this.src,o,!!r,i)).ja=n,t.push(e)),e},Ut.prototype.remove=function(t,e,n,r){if(!((t=t.toString())in this.k))return!1;var i=this.k[t];return-1<(e=Bt(i,e,n,r))&&(jt(i[e]),S.splice.call(i,e,1),0==i.length&&(delete this.k[t],this.fa--),!0)};var Ft=function(t,e){var n=e.type;if(!(n in t.k))return!1;var r=I(t.k[n],e);return r&&(jt(e),0==t.k[n].length&&(delete t.k[n],t.fa--)),r};Ut.prototype.removeAll=function(t){t=t&&t.toString();var e,n=0;for(e in this.k)if(!t||e==t){for(var r=this.k[e],i=0;i<r.length;i++)++n,jt(r[i]);delete this.k[e],this.fa--}return n},Ut.prototype.ba=function(t,e,n,r){var i=-1;return(t=this.k[t.toString()])&&(i=Bt(t,e,n,r)),-1<i?t[i]:null};var Bt=function(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.removed&&o.O==e&&o.ka==!!n&&o.sa==r)return i}return-1},qt="closure_lm_"+(1e6*Math.random()|0),Vt={},Zt=function t(e,n,r,i,o){if(a(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=ne(r),Dt(e)?e.listen(n,r,i,o):Ht(e,n,r,!1,i,o)},Ht=function(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=!!i,s=te(t);return s||(t[qt]=s=new Ut(t)),(n=s.add(e,n,r,i,o)).proxy||(r=zt(),n.proxy=r,r.src=t,r.O=n,t.addEventListener?t.addEventListener(e.toString(),r,a):t.attachEvent(Jt(e.toString()),r)),n},zt=function(){var t=Qt,e=Ct?function(n){return t.call(e.src,e.O,n)}:function(n){if(!(n=t.call(e.src,e.O,n)))return n};return e},Gt=function t(e,n,r,i,o){if(a(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=ne(r),Dt(e)?e.cb(n,r,i,o):Ht(e,n,r,!0,i,o)},Wt=function t(e,n,r,i,o){if(a(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else r=ne(r),Dt(e)?e.jb(n,r,i,o):e&&(e=te(e))&&(n=e.ba(n,r,!!i,o))&&Kt(n)},Kt=function(t){if(c(t)||!t||t.removed)return!1;var e=t.src;if(Dt(e))return Ft(e.B,t);var n=t.type,r=t.proxy;return e.removeEventListener?e.removeEventListener(n,r,t.ka):e.detachEvent&&e.detachEvent(Jt(n),r),(n=te(e))?(Ft(n,t),0==n.fa&&(n.src=null,e[qt]=null)):jt(t),!0},Jt=function(t){return t in Vt?Vt[t]:Vt[t]="on"+t},Yt=function(t,e,n,r){var i=!0;if((t=te(t))&&(e=t.k[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.ka==n&&!o.removed&&(o=Xt(o,r),i=i&&!1!==o)}return i},Xt=function(t,e){var n=t.O,r=t.sa||t.src;return t.ja&&Kt(t),n.call(r,e)},Qt=function(t,e){if(t.removed)return!0;if(!Ct){var r;if(!(r=e))t:{r=["window","event"];for(var i,o=n;i=r.shift();){if(null==o[i]){r=null;break t}o=o[i]}r=o}if(r=new Pt(i=r,this),o=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var a=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(c){a=!0}(a||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],a=r.currentTarget;a;a=a.parentNode)i.push(a);a=t.type;for(var s=i.length-1;!r.X&&0<=s;s--){r.currentTarget=i[s];var u=Yt(i[s],a,!0,r);o=o&&u}for(s=0;!r.X&&s<i.length;s++)r.currentTarget=i[s],u=Yt(i[s],a,!1,r),o=o&&u}return o}return Xt(t,new Pt(e,this))},te=function(t){return(t=t[qt])instanceof Ut?t:null},ee="__closure_events_fn_"+(1e9*Math.random()>>>0),ne=function(t){return l(t)?t:(t[ee]||(t[ee]=function(e){return t.handleEvent(e)}),t[ee])},re=function(){ct.call(this),this.B=new Ut(this),this.Tb=this,this.fb=null};m(re,ct),re.prototype[Nt]=!0,(t=re.prototype).addEventListener=function(t,e,n,r){Zt(this,t,e,n,r)},t.removeEventListener=function(t,e,n,r){Wt(this,t,e,n,r)},t.dispatchEvent=function(t){var e,n,r=this.fb;if(r){e=[];for(var i=1;r;r=r.fb)e.push(r),++i}if(r=this.Tb,i=t.type||t,u(t))t=new lt(t,r);else if(t instanceof lt)t.target=t.target||r;else{var o=t;!function(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<D.length;o++)n=D[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}(t=new lt(i,r),o)}if(o=!0,e)for(var a=e.length-1;!t.X&&0<=a;a--)n=t.currentTarget=e[a],o=ie(n,i,!0,t)&&o;if(t.X||(n=t.currentTarget=r,o=ie(n,i,!0,t)&&o,t.X||(o=ie(n,i,!1,t)&&o)),e)for(a=0;!t.X&&a<e.length;a++)n=t.currentTarget=e[a],o=ie(n,i,!1,t)&&o;return o},t.o=function(){re.P.o.call(this),this.B&&this.B.removeAll(void 0),this.fb=null},t.listen=function(t,e,n,r){return this.B.add(String(t),e,!1,n,r)},t.cb=function(t,e,n,r){return this.B.add(String(t),e,!0,n,r)},t.jb=function(t,e,n,r){return this.B.remove(String(t),e,n,r)};var ie=function(t,e,n,r){if(!(e=t.B.k[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.removed&&a.ka==n){var s=a.O,u=a.sa||a.src;a.ja&&Ft(t.B,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Hb};re.prototype.ba=function(t,e,n,r){return this.B.ba(String(t),e,n,r)};var oe=function(t,e,n){this.tc=n,this.dc=t,this.Gc=e,this.Ba=0,this.ta=null};oe.prototype.get=function(){var t;return 0<this.Ba?(this.Ba--,this.ta=(t=this.ta).next,t.next=null):t=this.dc(),t},oe.prototype.put=function(t){this.Gc(t),this.Ba<this.tc&&(this.Ba++,t.next=this.ta,this.ta=t)};var ae,se=function(t){n.setTimeout(function(){throw t},0)},ue=function(){this.Ka=this.Z=null},ce=new oe(function(){return new le},function(t){t.reset()},100);ue.prototype.add=function(t,e){var n=ce.get();n.set(t,e),this.Ka?this.Ka.next=n:this.Z=n,this.Ka=n},ue.prototype.remove=function(){var t=null;return this.Z&&(t=this.Z,this.Z=this.Z.next,this.Z||(this.Ka=null),t.next=null),t};var le=function(){this.next=this.scope=this.Wa=null};le.prototype.set=function(t,e){this.Wa=t,this.scope=e,this.next=null},le.prototype.reset=function(){this.next=this.scope=this.Wa=null};var he,fe=function(t,e){he||de(),pe||(he(),pe=!0),ve.add(t,e)},de=function(){if(n.Promise&&n.Promise.resolve){var t=n.Promise.resolve();he=function(){t.then(ge)}}else he=function(){var t=ge;!l(n.setImmediate)||n.Window&&n.Window.prototype&&n.Window.prototype.setImmediate==n.setImmediate?(ae||(ae=function(){var t=n.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&-1==ht.indexOf("Presto")&&(t=function(){(r=document.createElement("IFRAME")).style.display="none",r.src="",document.documentElement.appendChild(r);var t=r.contentWindow;(r=t.document).open(),r.write(""),r.close();var e="callImmediate"+Math.random(),n="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,r=p(function(t){"*"!=n&&t.origin!=n||t.data!=e||this.port1.onmessage()},this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(e,n)}}}),void 0!==t&&!vt()){var e=new t,i={},o=i;return e.port1.onmessage=function(){if(r(i.next)){var t=(i=i.next).ob;i.ob=null,t()}},function(t){o.next={ob:t},o=o.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){n.setTimeout(t,0)}}()),ae(t)):n.setImmediate(t)}},pe=!1,ve=new ue,ge=function(){for(var t=null;t=ve.remove();){try{t.Wa.call(t.scope)}catch(e){se(e)}ce.put(t)}pe=!1},ye=function(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0},me=function(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}},be=function(t,e){if(this.m=0,this.D=void 0,this.S=this.G=this.l=null,this.ra=this.Va=!1,t==ke)Ie(this,2,e);else try{var n=this;t.call(e,function(t){Ie(n,2,t)},function(t){Ie(n,3,t)})}catch(r){Ie(this,3,r)}},we=function(){this.next=this.context=this.da=this.Da=this.L=null,this.Na=!1};we.prototype.reset=function(){this.context=this.da=this.Da=this.L=null,this.Na=!1};var _e=new oe(function(){return new we},function(t){t.reset()},100),Se=function(t,e,n){var r=_e.get();return r.Da=t,r.da=e,r.context=n,r},ke=function(){};be.prototype.then=function(t,e,n){return Te(this,l(t)?t:null,l(e)?e:null,n)},ye(be),be.prototype.cancel=function(t){0==this.m&&fe(function(){var e=new Ne(t);Ee(this,e)},this)};var Ee=function t(e,n){if(0==e.m)if(e.l){var r=e.l;if(r.G){for(var i=0,o=null,a=null,s=r.G;s&&(s.Na||(i++,s.L==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(0==r.m&&1==i?t(r,n):(a?((i=a).next==r.S&&(r.S=i),i.next=i.next.next):Me(r),Re(r,o,3,n)))}e.l=null}else Ie(e,3,n)},xe=function(t,e){t.G||2!=t.m&&3!=t.m||Ae(t),t.S?t.S.next=e:t.G=e,t.S=e},Te=function(t,e,n,i){var o=Se(null,null,null);return o.L=new be(function(t,a){o.Da=e?function(n){try{var r=e.call(i,n);t(r)}catch(u_){a(u_)}}:t,o.da=n?function(e){try{var o=n.call(i,e);!r(o)&&e instanceof Ne?a(e):t(o)}catch(u_){a(u_)}}:a}),o.L.l=t,xe(t,o),o.L};be.prototype.Pb=function(t){this.m=0,Ie(this,2,t)},be.prototype.Qb=function(t){this.m=0,Ie(this,3,t)};var Ie=function(t,e,n){if(0==t.m){if(t==n)e=3,n=new TypeError("Promise cannot resolve to itself");else{if(me(n)){t.m=1,e=n,n=t.Pb;var r=t.Qb;return void(e instanceof be?xe(e,Se(n||i,r||null,t)):e.then(n,r,t))}if(h(n))try{if(l(r=n.then))return void Ce(t,n,r)}catch(jO){e=3,n=jO}}t.D=n,t.m=e,t.l=null,Ae(t),3!=e||n instanceof Ne||Oe(t,n)}},Ce=function(t,e,n){t.m=1;var r=!1,i=function(e){r||(r=!0,t.Qb(e))};try{n.call(e,function(e){r||(r=!0,t.Pb(e))},i)}catch(o){i(o)}},Ae=function(t){t.Va||(t.Va=!0,fe(t.gc,t))},Me=function(t){var e=null;return t.G&&(t.G=(e=t.G).next,e.next=null),t.G||(t.S=null),e};be.prototype.gc=function(){for(var t=null;t=Me(this);)Re(this,t,this.m,this.D);this.Va=!1};var Re=function(t,e,n,r){if(e.L&&(e.L.l=null),2==n)e.Da.call(e.context,r);else if(null!=e.da){if(!e.Na)for(;t&&t.ra;t=t.l)t.ra=!1;e.da.call(e.context,r)}_e.put(e)},Oe=function(t,e){t.ra=!0,fe(function(){t.ra&&Pe.call(null,e)})},Pe=se,Ne=function(t){b.call(this,t)};m(Ne,b),Ne.prototype.name="cancel";var De=function(t,e){this.Fa=[],this.Cb=t,this.rb=e||null,this.ca=this.C=!1,this.D=void 0,this.hb=this.Xb=this.Oa=!1,this.Ia=0,this.l=null,this.Qa=0};De.prototype.cancel=function(t){if(this.C)this.D instanceof De&&this.D.cancel();else{if(this.l){var e=this.l;delete this.l,t?e.cancel(t):(e.Qa--,0>=e.Qa&&e.cancel())}this.Cb?this.Cb.call(this.rb,this):this.hb=!0,this.C||this.A(new Ze)}},De.prototype.qb=function(t,e){this.Oa=!1,$e(this,t,e)};var $e=function(t,e,n){t.C=!0,t.D=n,t.ca=!e,Be(t)},Le=function(t){if(t.C){if(!t.hb)throw new Ve;t.hb=!1}};De.prototype.v=function(t){Le(this),$e(this,!0,t)},De.prototype.A=function(t){Le(this),$e(this,!1,t)},De.prototype.n=function(t,e){return je(this,t,null,e)};var je=function(t,e,n,r){return t.Fa.push([e,n,r]),t.C&&Be(t),t};De.prototype.then=function(t,e,n){var r,i,o=new be(function(t,e){r=t,i=e});return je(this,r,function(t){t instanceof Ze?o.cancel():i(t)}),o.then(t,e,n)},ye(De);var Ue=function(t){var e=new De;return je(t,e.v,e.A,e),e},Fe=function(t){return x(t.Fa,function(t){return l(t[1])})},Be=function(t){if(t.Ia&&t.C&&Fe(t)){var e=ze[i=t.Ia];e&&(n.clearTimeout(e.ua),delete ze[i]),t.Ia=0}t.l&&(t.l.Qa--,delete t.l);for(var i=t.D,o=e=!1;t.Fa.length&&!t.Oa;){var a=(u=t.Fa.shift())[0],s=u[1],u=u[2];if(a=t.ca?s:a)try{var c=a.call(u||t.rb,i);r(c)&&(t.ca=t.ca&&(c==i||c instanceof Error),t.D=i=c),me(i)&&(o=!0,t.Oa=!0)}catch(Qb){i=Qb,t.ca=!0,Fe(t)||(e=!0)}}t.D=i,o&&(c=p(t.qb,t,!0),o=p(t.qb,t,!1),i instanceof De?(je(i,c,o),i.Xb=!0):i.then(c,o)),e&&(i=new He(i),ze[i.ua]=i,t.Ia=i.ua)},qe=function(t){var e=new De;return e.v(t),e},Ve=function(){b.call(this)};m(Ve,b),Ve.prototype.message="Deferred has already fired",Ve.prototype.name="AlreadyCalledError";var Ze=function(){b.call(this)};m(Ze,b),Ze.prototype.message="Deferred was canceled",Ze.prototype.name="CanceledError";var He=function(t){this.ua=n.setTimeout(p(this.Tc,this),0),this.na=t};He.prototype.Tc=function(){throw delete ze[this.ua],this.na};var ze={},Ge=function(t){this.qa=[],this.e=t};Ge.prototype.R=function(t){if(!l(t))throw Error("Invalid filter. Must be a function.");this.qa.push(t)},Ge.prototype.send=function(t,e){if(0==this.qa.length)return this.e.send(t,e);var n=new Ke(t,e);return We(this,0,n).n(function(){if(!n.Sa)return this.e.send(t,e)},this)};var We=function t(e,n,r){return qe().n(function(){return this.qa[n](r)},e).n(function(){if(++n<this.qa.length&&!r.Sa)return t(this,n,r)},e)},Ke=function(t,e){this.Wc=t,this.Cc=e,this.Sa=!1};Ke.prototype.ub=function(){return this.Wc},Ke.prototype.V=function(){return this.Cc},Ke.prototype.cancel=function(){this.Sa=!0},function t(e){var n=arguments.length;if(1==n&&a(arguments[0]))return t.apply(null,arguments[0]);for(var r={},i=0;i<n;i++)r[arguments[i]]=!0;return r}("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));var Je=function(t,e){this.width=t,this.height=e};Je.prototype.clone=function(){return new Je(this.width,this.height)},Je.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},!bt&&!mt||mt&&mt&&(gt()||9<=It)||bt&&Et("1.9.1"),mt&&Et("9");var Ye={id:"apiVersion",name:"v",valueType:"text",maxLength:void 0,defaultValue:void 0},Xe={id:"appName",name:"an",valueType:"text",maxLength:100,defaultValue:void 0},Qe={id:"appVersion",name:"av",valueType:"text",maxLength:100,defaultValue:void 0},tn={id:"clientId",name:"cid",valueType:"text",maxLength:void 0,defaultValue:void 0},en={id:"language",name:"ul",valueType:"text",maxLength:20,defaultValue:void 0},nn={id:"libVersion",name:"_v",valueType:"text",maxLength:void 0,defaultValue:void 0},rn={id:"sampleRateOverride",name:"usro",valueType:"integer",maxLength:void 0,defaultValue:void 0},on={id:"screenColors",name:"sd",valueType:"text",maxLength:20,defaultValue:void 0},an={id:"screenResolution",name:"sr",valueType:"text",maxLength:20,defaultValue:void 0},sn={id:"trackingId",name:"tid",valueType:"text",maxLength:void 0,defaultValue:void 0},un={id:"viewportSize",name:"vp",valueType:"text",maxLength:20,defaultValue:void 0},cn={ad:Ye,dd:Xe,ed:Qe,nd:tn,Fd:en,Gd:nn,Md:rn,Nd:on,Od:an,ae:sn,he:un},ln=function(t){if(!u(t))return t;var e=hn(t,W);if(h(e))return e;if(e=hn(t,cn),h(e))return e;if(null!==(e=/^dimension(\d+)$/.exec(t)))return K(parseInt(e[1],10));if(null!==(e=/^metric(\d+)$/.exec(t)))return J(parseInt(e[1],10));throw Error(t+" is not a valid parameter name.")},hn=function(t,e){var n=function(t,e){var n;t:{for(n in t)if(e.call(void 0,t[n],n,t))break t;n=void 0}return n&&t[n]}(e,function(e){return e.id==t&&"metric"!=t&&"dimension"!=t});return h(n)?n:null},fn=function(t,e){this.ac=e,this.q=e.Xa(),this.Fb=new ot,this.ib=!1};(t=fn.prototype).set=function(t,e){if(null==e)throw Error("Value must be defined and not null. Parameter="+t.id);var n=ln(t);this.Fb.set(n,e)},t.R=function(t){this.ac.R(t)},t.send=function(t,e){if(t instanceof st)return t.send(this);var n=this.Fb.clone();return e instanceof ot?n.ha(e):h(e)&&O(e,function(t,e){null!=t&&n.set(ln(e),t)},this),this.ib&&(this.ib=!1,n.set(q,"start")),this.q.send(t,n)},t.Hc=function(t){var e={description:t};return this.set(V,t),this.send("appview",e)},t.Ic=function(t,e,n,r){return this.send("event",{eventCategory:t,eventAction:e,eventLabel:n,eventValue:r})},t.Kc=function(t,e,n){return this.send("social",{socialNetwork:t,socialAction:e,socialTarget:n})},t.Jc=function(t,e){return this.send("exception",{exDescription:t,exFatal:e})},t.Ib=function(t,e,n,r,i){return this.send("timing",{timingCategory:t,timingVar:e,timingLabel:r,timingValue:n,sampleRateOverride:i})},t.jc=function(){this.ib=!0},t.Rc=function(t,e,n,r){return new dn(this,t,e,n,r)};var dn=function(t,e,n,r,i){this.Ob=t,this.Zb=e,this.Xc=n,this.rc=r,this.Ea=i,this.Qc=g()};dn.prototype.send=function(){var t=this.Ob.Ib(this.Zb,this.Xc,g()-this.Qc,this.rc,this.Ea);return this.Ob=null,t};var pn=function(t,e,n,r,i){this.sc=t,this.Ub=e,this.Vb=n,this.g=r,this.$b=i};pn.prototype.mc=function(t){var e=new fn(0,this.$b.create());return e.set(nn,this.sc),e.set(Ye,1),e.set(Xe,this.Ub),e.set(Qe,this.Vb),e.set(sn,t),(t=navigator.language||navigator.browserLanguage)&&e.set(en,t),(t=screen.colorDepth+"-bit")&&e.set(on,t),(t=[screen.width,screen.height].join("x"))&&e.set(an,t),t=window.document,(t=[(t=new Je((t="CSS1Compat"==t.compatMode?t.documentElement:t.body).clientWidth,t.clientHeight)).width,t.height].join("x"))&&e.set(un,t),e},pn.prototype.kc=function(){return Ue(this.g.ea)};var vn=function(t,e,n,r,i,o){for(De.call(this,i,o),this.bb=t,this.Ta=[],this.tb=!!e,this.ic=!!n,this.cc=!!r,e=this.Bb=0;e<t.length;e++)je(t[e],p(this.vb,this,e,!0),p(this.vb,this,e,!1));0!=t.length||this.tb||this.v(this.Ta)};m(vn,De),vn.prototype.vb=function(t,e,n){return this.Bb++,this.Ta[t]=[e,n],this.C||(this.tb&&e?this.v([t,n]):this.ic&&!e?this.A(n):this.Bb==this.bb.length&&this.v(this.Ta)),this.cc&&!e&&(n=null),n},vn.prototype.A=function(t){for(vn.P.A.call(this,t),t=0;t<this.bb.length;t++)this.bb[t].cancel()};var gn=function(t){this.J=t,this.Ea=100,this.pb=[],this.W=this.ga=null,this.ea=yn(this),this.ea.n(function(){this.Jb=Zt(this.J,"a",p(this.nc,this))},this)},yn=function(t){return mn(t).n(function(){return this},t)},mn=function(t){return function(t){return new vn(t,!1,!0).n(function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n][1];return e})}([bn(t),_n(t)])};gn.prototype.nc=function(){xn(this);var t=wn(this),e=this.xa();mn(this).n(function(){t!=wn(this)&&En(this,"analytics.user-id"),e!=this.xa()&&En(this,"analytics.tracking-permitted")},this)},gn.prototype.Oc=function(t){xn(this);var e=this.W!=t;this.W=t,this.J.set("analytics.tracking-permitted",t.toString()),e&&En(this,"analytics.tracking-permitted")},gn.prototype.xa=function(){var t;return xn(this),(t=this.W)&&(t=!((t=n._gaUserPrefs)&&t.ioo&&t.ioo())),t};var bn=function(t){return t.J.get("analytics.tracking-permitted").n(function(t){if(this.W=!0,r(t))switch(t){case"true":this.W=!0;break;case"false":this.W=!1}},t)},wn=function(t){if(xn(t),!u(t.ga))throw Error("Invalid state. UserID is not a string.");return t.ga},_n=function(t){return t.J.get("analytics.user-id").n(function(t){r(t)?this.ga=t:Sn(this)},t)},Sn=function(t){return t.ga=function(){for(var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split(""),e=0,n=t.length;e<n;e++)switch(t[e]){case"x":t[e]=Math.floor(16*Math.random()).toString(16);break;case"y":t[e]=(Math.floor(4*Math.random())+8).toString(16)}return t.join("")}(),t.J.set("analytics.user-id",t.ga).n(function(){En(this,"analytics.user-id")},t)};gn.prototype.Nc=function(t){xn(this),this.Ea=t};var kn=function(t){return xn(t),t.Ea};gn.prototype.Fc=function(){return Sn(this)};var En=function(t,e){E(t.pb,function(t){t(e)})};gn.prototype.ma=function(){null!=this.Jb&&Kt(this.Jb)};var xn=function(t){if(!Ue(t.ea).C)throw Error("Settings object accessed prior to entering ready state.")},Tn=function(){re.call(this),this.eb="google-analytics",this.J=chrome.storage.local,chrome.storage.onChanged.addListener(p(this.Ac,this))};m(Tn,re),Tn.prototype.Ac=function(t){In(this,t)&&this.dispatchEvent("a")};var In=function(t,e){return x(N(e),function(t){return 0==t.lastIndexOf(this.eb,0)},t)};Tn.prototype.get=function(t){var e=new De,n=this.eb+"."+t;return this.J.get(n,function(t){chrome.runtime.lastError?e.A(chrome.runtime.lastError):e.v(null!=(t=t[n])?t.toString():void 0)}),e},Tn.prototype.set=function(t,e){var n=new De,r={};return r[this.eb+"."+t]=e,this.J.set(r,function(){chrome.runtime.lastError?n.A(chrome.runtime.lastError):n.v()}),n};var Cn=function(){};Cn.lc=function(){return Cn.yb?Cn.yb:Cn.yb=new Cn},Cn.prototype.send=function(){return qe()};var An=function(t){this.ec=t};An.prototype.send=function(t,e){return this.ec.push({pc:t,Bc:e}),qe()};var Mn=function(t,e,n){this.g=t,this.U=[],this.K={enabled:new An(this.U),disabled:n},this.q=this.K.enabled,je(Ue(this.g.ea),v(this.zc,e),this.yc,this)};Mn.prototype.zc=function(t){if(null===this.U)throw Error("Channel setup already completed.");this.K.enabled=t(),Rn(this),E(this.U,function(t){this.send(t.pc,t.Bc)},this),this.U=null,function(t,e){xn(t),t.pb.push(e)}(this.g,p(this.xc,this))},Mn.prototype.yc=function(){if(null===this.U)throw Error("Channel setup already completed.");this.q=this.K.enabled=this.K.disabled,this.U=null},Mn.prototype.send=function(t,e){return this.q.send(t,e)};var Rn=function(t){t.q=t.g.xa()?t.K.enabled:t.K.disabled};Mn.prototype.xc=function(t){switch(t){case"analytics.tracking-permitted":Rn(this)}};var On=function(t,e){this.Ra=[];var n=p(function(){return this.pa=new Ge(e.Xa()),E(this.Ra,function(t){this.pa.R(t)},this),this.Ra=null,this.pa},this);this.q=new Mn(t,n,Cn.lc())};On.prototype.Xa=function(){return this.q},On.prototype.R=function(t){this.pa?this.pa.R(t):this.Ra.push(t)};var Pn=function(t,e){this.g=t,this.Pc=e};Pn.prototype.create=function(){return new On(this.g,this.Pc)};var Nn=function(t,e){re.call(this),this.wa=t||1,this.Y=e||n,this.Pa=p(this.Uc,this),this.ab=g()};m(Nn,re),(t=Nn.prototype).enabled=!1,t.h=null,t.Uc=function(){if(this.enabled){var t=g()-this.ab;0<t&&t<.8*this.wa?this.h=this.Y.setTimeout(this.Pa,this.wa-t):(this.h&&(this.Y.clearTimeout(this.h),this.h=null),this.dispatchEvent("tick"),this.enabled&&(this.h=this.Y.setTimeout(this.Pa,this.wa),this.ab=g()))}},t.start=function(){this.enabled=!0,this.h||(this.h=this.Y.setTimeout(this.Pa,this.wa),this.ab=g())},t.stop=function(){this.enabled=!1,this.h&&(this.Y.clearTimeout(this.h),this.h=null)},t.o=function(){Nn.P.o.call(this),this.stop(),delete this.Y};var Dn=function(t,e,r){if(l(t))r&&(t=p(t,r));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=p(t.handleEvent,t)}return 2147483647<e?-1:n.setTimeout(t,e||0)},$n=function(t){ct.call(this),this.Ya=t,this.b={}};m($n,ct);var Ln=[];$n.prototype.listen=function(t,e,n,r){a(e)||(e&&(Ln[0]=e.toString()),e=Ln);for(var i=0;i<e.length;i++){var o=Zt(t,e[i],n||this.handleEvent,r||!1,this.Ya||this);if(!o)break;this.b[o.key]=o}return this},$n.prototype.cb=function(t,e,n,r){return jn(this,t,e,n,r)};var jn=function t(e,n,r,i,o,s){if(a(r))for(var u=0;u<r.length;u++)t(e,n,r[u],i,o,s);else{if(!(n=Gt(n,r,i||e.handleEvent,o,s||e.Ya||e)))return e;e.b[n.key]=n}return e};$n.prototype.jb=function(t,e,n,r,i){if(a(e))for(var o=0;o<e.length;o++)this.jb(t,e[o],n,r,i);else i=i||this.Ya||this,n=ne(n=n||this.handleEvent),r=!!r,(e=Dt(t)||t&&(t=te(t))?t.ba(e,n,r,i):null)&&(Kt(e),delete this.b[e.key]);return this},$n.prototype.removeAll=function(){O(this.b,Kt),this.b={}},$n.prototype.o=function(){$n.P.o.call(this),this.removeAll()},$n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=function(){re.call(this),this.oa=new $n(this),Mt&&(Rt?this.oa.listen(Ot?document.body:window,["online","offline"],this.wb):(this.Eb=!Mt||navigator.onLine,this.h=new Nn(250),this.oa.listen(this.h,"tick",this.oc),this.h.start()))};m(Un,re),Un.prototype.oc=function(){var t=!Mt||navigator.onLine;t!=this.Eb&&(this.Eb=t,this.wb())},Un.prototype.wb=function(){this.dispatchEvent(!Mt||navigator.onLine?"online":"offline")},Un.prototype.o=function(){Un.P.o.call(this),this.oa.ma(),this.oa=null,this.h&&(this.h.ma(),this.h=null)};var Fn=function(t,e){this.g=t,this.e=e};Fn.prototype.send=function(t,e){return e.set(tn,wn(this.g)),this.e.send(t,e)};var Bn=function(t){this.e=t};Bn.prototype.send=function(t,e){return qn(e),Vn(e),this.e.send(t,e)};var qn=function(t){at(t,function(e,n){r(e.maxLength)&&"text"==e.valueType&&0<e.maxLength&&n.length>e.maxLength&&t.set(e,n.substring(0,e.maxLength))})},Vn=function(t){at(t,function(e,n){r(e.defaultValue)&&n==e.defaultValue&&t.remove(e)})},Zn={status:"device-offline",la:void 0},Hn={status:"rate-limited",la:void 0},zn={status:"sampled-out",la:void 0},Gn={status:"sent",la:void 0},Wn=function(t,e){this.Vc=t,this.e=e};Wn.prototype.send=function(t,e){var n,r=(n=this.Vc).Lb(),i=Math.floor((r-n.Ab)*n.hc);return 0<i&&(n.$=Math.min(n.$+i,n.uc),n.Ab=r),1>n.$?n=!1:(--n.$,n=!0),n||"item"==t||"transaction"==t?this.e.send(t,e):qe(Hn)};var Kn=function(){this.$=60,this.uc=500,this.hc=5e-4,this.Lb=function(){return(new Date).getTime()},this.Ab=this.Lb()},Jn=function(t,e){this.g=t,this.e=e};Jn.prototype.send=function(t,e){var n,r=e.get(tn);return r=parseInt(r.split("-")[1],16),"timing"!=t?n=kn(this.g):((n=e.get(rn))&&e.remove(rn),n=n||kn(this.g)),r<655.36*n?this.e.send(t,e):qe(zn)};var Yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Xn=function t(e){if(Qn){Qn=!1;var r=n.location;if(r){var i=r.href;if(i&&(i=(i=t(i)[3]||null)?decodeURI(i):i)&&i!=r.hostname)throw Qn=!0,Error()}}return e.match(Yn)},Qn=wt,tr=function(){};tr.prototype.nb=null;var er,nr=function(){};m(nr,tr);var rr=function(t){if(!t.xb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.xb=r}catch(jO){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.xb};er=new nr;var ir=function(t){re.call(this),this.headers=new $,this.Ma=t||null,this.F=!1,this.La=this.a=null,this.za=this.$a="",this.N=this.Za=this.va=this.Ua=!1,this.Ha=0,this.Ga=null,this.Gb="",this.kb=this.Zc=!1};m(ir,re);var or=/^https?$/i,ar=["POST","PUT"],sr=[];ir.prototype.bc=function(){this.ma(),I(sr,this)},ir.prototype.send=function(t,e,r,i){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.$a+"; newUri="+t);e=e?e.toUpperCase():"GET",this.$a=t,this.za="",this.Ua=!1,this.F=!0,this.a=function(t){return(t=rr(t))?new ActiveXObject(t):new XMLHttpRequest}(this.Ma?this.Ma:er),this.La=function(t){var e;return(e=t.nb)||(e={},rr(t)&&(e[0]=!0,e[1]=!0),e=t.nb=e),e}(this.Ma?this.Ma:er),this.a.onreadystatechange=p(this.Db,this);try{this.Za=!0,this.a.open(e,String(t),!0),this.Za=!1}catch(jO){return void this.na(5,jO)}t=r||"";var o=this.headers.clone();i&&function(t,e){if("function"==typeof t.forEach)t.forEach(e,void 0);else if(s(t)||u(t))E(t,e,void 0);else{var n;if("function"==typeof t.H)n=t.H();else if("function"!=typeof t.t)if(s(t)||u(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else n=N(t);else n=void 0;i=(r=function(t){if("function"==typeof t.t)return t.t();if(u(t))return t.split("");if(s(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}return P(t)}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}(i,function(t,e){o.set(e,t)}),i=function(t){var e;t:{e=cr;for(var n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:u(t)?t.charAt(e):t[e]}(o.H()),r=n.FormData&&t instanceof n.FormData,!(0<=k(ar,e))||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.Gb&&(this.a.responseType=this.Gb),"withCredentials"in this.a&&(this.a.withCredentials=this.Zc);try{dr(this),0<this.Ha&&((this.kb=ur(this.a))?(this.a.timeout=this.Ha,this.a.ontimeout=p(this.Mb,this)):this.Ga=Dn(this.Mb,this.Ha,this)),this.va=!0,this.a.send(t),this.va=!1}catch(a){this.na(5,a)}};var ur=function(t){return mt&&Et(9)&&c(t.timeout)&&r(t.ontimeout)},cr=function(t){return"content-type"==t.toLowerCase()};ir.prototype.Mb=function(){void 0!==e&&this.a&&(this.za="Timed out after "+this.Ha+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))},ir.prototype.na=function(t,e){this.F=!1,this.a&&(this.N=!0,this.a.abort(),this.N=!1),this.za=e,lr(this),fr(this)};var lr=function(t){t.Ua||(t.Ua=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))};ir.prototype.abort=function(){this.a&&this.F&&(this.F=!1,this.N=!0,this.a.abort(),this.N=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),fr(this))},ir.prototype.o=function(){this.a&&(this.F&&(this.F=!1,this.N=!0,this.a.abort(),this.N=!1),fr(this,!0)),ir.P.o.call(this)},ir.prototype.Db=function(){this.aa||(this.Za||this.va||this.N?hr(this):this.wc())},ir.prototype.wc=function(){hr(this)};var hr=function(t){if(t.F&&void 0!==e&&(!t.La[1]||4!=pr(t)||2!=vr(t)))if(t.va&&4==pr(t))Dn(t.Db,0,t);else if(t.dispatchEvent("readystatechange"),4==pr(t)){t.F=!1;try{var n,r,i=vr(t);t:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:n=!0;break t;default:n=!1}if(!(r=n)){var o;if(o=0===i){if(!(s=Xn(String(t.$a))[1]||null)&&self.location)var a=self.location.protocol,s=a.substr(0,a.length-1);o=!or.test(s?s.toLowerCase():"")}r=o}if(r)t.dispatchEvent("complete"),t.dispatchEvent("success");else{var u;try{u=2<pr(t)?t.a.statusText:""}catch(Qb){u=""}t.za=u+" ["+vr(t)+"]",lr(t)}}finally{fr(t)}}},fr=function(t,e){if(t.a){dr(t);var n=t.a,r=t.La[0]?i:null;t.a=null,t.La=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(jO){}}},dr=function(t){t.a&&t.kb&&(t.a.ontimeout=null),c(t.Ga)&&(n.clearTimeout(t.Ga),t.Ga=null)},pr=function(t){return t.a?t.a.readyState:0},vr=function(t){try{return 2<pr(t)?t.a.status:-1}catch(e){return-1}},gr=function(t,e,n){this.r=t||null,this.qc=!!n},yr=function(t){t.c||(t.c=new $,t.j=0,t.r&&function(t,e){for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),o=null,a=null;0<=i?(o=n[r].substring(0,i),a=n[r].substring(i+1)):o=n[r],e(o,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}(t.r,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))};(t=gr.prototype).c=null,t.j=null,t.add=function(t,e){yr(this),this.r=null,t=mr(this,t);var n=this.c.get(t);return n||this.c.set(t,n=[]),n.push(e),this.j++,this},t.remove=function(t){return yr(this),t=mr(this,t),!!this.c.T(t)&&(this.r=null,this.j-=this.c.get(t).length,this.c.remove(t))},t.T=function(t){return yr(this),t=mr(this,t),this.c.T(t)},t.H=function(){yr(this);for(var t=this.c.t(),e=this.c.H(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.t=function(t){yr(this);var e=[];if(u(t))this.T(t)&&(e=C(e,this.c.get(mr(this,t))));else{t=this.c.t();for(var n=0;n<t.length;n++)e=C(e,t[n])}return e},t.set=function(t,e){return yr(this),this.r=null,t=mr(this,t),this.T(t)&&(this.j-=this.c.get(t).length),this.c.set(t,[e]),this.j++,this},t.get=function(t,e){var n=t?this.t(t):[];return 0<n.length?String(n[0]):e},t.toString=function(){if(this.r)return this.r;if(!this.c)return"";for(var t=[],e=this.c.H(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.t(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.r=t.join("&")},t.clone=function(){var t=new gr;return t.r=this.r,this.c&&(t.c=this.c.clone(),t.j=this.j),t};var mr=function(t,e){var n=String(e);return t.qc&&(n=n.toLowerCase()),n},br=function(t,e){this.Mc=t,this.Aa=e};br.prototype.send=function(t,e){if(Mt&&!navigator.onLine)return function(){var t=Zn,e=new De;return e.A(t),e}();var n=new De,r=wr(t,e);return r.length>this.Aa?n.A({status:"payload-too-big",la:rt("Encoded hit length == %s, but should be <= %s.",r.length,this.Aa)}):function(t,e,n){var r=new ir;sr.push(r),e&&r.listen("complete",e),r.cb("ready",r.bc),r.send(t,"POST",n,void 0)}(this.Mc,function(){n.v(Gn)},r),n};var wr=function(t,e){var n=new gr;return n.add(B.name,t),at(e,function(t,e){n.add(t.name,e.toString())}),n.toString()},_r=function(t,e,n){this.g=t,this.Lc=e,this.Aa=n};_r.prototype.Xa=function(){if(!this.q){if(!Ue(this.g.ea).C)throw Error("Cannot construct shared channel prior to settings being ready.");new Un;var t=new Bn(new br(this.Lc,this.Aa)),e=new Kn;this.q=new Fn(this.g,new Jn(this.g,new Wn(e,t)))}return this.q};var Sr=new $,kr=function(){return j||(j=new gn(new Tn)),j};y("goog.async.Deferred",De),y("goog.async.Deferred.prototype.addCallback",De.prototype.n),y("goog.async.Deferred.prototype.callback",De.prototype.v),y("goog.async.Deferred.prototype.then",De.prototype.then),y("goog.events.EventTarget",re),y("goog.events.EventTarget.prototype.listen",re.prototype.listen),y("analytics.getService",function(t,e){var n=Sr.get(t,null),r=e||chrome.runtime.getManifest().version;if(null===n){if(n=kr(),!U){var i=kr();U=new Pn(i,new _r(i,"https://www.google-analytics.com/collect",8192))}n=new pn("ca1.6.0",t,r,n,U),Sr.set(t,n)}return n}),y("analytics.internal.GoogleAnalyticsService",pn),y("analytics.internal.GoogleAnalyticsService.prototype.getTracker",pn.prototype.mc),y("analytics.internal.GoogleAnalyticsService.prototype.getConfig",pn.prototype.kc),y("analytics.internal.ServiceSettings",gn),y("analytics.internal.ServiceSettings.prototype.setTrackingPermitted",gn.prototype.Oc),y("analytics.internal.ServiceSettings.prototype.isTrackingPermitted",gn.prototype.xa),y("analytics.internal.ServiceSettings.prototype.setSampleRate",gn.prototype.Nc),y("analytics.internal.ServiceSettings.prototype.resetUserId",gn.prototype.Fc),y("analytics.internal.ServiceTracker",fn),y("analytics.internal.ServiceTracker.prototype.send",fn.prototype.send),y("analytics.internal.ServiceTracker.prototype.sendAppView",fn.prototype.Hc),y("analytics.internal.ServiceTracker.prototype.sendEvent",fn.prototype.Ic),y("analytics.internal.ServiceTracker.prototype.sendSocial",fn.prototype.Kc),y("analytics.internal.ServiceTracker.prototype.sendException",fn.prototype.Jc),y("analytics.internal.ServiceTracker.prototype.sendTiming",fn.prototype.Ib),y("analytics.internal.ServiceTracker.prototype.startTiming",fn.prototype.Rc),y("analytics.internal.ServiceTracker.Timing",dn),y("analytics.internal.ServiceTracker.Timing.prototype.send",dn.prototype.send),y("analytics.internal.ServiceTracker.prototype.forceSessionStart",fn.prototype.jc),y("analytics.internal.ServiceTracker.prototype.addFilter",fn.prototype.R),y("analytics.internal.FilterChannel.Hit",Ke),y("analytics.internal.FilterChannel.Hit.prototype.getHitType",Ke.prototype.ub),y("analytics.internal.FilterChannel.Hit.prototype.getParameters",Ke.prototype.V),y("analytics.internal.FilterChannel.Hit.prototype.cancel",Ke.prototype.cancel),y("analytics.ParameterMap",ot),y("analytics.ParameterMap.Entry",ot.Entry),y("analytics.ParameterMap.prototype.set",ot.prototype.set),y("analytics.ParameterMap.prototype.get",ot.prototype.get),y("analytics.ParameterMap.prototype.remove",ot.prototype.remove),y("analytics.ParameterMap.prototype.toObject",ot.prototype.Nb),y("analytics.HitTypes.APPVIEW","appview"),y("analytics.HitTypes.EVENT","event"),y("analytics.HitTypes.SOCIAL","social"),y("analytics.HitTypes.TRANSACTION","transaction"),y("analytics.HitTypes.ITEM","item"),y("analytics.HitTypes.TIMING","timing"),y("analytics.HitTypes.EXCEPTION","exception"),O(W,function(t){var e=t.id.replace(/[A-Z]/,"_$&").toUpperCase();y("analytics.Parameters."+e,t)}),y("analytics.filters.EventLabelerBuilder",et),y("analytics.filters.EventLabelerBuilder.prototype.appendToExistingLabel",et.prototype.Wb),y("analytics.filters.EventLabelerBuilder.prototype.stripValue",et.prototype.Sc),y("analytics.filters.EventLabelerBuilder.prototype.powersOfTwo",et.prototype.Dc),y("analytics.filters.EventLabelerBuilder.prototype.rangeBounds",et.prototype.Ec),y("analytics.filters.EventLabelerBuilder.prototype.build",et.prototype.ia),y("analytics.filters.FilterBuilder",Q),y("analytics.filters.FilterBuilder.builder",tt),y("analytics.filters.FilterBuilder.prototype.when",Q.prototype.when),y("analytics.filters.FilterBuilder.prototype.whenHitType",Q.prototype.Rb),y("analytics.filters.FilterBuilder.prototype.whenValue",Q.prototype.Yc),y("analytics.filters.FilterBuilder.prototype.applyFilter",Q.prototype.mb),y("analytics.filters.FilterBuilder.prototype.build",Q.prototype.ia),y("analytics.EventBuilder",st),y("analytics.EventBuilder.builder",function(){return ut}),y("analytics.EventBuilder.prototype.category",st.prototype.Yb),y("analytics.EventBuilder.prototype.action",st.prototype.action),y("analytics.EventBuilder.prototype.label",st.prototype.label),y("analytics.EventBuilder.prototype.value",st.prototype.value),y("analytics.EventBuilder.prototype.dimension",st.prototype.fc),y("analytics.EventBuilder.prototype.metric",st.prototype.vc),y("analytics.EventBuilder.prototype.send",st.prototype.send)}).call(void 0),angular.module("w69b.chromeAnalytics",[]).provider("analytics",function(){var t,e;this.setTrackingId=function(e){t=e},this.setApp=function(){e=arguments},this.$get=["$window",function(n){if(!e)throw new Error("make sure to call analyticsProvider.setApp()");if(!n.analytics)throw new Error("chrome-analytics lib not loaded");var r=n.analytics,i=r.getService.apply(r,e),o=i.getTracker(t),a={};return a.tracker=o,a.eventBuilder=function(){return r.EventBuilder.builder()},a.setEnabled=function(t){i.getConfig().addCallback(function(e){e.setTrackingPermitted(t)})},a.send=function(){o.send.apply(o,arguments)},a.trackPageView=function(t){o.sendAppView(t)},a.trackEvent=function(){o.sendEvent.apply(o,arguments)},a.sendNonInteractionEvent=function(t,e,n,i){a.send(r.HitTypes.EVENT,{eventCategory:t,eventAction:e,eventLabel:n,eventValue:i,nonInteraction:!0})},a.trackTimer=function(t,e,n){var r,i={start:function(){return r=(new Date).getTime(),i},send:function(a,s,u){var c=(new Date).getTime();return o.sendTiming(a||t,s||e,c-r,u||n),i}};return i.start(),i},a}]}),angular.module("w69b.chromeCapture",["w69b.promiseTool","w69b.webrtc"]).factory("chromeCapture",["promiseTool","webrtc","$q",function(t,e,n){var r={tabCapture:function(){return chrome.tabCapture?t.wrapChromeError(chrome.tabCapture.capture,chrome.tabCapture).apply(null,arguments):n.reject("tabCapture permission missing")}};return chrome.desktopCapture&&(r.chooseDesktopMedia=function(){t.wrapChromeError(chrome.desktopCapture.chooseDesktopMedia,chrome.desktopCapture);var e=Array.prototype.slice.call(arguments,0),r=n.defer();e.push(function(t){chrome.runtime.lastError?r.reject(chrome.runtime.lastError):r.resolve(t)});var i=chrome.desktopCapture.chooseDesktopMedia.apply(chrome.desktopCapture,e);function o(t){chrome.desktopCapture.cancelChooseDesktopMedia(i),r.reject(t||"cancelled")}return{promise:r.promise,cancel:o}}),r.desktopCapture=function(t){return e.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxWidth:1920,maxHeight:1200}}})},r}]),n(61371),angular.module("w69b.chromeRuntime",["w69b.promiseTool"]).factory("chromeRuntime",["promiseTool",function(t){var e={};return e.sendMessage=t.wrapChromeError(chrome.runtime.sendMessage,chrome.runtime),e.getBackgroundPage=t.wrapChromeError(chrome.runtime.getBackgroundPage,chrome.runtime),e.connect=chrome.runtime.connect.bind(chrome.runtime),e.getManifest=chrome.runtime.getManifest.bind(chrome.runtime),e.id=chrome.runtime.id,chrome.runtime.getPlatformInfo&&(e.getPlatformInfo=t.wrapChromeError(chrome.runtime.getPlatformInfo,chrome.runtime)),e.setUninstallURL=t.wrapChromeError(chrome.runtime.setUninstallURL,chrome.runtime),["onMessage","onMessageExternal","onConnect","onConnectExternal","onInstalled","onSuspend"].forEach(function(t){e[t]={addListener:function(e){chrome.runtime[t].addListener(e)},removeListener:function(e){chrome.runtime[t].removeListener(e)}}}),e}]),angular.module("w69b.chromeTabs",["w69b.promiseTool"]).factory("chromeTabs",["$window","promiseTool","$q",function(t,e,n){if(!t.chrome||!t.chrome.tabs)return null;var r=t.chrome,i={};return i.query=e.wrapChromeError(r.tabs.query,r.tabs),i.getActiveTab=function(){return i.query({active:!0,windowId:r.windows.WINDOW_ID_CURRENT}).then(function(t){return t.length?t[0]:n.reject()})},i.get=e.wrapChromeError(r.tabs.get,r.tabs),i.getCurrent=e.wrapChromeError(r.tabs.getCurrent,r.tabs),i.update=e.wrapChromeError(r.tabs.update,r.tabs),i.remove=e.wrapChromeError(r.tabs.remove,r.tabs),i.create=e.wrapChromeError(r.tabs.create,r.tabs),i.connect=r.tabs.connect.bind(r.tabs),i.setZoomSettings=e.wrapChromeError(r.tabs.setZoomSettings,r.tabs),i.setZoom=e.wrapChromeError(r.tabs.setZoom,r.tabs),i.executeScript=e.wrapChromeError(r.tabs.executeScript,r.tabs),i.insertCSS=e.wrapChromeError(r.tabs.insertCSS,r.tabs),i.sendMessage=e.wrapChromeError(r.tabs.sendMessage,r.tabs),i.onUpdated=r.tabs.onUpdated,i.onActivated=r.tabs.onActivated,i.sendMessageActive=function(t,e){return i.getActiveTab().then(function(n){return i.sendMessage(n.id,t,e)})},i}]).directive("newTab",["chromeTabs",function(t){return{restrict:"A",link:function(e,n,r){n.bind("click",function(e){e.preventDefault(),t.create({url:r.href}).then(function(t){chrome.windows.update(t.windowId,{focused:!0},angular.noop)})})}}}]),n(49308);var xD=n(17008),TD=n(65963).default;angular.module("w69b.filesHelper",["w69b.promiseTool"]).factory("filesHelper",["$window","promiseTool","$q",function(t,e,n){t.requestFileSystem=t.requestFileSystem||t.webkitRequestFileSystem;var r=window.PERSISTENT,i=104857600,o={};function a(t){var e=t.split("/");return[e.slice(0,-1).join("/"),e.slice(-1)[0]]}return["readEntries","remove","getFile","getMetadata","moveTo","file","getDirectory","createWriter"].forEach(function(t){o[t]=function(n){var r=[].slice.call(arguments,1);return e.wrapCallbacks(n[t],n).apply(null,r)}}),o.getFileSystem=function(n,o){return angular.isUndefined(n)&&(n=r),o=o||i,e.wrapCallbacks(t.requestFileSystem,t)(n,o)},o.getPersistentQuota=function(){var e=n.defer();return t.navigator.webkitPersistentStorage.queryUsageAndQuota(function(t,n){e.resolve({usage:t,quota:n})},function(t){e.reject(t)}),e.promise},chrome.system&&chrome.system.storage&&(o.getStorageInfo=e.wrapChromeError(chrome.system.storage.getInfo,chrome.system.storage)),o.getDirByPath=function(t,e){var r=t.split("/");function i(t,r){return r.length?o.getDirectory(t,r[0],e||{}).then(function(t){return i(t,r.slice(1))}):n.when(t)}return""===r[0]&&r.splice(0,1),o.getFileSystem().then(function(t){return i(t.root,r)})},o.moveFileByPath=function(t,e){var r=a(e),i=r[0],s=r[1];return n.all({file:o.getFileEntryByPath(t),targetDir:o.getDirByPath(i)}).then(function(t){return o.moveTo(t.file,t.targetDir,s)})},o.getFileEntryByPath=function(t,e,n){var r=a(t),i=r[1];return o.getDirByPath(r[0],n).then(function(t){return o.getFile(t,i,e||{})})},o.getFileByPath=function(t){return o.getFileEntryByPath(t).then(function(t){return o.file(t)})},o.removeByPath=function(t){return o.getFileEntryByPath(t).then(function(t){return o.remove(t)})},o.listByPath=function(t){return o.getDirByPath(t).then(function(t){var e=t.createReader();return o.readEntries(e)})},o.clearAll=TD(xD.mark(function t(){var e,n,r=arguments;return xD.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"",t.next=3,o.listByPath(e);case 3:return n=t.sent,t.next=6,n.map(function(){var t=TD(xD.mark(function t(n){return xD.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.isFile){t.next=6;break}return t.next=3,new Promise(function(t){return n.remove(t)});case 3:return t.abrupt("return",t.sent);case 6:return t.next=8,o.clearAll("".concat(e,"/").concat(n.name));case 8:return t.next=10,new Promise(function(t){return n.remove(t)});case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}},t)})),o.requestPersistentQuota=function(t){return e.wrapCallbacks(navigator.webkitPersistentStorage.requestQuota,navigator.webkitPersistentStorage)(t||i)},o.requestTemporaryQuota=function(t){return e.wrapCallbacks(navigator.webkitTemporaryStorage.requestQuota,navigator.webkitTemporaryStorage)(t||i)},o.writeFile=function(t,e){var r=n.defer();return t.onwriteend=r.resolve.bind(r),t.onerror=r.reject.bind(r),t.write(e),r.promise},o.isSupported=function(){return!!window.requestFileSystem},o}]),n(41182),n(33202),angular.module("w69b.uuid",[]).factory("uuid",["$window",function(t){function e(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e}return function(){var n=new Uint16Array(8);return t.crypto.getRandomValues(n),e(n[0])+e(n[1])+"-"+e(n[2])+"-4"+e(n[3]).substring(1)+"-y"+e(n[4]).substring(1)+"-"+e(n[5])+e(n[6])+e(n[7])}}]),n(59475),angular.module("w69b.uritool",[]).factory("uritool",function(){var t=/\+/g;function e(e){return decodeURIComponent(e.replace(t," "))}return{parseQuery:function(t,n){var r;"?"==t[0]&&(t=t.substring(1));for(var i=/([^&=]+)=?([^&]*)/g,o={};r=i.exec(t);){var a=e(r[1]),s=e(r[2]);n&&o.hasOwnProperty(a)?o[a].push(s):o[a]=n?[s]:s}return o},parseUrl:function(t){var e=document.createElement("a");return e.href=t,{protocol:e.protocol.replace(":",""),host:e.hostname,port:e.port,query:e.search,hash:e.hash,path:e.pathname}},encodeQuery:function(t){var e=[];return angular.forEach(t,function(t,n){angular.isArray(t)?angular.forEach(t,function(t){e.push(encodeURIComponent(n)+(!0===t?"":"="+encodeURIComponent(t)))}):e.push(encodeURIComponent(n)+(!0===t?"":"="+encodeURIComponent(t)))}),e.length?e.join("&"):""}}});var ID=n(50013).default;angular.module("w69b.googleUploader",["w69b.ngProgressHttp"]).factory("googleUploader",["$progressHttp","$http","$q","$timeout","$log",function(t,e,n,r){var i=!0,o=!0,a=1073741824,s={};function u(t,e){var i=t.headers("Retry-After");if(i&&o)i=Math.min(6e4,1e3*Number(i));else{if(!e)return n.when(t);i=e}return r(angular.noop,i).then(function(){return t})}function c(t){return t.data}function l(r,o){var s=null,l=n.defer(),h=l.promise,f=!1,d={};function p(t){return!f&&s&&308===t.status?g():i&&!f&&s&&(t.status<=0||t.status>=500&&t.status<=599||t.config&&!1===t.config.authAutoRetry&&401===t.status)?u(t,2e3).then(g):n.reject(t)}function v(e){if(308==e.status){var i,u=e.headers("Range");i=u?Number(u.match(/bytes=0-(\d+)/)[1])+1:0;var c=Math.min(r.size,a),l=Math.min(i+c,r.size)-1,f="bytes "+i+"-"+l+"/"+r.size,d=angular.extend({},o,{url:s,method:"PUT",progressEvents:"upload",transformRequest:null,data:r.slice(i,l+1),googleAuth:!0,authAutoRetry:!1,timeout:h});return d.headers=angular.extend({},d.headers,{"Content-Type":r.type,"Content-Range":f}),t(d).then(null,null,function(t){return{loaded:(t=t.event).loaded+i,total:r.size}})}return 200==e.status?e:n.reject(e)}function g(){var t=angular.extend({},o,{timeout:h,googleAuth:!0});return t.headers=angular.extend({},t.headers,{"Content-Range":"bytes */"+r.size}),e.put(s,"",t).then(u,u).then(v).catch(p)}return d.start=function(t,i,a){a=angular.extend({},o,a),angular.extend(a.headers||{},{"X-Upload-Content-Length":r.size,"X-Upload-Content-Type":"video/*"}),a.googleAuth=!0,a.timeout=h;var u=n.defer();return e.post(t,i,a).then(function(t){return s=t.headers("Location"),u.notify({uploadUrl:s}),g()}).catch(p).then(u.resolve.bind(u),u.reject.bind(u),u.notify.bind(u)),d.promise=u.promise.then(c),d.promise},d.resume=function(t){return s=t,d.promise=g().then(c),d.promise},d.cancel=function(){f=!0,l.resolve()},d}return s.setAutoResumeEnabled=function(t){i=t},s.setRespectRetryAfterHeader=function(t){o=t},s.setMaxChunkSize=function(t){a=t},s.resumeUpload=function(t,e,n){var r=l(t,n);return r.resume(e),r},s.driveUpload=function(t,e,n){return s.upload("https://www.googleapis.com/upload/drive/v2/files?uploadType=resumable",t,e,n)},s.upload=function(t,e,n,r,i){var o=l(e,r);return o.start(t,n,i),o},s.generateId=function(){return e.get("https://www.googleapis.com/drive/v3/files/generateIds",ID(ID({},{googleAuth:!0}),{},{params:{count:1,space:"drive"}})).then(function(t){return t.data.ids[0]})},s}]),angular.module("w69b.ngProgressHttp",[]).service("$progressHttp",["$http","$q",function(t,e){return function(n){var r;n.headers=n.headers||{},n.method=n.method||"POST";var i=e.defer();n.headers.__setXHR__=function t(){return function(e){if(!e)return t();r=e,n.progressEvents&&"download"!==n.progressEvents||(r.addEventListener("progress",function(t){i.notify({type:"download",event:t})},!1),r.addEventListener("load",function(t){t.lengthComputable&&i.notify({type:"download",event:t})},!1)),n.progressEvents&&"upload"!==n.progressEvents||(r.upload.addEventListener("progress",function(t){i.notify({type:"upload",event:t})},!1),r.upload.addEventListener("load",function(t){t.lengthComputable&&i.notify({type:"upload",event:t})},!1))}},t(n).then(i.resolve.bind(i),i.reject.bind(i),i.notify.bind(i));var o=i.promise;return o.abort=function(){return r&&r.abort(),o},o}}]).config(function(){var t;window.XMLHttpRequest=(t=window.XMLHttpRequest,function(){var e,n=new t;return n.setRequestHeader=(e=n.setRequestHeader,function(t,r){"__setXHR__"===t?r(n):e.apply(n,arguments)}),n})}),angular.module("w69b.promiseTool",[]).factory("promiseTool",["$q","$timeout",function(t,e){return{wrapChromeError:function(e,n){return function(){var r=Array.prototype.slice.call(arguments,0),i=t.defer();return r.push(function(t){chrome.runtime&&chrome.runtime.lastError?i.reject(chrome.runtime.lastError):i.resolve(t)}),e.apply(n,r),i.promise}},wrapCallbacks:function(e,n){return function(){var r=Array.prototype.slice.call(arguments,0),i=t.defer();return r.push(i.resolve.bind(i)),r.push(i.reject.bind(i)),e.apply(n,r),i.promise}},serializer:function(){var e=null,n=function(n){var r=t.defer();return(e||t.when()).then(function(){(n.call()||t.when()).then(function(t){return r.resolve(t)},function(t){return r.reject(t)})}),(e=r.promise.catch(function(){return null})).then(function(){e=null}),r.promise};return n.wrap=function(t){return function(){return n(t.bind.apply(t,[this].concat(Array.prototype.slice.call(arguments))))}},n},withTimeout:function(n,r,i){i||(i=angular.noop);var o=t.defer(),a=e(function(){var t=i();angular.isDefined(t)?o.resolve(t):o.reject("timeout"),o=null},r);function s(){e.cancel(a),a=null}return n().then(function(){s(),o&&o.resolve.apply(o,arguments)},function(){s(),o&&o.reject.apply(o,arguments)}),o.promise}}}]),n(25394),angular.module("w69b.streamedVideo",[]).factory("streamedVideo",["$q",function(t){return function(){var e,n,r,i=document.createElement("video"),o={onEnded:null};function a(){o.onEnded&&o.onEnded()}return o.stop=function(){n&&(i.pause(),i.src="",window.URL.revokeObjectURL(e),n.removeEventListener("ended",a),n.stop(),n=null,r=!1)},o.load=function(s){if(n)throw new Error;n=s;var u=t.defer();return s.addEventListener("ended",a),e=window.URL.createObjectURL(s),i.addEventListener("canplay",function t(){i.removeEventListener("canplay",t),i.play().catch(function(){}),0===i.videoHeight||0===i.videoWidth?(o.stop(),u.reject("loading video failed")):(r=!0,u.resolve())}),i.addEventListener("error",function t(){i.removeEventListener("error",t),o.stop(),u.reject(i.error)}),i.src=e,i.volume=0,u.promise},o.isLoaded=function(){return r},o.getVideoElement=function(){return i},o}}]),angular.module("w69b.structs.CircularBuffer",[]).factory("CircularBuffer",function(){var t=function(t){this.maxSize_=t||100,this.buff_=[]},e=t.prototype;return e.nextPtr_=0,e.add=function(t){this.buff_[this.nextPtr_]=t,this.nextPtr_=(this.nextPtr_+1)%this.maxSize_},e.get=function(t){return t=this.normalizeIndex_(t),this.buff_[t]},e.set=function(t,e){t=this.normalizeIndex_(t),this.buff_[t]=e},e.getCount=function(){return this.buff_.length},e.isEmpty=function(){return 0===this.buff_.length},e.clear=function(){this.buff_.length=0,this.nextPtr_=0},e.getValues=function(){return this.getNewestValues(this.getCount())},e.getNewestValues=function(t){for(var e=this.getCount(),n=[],r=this.getCount()-t;r<e;r++)n.push(this.get(r));return n},e.getKeys=function(){for(var t=[],e=this.getCount(),n=0;n<e;n++)t[n]=n;return t},e.containsKey=function(t){return t<this.getCount()},e.containsValue=function(t){for(var e=this.getCount(),n=0;n<e;n++)if(this.get(n)==t)return!0;return!1},e.getLast=function(){return 0===this.getCount()?null:this.get(this.getCount()-1)},e.normalizeIndex_=function(t){if(t>=this.buff_.length)throw Error("Out of bounds exception");return this.buff_.length<this.maxSize_?t:(this.nextPtr_+Number(t))%this.maxSize_},t});var CD=n(83831).default;angular.module("w69b.spawn",[]).factory("spawn",["$q",function(t){function e(e,n){var r=n?Promise.reject.bind(Promise):t.reject.bind(t),i=n?Promise.resolve.bind(Promise):t.when.bind(t);function o(t,e){var n;try{n=t(e)}catch(o){return r(o)}return n.done?i(n.value):i(n.value).then(s,u)}var a=e(),s=o.bind(null,a.next.bind(a)),u=o.bind(null,a.throw.bind(a));return s()}return e.wrap=function(t){return function(){var n=arguments;return e(t.bind.apply(t,[this].concat(CD(n))))}},e}]),n(8822),n(25876);var AD=n(17008);angular.module("w69b.webrtc",["w69b.promiseTool","w69b.spawn"]).factory("webrtc",["promiseTool","$window","$q","spawn","$log",function(t,e,n,r,i){var o={},a=e.navigator;function s(t){return t.some(function(t){return!!t.label})}return o.getUserMedia=t.wrapCallbacks(a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia,a),o.getSources=a.mediaDevices&&a.mediaDevices.enumerateDevices?function(){return n.when(a.mediaDevices.enumerateDevices()).then(function(t){return t.filter(function(t){return t.kind.endsWith("input")}).map(function(t){var e={id:t.deviceId,label:t.label};return e.kind=t.kind.substring(0,t.kind.length-5),e})}).catch(function(t){return i.info("webrtc: enumarateDevices() failed, treating it as no devices present",t),[]})}:t.wrapCallbacks(MediaStreamTrack.getSources,MediaStreamTrack),o.getSourcesByKind=function(t){return o.getSources().then(function(e){return e.filter(function(e){return e.kind===t})})},o.getVideoSources=function(){return o.getSourcesByKind("video")},o.getAudioSources=function(){return o.getSourcesByKind("audio")},o.hasCamera=function(){return o.getVideoSources().then(function(t){return t.length>0})},o.hasMicrophone=function(){return o.getAudioSources().then(function(t){return t.length>0})},o.hasVideoAccess=function(){return o.getVideoSources().then(s)},o.hasAudioAccess=function(){return o.getAudioSources().then(s)},o.getCameraAndMicPermission=r.wrap(AD.mark(function t(){var e,n,r,i;return AD.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.hasCamera();case 2:return e=t.sent,n=!1,r=!1,t.prev=5,t.next=8,o.getUserMedia({audio:!0,video:e});case 8:r=!!(i=t.sent).getVideoTracks().length,n=!!i.getAudioTracks().length,i.getTracks().forEach(function(t){t.stop()}),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(5);case 16:return t.abrupt("return",{video:r,audio:n});case 17:case"end":return t.stop()}},t,null,[[5,14]])})),o}]),angular.module("w69b.clipboard",[]).factory("clipboard",["$document",function(t){return{copy:function(e){var n=angular.element("<textarea></textarea>");n.text(e),t.find("body").append(n),n[0].select(),t[0].execCommand("copy"),n.remove()}}}]),angular.module("w69b.googledrive",[]).factory("googledrive",["$q","googleauth","$location","$interval","$http","$log",function(t,e,n,r,i,o){var a=!1,s="https://www.googleapis.com/drive/v2/",u={};function c(t){return t.data}function l(t,e){return i.get(s+t,{googleAuth:!0,params:e}).then(c)}function h(t,e){return i.post(s+t,e,{googleAuth:!0}).then(c)}function f(t,e){return i({method:"PATCH",url:s+t,data:e,googleAuth:!0}).then(c)}function d(t){return i.delete(s+t,{googleAuth:!0}).then(c)}return u.isLoaded=function(){return a},u.loadLibs=function(){return a?t.when(null):e.loadClient().then(function(){return t.all([e.gapiLoad("picker")])}).then(function(){a=!0})},u.getFile=function(t){return o.debug("googledrive: getFile",t),l("files/"+t)},u.listFiles=function(t){return o.debug("googledrive: listFiles",t),l("files/",t).then(function(t){return t.items})},u.postFile=function(t){return o.debug("googledrive: postFile",t),h("files",t)},u.patchFile=function(t,e){return o.debug("googledrive: patchFile",t,e),f("files/"+t,e)},u.trashFile=function(t){return o.debug("googledrive: trashFile",t),h("files/"+t+"/trash")},u.getAbout=function(){return l("about")},u.showShareSettings=function(n){return e.gapiLoad("drive-share").then(function(){var i=new gapi.drive.share.ShareClient(e.getAppId());i.setItemIds([n]),i.showSettingsDialog();var o=t.defer(),a=r(function(){for(var t=!1,e=document.activeElement;e!==document.documentElement;){if(e.classList.contains("dcs-ad-dcs-c")){t=!0;break}e=e.parentNode}t||(r.cancel(a),o.resolve())},300);return o.promise})},u.listPermissions=function(t){return l("files/"+t+"/permissions").then(function(e){return o.debug("googledrive: listPermissions",{fileId:t},e),e.items})},u.insertPermission=function(t,e){return o.debug("googledrive: insertPermissions",{fileId:t},e),h("files/"+t+"/permissions",e)},u.patchPermission=function(t,e,n){return o.debug("googledrive: patchPermission",{fileId:t}),f("files/"+t+"/permissions/"+e,n)},u.removePermission=function(t,e){return o.debug("googledrive: removePermission",{fileId:t},{permissionId:e}),d("files/"+t+"/permissions/"+e)},u.getContextAction=function(){var t=n.search().state,e=null;if(angular.isString(t))try{e=JSON.parse(t)}catch(r){}return e?{action:e.action,ids:(e.ids||[]).concat(e.exportIds||[]),parentId:e.parentId,userId:e.userId}:null},u.listComments=function(t){return l("files/".concat(t,"/comments"),{maxResults:100}).then(function(t){return t.items})},u.insertComment=function(t,e){return h("files/".concat(t,"/comments"),{content:e})},u.patchComment=function(t,e,n){return f("files/".concat(t,"/comments/").concat(e),{content:n})},u.deleteComment=function(t,e){return d("files/".concat(t,"/comments/").concat(e))},u}]),angular.module("w69b.chromeAlarms",["w69b.promiseTool"]).factory("chromeAlarms",["promiseTool",function(t){var e={};return e.create=chrome.alarms.create.bind(chrome.alarms),["get","getAll","clear","clearAll"].forEach(function(n){e[n]=t.wrapChromeError(chrome.alarms[n],chrome.alarms)}),e.onAlarm=chrome.alarms.onAlarm,e}]),angular.module("w69b.chromeNotifications",["w69b.promiseTool","w69b.chromeAnalytics"]).factory("chromeNotifications",["promiseTool","$log","analytics",function(t,e,n){var r={},i={};function o(t){var e=i[t];e&&e.onClicked&&e.onClicked()}function a(t,e){var n=i[t];n&&n.onButtonClicked&&n.onButtonClicked(e)}function s(t,e){var n=i[t];n&&(n.onClosed&&n.onClosed(e),delete i[t],Object.keys(i).length||(r.onClicked.removeListener(o),r.onButtonClicked.removeListener(a),r.onClosed.removeListener(s)))}return r.simple={},r.simple.defaultOptions={},r.simple.create=function(n,u){e.info("chromeNotifications: simple message - ".concat(n.title,": ").concat(n.message));var c=t.serializer(),l={};return n=angular.extend({},r.simple.defaultOptions,n),c(function(){return r.create(u||"",n).then(function(t){l.id=t,Object.keys(i).length||(r.onClicked.addListener(o),r.onButtonClicked.addListener(a),r.onClosed.addListener(s)),i[t]=l})}),l.clear=function(){c(function(){return r.clear(l.id)})},l.update=function(t){c(function(){return r.update(l.id,t)})},l.onClicked=angular.noop,l.onButtonClicked=angular.noop,l.onClosed=angular.noop,l},r.simple.createError=function(t,i){return n.trackEvent("error","chrome-notifications","".concat(t.title,": ").concat(t.message)),e.warn("chromeNotifications: createError - ".concat(t.title,": ").concat(t.message)),r.simple.create(t,i)},["clear","create","update","getAll","getPermissionLevel"].forEach(function(e){r[e]=t.wrapChromeError(chrome.notifications[e],chrome.notifications)}),["onClosed","onClicked","onButtonClicked","onPermissionLevelChanged","onShowSettings"].forEach(function(t){r[t]=chrome.notifications[t]}),r}]),n(60299),angular.module("w69b.ui.bytesFilter",[]).filter("bytes",["$injector",function(t){var e;return function(n,r){if(!angular.isNumber(n))return"-";if(angular.isUndefined(r)&&(r=1),n<=0)return"0 B";var i=Math.floor(Math.log(n)/Math.log(1024));return function(n,r){return e||(e=t.get("$filter")("number")),e(n,r)}(n/Math.pow(1024,Math.floor(i)),r)+" "+["B","KB","MB","GB","TB","PB"][i]}}]),n(2811),n(83982),ls.module("cf2.remoteConfigService",[]).factory("cf2RemoteConfigService",Ps(od)),ls.module("cf2.pendoService",[]).factory("cf2PendoService",Ps(um)),angular.module("castifyExt.bgApp",["castifyExt.commonConfig","castifyExt.bgRecord","castifyExt.bgUpload","castifyExt.recordingHooks","castifyExt.updateMigrationService","castifyExt.diskSpaceWatcher","castifyExt.licenseEnforcer","castifyExt.bgFiles","castifyExt.bgSyncManager","castifyExt.syncNotifications","castifyExt.authConfig","castifyEdit.bgEditJobScheduler","w69b.chromeNotifications","castifyExt.bgSyncDownloader","castifyExt.bgUserAccount","castifyExt.bgUserNotifications","cf2.background","castifyExt.bgRecordingErrorHandler"]).run(["bgRecordService","bgUploadService","$q","recordingHooks","updateMigrationService","diskSpaceWatcher","licenseEnforcer","bgFiles","googleUploader","chromeRuntime","bgSyncManager","syncNotifications","onlineState","bgEditJobScheduler","chromeNotifications","bgSyncDownloader","bgUserAccount","bgUserNotifications","cf2BgMessagesService","bgCf2OnlyServices","bgRecordingErrorHandler",function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g,y,m,b,w){p.simple.defaultOptions={type:"basic",priority:2,iconUrl:"assets/images/icon128.png"},u.setAutoResumeEnabled(!1),u.setRespectRetryAfterHeader(!1),r.install(),n.all([l.install(),t.install(),e.install(),i.install(),o.install(),a.install(),m.install(),s.install(),h.install(),d.install(),v.install(),g.install(),y.install(),b.install(),w.install()]).finally(function(){m.initializationCompleted()}),f.check(),c.setUninstallURL("".concat(Yc.apiUrl,"/on_uninstall"))}]),_l(),Yc.production&&function(){if(Zo)throw new Error("Cannot enable prod mode after platform setup.");Vo=!1}(),ss().bootstrapModule(Rm).catch(function(t){return console.error(t)})}()}();